"use strict";(self.webpackChunk_bitwarden_web_vault=self.webpackChunk_bitwarden_web_vault||[]).push([[449],{14449:(t,n,e)=>{e.d(n,{OrganizationReportingModule:()=>Ce});var i=e(80504),a=e(72932),o=e(62963),r=e(6056),s=e(67553),c=e(72245),l=e(3633),p=e(39488),d=e(22166),u=e(25065),g=e(14092),h=e(10840),b=e(39738),f=e(8144),m=e(62819),I=e(85037),v=e(33812),R=e(74208),$=e(5556),F=e(72331),w=e(21274),G=e(35500),S=e(23649),E=e(50700),y=e(77468),j=e(26333),k=e(93103),T=e(47428),X=e(47696),M=e(56898),N=e(44432),z=e(10672),Y=e(59032),U=e(30930),x=e(38410),C=e(32316),A=e(12694),D=e(16496),V=e(93748),O=e(71944),P=e(88016),J=e(91975),B=function(t,n,e,i){return new(e||(e=Promise))(function(a,o){function r(t){try{c(i.next(t))}catch(n){o(n)}}function s(t){try{c(i.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(r,s)}c((i=i.apply(t,n||[])).next())})};function Q(t,n){1&t&&(v.j41(0,"bit-callout",6),v.nI1(1,"i18n"),v.EFF(2),v.nI1(3,"i18n"),v.k0s()),2&t&&(v.Y8G("title",v.mNQ(v.bMT(1,3,"goodNews"))),v.R7$(2),v.SpI(" ",v.bMT(3,5,"noExposedPasswords")," "))}function q(t,n){if(1&t&&(v.qex(0),v.j41(1,"bit-toggle",18),v.EFF(2),v.j41(3,"span",19),v.EFF(4),v.k0s()(),v.bVm()),2&t){const t=n.$implicit,e=v.XpG(4);v.R7$(),v.Y8G("value",t),v.R7$(),v.SpI(" ",e.getName(t)," "),v.R7$(2),v.SpI(" ",e.getCount(t)," ")}}function _(t,n){if(1&t){const t=v.RV6();v.j41(0,"bit-toggle-group",16),v.nI1(1,"async"),v.nI1(2,"i18n"),v.bIt("selectedChange",function(n){R.eBV(t);const e=v.XpG(3);return R.Njj(e.filterOrgToggle(n))}),v.DNE(3,q,5,3,"ng-container",17),v.k0s()}if(2&t){const t=v.XpG(3);v.Y8G("selected",v.bMT(1,3,t.filterOrgStatus$)),v.BMQ("aria-label",v.bMT(2,5,"addAccessFilter")),v.R7$(3),v.Y8G("ngForOf",t.filterStatus)}}function L(t,n){1&t&&(v.j41(0,"th",20),v.EFF(1),v.nI1(2,"i18n"),v.k0s()),2&t&&(v.R7$(),v.SpI(" ",v.bMT(2,1,"owner")," "))}function H(t,n){if(1&t){const t=v.RV6();v.qex(0),v.j41(1,"a",26),v.nI1(2,"i18n"),v.bIt("click",function(){R.eBV(t);const n=v.XpG().$implicit,e=v.XpG(3);return R.Njj(e.selectCipher(n))}),v.EFF(3),v.k0s(),v.bVm()}if(2&t){const t=v.XpG().$implicit;v.R7$(),v.Y8G("title",v.mNQ(v.i5U(2,3,"editItemWithName",t.name))),v.R7$(2),v.SpI(" ",t.name," ")}}function W(t,n){if(1&t&&(v.j41(0,"span"),v.EFF(1),v.k0s()),2&t){const t=v.XpG().$implicit;v.R7$(),v.JRh(t.name)}}function K(t,n){1&t&&(v.qex(0),v.nrm(1,"i",27),v.nI1(2,"i18n"),v.j41(3,"span",28),v.EFF(4),v.nI1(5,"i18n"),v.k0s(),v.bVm()),2&t&&(v.R7$(),v.Y8G("title",v.mNQ(v.bMT(2,3,"shared"))),v.R7$(3),v.JRh(v.bMT(5,5,"shared")))}function Z(t,n){1&t&&(v.qex(0),v.nrm(1,"i",29),v.nI1(2,"i18n"),v.j41(3,"span",28),v.EFF(4),v.nI1(5,"i18n"),v.k0s(),v.bVm()),2&t&&(v.R7$(),v.Y8G("title",v.mNQ(v.bMT(2,3,"attachments"))),v.R7$(3),v.JRh(v.bMT(5,5,"attachments")))}function tt(t,n){if(1&t&&(v.nrm(0,"app-org-badge",31),v.nI1(1,"async"),v.nI1(2,"orgNameFromId")),2&t){const t=v.XpG(2).$implicit,n=v.XpG(3);v.Y8G("disabled",n.disabled)("organizationId",t.organizationId)("organizationName",v.i5U(2,5,t.organizationId,v.bMT(1,3,n.organizations$)))}}function nt(t,n){if(1&t&&(v.j41(0,"td",11),v.DNE(1,tt,3,8,"app-org-badge",30),v.k0s()),2&t){const t=v.XpG(4);v.R7$(),v.Y8G("ngIf",!t.organization)}}function et(t,n){if(1&t&&(v.j41(0,"td",11),v.nrm(1,"app-vault-icon",21),v.k0s(),v.j41(2,"td",11),v.DNE(3,H,4,6,"ng-container",22)(4,W,2,1,"ng-template",null,0,v.C5r)(6,K,6,7,"ng-container",5)(7,Z,6,7,"ng-container",5),v.nrm(8,"br"),v.j41(9,"small"),v.EFF(10),v.k0s()(),v.DNE(11,nt,2,1,"td",23),v.j41(12,"td",24)(13,"span",25),v.EFF(14),v.nI1(15,"number"),v.nI1(16,"i18n"),v.k0s()()),2&t){const t=n.$implicit,e=v.sdS(5),i=v.XpG(3);v.R7$(),v.Y8G("cipher",t),v.R7$(2),v.Y8G("ngIf",!i.organization||i.canManageCipher(t))("ngIfElse",e),v.R7$(3),v.Y8G("ngIf",!i.organization&&t.organizationId),v.R7$(),v.Y8G("ngIf",t.hasAttachments),v.R7$(3),v.JRh(t.subTitle),v.R7$(),v.Y8G("ngIf",!i.isAdminConsoleActive),v.R7$(3),v.SpI(" ",v.i5U(16,10,"exposedXTimes",v.bMT(15,8,t.exposedXTimes))," ")}}function it(t,n){if(1&t&&(v.qex(0),v.j41(1,"bit-callout",7),v.nI1(2,"i18n"),v.EFF(3),v.nI1(4,"number"),v.nI1(5,"i18n"),v.k0s(),v.DNE(6,_,4,7,"bit-toggle-group",8),v.j41(7,"bit-table-scroll",9),v.qex(8,10),v.nrm(9,"th",11),v.j41(10,"th",12),v.EFF(11),v.nI1(12,"i18n"),v.k0s(),v.DNE(13,L,3,3,"th",13),v.j41(14,"th",14),v.EFF(15),v.nI1(16,"i18n"),v.k0s(),v.bVm(),v.DNE(17,et,17,13,"ng-template",15),v.k0s(),v.bVm()),2&t){const t=v.XpG(2);v.R7$(),v.Y8G("title",v.mNQ(v.bMT(2,10,"exposedPasswordsFound")))("useAlertRole",!0),v.R7$(2),v.SpI(" ",v.brH(5,14,"exposedPasswordsFoundReportDesc",v.bMT(4,12,t.ciphers.length),t.vaultMsg)," "),v.R7$(3),v.Y8G("ngIf",t.showFilterToggle&&!t.isAdminConsoleActive),v.R7$(),v.Y8G("dataSource",t.dataSource)("rowSize",53),v.R7$(4),v.JRh(v.bMT(12,18,"name")),v.R7$(2),v.Y8G("ngIf",!t.isAdminConsoleActive),v.R7$(2),v.SpI(" ",v.bMT(16,20,"timesExposed")," ")}}function at(t,n){if(1&t&&(v.j41(0,"div",3),v.DNE(1,Q,4,7,"bit-callout",4)(2,it,18,22,"ng-container",5),v.k0s()),2&t){const t=v.XpG();v.R7$(),v.Y8G("ngIf",!t.ciphers.length),v.R7$(),v.Y8G("ngIf",t.ciphers.length)}}class ot extends I.y{constructor(t,n,e,i,a,o,r,s,c,l,p){super(t,n,i,e,a,r,s,c,l,p),this.accountService=a,this.route=o}ngOnInit(){return B(this,void 0,void 0,function*(){this.isAdminConsoleActive=!0,this.route.parent.parent.params.subscribe(t=>B(this,void 0,void 0,function*(){const n=yield(0,c._)(this.accountService.activeAccount$.pipe(l.F6));this.organization=yield(0,c._)(this.organizationService.organizations$(n).pipe((0,s.Sw)(t.organizationId))),this.manageableCiphers=yield this.cipherService.getAll(n)}))})}getAllCiphers(){return this.cipherService.getAllFromApiForOrganization(this.organization.id,!0)}canManageCipher(t){return 0===t.collectionIds.length||this.manageableCiphers.some(n=>n.id===t.id)}}ot.ɵfac=function(t){return new(t||ot)(v.rXU($.p),v.rXU(F.d),v.rXU(w.o3),v.rXU(s.PV),v.rXU(G.Di),v.rXU(S.nX),v.rXU(d.qX),v.rXU(E.W),v.rXU(p.H),v.rXU(d.hI),v.rXU(m.l))},ot.ɵcmp=v.VBU({type:ot,selectors:[["app-org-exposed-passwords-report"]],features:[v.Jv_([{provide:d.hI,useClass:m.l},m.l,f.B,b.a]),v.Vt3],decls:9,vars:8,consts:[["cantManage",""],["type","submit","buttonType","primary","bitButton","",3,"click","loading"],["class","tw-mt-4",4,"ngIf"],[1,"tw-mt-4"],["type","success",3,"title",4,"ngIf"],[4,"ngIf"],["type","success",3,"title"],["type","danger",3,"title","useAlertRole"],[3,"selected","selectedChange",4,"ngIf"],[3,"dataSource","rowSize"],["header",""],["bitCell",""],["bitCell","","bitSortable","name"],["bitCell","","bitSortable","organizationId",4,"ngIf"],["bitCell","","bitSortable","exposedXTimes",1,"tw-text-right"],["bitRowDef",""],[3,"selectedChange","selected"],[4,"ngFor","ngForOf"],[3,"value"],["bitBadge","","variant","info"],["bitCell","","bitSortable","organizationId"],[3,"cipher"],[4,"ngIf","ngIfElse"],["bitCell","",4,"ngIf"],["bitCell","",1,"tw-text-right"],["bitBadge","","variant","warning"],["bitLink","","href","#","appStopClick","",3,"click","title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection-shared",3,"title"],[1,"tw-sr-only"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"],["appStopProp","",3,"disabled","organizationId","organizationName",4,"ngIf"],["appStopProp","",3,"disabled","organizationId","organizationName"]],template:function(t,n){1&t&&(v.nrm(0,"app-header"),v.j41(1,"bit-container")(2,"p"),v.EFF(3),v.nI1(4,"i18n"),v.k0s(),v.j41(5,"button",1),v.bIt("click",function(){return n.load()}),v.EFF(6),v.nI1(7,"i18n"),v.k0s(),v.DNE(8,at,3,2,"div",2),v.k0s()),2&t&&(v.R7$(3),v.JRh(v.bMT(4,4,"exposedPasswordsReportDesc")),v.R7$(2),v.Y8G("loading",n.loading),v.R7$(),v.SpI(" ",v.bMT(7,6,"checkExposedPasswords")," "),v.R7$(2),v.Y8G("ngIf",n.hasLoaded))},dependencies:[u.G,y.Sq,y.bT,j.R,k.Y,T.x,X.n,M.Q,N.G,z.H,Y.L,U.a,x.Q,C.O,U.N,A.H,D.a,a.G,V.f,g.t,O.P,h.Y,y.Jj,y.QX,P.$,J.t],encapsulation:2});var rt=e(14803),st=e(3204),ct=e(56962),lt=e(15639),pt=e(30414),dt=e(94573),ut=e(22466),gt=e(36572),ht=function(t,n,e,i){return new(e||(e=Promise))(function(a,o){function r(t){try{c(i.next(t))}catch(n){o(n)}}function s(t){try{c(i.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(r,s)}c((i=i.apply(t,n||[])).next())})};function bt(t,n){1&t&&(v.j41(0,"div"),v.nrm(1,"i",3),v.nI1(2,"i18n"),v.j41(3,"span",4),v.EFF(4),v.nI1(5,"i18n"),v.k0s()()),2&t&&(v.R7$(),v.Y8G("title",v.mNQ(v.bMT(2,3,"loading"))),v.R7$(3),v.JRh(v.bMT(5,5,"loading")))}function ft(t,n){1&t&&(v.j41(0,"bit-callout",7),v.nI1(1,"i18n"),v.EFF(2),v.nI1(3,"i18n"),v.k0s()),2&t&&(v.Y8G("title",v.mNQ(v.bMT(1,3,"goodNews"))),v.R7$(2),v.SpI(" ",v.bMT(3,5,"noInactive2fa")," "))}function mt(t,n){if(1&t&&(v.qex(0),v.j41(1,"bit-toggle",15),v.EFF(2),v.j41(3,"span",16),v.EFF(4),v.k0s()(),v.bVm()),2&t){const t=n.$implicit,e=v.XpG(4);v.R7$(),v.Y8G("value",t),v.R7$(),v.SpI(" ",e.getName(t)," "),v.R7$(2),v.SpI(" ",e.getCount(t)," ")}}function It(t,n){if(1&t){const t=v.RV6();v.j41(0,"bit-toggle-group",13),v.nI1(1,"async"),v.nI1(2,"i18n"),v.bIt("selectedChange",function(n){R.eBV(t);const e=v.XpG(3);return R.Njj(e.filterOrgToggle(n))}),v.DNE(3,mt,5,3,"ng-container",14),v.k0s()}if(2&t){const t=v.XpG(3);v.Y8G("selected",v.bMT(1,3,t.filterOrgStatus$)),v.BMQ("aria-label",v.bMT(2,5,"addAccessFilter")),v.R7$(3),v.Y8G("ngForOf",t.filterStatus)}}function vt(t,n){1&t&&(v.qex(0,17),v.j41(1,"tr",18),v.nrm(2,"th",19),v.j41(3,"th",19),v.EFF(4),v.nI1(5,"i18n"),v.k0s(),v.j41(6,"th",19),v.EFF(7),v.nI1(8,"i18n"),v.k0s(),v.nrm(9,"th",19),v.k0s(),v.bVm()),2&t&&(v.R7$(4),v.JRh(v.bMT(5,2,"name")),v.R7$(3),v.JRh(v.bMT(8,4,"owner")))}function Rt(t,n){if(1&t){const t=v.RV6();v.qex(0),v.j41(1,"a",26),v.nI1(2,"i18n"),v.bIt("click",function(){R.eBV(t);const n=v.XpG().$implicit,e=v.XpG(4);return R.Njj(e.selectCipher(n))}),v.EFF(3),v.k0s(),v.bVm()}if(2&t){const t=v.XpG().$implicit;v.R7$(),v.Y8G("title",v.mNQ(v.i5U(2,3,"editItemWithName",t.name))),v.R7$(2),v.JRh(t.name)}}function $t(t,n){if(1&t&&(v.j41(0,"span"),v.EFF(1),v.k0s()),2&t){const t=v.XpG().$implicit;v.R7$(),v.JRh(t.name)}}function Ft(t,n){1&t&&(v.qex(0),v.nrm(1,"i",27),v.nI1(2,"i18n"),v.j41(3,"span",4),v.EFF(4),v.nI1(5,"i18n"),v.k0s(),v.bVm()),2&t&&(v.R7$(),v.Y8G("title",v.mNQ(v.bMT(2,3,"shared"))),v.R7$(3),v.JRh(v.bMT(5,5,"shared")))}function wt(t,n){1&t&&(v.qex(0),v.nrm(1,"i",28),v.nI1(2,"i18n"),v.j41(3,"span",4),v.EFF(4),v.nI1(5,"i18n"),v.k0s(),v.bVm()),2&t&&(v.R7$(),v.Y8G("title",v.mNQ(v.bMT(2,3,"attachments"))),v.R7$(3),v.JRh(v.bMT(5,5,"attachments")))}function Gt(t,n){if(1&t&&(v.nrm(0,"app-org-badge",29),v.nI1(1,"async"),v.nI1(2,"orgNameFromId")),2&t){const t=v.XpG().$implicit,n=v.XpG(4);v.Y8G("disabled",n.disabled)("organizationId",t.organizationId)("organizationName",v.i5U(2,5,t.organizationId,v.bMT(1,3,n.organizations$)))}}function St(t,n){if(1&t&&(v.j41(0,"a",30),v.EFF(1),v.nI1(2,"i18n"),v.k0s()),2&t){const t=v.XpG().$implicit,n=v.XpG(4);v.Y8G("href",v.mNQ(n.cipherDocs.get(t.id)),v.B4B),v.R7$(),v.SpI(" ",v.bMT(2,3,"instructions"))}}function Et(t,n){if(1&t&&(v.j41(0,"tr",18)(1,"td",19),v.nrm(2,"app-vault-icon",21),v.k0s(),v.j41(3,"td",19),v.DNE(4,Rt,4,6,"ng-container",22)(5,$t,2,1,"ng-template",null,0,v.C5r)(7,Ft,6,7,"ng-container",1)(8,wt,6,7,"ng-container",1),v.nrm(9,"br"),v.j41(10,"small"),v.EFF(11),v.k0s()(),v.j41(12,"td",19),v.DNE(13,Gt,3,8,"app-org-badge",23),v.k0s(),v.j41(14,"td",24),v.DNE(15,St,3,5,"a",25),v.k0s()()),2&t){const t=n.$implicit,e=v.sdS(6),i=v.XpG(4);v.R7$(2),v.Y8G("cipher",t),v.R7$(2),v.Y8G("ngIf",!i.organization||i.canManageCipher(t))("ngIfElse",e),v.R7$(3),v.Y8G("ngIf",!i.organization&&t.organizationId),v.R7$(),v.Y8G("ngIf",t.hasAttachments),v.R7$(3),v.JRh(t.subTitle),v.R7$(2),v.Y8G("ngIf",!i.organization),v.R7$(2),v.Y8G("ngIf",i.cipherDocs.has(t.id))}}function yt(t,n){if(1&t&&(v.DNE(0,Et,16,8,"tr",20),v.nI1(1,"async")),2&t){const t=n.$implicit;v.Y8G("ngForOf",v.bMT(1,1,t))}}function jt(t,n){if(1&t&&(v.qex(0),v.j41(1,"bit-callout",8),v.nI1(2,"i18n"),v.EFF(3),v.nI1(4,"number"),v.nI1(5,"i18n"),v.k0s(),v.DNE(6,It,4,7,"bit-toggle-group",9),v.j41(7,"bit-table",10),v.DNE(8,vt,10,6,"ng-container",11),v.j41(9,"tbody"),v.DNE(10,yt,2,3,"ng-template",12),v.k0s()(),v.bVm()),2&t){const t=v.XpG(2);v.R7$(),v.Y8G("title",v.mNQ(v.bMT(2,6,"inactive2faFound"))),v.R7$(2),v.SpI(" ",v.brH(5,10,"inactive2faFoundReportDesc",v.bMT(4,8,t.ciphers.length),t.vaultMsg)," "),v.R7$(3),v.Y8G("ngIf",t.showFilterToggle&&!t.isAdminConsoleActive),v.R7$(),v.Y8G("dataSource",t.dataSource),v.R7$(),v.Y8G("ngIf",!t.isAdminConsoleActive)}}function kt(t,n){if(1&t&&(v.j41(0,"div",5),v.DNE(1,ft,4,7,"bit-callout",6)(2,jt,11,14,"ng-container",1),v.k0s()),2&t){const t=v.XpG();v.R7$(),v.Y8G("ngIf",!t.ciphers.length),v.R7$(),v.Y8G("ngIf",t.ciphers.length)}}class Tt extends pt.O{constructor(t,n,e,i,a,o,r,s,c,l,p,d){super(t,o,n,r,i,a,s,c,l,p,d),this.route=e,this.changeDetectorRef=d,this.manageableCiphers=[]}ngOnInit(){const t=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return ht(this,void 0,void 0,function*(){var n,e,i;this.isAdminConsoleActive=!0,null===(i=null===(e=null===(n=this.route.parent)||void 0===n?void 0:n.parent)||void 0===e?void 0:e.params)||void 0===i||i.pipe((0,rt.Q)(this.destroyed$)).subscribe(n=>ht(this,void 0,void 0,function*(){const e=yield(0,c._)(this.accountService.activeAccount$.pipe((0,st.T)(t=>null==t?void 0:t.id)));e&&(this.organization=yield(0,c._)(this.organizationService.organizations$(e).pipe((0,lt.Hc)(n.organizationId))),this.manageableCiphers=yield this.cipherService.getAll(e),yield t.ngOnInit.call(this)),this.changeDetectorRef.markForCheck()}))})}getAllCiphers(){return ht(this,void 0,void 0,function*(){return this.organization?yield this.cipherService.getAllFromApiForOrganization(this.organization.id,!0):[]})}canManageCipher(t){return 0===t.collectionIds.length||this.manageableCiphers.some(n=>n.id===t.id)}}Tt.ɵfac=function(t){return new(t||Tt)(v.rXU($.p),v.rXU(w.o3),v.rXU(S.nX),v.rXU(ct.K),v.rXU(d.qX),v.rXU(s.PV),v.rXU(G.Di),v.rXU(E.W),v.rXU(p.H),v.rXU(d.hI),v.rXU(m.l),v.rXU(dt.gRc))},Tt.ɵcmp=v.VBU({type:Tt,selectors:[["app-inactive-two-factor-report"]],features:[v.Jv_([{provide:d.hI,useClass:m.l},m.l,f.B,b.a]),v.Vt3],decls:7,vars:5,consts:[["cantManage",""],[4,"ngIf"],["class","tw-mt-4",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","tw-text-muted",3,"title"],[1,"tw-sr-only"],[1,"tw-mt-4"],["type","success",3,"title",4,"ngIf"],["type","success",3,"title"],["type","danger",3,"title"],[3,"selected","selectedChange",4,"ngIf"],[3,"dataSource"],["header","",4,"ngIf"],["body",""],[3,"selectedChange","selected"],[4,"ngFor","ngForOf"],[3,"value"],["bitBadge","","variant","info"],["header",""],["bitRow",""],["bitCell",""],["bitRow","",4,"ngFor","ngForOf"],[3,"cipher"],[4,"ngIf","ngIfElse"],["appStopProp","",3,"disabled","organizationId","organizationName",4,"ngIf"],["bitCell","",1,"tw-text-right"],["bitBadge","","target","_blank","rel","noreferrer",3,"href",4,"ngIf"],["bitLink","","href","#","appStopClick","",3,"click","title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection-shared",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"],["appStopProp","",3,"disabled","organizationId","organizationName"],["bitBadge","","target","_blank","rel","noreferrer",3,"href"]],template:function(t,n){1&t&&(v.nrm(0,"app-header"),v.j41(1,"bit-container")(2,"p"),v.EFF(3),v.nI1(4,"i18n"),v.k0s(),v.DNE(5,bt,6,7,"div",1)(6,kt,3,2,"div",2),v.k0s()),2&t&&(v.R7$(3),v.JRh(v.bMT(4,3,"inactive2faReportDesc")),v.R7$(2),v.Y8G("ngIf",!n.hasLoaded&&n.loading),v.R7$(),v.Y8G("ngIf",n.hasLoaded))},dependencies:[u.G,y.Sq,y.bT,j.R,k.Y,T.x,X.n,N.G,z.H,Y.L,x.Q,ut.Y,gt._,gt.O,A.H,D.a,a.G,V.f,g.t,O.P,h.Y,y.Jj,y.QX,P.$,J.t],encapsulation:2,changeDetection:0});var Xt=e(17343),Mt=function(t,n,e,i){return new(e||(e=Promise))(function(a,o){function r(t){try{c(i.next(t))}catch(n){o(n)}}function s(t){try{c(i.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(r,s)}c((i=i.apply(t,n||[])).next())})};function Nt(t,n){1&t&&(v.j41(0,"div"),v.nrm(1,"i",3),v.nI1(2,"i18n"),v.j41(3,"span",4),v.EFF(4),v.nI1(5,"i18n"),v.k0s()()),2&t&&(v.R7$(),v.Y8G("title",v.mNQ(v.bMT(2,3,"loading"))),v.R7$(3),v.JRh(v.bMT(5,5,"loading")))}function zt(t,n){1&t&&(v.j41(0,"bit-callout",7),v.nI1(1,"i18n"),v.EFF(2),v.nI1(3,"i18n"),v.k0s()),2&t&&(v.Y8G("title",v.mNQ(v.bMT(1,3,"goodNews"))),v.R7$(2),v.SpI(" ",v.bMT(3,5,"noReusedPasswords")," "))}function Yt(t,n){if(1&t&&(v.qex(0),v.j41(1,"bit-toggle",15),v.EFF(2),v.j41(3,"span",16),v.EFF(4),v.k0s()(),v.bVm()),2&t){const t=n.$implicit,e=v.XpG(4);v.R7$(),v.Y8G("value",t),v.R7$(),v.SpI(" ",e.getName(t)," "),v.R7$(2),v.SpI(" ",e.getCount(t)," ")}}function Ut(t,n){if(1&t){const t=v.RV6();v.j41(0,"bit-toggle-group",13),v.nI1(1,"async"),v.nI1(2,"i18n"),v.bIt("selectedChange",function(n){R.eBV(t);const e=v.XpG(3);return R.Njj(e.filterOrgToggle(n))}),v.DNE(3,Yt,5,3,"ng-container",14),v.k0s()}if(2&t){const t=v.XpG(3);v.Y8G("selected",v.bMT(1,3,t.filterOrgStatus$)),v.BMQ("aria-label",v.bMT(2,5,"addAccessFilter")),v.R7$(3),v.Y8G("ngForOf",t.filterStatus)}}function xt(t,n){1&t&&(v.qex(0,17),v.nrm(1,"th",18),v.j41(2,"th",18),v.EFF(3),v.nI1(4,"i18n"),v.k0s(),v.j41(5,"th",18),v.EFF(6),v.nI1(7,"i18n"),v.k0s(),v.j41(8,"th",19),v.EFF(9),v.nI1(10,"i18n"),v.k0s(),v.bVm()),2&t&&(v.R7$(3),v.JRh(v.bMT(4,3,"name")),v.R7$(3),v.JRh(v.bMT(7,5,"owner")),v.R7$(3),v.JRh(v.bMT(10,7,"timesReused")))}function Ct(t,n){if(1&t){const t=v.RV6();v.qex(0),v.j41(1,"a",24),v.nI1(2,"i18n"),v.bIt("click",function(){R.eBV(t);const n=v.XpG().$implicit,e=v.XpG(3);return R.Njj(e.selectCipher(n))}),v.EFF(3),v.k0s(),v.bVm()}if(2&t){const t=v.XpG().$implicit;v.R7$(),v.Y8G("title",v.mNQ(v.i5U(2,3,"editItemWithName",t.name))),v.R7$(2),v.JRh(t.name)}}function At(t,n){if(1&t&&(v.j41(0,"span"),v.EFF(1),v.k0s()),2&t){const t=v.XpG().$implicit;v.R7$(),v.JRh(t.name)}}function Dt(t,n){1&t&&(v.qex(0),v.nrm(1,"i",25),v.nI1(2,"i18n"),v.j41(3,"span",4),v.EFF(4),v.nI1(5,"i18n"),v.k0s(),v.bVm()),2&t&&(v.R7$(),v.Y8G("title",v.mNQ(v.bMT(2,3,"shared"))),v.R7$(3),v.JRh(v.bMT(5,5,"shared")))}function Vt(t,n){1&t&&(v.qex(0),v.nrm(1,"i",26),v.nI1(2,"i18n"),v.j41(3,"span",4),v.EFF(4),v.nI1(5,"i18n"),v.k0s(),v.bVm()),2&t&&(v.R7$(),v.Y8G("title",v.mNQ(v.bMT(2,3,"attachments"))),v.R7$(3),v.JRh(v.bMT(5,5,"attachments")))}function Ot(t,n){if(1&t&&(v.nrm(0,"app-org-badge",27),v.nI1(1,"async"),v.nI1(2,"orgNameFromId")),2&t){const t=v.XpG().$implicit,n=v.XpG(3);v.Y8G("disabled",n.disabled)("organizationId",t.organizationId)("organizationName",v.i5U(2,5,t.organizationId,v.bMT(1,3,n.organizations$)))}}function Pt(t,n){if(1&t&&(v.j41(0,"td",18),v.nrm(1,"app-vault-icon",20),v.k0s(),v.j41(2,"td",18),v.DNE(3,Ct,4,6,"ng-container",21)(4,At,2,1,"ng-template",null,0,v.C5r)(6,Dt,6,7,"ng-container",1)(7,Vt,6,7,"ng-container",1),v.nrm(8,"br"),v.j41(9,"small"),v.EFF(10),v.k0s()(),v.j41(11,"td",18),v.DNE(12,Ot,3,8,"app-org-badge",22),v.k0s(),v.j41(13,"td",19)(14,"span",23),v.EFF(15),v.nI1(16,"i18n"),v.k0s()()),2&t){const t=n.$implicit,e=v.sdS(5),i=v.XpG(3);v.R7$(),v.Y8G("cipher",t),v.R7$(2),v.Y8G("ngIf",!i.organization||i.canManageCipher(t))("ngIfElse",e),v.R7$(3),v.Y8G("ngIf",!i.organization&&t.organizationId),v.R7$(),v.Y8G("ngIf",t.hasAttachments),v.R7$(3),v.JRh(t.subTitle),v.R7$(2),v.Y8G("ngIf",!i.organization),v.R7$(3),v.SpI(" ",v.i5U(16,8,"reusedXTimes",i.passwordUseMap.get(t.login.password))," ")}}function Jt(t,n){if(1&t&&(v.qex(0),v.j41(1,"bit-callout",8),v.nI1(2,"i18n"),v.EFF(3),v.nI1(4,"number"),v.nI1(5,"i18n"),v.k0s(),v.DNE(6,Ut,4,7,"bit-toggle-group",9),v.j41(7,"bit-table-scroll",10),v.DNE(8,xt,11,9,"ng-container",11)(9,Pt,17,11,"ng-template",12),v.k0s(),v.bVm()),2&t){const t=v.XpG(2);v.R7$(),v.Y8G("title",v.mNQ(v.bMT(2,7,"reusedPasswordsFound"))),v.R7$(2),v.SpI(" ",v.brH(5,11,"reusedPasswordsFoundReportDesc",v.bMT(4,9,t.ciphers.length),t.vaultMsg)," "),v.R7$(3),v.Y8G("ngIf",t.showFilterToggle&&!t.isAdminConsoleActive),v.R7$(),v.Y8G("dataSource",t.dataSource)("rowSize",75),v.R7$(),v.Y8G("ngIf",!t.isAdminConsoleActive)}}function Bt(t,n){if(1&t&&(v.j41(0,"div",5),v.DNE(1,zt,4,7,"bit-callout",6)(2,Jt,10,15,"ng-container",1),v.k0s()),2&t){const t=v.XpG();v.R7$(),v.Y8G("ngIf",!t.ciphers.length),v.R7$(),v.Y8G("ngIf",t.ciphers.length)}}class Qt extends Xt.A{constructor(t,n,e,i,a,o,r,s,c,l){super(t,i,n,a,o,r,s,c,l),this.route=e,this.accountService=a}ngOnInit(){const t=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return Mt(this,void 0,void 0,function*(){this.isAdminConsoleActive=!0,this.route.parent.parent.params.subscribe(n=>Mt(this,void 0,void 0,function*(){const e=yield(0,c._)(this.accountService.activeAccount$.pipe(l.F6));this.organization=yield(0,c._)(this.organizationService.organizations$(e).pipe((0,s.Sw)(n.organizationId))),this.manageableCiphers=yield this.cipherService.getAll(e),yield t.ngOnInit.call(this)}))})}getAllCiphers(){return this.cipherService.getAllFromApiForOrganization(this.organization.id,!0)}canManageCipher(t){return 0===t.collectionIds.length||this.manageableCiphers.some(n=>n.id===t.id)}}Qt.ɵfac=function(t){return new(t||Qt)(v.rXU($.p),v.rXU(w.o3),v.rXU(S.nX),v.rXU(s.PV),v.rXU(G.Di),v.rXU(d.qX),v.rXU(E.W),v.rXU(p.H),v.rXU(d.hI),v.rXU(m.l))},Qt.ɵcmp=v.VBU({type:Qt,selectors:[["app-reused-passwords-report"]],features:[v.Jv_([{provide:d.hI,useClass:m.l},m.l,f.B,b.a]),v.Vt3],decls:7,vars:5,consts:[["cantManage",""],[4,"ngIf"],["class","tw-mt-4",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","tw-text-muted",3,"title"],[1,"tw-sr-only"],[1,"tw-mt-4"],["type","success",3,"title",4,"ngIf"],["type","success",3,"title"],["type","danger",3,"title"],[3,"selected","selectedChange",4,"ngIf"],[3,"dataSource","rowSize"],["header","",4,"ngIf"],["bitRowDef",""],[3,"selectedChange","selected"],[4,"ngFor","ngForOf"],[3,"value"],["bitBadge","","variant","info"],["header",""],["bitCell",""],["bitCell","",1,"tw-text-right"],[3,"cipher"],[4,"ngIf","ngIfElse"],["appStopProp","",3,"disabled","organizationId","organizationName",4,"ngIf"],["bitBadge","","variant","warning"],["bitLink","","href","#","appStopClick","",3,"click","title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection-shared",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"],["appStopProp","",3,"disabled","organizationId","organizationName"]],template:function(t,n){1&t&&(v.nrm(0,"app-header"),v.j41(1,"bit-container")(2,"p"),v.EFF(3),v.nI1(4,"i18n"),v.k0s(),v.DNE(5,Nt,6,7,"div",1)(6,Bt,3,2,"div",2),v.k0s()),2&t&&(v.R7$(3),v.JRh(v.bMT(4,3,"reusedPasswordsReportDesc")),v.R7$(2),v.Y8G("ngIf",!n.hasLoaded&&n.loading),v.R7$(),v.Y8G("ngIf",n.hasLoaded))},dependencies:[u.G,y.Sq,y.bT,j.R,k.Y,T.x,X.n,N.G,z.H,Y.L,U.a,x.Q,U.N,A.H,D.a,a.G,V.f,g.t,O.P,h.Y,y.Jj,y.QX,P.$,J.t],encapsulation:2});var qt=e(28202),_t=e(71687),Lt=function(t,n,e,i){return new(e||(e=Promise))(function(a,o){function r(t){try{c(i.next(t))}catch(n){o(n)}}function s(t){try{c(i.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(r,s)}c((i=i.apply(t,n||[])).next())})};function Ht(t,n){1&t&&(v.j41(0,"div"),v.nrm(1,"i",3),v.nI1(2,"i18n"),v.j41(3,"span",4),v.EFF(4),v.nI1(5,"i18n"),v.k0s()()),2&t&&(v.R7$(),v.Y8G("title",v.mNQ(v.bMT(2,3,"loading"))),v.R7$(3),v.JRh(v.bMT(5,5,"loading")))}function Wt(t,n){1&t&&(v.j41(0,"bit-callout",7),v.nI1(1,"i18n"),v.EFF(2),v.nI1(3,"i18n"),v.k0s()),2&t&&(v.Y8G("title",v.mNQ(v.bMT(1,3,"goodNews"))),v.R7$(2),v.SpI(" ",v.bMT(3,5,"noUnsecuredWebsites")," "))}function Kt(t,n){if(1&t&&(v.qex(0),v.j41(1,"bit-toggle",15),v.EFF(2),v.j41(3,"span",16),v.EFF(4),v.k0s()(),v.bVm()),2&t){const t=n.$implicit,e=v.XpG(4);v.R7$(),v.Y8G("value",t),v.R7$(),v.SpI(" ",e.getName(t)," "),v.R7$(2),v.SpI(" ",e.getCount(t)," ")}}function Zt(t,n){if(1&t){const t=v.RV6();v.j41(0,"bit-toggle-group",13),v.nI1(1,"async"),v.nI1(2,"i18n"),v.bIt("selectedChange",function(n){R.eBV(t);const e=v.XpG(3);return R.Njj(e.filterOrgToggle(n))}),v.DNE(3,Kt,5,3,"ng-container",14),v.k0s()}if(2&t){const t=v.XpG(3);v.Y8G("selected",v.bMT(1,3,t.filterOrgStatus$)),v.BMQ("aria-label",v.bMT(2,5,"addAccessFilter")),v.R7$(3),v.Y8G("ngForOf",t.filterStatus)}}function tn(t,n){1&t&&(v.qex(0,17),v.j41(1,"tr",18),v.nrm(2,"th",19),v.j41(3,"th",19),v.EFF(4),v.nI1(5,"i18n"),v.k0s(),v.j41(6,"th",19),v.EFF(7),v.nI1(8,"i18n"),v.k0s(),v.nrm(9,"th",19),v.k0s(),v.bVm()),2&t&&(v.R7$(4),v.JRh(v.bMT(5,2,"name")),v.R7$(3),v.JRh(v.bMT(8,4,"owner")))}function nn(t,n){if(1&t){const t=v.RV6();v.qex(0),v.j41(1,"a",24),v.nI1(2,"i18n"),v.bIt("click",function(){R.eBV(t);const n=v.XpG().$implicit,e=v.XpG(4);return R.Njj(e.selectCipher(n))}),v.EFF(3),v.k0s(),v.bVm()}if(2&t){const t=v.XpG().$implicit;v.R7$(),v.Y8G("title",v.mNQ(v.i5U(2,3,"editItemWithName",t.name))),v.R7$(2),v.JRh(t.name)}}function en(t,n){if(1&t&&(v.j41(0,"span"),v.EFF(1),v.k0s()),2&t){const t=v.XpG().$implicit;v.R7$(),v.JRh(t.name)}}function an(t,n){1&t&&(v.qex(0),v.nrm(1,"i",25),v.nI1(2,"i18n"),v.j41(3,"span",4),v.EFF(4),v.nI1(5,"i18n"),v.k0s(),v.bVm()),2&t&&(v.R7$(),v.Y8G("title",v.mNQ(v.bMT(2,3,"shared"))),v.R7$(3),v.JRh(v.bMT(5,5,"shared")))}function on(t,n){1&t&&(v.qex(0),v.nrm(1,"i",26),v.nI1(2,"i18n"),v.j41(3,"span",4),v.EFF(4),v.nI1(5,"i18n"),v.k0s(),v.bVm()),2&t&&(v.R7$(),v.Y8G("title",v.mNQ(v.bMT(2,3,"attachments"))),v.R7$(3),v.JRh(v.bMT(5,5,"attachments")))}function rn(t,n){if(1&t&&(v.nrm(0,"app-org-badge",27),v.nI1(1,"async"),v.nI1(2,"orgNameFromId")),2&t){const t=v.XpG().$implicit,n=v.XpG(4);v.Y8G("disabled",n.disabled)("organizationId",t.organizationId)("organizationName",v.i5U(2,5,t.organizationId,v.bMT(1,3,n.organizations$)))}}function sn(t,n){if(1&t&&(v.j41(0,"tr",18)(1,"td",19),v.nrm(2,"app-vault-icon",21),v.k0s(),v.j41(3,"td",19),v.DNE(4,nn,4,6,"ng-container",22)(5,en,2,1,"ng-template",null,0,v.C5r)(7,an,6,7,"ng-container",1)(8,on,6,7,"ng-container",1),v.nrm(9,"br"),v.j41(10,"small"),v.EFF(11),v.k0s()(),v.j41(12,"td",19),v.DNE(13,rn,3,8,"app-org-badge",23),v.k0s()()),2&t){const t=n.$implicit,e=v.sdS(6),i=v.XpG(4);v.R7$(2),v.Y8G("cipher",t),v.R7$(2),v.Y8G("ngIf",!i.organization||i.canManageCipher(t))("ngIfElse",e),v.R7$(3),v.Y8G("ngIf",!i.organization&&t.organizationId),v.R7$(),v.Y8G("ngIf",t.hasAttachments),v.R7$(3),v.JRh(t.subTitle),v.R7$(2),v.Y8G("ngIf",!i.organization)}}function cn(t,n){if(1&t&&(v.DNE(0,sn,14,7,"tr",20),v.nI1(1,"async")),2&t){const t=n.$implicit;v.Y8G("ngForOf",v.bMT(1,1,t))}}function ln(t,n){if(1&t&&(v.qex(0),v.j41(1,"bit-callout",8),v.nI1(2,"i18n"),v.EFF(3),v.nI1(4,"number"),v.nI1(5,"i18n"),v.k0s(),v.DNE(6,Zt,4,7,"bit-toggle-group",9),v.j41(7,"bit-table",10),v.DNE(8,tn,10,6,"ng-container",11)(9,cn,2,3,"ng-template",12),v.k0s(),v.bVm()),2&t){const t=v.XpG(2);v.R7$(),v.Y8G("title",v.mNQ(v.bMT(2,6,"unsecuredWebsitesFound"))),v.R7$(2),v.SpI(" ",v.brH(5,10,"unsecuredWebsitesFoundReportDesc",v.bMT(4,8,t.ciphers.length),t.vaultMsg)," "),v.R7$(3),v.Y8G("ngIf",t.showFilterToggle&&!t.isAdminConsoleActive),v.R7$(),v.Y8G("dataSource",t.dataSource),v.R7$(),v.Y8G("ngIf",!t.isAdminConsoleActive)}}function pn(t,n){if(1&t&&(v.j41(0,"div",5),v.DNE(1,Wt,4,7,"bit-callout",6)(2,ln,10,14,"ng-container",1),v.k0s()),2&t){const t=v.XpG();v.R7$(),v.Y8G("ngIf",!t.ciphers.length),v.R7$(),v.Y8G("ngIf",t.ciphers.length)}}class dn extends _t.U{constructor(t,n,e,i,a,o,r,s,c,l,p){super(t,i,n,a,o,r,s,c,l,p),this.route=e,this.accountService=a}ngOnInit(){const t=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return Lt(this,void 0,void 0,function*(){this.isAdminConsoleActive=!0,this.route.parent.parent.params.subscribe(n=>Lt(this,void 0,void 0,function*(){const e=yield(0,c._)(this.accountService.activeAccount$.pipe((0,st.T)(t=>null==t?void 0:t.id)));this.organization=yield(0,c._)(this.organizationService.organizations$(e).pipe((0,s.Sw)(n.organizationId))),this.manageableCiphers=yield this.cipherService.getAll(e),yield t.ngOnInit.call(this)}))})}getAllCiphers(){return this.cipherService.getAllFromApiForOrganization(this.organization.id,!0)}canManageCipher(t){return 0===t.collectionIds.length||this.manageableCiphers.some(n=>n.id===t.id)}}dn.ɵfac=function(t){return new(t||dn)(v.rXU($.p),v.rXU(w.o3),v.rXU(S.nX),v.rXU(s.PV),v.rXU(G.Di),v.rXU(d.qX),v.rXU(E.W),v.rXU(p.H),v.rXU(qt.YD),v.rXU(d.hI),v.rXU(m.l))},dn.ɵcmp=v.VBU({type:dn,selectors:[["app-unsecured-websites-report"]],features:[v.Jv_([{provide:d.hI,useClass:m.l},m.l,f.B,b.a]),v.Vt3],decls:7,vars:5,consts:[["cantManage",""],[4,"ngIf"],["class","tw-mt-4",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","tw-text-muted",3,"title"],[1,"tw-sr-only"],[1,"tw-mt-4"],["type","success",3,"title",4,"ngIf"],["type","success",3,"title"],["type","danger",3,"title"],[3,"selected","selectedChange",4,"ngIf"],[3,"dataSource"],["header","",4,"ngIf"],["body",""],[3,"selectedChange","selected"],[4,"ngFor","ngForOf"],[3,"value"],["bitBadge","","variant","info"],["header",""],["bitRow",""],["bitCell",""],["bitRow","",4,"ngFor","ngForOf"],[3,"cipher"],[4,"ngIf","ngIfElse"],["appStopProp","",3,"disabled","organizationId","organizationName",4,"ngIf"],["bitLink","","href","#","appStopClick","",3,"click","title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection-shared",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"],["appStopProp","",3,"disabled","organizationId","organizationName"]],template:function(t,n){1&t&&(v.nrm(0,"app-header"),v.j41(1,"bit-container")(2,"p"),v.EFF(3),v.nI1(4,"i18n"),v.k0s(),v.DNE(5,Ht,6,7,"div",1)(6,pn,3,2,"div",2),v.k0s()),2&t&&(v.R7$(3),v.JRh(v.bMT(4,3,"unsecuredWebsitesReportDesc")),v.R7$(2),v.Y8G("ngIf",!n.hasLoaded&&n.loading),v.R7$(),v.Y8G("ngIf",n.hasLoaded))},dependencies:[u.G,y.Sq,y.bT,j.R,k.Y,T.x,X.n,N.G,z.H,Y.L,x.Q,ut.Y,gt._,gt.O,A.H,D.a,a.G,V.f,g.t,O.P,h.Y,y.Jj,y.QX,P.$,J.t],encapsulation:2});var un=e(63457),gn=e(72523),hn=function(t,n,e,i){return new(e||(e=Promise))(function(a,o){function r(t){try{c(i.next(t))}catch(n){o(n)}}function s(t){try{c(i.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(r,s)}c((i=i.apply(t,n||[])).next())})};function bn(t,n){1&t&&(v.j41(0,"div"),v.nrm(1,"i",3),v.nI1(2,"i18n"),v.j41(3,"span",4),v.EFF(4),v.nI1(5,"i18n"),v.k0s()()),2&t&&(v.R7$(),v.Y8G("title",v.mNQ(v.bMT(2,3,"loading"))),v.R7$(3),v.JRh(v.bMT(5,5,"loading")))}function fn(t,n){1&t&&(v.j41(0,"bit-callout",7),v.nI1(1,"i18n"),v.EFF(2),v.nI1(3,"i18n"),v.k0s()),2&t&&(v.Y8G("title",v.mNQ(v.bMT(1,3,"goodNews"))),v.R7$(2),v.SpI(" ",v.bMT(3,5,"noWeakPasswords")," "))}function mn(t,n){if(1&t&&(v.qex(0),v.j41(1,"bit-toggle",19),v.EFF(2),v.j41(3,"span",20),v.EFF(4),v.k0s()(),v.bVm()),2&t){const t=n.$implicit,e=v.XpG(4);v.R7$(),v.Y8G("value",t),v.R7$(),v.SpI(" ",e.getName(t)," "),v.R7$(2),v.SpI(" ",e.getCount(t)," ")}}function In(t,n){if(1&t){const t=v.RV6();v.j41(0,"bit-toggle-group",17),v.nI1(1,"async"),v.nI1(2,"i18n"),v.bIt("selectedChange",function(n){R.eBV(t);const e=v.XpG(3);return R.Njj(e.filterOrgToggle(n))}),v.DNE(3,mn,5,3,"ng-container",18),v.k0s()}if(2&t){const t=v.XpG(3);v.Y8G("selected",v.bMT(1,3,t.filterOrgStatus$)),v.BMQ("aria-label",v.bMT(2,5,"addAccessFilter")),v.R7$(3),v.Y8G("ngForOf",t.filterStatus)}}function vn(t,n){1&t&&(v.j41(0,"th",21),v.EFF(1),v.nI1(2,"i18n"),v.k0s()),2&t&&(v.R7$(),v.SpI(" ",v.bMT(2,1,"owner")," "))}function Rn(t,n){if(1&t){const t=v.RV6();v.qex(0),v.j41(1,"a",27),v.nI1(2,"i18n"),v.bIt("click",function(){R.eBV(t);const n=v.XpG().$implicit,e=v.XpG(3);return R.Njj(e.selectCipher(n))}),v.EFF(3),v.k0s(),v.bVm()}if(2&t){const t=v.XpG().$implicit;v.R7$(),v.Y8G("title",v.mNQ(v.i5U(2,3,"editItemWithName",t.name))),v.R7$(2),v.JRh(t.name)}}function $n(t,n){if(1&t&&(v.j41(0,"span"),v.EFF(1),v.k0s()),2&t){const t=v.XpG().$implicit;v.R7$(),v.JRh(t.name)}}function Fn(t,n){1&t&&(v.qex(0),v.nrm(1,"i",28),v.nI1(2,"i18n"),v.j41(3,"span",4),v.EFF(4),v.nI1(5,"i18n"),v.k0s(),v.bVm()),2&t&&(v.R7$(),v.Y8G("title",v.mNQ(v.bMT(2,3,"shared"))),v.R7$(3),v.JRh(v.bMT(5,5,"shared")))}function wn(t,n){1&t&&(v.qex(0),v.nrm(1,"i",29),v.nI1(2,"i18n"),v.j41(3,"span",4),v.EFF(4),v.nI1(5,"i18n"),v.k0s(),v.bVm()),2&t&&(v.R7$(),v.Y8G("title",v.mNQ(v.bMT(2,3,"attachments"))),v.R7$(3),v.JRh(v.bMT(5,5,"attachments")))}function Gn(t,n){if(1&t&&(v.nrm(0,"app-org-badge",31),v.nI1(1,"async"),v.nI1(2,"orgNameFromId")),2&t){const t=v.XpG(2).$implicit,n=v.XpG(3);v.Y8G("disabled",n.disabled)("organizationId",t.organizationId)("organizationName",v.i5U(2,5,t.organizationId,v.bMT(1,3,n.organizations$)))}}function Sn(t,n){if(1&t&&(v.j41(0,"td",12),v.DNE(1,Gn,3,8,"app-org-badge",30),v.k0s()),2&t){const t=v.XpG(4);v.R7$(),v.Y8G("ngIf",!t.organization)}}function En(t,n){if(1&t&&(v.j41(0,"td",12),v.nrm(1,"app-vault-icon",22),v.k0s(),v.j41(2,"td",12),v.DNE(3,Rn,4,6,"ng-container",23)(4,$n,2,1,"ng-template",null,0,v.C5r)(6,Fn,6,7,"ng-container",1)(7,wn,6,7,"ng-container",1),v.nrm(8,"br"),v.j41(9,"small"),v.EFF(10),v.k0s()(),v.DNE(11,Sn,2,1,"td",24),v.j41(12,"td",25)(13,"span",26),v.EFF(14),v.nI1(15,"i18n"),v.k0s()()),2&t){const t=n.$implicit,e=v.sdS(5),i=v.XpG(3);v.R7$(),v.Y8G("cipher",t),v.R7$(2),v.Y8G("ngIf",!i.organization||i.canManageCipher(t))("ngIfElse",e),v.R7$(3),v.Y8G("ngIf",!i.organization&&t.organizationId),v.R7$(),v.Y8G("ngIf",t.hasAttachments),v.R7$(3),v.JRh(t.subTitle),v.R7$(),v.Y8G("ngIf",!i.isAdminConsoleActive),v.R7$(2),v.Y8G("variant",t.reportValue.badgeVariant),v.R7$(),v.SpI(" ",v.bMT(15,9,t.reportValue.label)," ")}}function yn(t,n){if(1&t&&(v.qex(0),v.j41(1,"bit-callout",8),v.nI1(2,"i18n"),v.EFF(3),v.nI1(4,"number"),v.nI1(5,"i18n"),v.k0s(),v.DNE(6,In,4,7,"bit-toggle-group",9),v.j41(7,"bit-table-scroll",10),v.qex(8,11),v.nrm(9,"th",12),v.j41(10,"th",13),v.EFF(11),v.nI1(12,"i18n"),v.k0s(),v.DNE(13,vn,3,3,"th",14),v.j41(14,"th",15),v.EFF(15),v.nI1(16,"i18n"),v.k0s(),v.bVm(),v.DNE(17,En,16,11,"ng-template",16),v.k0s(),v.bVm()),2&t){const t=v.XpG(2);v.R7$(),v.Y8G("title",v.mNQ(v.bMT(2,9,"weakPasswordsFound"))),v.R7$(2),v.SpI(" ",v.brH(5,13,"weakPasswordsFoundReportDesc",v.bMT(4,11,t.ciphers.length),t.vaultMsg)," "),v.R7$(3),v.Y8G("ngIf",t.showFilterToggle&&!t.isAdminConsoleActive),v.R7$(),v.Y8G("dataSource",t.dataSource)("rowSize",53),v.R7$(4),v.JRh(v.bMT(12,17,"name")),v.R7$(2),v.Y8G("ngIf",!t.isAdminConsoleActive),v.R7$(2),v.SpI(" ",v.bMT(16,19,"weakness")," ")}}function jn(t,n){if(1&t&&(v.j41(0,"div",5),v.DNE(1,fn,4,7,"bit-callout",6)(2,yn,18,21,"ng-container",1),v.k0s()),2&t){const t=v.XpG();v.R7$(),v.Y8G("ngIf",!t.ciphers.length),v.R7$(),v.Y8G("ngIf",t.ciphers.length)}}class kn extends gn.w{constructor(t,n,e,i,a,o,r,s,c,l,p){super(t,n,a,e,l,o,r,s,c,p),this.route=i,this.accountService=l}ngOnInit(){const t=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return hn(this,void 0,void 0,function*(){this.isAdminConsoleActive=!0,this.route.parent.parent.params.subscribe(n=>hn(this,void 0,void 0,function*(){const e=yield(0,c._)(this.accountService.activeAccount$.pipe(l.F6));this.organization=yield(0,c._)(this.organizationService.organizations$(e).pipe((0,s.Sw)(n.organizationId))),this.manageableCiphers=yield this.cipherService.getAll(e),yield t.ngOnInit.call(this)}))})}getAllCiphers(){return this.cipherService.getAllFromApiForOrganization(this.organization.id,!0)}canManageCipher(t){return 0===t.collectionIds.length||this.manageableCiphers.some(n=>n.id===t.id)}}kn.ɵfac=function(t){return new(t||kn)(v.rXU($.p),v.rXU(un.Q),v.rXU(w.o3),v.rXU(S.nX),v.rXU(s.PV),v.rXU(d.qX),v.rXU(E.W),v.rXU(p.H),v.rXU(d.hI),v.rXU(G.Di),v.rXU(m.l))},kn.ɵcmp=v.VBU({type:kn,selectors:[["app-weak-passwords-report"]],features:[v.Jv_([{provide:d.hI,useClass:m.l},m.l,f.B,b.a]),v.Vt3],decls:7,vars:5,consts:[["cantManage",""],[4,"ngIf"],["class","tw-mt-4",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","tw-text-muted",3,"title"],[1,"tw-sr-only"],[1,"tw-mt-4"],["type","success",3,"title",4,"ngIf"],["type","success",3,"title"],["type","danger",3,"title"],[3,"selected","selectedChange",4,"ngIf"],[3,"dataSource","rowSize"],["header",""],["bitCell",""],["bitCell","","bitSortable","name"],["bitCell","","bitSortable","organizationId",4,"ngIf"],["bitCell","","bitSortable","scoreKey","default","",1,"tw-text-right"],["bitRowDef",""],[3,"selectedChange","selected"],[4,"ngFor","ngForOf"],[3,"value"],["bitBadge","","variant","info"],["bitCell","","bitSortable","organizationId"],[3,"cipher"],[4,"ngIf","ngIfElse"],["bitCell","",4,"ngIf"],["bitCell","",1,"tw-text-right"],["bitBadge","",3,"variant"],["bitLink","","href","#","appStopClick","",3,"click","title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection-shared",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"],["appStopProp","",3,"disabled","organizationId","organizationName",4,"ngIf"],["appStopProp","",3,"disabled","organizationId","organizationName"]],template:function(t,n){1&t&&(v.nrm(0,"app-header"),v.j41(1,"bit-container")(2,"p"),v.EFF(3),v.nI1(4,"i18n"),v.k0s(),v.DNE(5,bn,6,7,"div",1)(6,jn,3,2,"div",2),v.k0s()),2&t&&(v.R7$(3),v.JRh(v.bMT(4,3,"weakPasswordsReportDesc")),v.R7$(2),v.Y8G("ngIf",!n.hasLoaded&&n.loading),v.R7$(),v.Y8G("ngIf",n.hasLoaded))},dependencies:[u.G,y.Sq,y.bT,j.R,k.Y,T.x,X.n,N.G,z.H,Y.L,U.a,x.Q,C.O,U.N,A.H,D.a,a.G,V.f,g.t,O.P,h.Y,y.Jj,y.QX,P.$,J.t],encapsulation:2});var Tn=function(t,n,e,i){return new(e||(e=Promise))(function(a,o){function r(t){try{c(i.next(t))}catch(n){o(n)}}function s(t){try{c(i.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(r,s)}c((i=i.apply(t,n||[])).next())})};function Xn(){return(t,n)=>Tn(this,void 0,void 0,function*(){const n=(0,R.WQX)(S.Ix),e=(0,R.WQX)(s.PV),i=(0,R.WQX)(G.Di),a=(0,R.WQX)(w.o3),o=yield(0,c._)(i.activeAccount$.pipe((0,st.T)(t=>null==t?void 0:t.id))),r=yield(0,c._)(e.organizations$(o).pipe((0,s.Sw)(t.params.organizationId)));if(null==r)return n.createUrlTree(["/"]);if(r.isFreeOrg){if(!r.canEditSubscription)return yield a.openSimpleDialog({title:{key:"upgradeOrganizationCloseSecurityGaps"},content:{key:"upgradeOrganizationCloseSecurityGapsDesc"},acceptButtonText:{key:"ok"},cancelButtonText:null,type:"info"}),!1;(yield a.openSimpleDialog({title:{key:"upgradeOrganizationCloseSecurityGaps"},content:{key:"upgradeOrganizationCloseSecurityGapsDesc"},acceptButtonText:{key:"upgradeOrganization"},type:"info",icon:"bwi-plus-circle"}))&&(yield n.navigate(["organizations",r.id,"billing","subscription"],{queryParams:{upgrade:!0}}))}return!r.isFreeOrg})}var Mn=e(77259),Nn=e(95661),zn=e(73276),Yn=e(44500),Un=e(93695),xn=e(36359),Cn=e(88565),An=e(90171),Dn=e(88083),Vn=e(11573),On=e(16452),Pn=e(37967),Jn=e(98869);class Bn{constructor(t){this.message=t.humanReadableMessage,this.appIcon=t.appIcon,this.appName=t.appName,this.userId=t.userId,this.userName=t.userName,this.userEmail=t.userEmail,this.date=t.date,this.ip=t.ip,this.type=Vn.Bx[t.type],this.installationId=t.installationId}}var Qn=function(t,n,e,i){return new(e||(e=Promise))(function(a,o){function r(t){try{c(i.next(t))}catch(n){o(n)}}function s(t){try{c(i.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(r,s)}c((i=i.apply(t,n||[])).next())})};class qn{getEventExport(t){return Qn(this,void 0,void 0,function*(){return Jn.unparse(t.map(t=>new Bn(t)))})}getFileName(t=null,n="csv"){const e=new Date;return"bitwarden"+(t?"_"+t:"")+"_export_"+(e.getFullYear()+""+this.padNumber(e.getMonth()+1,2)+this.padNumber(e.getDate(),2)+this.padNumber(e.getHours(),2)+this.padNumber(e.getMinutes(),2)+this.padNumber(e.getSeconds(),2))+"."+n}padNumber(t,n,e="0"){const i=t.toString();return i.length>=n?i:new Array(n-i.length+1).join(e)+i}}qn.ɵfac=function(t){return new(t||qn)},qn.ɵprov=R.jDH({token:qn,factory:qn.ɵfac,providedIn:"root"});var _n=e(51757),Ln=e(66046),Hn=e(69194),Wn=e(33338),Kn=e(97319),Zn=e(37115),te=e(53127),ne=e(69855),ee=function(t,n,e,i){return new(e||(e=Promise))(function(a,o){function r(t){try{c(i.next(t))}catch(n){o(n)}}function s(t){try{c(i.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(r,s)}c((i=i.apply(t,n||[])).next())})};class ie{get destroy$(){return this.destroySubject$.asObservable()}constructor(t,n,e,i,a,o,r,s,c,l){this.eventService=t,this.i18nService=n,this.exportService=e,this.platformUtilsService=i,this.logService=a,this.fileDownloadService=o,this.toastService=r,this.activeRoute=s,this.accountService=c,this.organizationService=l,this.loading=!0,this.loaded=!1,this.dirtyDates=!0,this.canUseSM=!1,this.eventsForm=new _n.gE({start:new _n.MJ(null),end:new _n.MJ(null)}),this.destroySubject$=new Ln.B,this.loadMoreEvents=()=>ee(this,void 0,void 0,function*(){yield this.loadEvents(!1)}),this.refreshEvents=()=>ee(this,void 0,void 0,function*(){yield this.loadEvents(!0)}),this.exportEvents=()=>ee(this,void 0,void 0,function*(){if(this.dirtyDates)return;this.loading=!0;const t=this.parseDates();if(null==t)return;let n;try{n=this.export(t[0],t[1]),yield n}catch(e){this.logService.error(`Handled exception: ${e}`)}n=null,this.loading=!1}),this.loadEvents=t=>ee(this,void 0,void 0,function*(){const n=this.parseDates();if(null==n)return;this.loading=!0;let e,i=[];e=this.loadAndParseEvents(n[0],n[1],t?null:this.continuationToken);const a=yield e;this.continuationToken=a.continuationToken,i=a.events,!t&&null!=this.events&&this.events.length>0?this.events=this.events.concat(i):this.events=i,this.dirtyDates=!1,this.loading=!1,e=null});const p=this.eventService.getDefaultDateFilters();this.start=p[0],this.end=p[1]}initBase(){this.organizations$=this.accountService.activeAccount$.pipe((0,Hn.p)(t=>!!(null==t?void 0:t.id)),(0,Yn.n)(t=>this.organizationService.organizations$(t.id))),this.activeOrganization$=(0,Wn.z)([this.activeRoute.paramMap,this.organizations$]).pipe((0,st.T)(([t,n])=>n.find(n=>n.id===t.get("organizationId")))),this.canUseSM$=this.activeOrganization$.pipe((0,st.T)(t=>{var n;return null!==(n=null==t?void 0:t.canAccessSecretsManager)&&void 0!==n&&n})),this.canUseSM$.pipe((0,rt.Q)(this.destroy$)).subscribe(t=>{this.canUseSM=t})}ngOnDestroy(){this.destroySubject$.next(),this.destroySubject$.complete()}get start(){return this.eventsForm.value.start}set start(t){this.eventsForm.get("start").setValue(t)}get end(){return this.eventsForm.value.end}set end(t){this.eventsForm.get("end").setValue(t)}loadAndParseEvents(t,n,e){return ee(this,void 0,void 0,function*(){const i=yield this.requestEvents(t,n,e),a=yield Promise.all(i.data.map(t=>ee(this,void 0,void 0,function*(){const n=null==t.actingUserId?t.userId:t.actingUserId,e=new Pn.ng;e.disableLink=!this.canUseSM;const i=yield this.eventService.getEventInfo(t,e),a=this.getUserName(t,n),o=null!=a?a.name:this.i18nService.t("unknown");return new Kn.g({message:i.message,humanReadableMessage:i.humanReadableMessage,appIcon:i.appIcon,appName:i.appName,userId:n,userName:o,userEmail:null!=a?a.email:"",date:t.date,ip:t.ipAddress,type:t.type,installationId:t.installationId,systemUser:t.systemUser,serviceAccountId:t.serviceAccountId})})));return{continuationToken:i.continuationToken,events:a}})}parseDates(){let t=null;try{t=this.eventService.formatDateFilters(this.start,this.end)}catch(n){return this.toastService.showToast({variant:"error",title:this.i18nService.t("errorOccurred"),message:this.i18nService.t("invalidDateRange")}),null}return t}export(t,n){return ee(this,void 0,void 0,function*(){let e=this.continuationToken,i=[].concat(this.events);for(;null!=e;){const a=yield this.loadAndParseEvents(t,n,e);e=a.continuationToken,i=i.concat(a.events)}const a=yield this.exportService.getEventExport(i),o=this.exportService.getFileName(this.exportFileName,"csv");this.fileDownloadService.download({fileName:o,blobData:a,blobOptions:{type:"text/plain"}})})}}function ae(){const t=new Date,n=new Date(t.getTime()-864e5),e=n.getTime()+Math.random()*(t.getTime()-n.getTime());return new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}ie.ɵfac=function(t){return new(t||ie)(v.rXU(Pn.US),v.rXU(E.W),v.rXU(qn),v.rXU(Zn.y),v.rXU(ct.K),v.rXU(te.y),v.rXU(ne.f),v.rXU(S.nX),v.rXU(G.Di),v.rXU(s.PV))},ie.ɵdir=v.FsC({type:ie});const oe=new Array(6).fill({appName:"***",userName:"**********",userEmail:"**********",message:"**********"}),re=[{date:ae(),appName:"Extension - Firefox",userName:"Alice",userEmail:"alice@email.com",message:"Logged in"},{date:ae(),appName:"Mobile - iOS",userName:"Bob",message:'Viewed item <span class="tw-text-code">000000</span>'},{date:ae(),appName:"Desktop - Linux",userName:"Carlos",userEmail:"carlos@email.com",message:"Login attempt failed with incorrect password"},{date:ae(),appName:"Web vault - Chrome",userName:"Ivan",userEmail:"ivan@email.com",message:'Confirmed user <span class="tw-text-code">000000</span>'},{date:ae(),appName:"Mobile - Android",userName:"Franz",userEmail:"franz@email.com",message:'Sent item <span class="tw-text-code">000000</span> to trash'}].sort((t,n)=>new Date(t.date).getTime()-new Date(n.date).getTime()).concat(oe);var se=e(12012),ce=e(11224),le=e(13417),pe=e(1601),de=e(3892),ue=e(26657),ge=e(86226),he=e(97553),be=e(43759),fe=function(t,n,e,i){return new(e||(e=Promise))(function(a,o){function r(t){try{c(i.next(t))}catch(n){o(n)}}function s(t){try{c(i.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(r,s)}c((i=i.apply(t,n||[])).next())})};function me(t,n){1&t&&(v.j41(0,"span",11),v.EFF(1),v.nI1(2,"i18n"),v.k0s()),2&t&&(v.R7$(),v.SpI(" ",v.bMT(2,1,"upgrade")," "))}function Ie(t,n){1&t&&(v.j41(0,"bit-callout",12),v.nI1(1,"i18n"),v.EFF(2),v.nI1(3,"i18n"),v.k0s()),2&t&&(v.Y8G("title",v.bMT(1,2,"upgradeEventLogTitleMessage")),v.R7$(2),v.SpI(" ",v.bMT(3,4,"upgradeEventLogMessage"),"\n"))}function ve(t,n){1&t&&(v.qex(0),v.nrm(1,"i",13),v.nI1(2,"i18n"),v.j41(3,"span",14),v.EFF(4),v.nI1(5,"i18n"),v.k0s(),v.bVm()),2&t&&(v.R7$(),v.Y8G("title",v.mNQ(v.bMT(2,3,"loading"))),v.R7$(3),v.JRh(v.bMT(5,5,"loading")))}function Re(t,n){1&t&&(v.j41(0,"p"),v.EFF(1),v.nI1(2,"i18n"),v.k0s()),2&t&&(v.R7$(),v.JRh(v.bMT(2,1,"noEventsInList")))}function $e(t,n){if(1&t&&(v.j41(0,"tr",20)(1,"td",21),v.EFF(2),v.nI1(3,"date"),v.k0s(),v.j41(4,"td",17)(5,"span",22),v.EFF(6),v.k0s()(),v.j41(7,"td",17)(8,"span",22),v.EFF(9),v.k0s()(),v.nrm(10,"td",23),v.k0s()),2&t){const t=n.$implicit,e=n.index;v.XpG(4);const i=v.r8f(0);v.R7$(2),v.SpI(" ",e>4&&i?"******":v.i5U(3,9,t.date,"medium")," "),v.R7$(3),v.Y8G("title",v.ai1("",t.appName,", ",t.ip)),v.R7$(),v.JRh(t.appName),v.R7$(2),v.Y8G("title",v.mNQ(t.userEmail)),v.R7$(),v.JRh(t.userName),v.R7$(),v.Y8G("innerHTML",t.message,v.npT)}}function Fe(t,n){if(1&t&&v.DNE(0,$e,11,12,"tr",19),2&t){v.XpG(2);const t=v.r8f(1);v.Y8G("ngForOf",t)}}function we(t,n){1&t&&(v.j41(0,"bit-table"),v.qex(1,16),v.j41(2,"tr")(3,"th",17),v.EFF(4),v.nI1(5,"i18n"),v.k0s(),v.j41(6,"th",17),v.EFF(7),v.nI1(8,"i18n"),v.k0s(),v.j41(9,"th",17),v.EFF(10),v.nI1(11,"i18n"),v.k0s(),v.j41(12,"th",17),v.EFF(13),v.nI1(14,"i18n"),v.k0s()(),v.bVm(),v.DNE(15,Fe,1,1,"ng-template",18),v.k0s()),2&t&&(v.R7$(4),v.JRh(v.bMT(5,4,"timestamp")),v.R7$(3),v.JRh(v.bMT(8,6,"client")),v.R7$(3),v.JRh(v.bMT(11,8,"member")),v.R7$(3),v.JRh(v.bMT(14,10,"event")))}function Ge(t,n){if(1&t&&(v.j41(0,"button",24),v.EFF(1),v.nI1(2,"i18n"),v.k0s()),2&t){const t=v.XpG(2);v.Y8G("bitAction",t.loadMoreEvents),v.R7$(),v.SpI(" ",v.bMT(2,2,"loadMore")," ")}}function Se(t,n){if(1&t&&(v.qex(0),v.SS7(1),v.DNE(2,Re,3,3,"p",10)(3,we,16,12,"bit-table",10)(4,Ge,3,4,"button",15),v.bVm()),2&t){const t=v.XpG();v.R7$();const n=v.bH3(null!=t.organization&&t.organization.useEvents?t.events:t.placeholderEvents);v.R7$(),v.Y8G("ngIf",!n||!n.length),v.R7$(),v.Y8G("ngIf",n&&n.length),v.R7$(),v.Y8G("ngIf",t.continuationToken)}}function Ee(t,n){if(1&t){const t=v.RV6();v.qex(0),v.j41(1,"div",25)(2,"div",26),v.nrm(3,"i",27),v.j41(4,"p",28),v.EFF(5),v.nI1(6,"i18n"),v.k0s(),v.j41(7,"p"),v.EFF(8),v.nI1(9,"i18n"),v.k0s(),v.j41(10,"button",29),v.bIt("click",function(){R.eBV(t);const n=v.XpG();return R.Njj(n.changePlan())}),v.EFF(11),v.nI1(12,"i18n"),v.k0s()()(),v.bVm()}2&t&&(v.R7$(5),v.SpI(" ",v.bMT(6,3,"upgradeEventLogTitleMessage")," "),v.R7$(3),v.SpI(" ",v.bMT(9,5,"upgradeForFullEventsMessage")," "),v.R7$(3),v.SpI(" ",v.bMT(12,7,"changeBillingPlan")," "))}const ye={[Vn.p2.SCIM]:null,[Vn.p2.DomainVerification]:"domainVerification",[Vn.p2.PublicApi]:"publicApi"};class je extends ie{constructor(t,n,e,i,a,o,r,s,c,l,p,d,u,g,h,b,f,m){super(e,i,a,o,r,u,g,m,h,c),this.apiService=t,this.route=n,this.userNamePipe=s,this.organizationService=c,this.organizationUserApiService=l,this.organizationApiService=p,this.providerService=d,this.accountService=h,this.dialogService=b,this.configService=f,this.activeRoute=m,this.exportFileName="org-events",this.placeholderEvents=re,this.orgUsersUserIdMap=new Map,this.ProductTierType=Dn.K_}ngOnInit(){return fe(this,void 0,void 0,function*(){this.initBase();const t=yield(0,c._)((0,l.F6)(this.accountService.activeAccount$));this.route.params.pipe((0,zn.H)(n=>fe(this,void 0,void 0,function*(){this.organizationId=n.organizationId,this.organization=yield(0,c._)(this.organizationService.organizations$(t).pipe((0,s.Sw)(this.organizationId))),this.organization.useEvents||(this.eventsForm.get("start").disable(),this.eventsForm.get("end").disable(),this.organizationSubscription=yield this.organizationApiService.getSubscription(this.organizationId)),yield this.load()})),(0,rt.Q)(this.destroy$)).subscribe()})}load(){return fe(this,void 0,void 0,function*(){if((yield this.organizationUserApiService.getAllMiniUserDetails(this.organizationId)).data.forEach(t=>{const n=this.userNamePipe.transform(t);this.orgUsersUserIdMap.set(t.userId,{name:n,email:t.email})}),null!=this.organization.providerId)try{yield(0,c._)(this.accountService.activeAccount$.pipe(l.F6,(0,Yn.n)(t=>this.providerService.get$(this.organization.providerId,t)),(0,st.T)(t=>null!=t&&t.canManageUsers),(0,Yn.n)(t=>t?this.apiService.getProviderUsers(this.organization.providerId):(0,Un.of)(null)),(0,xn.M)(t=>{t&&t.data.forEach(t=>{const n=this.userNamePipe.transform(t);this.orgUsersUserIdMap.set(t.userId,{name:`${n} (${this.organization.providerName})`,email:t.email})})})))}catch(t){this.logService.warning(t)}yield this.refreshEvents(),this.loaded=!0})}requestEvents(t,n,e){return this.apiService.getEventsOrganization(this.organizationId,t,n,e)}getUserName(t,n){if(null!=t.installationId)return{name:`Installation: ${t.installationId}`};if(null!=n){if(this.orgUsersUserIdMap.has(n))return this.orgUsersUserIdMap.get(n);if(null!=t.providerId&&t.providerId===this.organization.providerId)return{name:this.organization.providerName}}if(null!=t.systemUser){const n=ye[t.systemUser];return n?{name:this.i18nService.t(n)}:{name:Vn.p2[t.systemUser]}}return t.serviceAccountId?{name:this.i18nService.t("machineAccount")+" "+this.getShortId(t.serviceAccountId)}:null}getShortId(t){return null==t?void 0:t.substring(0,8)}changePlan(){return fe(this,void 0,void 0,function*(){const t=(0,On.IO)(this.dialogService,{data:{organizationId:this.organizationId,subscription:this.organizationSubscription,productTierType:this.organization.productTierType}});(yield(0,Cn.s)(t.closed))!==On.d1.Closed&&(yield this.load())})}}je.ɵfac=function(t){return new(t||je)(v.rXU(se.G),v.rXU(S.nX),v.rXU(Pn.US),v.rXU(E.W),v.rXU(qn),v.rXU(Zn.y),v.rXU(ct.K),v.rXU(An.b),v.rXU(s.PV),v.rXU(qt.uB),v.rXU(ce.X),v.rXU(le.$),v.rXU(te.y),v.rXU(ne.f),v.rXU(G.Di),v.rXU(w.o3),v.rXU(pe.w),v.rXU(S.nX))},je.ɵcmp=v.VBU({type:je,selectors:[["ng-component"]],features:[v.Vt3],decls:33,vars:31,consts:[["bitBadge","","variant","primary","slot","title-suffix","class","tw-ml-2 tw-mt-1.5 tw-inline-flex tw-items-center",4,"ngIf"],[1,"tw-mb-4",3,"formGroup"],[1,"tw-mt-4","tw-flex","tw-items-center"],["bitInput","","type","datetime-local","formControlName","start",3,"change","placeholder"],[1,"tw-mx-2"],["bitInput","","type","datetime-local","formControlName","end",3,"change","placeholder"],["type","button","bitButton","","bitFormButton","","buttonType","primary",1,"tw-mx-3","tw-mt-1",3,"bitAction","disabled"],["type","button","bitButton","","bitFormButton","",1,"tw-mt-1",3,"bitAction","disabled"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-sign-in"],["type","info",3,"title",4,"ngIf"],[4,"ngIf"],["bitBadge","","variant","primary","slot","title-suffix",1,"tw-ml-2","tw-mt-1.5","tw-inline-flex","tw-items-center"],["type","info",3,"title"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","tw-text-muted",3,"title"],[1,"tw-sr-only"],["type","button","bitButton","","buttonType","primary",3,"bitAction",4,"ngIf"],["header",""],["bitCell",""],["body",""],["bitRow","","alignContent","top",4,"ngFor","ngForOf"],["bitRow","","alignContent","top"],["bitCell","",1,"tw-whitespace-nowrap"],[3,"title"],["bitCell","",3,"innerHTML"],["type","button","bitButton","","buttonType","primary",3,"bitAction"],[1,"tw-relative","tw--top-72","tw-bg-background","tw-bg-opacity-90","tw-pb-5","tw-flex","tw-items-center","tw-justify-center","tw-h-[19rem]"],[1,"tw-bg-background","tw-max-w-xl","tw-flex-col","tw-justify-center","tw-text-center","tw-p-5","tw-px-10","tw-rounded","tw-border-0","tw-border-b","tw-border-secondary-300","tw-border-solid","tw-mt-5"],[1,"bwi","bwi-2x","bwi-business","tw-text-primary-600"],[1,"tw-font-medium","tw-mt-2"],["type","button","bitButton","","buttonType","primary",1,"tw-mt-1",3,"click"]],template:function(t,n){if(1&t){const t=v.RV6();v.SS7(0),v.j41(1,"app-header"),v.DNE(2,me,3,3,"span",0),v.k0s(),v.j41(3,"div",1)(4,"div",2)(5,"bit-form-field")(6,"bit-label"),v.EFF(7),v.nI1(8,"i18n"),v.k0s(),v.j41(9,"input",3),v.nI1(10,"i18n"),v.bIt("change",function(){return R.eBV(t),R.Njj(n.dirtyDates=!0)}),v.k0s()(),v.j41(11,"span",4),v.EFF(12,"-"),v.k0s(),v.j41(13,"bit-form-field")(14,"bit-label"),v.EFF(15),v.nI1(16,"i18n"),v.k0s(),v.j41(17,"input",5),v.nI1(18,"i18n"),v.bIt("change",function(){return R.eBV(t),R.Njj(n.dirtyDates=!0)}),v.k0s()(),v.j41(19,"form")(20,"button",6),v.EFF(21),v.nI1(22,"i18n"),v.k0s()(),v.j41(23,"form")(24,"button",7)(25,"span"),v.EFF(26),v.nI1(27,"i18n"),v.k0s(),v.nrm(28,"i",8),v.k0s()()()(),v.DNE(29,Ie,4,6,"bit-callout",9)(30,ve,6,7,"ng-container",10)(31,Se,5,4,"ng-container",10)(32,Ee,13,9,"ng-container",10)}if(2&t){const t=v.bH3(!(null!=n.organization&&n.organization.useEvents));v.R7$(2),v.Y8G("ngIf",t),v.R7$(),v.Y8G("formGroup",n.eventsForm),v.R7$(4),v.JRh(v.bMT(8,19,"from")),v.R7$(2),v.Y8G("placeholder",v.mNQ(v.bMT(10,21,"startDate"))),v.R7$(6),v.JRh(v.bMT(16,23,"to")),v.R7$(2),v.Y8G("placeholder",v.mNQ(v.bMT(18,25,"endDate"))),v.R7$(3),v.Y8G("bitAction",n.refreshEvents)("disabled",t),v.R7$(),v.SpI(" ",v.bMT(22,27,"update")," "),v.R7$(3),v.Y8G("bitAction",n.exportEvents)("disabled",n.dirtyDates||t),v.R7$(2),v.JRh(v.bMT(27,29,"export")),v.R7$(3),v.Y8G("ngIf",n.loaded&&t),v.R7$(),v.Y8G("ngIf",!n.loaded),v.R7$(),v.Y8G("ngIf",n.loaded),v.R7$(),v.Y8G("ngIf",n.loaded&&t)}},dependencies:[u.G,y.Sq,y.bT,_n.qT,_n.me,_n.BC,_n.cb,_n.cV,_n.j4,_n.JD,de.p,ue.$,X.n,M.Q,N.G,ge.j,he.J,be.h,x.Q,ut.Y,gt._,gt.O,a.G,V.f,y.vh,P.$],encapsulation:2});var ke=e(12610),Te=e(58806),Xe=e(25219),Me=function(t,n,e,i){return new(e||(e=Promise))(function(a,o){function r(t){try{c(i.next(t))}catch(n){o(n)}}function s(t){try{c(i.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(r,s)}c((i=i.apply(t,n||[])).next())})};function Ne(t,n){if(1&t&&(v.qex(0),v.nrm(1,"app-header"),v.j41(2,"p",3),v.EFF(3),v.nI1(4,"i18n"),v.k0s(),v.nrm(5,"app-report-list",4),v.nI1(6,"async"),v.bVm()),2&t){const t=v.XpG();v.R7$(3),v.JRh(v.bMT(4,2,"orgsReportsDesc")),v.R7$(2),v.Y8G("reports",v.bMT(6,4,t.reports$))}}function ze(t,n){1&t&&(v.j41(0,"a",5),v.nrm(1,"i",6),v.EFF(2),v.nI1(3,"i18n"),v.k0s()),2&t&&(v.R7$(2),v.SpI(" ",v.bMT(3,1,"backToReports")," "))}class Ye{constructor(t,n,e,i){this.route=t,this.organizationService=n,this.accountService=e,this.router=i}ngOnInit(){return Me(this,void 0,void 0,function*(){this.homepage$=this.router.events.pipe((0,Hn.p)(t=>t instanceof S.wF),(0,st.T)(t=>this.isReportsHomepageRouteUrl(t.urlAfterRedirects)),(0,ke.Z)(this.isReportsHomepageRouteUrl(this.router.url)));const t=yield(0,c._)((0,l.F6)(this.accountService.activeAccount$));this.reports$=this.route.params.pipe((0,zn.H)(n=>this.organizationService.organizations$(t).pipe((0,s.Sw)(n.organizationId))),(0,st.T)(t=>this.buildReports(t.productTierType)))})}buildReports(t){const n=t==Dn.K_.Free?i.C0.RequiresUpgrade:i.C0.Enabled;return[Object.assign(Object.assign({},i.uE[i.nI.ExposedPasswords]),{variant:n}),Object.assign(Object.assign({},i.uE[i.nI.ReusedPasswords]),{variant:n}),Object.assign(Object.assign({},i.uE[i.nI.WeakPasswords]),{variant:n}),Object.assign(Object.assign({},i.uE[i.nI.UnsecuredWebsites]),{variant:n}),Object.assign(Object.assign({},i.uE[i.nI.Inactive2fa]),{variant:n}),Object.assign(Object.assign({},i.uE[i.nI.MemberAccessReport]),{variant:t==Dn.K_.Enterprise?i.C0.Enabled:i.C0.RequiresEnterprise})]}isReportsHomepageRouteUrl(t){return t.endsWith("/reports")}}Ye.ɵfac=function(t){return new(t||Ye)(v.rXU(S.nX),v.rXU(s.PV),v.rXU(G.Di),v.rXU(S.Ix))},Ye.ɵcmp=v.VBU({type:Ye,selectors:[["app-org-reports-home"]],standalone:!1,decls:6,vars:6,consts:[[4,"ngIf"],[1,"tw-mt-4"],["bitButton","","routerLink","./",4,"ngIf"],["bitTypography","body1"],[3,"reports"],["bitButton","","routerLink","./"],["aria-hidden","true",1,"bwi","bwi-angle-left"]],template:function(t,n){1&t&&(v.DNE(0,Ne,7,6,"ng-container",0),v.nI1(1,"async"),v.nrm(2,"router-outlet"),v.j41(3,"div",1),v.DNE(4,ze,4,3,"a",2),v.nI1(5,"async"),v.k0s()),2&t&&(v.Y8G("ngIf",v.bMT(1,2,n.homepage$)),v.R7$(4),v.Y8G("ngIf",!v.bMT(5,4,n.homepage$)))},dependencies:[y.bT,S.n3,r.Wk,M.Q,Te.r,Xe.i,V.f,y.Jj,P.$],encapsulation:2});const Ue=[{path:"",canActivate:[(0,Mn.V)(s.Ue)],children:[{path:"",pathMatch:"full",canActivate:[(0,Nn.r)(function(t){if(t.canAccessEventLogs)return"events";if(t.canAccessReports)return"reports";return})],children:[]},{path:"reports",component:Ye,canActivate:[(0,Mn.V)()],data:{titleId:"reports"},children:[{path:"exposed-passwords-report",component:ot,data:{titleId:"exposedPasswordsReport"},canActivate:[Xn()]},{path:"inactive-two-factor-report",component:Tt,data:{titleId:"inactive2faReport"},canActivate:[Xn()]},{path:"reused-passwords-report",component:Qt,data:{titleId:"reusedPasswordsReport"},canActivate:[Xn()]},{path:"unsecured-websites-report",component:dn,data:{titleId:"unsecuredWebsitesReport"},canActivate:[Xn()]},{path:"weak-passwords-report",component:kn,data:{titleId:"weakPasswordsReport"},canActivate:[Xn()]}]},{path:"events",component:je,canActivate:[(0,Mn.V)(t=>t.canAccessEventLogs||t.isOwner)],data:{titleId:"eventLogs"}}]}];class xe{}xe.ɵfac=function(t){return new(t||xe)},xe.ɵmod=v.$C({type:xe}),xe.ɵinj=R.G2t({imports:[r.iI.forChild(Ue),r.iI]});class Ce{}Ce.ɵfac=function(t){return new(t||Ce)},Ce.ɵmod=v.$C({type:Ce}),Ce.ɵinj=R.G2t({imports:[o.G,i.DF,xe,a.G]})}}]);
//# sourceMappingURL=449.f9ec1c26355fef21d987.js.map