(()=>{"use strict";function t(t){const e=window.location.href;t=t.replace(/[\[\]]/g,"\\$&");const n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}var e=function(t,e,n,o){return new(n||(n=Promise))(function(s,a){function i(t){try{l(o.next(t))}catch(e){a(e)}}function r(t){try{l(o.throw(t))}catch(e){a(e)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,r)}l((o=o.apply(t,e||[])).next())})};class n{constructor(t,e,n){this.systemLanguage=t,this.localesDirectory=e,this.getLocalesJson=n,this.supportedTranslationLocales=["en"],this.defaultLocale="en",this.localeNames=new Map([["af","Afrikaans"],["ar","العربية الفصحى"],["az","Azərbaycanca"],["be","Беларуская"],["bg","български"],["bn","বাংলা"],["bs","bosanski jezik"],["ca","català"],["cs","čeština"],["cy","Cymraeg, y Gymraeg"],["da","dansk"],["de","Deutsch"],["el","Ελληνικά"],["en","English"],["en-GB","English (British)"],["en-IN","English (India)"],["eo","Esperanto"],["es","español"],["et","eesti"],["eu","euskara"],["fa","فارسی"],["fi","suomi"],["fil","Wikang Filipino"],["fr","français"],["gl","galego"],["he","עברית"],["hi","हिन्दी"],["hr","hrvatski"],["hu","magyar"],["id","Bahasa Indonesia"],["it","italiano"],["ja","日本語"],["ka","ქართული"],["km","ខ្មែរ, ខេមរភាសា, ភាសាខ្មែរ"],["kn","ಕನ್ನಡ"],["ko","한국어"],["lt","lietuvių kalba"],["lv","Latvietis"],["me","црногорски"],["ml","മലയാളം"],["mr","मराठी"],["my","ဗမာစကား"],["nb","norsk (bokmål)"],["ne","नेपाली"],["nl","Nederlands"],["nn","Norsk Nynorsk"],["or","ଓଡ଼ିଆ"],["pl","polski"],["pt-BR","português do Brasil"],["pt-PT","português"],["ro","română"],["ru","русский"],["si","සිංහල"],["sk","slovenčina"],["sl","Slovenski jezik, Slovenščina"],["sr","Српски"],["sv","svenska"],["ta","தமிழ்"],["te","తెలుగు"],["th","ไทย"],["tr","Türkçe"],["uk","українська"],["vi","Tiếng Việt"],["zh-CN","中文（中国大陆）"],["zh-TW","中文（台灣）"]]),this.defaultMessages={},this.localeMessages={},this.systemLanguage=t.replace("_","-")}init(t){return e(this,void 0,void 0,function*(){if(this.inited)throw new Error("i18n already initialized.");if(null==this.supportedTranslationLocales||0===this.supportedTranslationLocales.length)throw new Error("supportedTranslationLocales not set.");this.inited=!0,this.translationLocale=null!=t?t:this.systemLanguage;try{this.collator=new Intl.Collator(this.translationLocale,{numeric:!0,sensitivity:"base"})}catch(e){this.collator=null}-1===this.supportedTranslationLocales.indexOf(this.translationLocale)&&(this.translationLocale=this.translationLocale.slice(0,2),-1===this.supportedTranslationLocales.indexOf(this.translationLocale)&&(this.translationLocale=this.defaultLocale)),null!=this.localesDirectory&&(yield this.loadMessages(this.translationLocale,this.localeMessages),this.translationLocale!==this.defaultLocale&&(yield this.loadMessages(this.defaultLocale,this.defaultMessages)))})}t(t,e,n,o){return this.translate(t,e,n,o)}translate(t,e,n,o){let s;return s=this.localeMessages.hasOwnProperty(t)&&this.localeMessages[t]?this.localeMessages[t]:this.defaultMessages.hasOwnProperty(t)&&this.defaultMessages[t]?this.defaultMessages[t]:"",""!==s&&(null!=e&&(s=s.split("__$1__").join(e.toString())),null!=n&&(s=s.split("__$2__").join(n.toString())),null!=o&&(s=s.split("__$3__").join(o.toString()))),s}loadMessages(t,n){return e(this,void 0,void 0,function*(){const e=t.replace("-","_"),o=yield this.getLocalesJson(e);for(const t in o)if(o.hasOwnProperty(t)&&(n[t]=o[t].message,o[t].placeholders))for(const e in o[t].placeholders){if(!o[t].placeholders.hasOwnProperty(e)||!o[t].placeholders[e].content)continue;const s="\\$"+e.toUpperCase()+"\\$";let a=o[t].placeholders[e].content;"$1"!==a&&"$2"!==a&&"$3"!==a||(a="__$"+a+"__"),n[t]=n[t].replace(new RegExp(s,"g"),a)}})}}const o=["en","af","ar","az","be","bg","bn","bs","ca","cs","cy","da","de","el","en-GB","en-IN","eo","es","et","eu","fa","fi","fil","fr","gl","he","hi","hr","hu","id","it","ja","ka","km","kn","ko","lv","ml","mr","my","nb","ne","nl","nn","or","pl","pt-PT","pt-BR","ro","ru","si","sk","sl","sr","sv","ta","te","th","tr","uk","vi","zh-CN","zh-TW"];var s=function(t,e,n,o){return new(n||(n=Promise))(function(s,a){function i(t){try{l(o.next(t))}catch(e){a(e)}}function r(t){try{l(o.throw(t))}catch(e){a(e)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,r)}l((o=o.apply(t,e||[])).next())})};class a extends n{constructor(t,e){super(t||"en-US",e,t=>s(this,void 0,void 0,function*(){const e=this.localesDirectory+"/"+t+"/messages.json?cache=lk5dgl",n=yield fetch(e);return yield n.json()})),this.supportedTranslationLocales=o}get translationLocale(){return this._translationLocale}set translationLocale(t){this._translationLocale=t}}var i=function(t,e,n,o){return new(n||(n=Promise))(function(s,a){function i(t){try{l(o.next(t))}catch(e){a(e)}}function r(t){try{l(o.throw(t))}catch(e){a(e)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,r)}l((o=o.apply(t,e||[])).next())})};let r=null;function l(t){var e;const n=document.getElementById("content");if(!n)throw new Error("content element not found");n.className="tw-text-center",n.innerHTML="";const o=document.createElement("h1"),s=document.createElement("p");if(!r)throw new Error("localeService is not initialized");if(o.textContent=r.t("youSuccessfullyLoggedIn"),s.textContent="web"==t?r.t("thisWindowWillCloseIn5Seconds"):r.t("youMayCloseThisWindow"),o.className="tw-font-medium",s.className="tw-mb-4",n.appendChild(o),n.appendChild(s),"web"==t){const t=document.createElement("button");if(t.textContent=r.t("close"),t.className="tw-bg-primary-600 hover:tw-bg-primary-700 tw-text-contrast tw-px-4 tw-py-2 tw-rounded-md tw-transition tw-border-transparent tw-text-center focus:tw-outline-none",t.addEventListener("click",()=>{window.close()}),n.appendChild(t),null===s.textContent)throw new Error("count down container is null");const o=(null===(e=s.textContent.match(/\d+/))||void 0===e?void 0:e[0])||null;if(!o)throw new Error("count down time cannot be null");let a=Number(o);const i=setInterval(()=>{if(a>1){if(null===s.textContent)throw new Error("count down container is null");s.textContent=s.textContent.replace(String(a),String(a-1)),a--}else clearInterval(i),window.close()},1e3)}}window.addEventListener("load",()=>i(void 0,void 0,void 0,function*(){const e=t("duoFramelessUrl");if(e)return void function(t){const e=/^api-[a-zA-Z0-9]+\.(duosecurity|duofederal)\.com$/,n=new URL(t);if(n.username||n.password)throw new Error("Invalid redirect URL: embedded credentials not allowed");if("https:"!==n.protocol)throw new Error("Invalid redirect URL: invalid protocol");if(n.port&&"443"!==n.port)throw new Error("Invalid redirect URL: port not allowed");if("/oauth/v1/authorize"!==n.pathname)throw new Error("Invalid redirect URL: invalid pathname");if(!e.test(n.hostname))throw new Error("Invalid redirect URL");window.location.href=t}(e);const n=t("client"),o=t("code"),s=t("state");if(!n)throw new Error("client is null");if(!o)throw new Error("code is null");if(!s)throw new Error("state is null");if(r=new a(navigator.language,"locales"),yield r.init(),"web"===n){const t=new BroadcastChannel("duoResult");t.postMessage({code:o,state:s}),t.close(),l(n)}else"browser"===n?(window.postMessage({command:"duoResult",code:o,state:s},window.location.origin),l(n)):"mobile"!==n&&"desktop"!==n||("desktop"===n&&l(n),document.location.replace("bitwarden://duo-callback?code="+encodeURIComponent(o)+"&state="+encodeURIComponent(s)))}))})();
//# sourceMappingURL=duo-redirect.de17e5f84b9b9d6cc013.js.map