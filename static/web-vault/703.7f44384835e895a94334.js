"use strict";(self.webpackChunk_bitwarden_web_vault=self.webpackChunk_bitwarden_web_vault||[]).push([[703],{58703:(t,e,i)=>{i.r(e),i.d(e,{MembersModule:()=>$o});var n=i(4170),s=i(49355),o=i(11994),r=i(25065),a=i(5326),c=i(51757),l=i(66046),d=i(72245),u=i(33338),p=i(3204),h=i(44500),g=i(27442),m=i(93695),b=i(14803),f=i(44451),v=i(67553),y=i(52759),I=i(95919),S=i(10436),w=i(82468),R=i(81525),k=i(81667),$=i(38766),F=i(95637),T=i(3867),M=i(21274),G=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((n=n.apply(t,e||[])).next())}))};const E=new F.Ok(F.BA,"showDeleteManagedUserWarning",{deserializer:t=>t,clearOn:[]});class U{constructor(t,e){this.stateProvider=t,this.dialogService=e,this._acknowledged=this.stateProvider.getActive(E),this.acknowledgedState$=this._acknowledged.state$}acknowledgeWarning(t){return G(this,void 0,void 0,(function*(){yield this._acknowledged.update((e=>t?e?e.includes(t)?e:[...e,t]:[t]:e))}))}showWarning(){return G(this,void 0,void 0,(function*(){const t=yield this.dialogService.openSimpleDialog({title:{key:"deleteManagedUserWarning"},content:{key:"deleteManagedUserWarningDesc"},type:"danger",icon:"bwi-exclamation-triangle",acceptButtonText:{key:"continue"},cancelButtonText:{key:"cancel"}});return t||!1}))}warningAcknowledged(t){return this.acknowledgedState$.pipe((0,p.T)((e=>{var i;return null!==(i=null==e?void 0:e.includes(t))&&void 0!==i&&i})))}}function j(t){return""!==t.value&&t.value&&void 0!==t.value.split(",").map((t=>c.k0.email({value:t.trim()}))).find((t=>null!==t))?{multipleEmails:{message:"multipleInputEmails"}}:null}function C(t,e){return i=>{var n;if(!(null===(n=i.value)||void 0===n?void 0:n.trim()))return null;const s=t.productTierType===S.K_.TeamsStarter?10:20,o=function(t){const e=t.value.split(",").filter((t=>t&&""!==t.trim()));return Array.from(new Set(e))}(i);return o.length<=s?null:{tooManyEmails:{message:e(s)}}}}function x(t,e,i,n){return s=>{var o;if(!(null===(o=s.value)||void 0===o?void 0:o.trim()))return null;if(!function(t){switch(t){case S.K_.Free:case S.K_.Families:case S.K_.TeamsStarter:return!0;default:return!1}}(t.productTierType))return null;const r=n+function(t,e){const i=Array.from(new Set(e.value.split(",").filter((e=>e&&""!==e.trim()&&!t.some((t=>t===e.trim()))))));return i.length}(e,s);return r>t.seats?{seatLimitReached:{message:i}}:null}}U.ɵfac=function(t){return new(t||U)(T.KVO(F.v2),T.KVO(M.o3))},U.ɵprov=T.jDH({token:U,factory:U.ɵfac,providedIn:"root"});var P=i(69855),z=i(50700),D=i(35500),X=i(1601),N=i(5253),A=i(54471),Y=i(3892),B=i(26657),V=i(45154),O=i(47696),J=i(56898),q=i(50352),K=i(34355),W=i(90246),L=i(86226),_=i(99917),Q=i(97553),H=i(43759),Z=i(59032),tt=i(24374),et=i(17721),it=i(88516),nt=i(49608),st=i(58806),ot=i(43184),rt=i(78781),at=i(88016);function ct(t,e){if(1&t){const t=T.RV6();T.j41(0,"div")(1,"bit-form-control")(2,"input",5),T.bIt("change",(function(){T.eBV(t);const e=T.XpG(2);return T.Njj(e.onChildCheck())})),T.k0s(),T.j41(3,"bit-label"),T.EFF(4),T.nI1(5,"i18n"),T.k0s()()()}if(2&t){const t=T.XpG().$implicit;T.R7$(2),T.Y8G("formControl",t.value),T.R7$(2),T.JRh(T.bMT(5,2,t.key))}}function lt(t,e){if(1&t&&(T.qex(0),T.DNE(1,ct,6,4,"div",4),T.bVm()),2&t){const t=e.$implicit,i=T.XpG();T.R7$(),T.Y8G("ngIf",t.key!=i.parentId)}}class dt{constructor(){this.destroy$=new l.B}get parentIndeterminate(){return this.children.some((([t,e])=>1==e.value))&&!this.children.every((([t,e])=>1==e.value))}ngOnInit(){this.checkboxes.controls[this.parentId].valueChanges.pipe((0,b.Q)(this.destroy$)).subscribe((t=>{Object.values(this.checkboxes.controls).forEach((e=>e.setValue(t,{emitEvent:!1})))}))}get parentCheckbox(){return this.checkboxes.controls[this.parentId]}get children(){return Object.entries(this.checkboxes.controls).filter((([t,e])=>t!=this.parentId))}onChildCheck(){const t=this.children.every((([t,e])=>1==e.value));this.parentCheckbox.setValue(t,{emitEvent:!1})}key(t,e){return e.key}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}pascalize(t){return rt.A.camelToPascalCase(t)}}dt.ɵfac=function(t){return new(t||dt)},dt.ɵcmp=T.VBU({type:dt,selectors:[["app-nested-checkbox"]],inputs:{parentId:"parentId",checkboxes:"checkboxes"},standalone:!1,decls:9,vars:10,consts:[[3,"formGroup"],["type","checkbox","bitCheckbox","",3,"formControlName","indeterminate"],[1,"tw-ml-4"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["type","checkbox","bitCheckbox","",3,"change","formControl"]],template:function(t,e){1&t&&(T.j41(0,"div",0)(1,"bit-form-control"),T.nrm(2,"input",1),T.j41(3,"bit-label"),T.EFF(4),T.nI1(5,"i18n"),T.k0s()(),T.j41(6,"div",2),T.DNE(7,lt,2,1,"ng-container",3),T.nI1(8,"keyvalue"),T.k0s()()),2&t&&(T.Y8G("formGroup",e.checkboxes),T.R7$(2),T.Y8G("formControlName",e.parentId)("indeterminate",e.parentIndeterminate),T.R7$(2),T.JRh(T.bMT(5,6,e.parentId)),T.R7$(3),T.Y8G("ngForOf",T.bMT(8,8,e.checkboxes.controls))("ngForTrackBy",e.key))},dependencies:[N.Sq,N.bT,c.Zm,c.BC,c.cb,c.l_,c.j4,c.JD,q.P,W.f,L.m,N.lG,at.$],encapsulation:2});var ut=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((n=n.apply(t,e||[])).next())}))};const pt=t=>({seats:t});function ht(t,e){if(1&t&&(T.j41(0,"span",15),T.EFF(1),T.nI1(2,"async"),T.k0s()),2&t){let t;const e=T.XpG();T.R7$(),T.JRh(null==(t=T.bMT(2,1,e.editParams$))?null:t.name)}}function gt(t,e){1&t&&(T.j41(0,"span",16),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.JRh(T.bMT(2,1,"revoked")))}function mt(t,e){1&t&&(T.qex(0),T.nrm(1,"i",17),T.nI1(2,"i18n"),T.j41(3,"span",18),T.EFF(4),T.nI1(5,"i18n"),T.k0s(),T.bVm()),2&t&&(T.R7$(),T.FS9("title",T.bMT(2,2,"loading")),T.R7$(3),T.JRh(T.bMT(5,4,"loading")))}function bt(t,e){if(1&t&&(T.j41(0,"bit-hint"),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t){const t=T.XpG().ngIf;T.R7$(),T.JRh(T.i5U(2,1,"inviteMultipleEmailDesc",t.seats))}}function ft(t,e){1&t&&(T.j41(0,"bit-hint"),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.JRh(T.bMT(2,1,"inviteSingleEmailDesc")))}function vt(t,e){1&t&&(T.j41(0,"bit-hint"),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.JRh(T.bMT(2,1,"inviteZeroEmailDesc")))}function yt(t,e){if(1&t&&(T.j41(0,"bit-form-field")(1,"bit-label"),T.EFF(2),T.nI1(3,"i18n"),T.k0s(),T.nrm(4,"input",33),T.DNE(5,bt,3,4,"bit-hint",7)(6,ft,3,3,"bit-hint",7)(7,vt,3,3,"bit-hint",7),T.k0s()),2&t){const t=e.ngIf;T.R7$(2),T.JRh(T.bMT(3,4,"email")),T.R7$(3),T.Y8G("ngIf",t.seats>1),T.R7$(),T.Y8G("ngIf",1===t.seats),T.R7$(),T.Y8G("ngIf",0===t.seats)}}function It(t,e){if(1&t&&(T.qex(0),T.j41(1,"p",32),T.EFF(2),T.nI1(3,"i18n"),T.k0s(),T.DNE(4,yt,8,6,"bit-form-field",7),T.nI1(5,"async"),T.bVm()),2&t){const t=T.XpG(2);T.R7$(2),T.JRh(T.bMT(3,2,"inviteUserDesc")),T.R7$(2),T.Y8G("ngIf",T.eq3(6,pt,T.bMT(5,4,t.remainingSeats$)))}}function St(t,e){1&t&&(T.qex(0),T.j41(1,"p"),T.EFF(2),T.nI1(3,"i18n"),T.j41(4,"a",34),T.EFF(5),T.nI1(6,"i18n"),T.k0s(),T.EFF(7),T.nI1(8,"i18n"),T.k0s(),T.bVm()),2&t&&(T.R7$(2),T.SpI(" ",T.bMT(3,3,"customDescNonEnterpriseStart"),""),T.R7$(3),T.JRh(T.bMT(6,5,"customDescNonEnterpriseLink")),T.R7$(2),T.SpI("",T.bMT(8,7,"customDescNonEnterpriseEnd")," "))}function wt(t,e){1&t&&(T.j41(0,"p"),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.JRh(T.bMT(2,1,"customDesc")))}function Rt(t,e){if(1&t){const t=T.RV6();T.qex(0),T.j41(1,"div",35)(2,"div",36)(3,"bit-form-control"),T.nrm(4,"input",37),T.j41(5,"bit-label"),T.EFF(6),T.nI1(7,"i18n"),T.k0s()(),T.j41(8,"bit-form-control"),T.nrm(9,"input",38),T.j41(10,"bit-label"),T.EFF(11),T.nI1(12,"i18n"),T.k0s()(),T.j41(13,"bit-form-control"),T.nrm(14,"input",39),T.j41(15,"bit-label"),T.EFF(16),T.nI1(17,"i18n"),T.k0s()()(),T.j41(18,"div",36),T.nrm(19,"app-nested-checkbox",40),T.k0s(),T.j41(20,"div",36)(21,"div",41)(22,"bit-form-control"),T.nrm(23,"input",42),T.j41(24,"bit-label"),T.EFF(25),T.nI1(26,"i18n"),T.k0s()(),T.j41(27,"bit-form-control"),T.nrm(28,"input",43),T.j41(29,"bit-label"),T.EFF(30),T.nI1(31,"i18n"),T.k0s()(),T.j41(32,"bit-form-control"),T.nrm(33,"input",44),T.j41(34,"bit-label"),T.EFF(35),T.nI1(36,"i18n"),T.k0s()(),T.j41(37,"bit-form-control")(38,"input",45),T.bIt("change",(function(){T.eBV(t);const e=T.XpG(2);return T.Njj(e.handleDependentPermissions())})),T.k0s(),T.j41(39,"bit-label"),T.EFF(40),T.nI1(41,"i18n"),T.k0s()(),T.j41(42,"bit-form-control")(43,"input",46),T.bIt("change",(function(){T.eBV(t);const e=T.XpG(2);return T.Njj(e.handleDependentPermissions())})),T.k0s(),T.j41(44,"bit-label"),T.EFF(45),T.nI1(46,"i18n"),T.k0s()()()()(),T.bVm()}if(2&t){const t=T.XpG(2);T.R7$(),T.Y8G("formGroup",t.permissionsGroup),T.R7$(5),T.JRh(T.bMT(7,10,"accessEventLogs")),T.R7$(5),T.JRh(T.bMT(12,12,"accessImportExport")),T.R7$(5),T.JRh(T.bMT(17,14,"accessReports")),T.R7$(3),T.Y8G("checkboxes",t.permissionsGroup.controls.manageAllCollectionsGroup),T.R7$(6),T.JRh(T.bMT(26,16,"manageGroups")),T.R7$(5),T.JRh(T.bMT(31,18,"manageSso")),T.R7$(5),T.JRh(T.bMT(36,20,"managePolicies")),T.R7$(5),T.JRh(T.bMT(41,22,"manageUsers")),T.R7$(5),T.JRh(T.bMT(46,24,"manageAccountRecovery"))}}function kt(t,e){if(1&t&&(T.qex(0),T.j41(1,"h3",47),T.EFF(2),T.nI1(3,"i18n"),T.j41(4,"a",48),T.nI1(5,"i18n"),T.nrm(6,"i",23),T.k0s()(),T.j41(7,"p",49),T.EFF(8),T.nI1(9,"i18n"),T.k0s(),T.j41(10,"bit-form-control"),T.nrm(11,"input",50),T.j41(12,"bit-label"),T.EFF(13),T.nI1(14,"i18n"),T.k0s()(),T.bVm()),2&t){const t=T.XpG(2);T.R7$(2),T.SpI(" ",T.bMT(3,5,"secretsManager")," "),T.R7$(2),T.FS9("appA11yTitle",T.bMT(5,7,"learnMore")),T.R7$(4),T.JRh(T.bMT(9,9,"secretsManagerAccessDescription")),T.R7$(3),T.Y8G("disabled",t.isOnSecretsManagerStandalone),T.R7$(2),T.SpI(" ",T.bMT(14,11,"userAccessSecretsManagerGA")," ")}}function $t(t,e){1&t&&(T.j41(0,"bit-form-field")(1,"bit-label"),T.EFF(2),T.nI1(3,"i18n"),T.k0s(),T.nrm(4,"input",51),T.j41(5,"bit-hint"),T.EFF(6),T.nI1(7,"i18n"),T.k0s()()),2&t&&(T.R7$(2),T.JRh(T.bMT(3,2,"externalId")),T.R7$(4),T.JRh(T.bMT(7,4,"externalIdDesc")))}function Ft(t,e){1&t&&(T.j41(0,"bit-form-field")(1,"bit-label"),T.EFF(2),T.nI1(3,"i18n"),T.k0s(),T.nrm(4,"input",52),T.j41(5,"bit-hint"),T.EFF(6),T.nI1(7,"i18n"),T.k0s()()),2&t&&(T.R7$(2),T.JRh(T.bMT(3,2,"ssoExternalId")),T.R7$(4),T.JRh(T.bMT(7,4,"ssoExternalIdDesc")))}function Tt(t,e){if(1&t&&(T.j41(0,"bit-tab",20),T.nI1(1,"i18n"),T.j41(2,"div",53),T.EFF(3),T.nI1(4,"async"),T.nI1(5,"i18n"),T.nI1(6,"i18n"),T.k0s(),T.nrm(7,"bit-access-selector",54),T.nI1(8,"i18n"),T.nI1(9,"i18n"),T.nI1(10,"i18n"),T.nI1(11,"async"),T.k0s()),2&t){const t=T.XpG(2);T.Y8G("label",T.bMT(1,7,"groups")),T.R7$(3),T.SpI(" ",T.bMT(4,9,t.restrictEditingSelf$)?T.bMT(5,11,"restrictedGroupAccess"):T.bMT(6,13,"groupAccessUserDesc")," "),T.R7$(4),T.Y8G("items",t.groupAccessItems)("columnHeader",T.bMT(8,15,"groups"))("selectorLabelText",T.bMT(9,17,"selectGroups"))("emptySelectionText",T.bMT(10,19,"noGroupsAdded"))("hideMultiSelect",T.bMT(11,21,t.restrictEditingSelf$))}}function Mt(t,e){1&t&&(T.j41(0,"div",53),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.SpI(" ",T.bMT(2,1,"cannotAddYourselfToCollections")," "))}function Gt(t,e){1&t&&(T.j41(0,"span"),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.SpI(" ",T.bMT(2,1,"userPermissionOverrideHelperDesc")," "))}function Et(t,e){1&t&&(T.j41(0,"span"),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.SpI(" ",T.bMT(2,1,"restrictedCollectionAssignmentDesc")," "))}function Ut(t,e){if(1&t&&(T.j41(0,"div",53),T.DNE(1,Gt,3,3,"span",7)(2,Et,3,3,"span",7),T.nI1(3,"async"),T.k0s()),2&t){const t=T.XpG().ngIf,e=T.XpG();T.R7$(),T.Y8G("ngIf",t.useGroups),T.R7$(),T.Y8G("ngIf",!T.bMT(3,2,e.canAssignAccessToAnyCollection$))}}function jt(t,e){if(1&t){const t=T.RV6();T.j41(0,"bit-tab-group",19),T.mxI("selectedIndexChange",(function(e){T.eBV(t);const i=T.XpG();return T.DH7(i.tabIndex,e)||(i.tabIndex=e),T.Njj(e)})),T.j41(1,"bit-tab",20),T.nI1(2,"i18n"),T.DNE(3,It,6,8,"ng-container",7),T.j41(4,"bit-radio-group",21)(5,"bit-label"),T.EFF(6),T.nI1(7,"i18n"),T.j41(8,"a",22),T.nI1(9,"i18n"),T.nrm(10,"i",23),T.k0s()(),T.j41(11,"bit-radio-button",24)(12,"bit-label"),T.EFF(13),T.nI1(14,"i18n"),T.k0s(),T.j41(15,"bit-hint"),T.EFF(16),T.nI1(17,"i18n"),T.k0s()(),T.j41(18,"bit-radio-button",25)(19,"bit-label"),T.EFF(20),T.nI1(21,"i18n"),T.k0s(),T.j41(22,"bit-hint"),T.EFF(23),T.nI1(24,"i18n"),T.k0s()(),T.j41(25,"bit-radio-button",26)(26,"bit-label"),T.EFF(27),T.nI1(28,"i18n"),T.k0s(),T.j41(29,"bit-hint"),T.EFF(30),T.nI1(31,"i18n"),T.k0s()(),T.j41(32,"bit-radio-button",27)(33,"bit-label"),T.EFF(34),T.nI1(35,"i18n"),T.k0s(),T.j41(36,"bit-hint"),T.DNE(37,St,9,9,"ng-container",28)(38,wt,3,3,"ng-template",null,0,T.C5r),T.k0s()()(),T.DNE(40,Rt,47,26,"ng-container",7)(41,kt,15,13,"ng-container",7)(42,$t,8,6,"bit-form-field",7)(43,Ft,8,6,"bit-form-field",7),T.k0s(),T.DNE(44,Tt,12,23,"bit-tab",29),T.j41(45,"bit-tab",20),T.nI1(46,"i18n"),T.DNE(47,Mt,3,3,"div",30),T.nI1(48,"async"),T.DNE(49,Ut,4,4,"div",30),T.nI1(50,"async"),T.nI1(51,"async"),T.nrm(52,"bit-access-selector",31),T.nI1(53,"i18n"),T.nI1(54,"i18n"),T.nI1(55,"i18n"),T.nI1(56,"async"),T.k0s()()}if(2&t){const t=e.ngIf,i=T.sdS(39),n=T.XpG();T.R50("selectedIndex",n.tabIndex),T.R7$(),T.Y8G("label",T.bMT(2,34,"role")),T.R7$(2),T.Y8G("ngIf",!n.editMode),T.R7$(3),T.SpI(" ",T.bMT(7,36,"memberRole")," "),T.R7$(2),T.FS9("appA11yTitle",T.bMT(9,38,"learnMoreAboutMemberRoles")),T.R7$(3),T.Y8G("value",n.organizationUserType.User),T.R7$(2),T.JRh(T.bMT(14,40,"user")),T.R7$(3),T.JRh(T.bMT(17,42,"userDesc")),T.R7$(2),T.Y8G("value",n.organizationUserType.Admin),T.R7$(2),T.JRh(T.bMT(21,44,"admin")),T.R7$(3),T.JRh(T.bMT(24,46,"adminDesc")),T.R7$(2),T.Y8G("value",n.organizationUserType.Owner),T.R7$(2),T.JRh(T.bMT(28,48,"owner")),T.R7$(3),T.JRh(T.bMT(31,50,"ownerDesc")),T.R7$(2),T.Y8G("value",n.organizationUserType.Custom)("disabled",!t.useCustomPermissions||null),T.R7$(2),T.JRh(T.bMT(35,52,"custom")),T.R7$(3),T.Y8G("ngIf",!t.useCustomPermissions)("ngIfElse",i),T.R7$(3),T.Y8G("ngIf",n.customUserTypeSelected),T.R7$(),T.Y8G("ngIf",t.useSecretsManager),T.R7$(),T.Y8G("ngIf",n.isExternalIdVisible),T.R7$(),T.Y8G("ngIf",n.isSsoExternalIdVisible),T.R7$(),T.Y8G("ngIf",t.useGroups),T.R7$(),T.Y8G("label",T.bMT(46,54,"collections")),T.R7$(2),T.Y8G("ngIf",T.bMT(48,56,n.restrictEditingSelf$)),T.R7$(2),T.Y8G("ngIf",!T.bMT(50,58,n.restrictEditingSelf$)&&(t.useGroups||!T.bMT(51,60,n.canAssignAccessToAnyCollection$))),T.R7$(3),T.Y8G("permissionMode",n.PermissionMode.Edit)("showGroupColumn",t.useGroups)("items",n.collectionAccessItems)("columnHeader",T.bMT(53,62,"collection"))("selectorLabelText",T.bMT(54,64,"selectCollections"))("emptySelectionText",T.bMT(55,66,"noCollectionsAdded"))("hideMultiSelect",T.bMT(56,68,n.restrictEditingSelf$))}}function Ct(t,e){if(1&t&&(T.j41(0,"button",55),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t){const t=T.XpG();T.Y8G("bitAction",t.restore)("disabled",t.loading),T.R7$(),T.SpI(" ",T.bMT(2,3,"restore")," ")}}function xt(t,e){if(1&t&&(T.j41(0,"button",55),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t){const t=T.XpG();T.Y8G("bitAction",t.revoke)("disabled",t.loading),T.R7$(),T.SpI(" ",T.bMT(2,3,"revoke")," ")}}function Pt(t,e){if(1&t&&(T.j41(0,"button",56),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t){const t=T.XpG();T.Y8G("bitAction",t.remove)("disabled",t.loading),T.R7$(),T.SpI(" ",T.bMT(2,3,"remove")," ")}}function zt(t,e){if(1&t&&(T.j41(0,"button",56),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t){const t=T.XpG();T.Y8G("bitAction",t.delete)("disabled",t.loading),T.R7$(),T.SpI(" ",T.bMT(2,3,"delete")," ")}}var Dt,Xt;!function(t){t[t.Role=0]="Role",t[t.Groups=1]="Groups",t[t.Collections=2]="Collections"}(Dt||(Dt={})),function(t){t.Saved="saved",t.Canceled="canceled",t.Deleted="deleted",t.Revoked="revoked",t.Restored="restored"}(Xt||(Xt={}));class Nt{get isExternalIdVisible(){var t;return!!(null===(t=this.formGroup.get("externalId"))||void 0===t?void 0:t.value)}get isSsoExternalIdVisible(){var t;return!!(null===(t=this.formGroup.get("ssoExternalId"))||void 0===t?void 0:t.value)}get customUserTypeSelected(){return this.formGroup.value.type===y.D7.Custom}isEditDialogParams(t){return"Edit"===t.kind}constructor(t,e,i,n,s,o,r,a,c,f,I,w,R,k){let F;this.params=t,this.dialogRef=e,this.i18nService=i,this.formBuilder=n,this.collectionAdminService=s,this.groupService=o,this.userService=r,this.organizationUserApiService=a,this.dialogService=c,this.accountService=f,this.toastService=w,this.configService=R,this.deleteManagedMemberWarningService=k,this.loading=!0,this.editMode=!1,this.isRevoked=!1,this.access="selected",this.collections=[],this.organizationUserType=y.D7,this.PermissionMode=$.ZC,this.showNoMasterPasswordWarning=!1,this.collectionAccessItems=[],this.groupAccessItems=[],this.formGroup=this.formBuilder.group({emails:[""],type:y.D7.User,externalId:this.formBuilder.control({value:"",disabled:!0}),ssoExternalId:this.formBuilder.control({value:"",disabled:!0}),accessSecretsManager:!1,access:[[]],groups:[[]]}),this.permissionsGroup=this.formBuilder.group({manageAllCollectionsGroup:this.formBuilder.group({manageAllCollections:!1,createNewCollections:!1,editAnyCollection:!1,deleteAnyCollection:!1}),accessEventLogs:!1,accessImportExport:!1,accessReports:!1,manageGroups:!1,manageSso:!1,managePolicies:!1,manageUsers:!1,manageResetPassword:!1}),this.destroy$=new l.B,this.submit=()=>ut(this,void 0,void 0,(function*(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return void(this.tabIndex!==Dt.Role&&this.toastService.showToast({variant:"error",title:null,message:this.i18nService.t("fieldOnTabRequiresAttention",this.i18nService.t("role"))}));const t=yield(0,d._)(this.organization$);if(!t.useCustomPermissions&&this.customUserTypeSelected)return void this.toastService.showToast({variant:"error",title:null,message:this.i18nService.t("customNonEnterpriseError")});const e=yield this.getUserView();this.isEditDialogParams(this.params)?yield this.handleEditUser(e,this.params):yield this.handleInviteUsers(e,t)})),this.remove=()=>ut(this,void 0,void 0,(function*(){if(!this.isEditDialogParams(this.params))return;const t=this.params.usesKeyConnector?"removeUserConfirmationKeyConnector":"removeOrgUserConfirmation";let e=yield this.dialogService.openSimpleDialog({title:{key:"removeUserIdAccess",placeholders:[this.params.name]},content:{key:t},type:"warning"});return!!e&&(!(this.showNoMasterPasswordWarning&&(e=yield this.noMasterPasswordConfirmationDialog(this.params.name),!e))&&(yield this.organizationUserApiService.removeOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.toastService.showToast({variant:"success",title:null,message:this.i18nService.t("removedUserId",this.params.name)}),void this.close(Xt.Deleted)))})),this.revoke=()=>ut(this,void 0,void 0,(function*(){if(!this.isEditDialogParams(this.params))return;let t=yield this.dialogService.openSimpleDialog({title:{key:"revokeUserId",placeholders:[this.params.name]},content:{key:"revokeUserConfirmation"},acceptButtonText:{key:"revokeAccess"},type:"warning"});return!!t&&(!(this.showNoMasterPasswordWarning&&(t=yield this.noMasterPasswordConfirmationDialog(this.params.name),!t))&&(yield this.organizationUserApiService.revokeOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.toastService.showToast({variant:"success",title:null,message:this.i18nService.t("revokedUserId",this.params.name)}),this.isRevoked=!0,void this.close(Xt.Revoked)))})),this.restore=()=>ut(this,void 0,void 0,(function*(){this.isEditDialogParams(this.params)&&(yield this.organizationUserApiService.restoreOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.toastService.showToast({variant:"success",title:null,message:this.i18nService.t("restoredUserId",this.params.name)}),this.isRevoked=!1,this.close(Xt.Restored))})),this.delete=()=>ut(this,void 0,void 0,(function*(){if(!this.isEditDialogParams(this.params))return;const t=(0,u.z)([this.organization$,this.deleteManagedMemberWarningService.warningAcknowledged(this.params.organizationId)]).pipe((0,p.T)((([t,e])=>t.canManageUsers&&t.productTierType===S.K_.Enterprise&&!e)));if(yield(0,d._)(t)){if(!(yield this.deleteManagedMemberWarningService.showWarning()))return}if(!(yield this.dialogService.openSimpleDialog({title:{key:"deleteOrganizationUser",placeholders:[this.params.name]},content:{key:"deleteOrganizationUserWarningDesc",placeholders:[this.params.name]},type:"warning",acceptButtonText:{key:"delete"},cancelButtonText:{key:"cancel"}})))return!1;yield this.organizationUserApiService.deleteOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.toastService.showToast({variant:"success",title:null,message:this.i18nService.t("organizationUserDeleted",this.params.name)}),yield this.deleteManagedMemberWarningService.acknowledgeWarning(this.params.organizationId),this.close(Xt.Deleted)})),this.ProductTierType=S.K_,this.organization$=f.activeAccount$.pipe((0,h.n)((t=>I.organizations$(null==t?void 0:t.id).pipe((0,v.Sw)(this.params.organizationId)).pipe((0,g.t)({refCount:!0,bufferSize:1}))))),this.isEditDialogParams(this.params)?(this.editMode=!0,this.title=this.i18nService.t("editMember"),F=this.userService.get(this.params.organizationId,this.params.organizationUserId),this.tabIndex=this.params.initialTab,this.editParams$=(0,m.of)(this.params)):(this.editMode=!1,this.title=this.i18nService.t("inviteMember"),this.editParams$=(0,m.of)(null),F=(0,m.of)(null),this.tabIndex=Dt.Role),this.isOnSecretsManagerStandalone=this.params.isOnSecretsManagerStandalone,this.isOnSecretsManagerStandalone&&this.formGroup.patchValue({accessSecretsManager:!0});const T=this.organization$.pipe((0,h.n)((t=>t.useGroups?this.groupService.getAllDetails(this.params.organizationId):(0,m.of)([]))));this.allowAdminAccessToAllCollectionItems$=this.organization$.pipe((0,p.T)((t=>t.allowAdminAccessToAllCollectionItems))),this.restrictEditingSelf$=(0,u.z)([this.allowAdminAccessToAllCollectionItems$,F,this.accountService.activeAccount$]).pipe((0,p.T)((([t,e,i])=>!t&&null!=e&&e.userId==i.id)),(0,g.t)({refCount:!0,bufferSize:1})),this.restrictEditingSelf$.pipe((0,b.Q)(this.destroy$)).subscribe((t=>{t?this.formGroup.controls.groups.disable():this.formGroup.controls.groups.enable()})),this.canAssignAccessToAnyCollection$=(0,u.z)([this.organization$,this.allowAdminAccessToAllCollectionItems$]).pipe((0,p.T)((([t,e])=>t.canEditAnyCollection||t.permissions.manageUsers&&e))),(0,u.z)({organization:this.organization$,collections:this.collectionAdminService.getAll(this.params.organizationId),userDetails:F,groups:T}).pipe((0,b.Q)(this.destroy$)).subscribe((({organization:t,collections:e,userDetails:i,groups:n})=>{this.setFormValidators(t),this.groupAccessItems=[].concat(n.map((t=>{return e=t,{type:$.Uv.Group,id:e.id,labelName:e.name,listName:e.name};var e}))),this.collectionAccessItems=e.map((e=>At(e,t,null==i?void 0:e.users.find((t=>t.id===i.id))))).filter((t=>!t.readonly||(null==i?void 0:i.collections.some((e=>e.id==t.id))))),null!=i&&this.loadOrganizationUser(i,n,e,t),this.loading=!1})),this.remainingSeats$=this.organization$.pipe((0,p.T)((t=>this.isEditDialogParams(this.params)?t.seats:t.seats-this.params.occupiedSeatCount)))}setFormValidators(t){if(this.isEditDialogParams(this.params))return;const e=[c.k0.required,j,C(t,(t=>this.i18nService.t("tooManyEmails",t))),x(t,this.params.allOrganizationUserEmails,this.i18nService.t("subscriptionUpgrade",t.seats),this.params.occupiedSeatCount)],i=this.formGroup.get("emails");i.setValidators(e),i.updateValueAndValidity()}loadOrganizationUser(t,e,i,n){if(!t)throw new Error("Could not find user to edit.");this.isRevoked=t.status===y.Zx.Revoked,this.showNoMasterPasswordWarning=t.status>y.Zx.Invited&&!1===t.hasMasterPassword;const s={createNewCollections:t.permissions.createNewCollections,editAnyCollection:t.permissions.editAnyCollection,deleteAnyCollection:t.permissions.deleteAnyCollection,manageAllCollections:t.permissions.createNewCollections&&t.permissions.editAnyCollection&&t.permissions.deleteAnyCollection};t.type===y.D7.Custom&&this.permissionsGroup.patchValue({accessEventLogs:t.permissions.accessEventLogs,accessImportExport:t.permissions.accessImportExport,accessReports:t.permissions.accessReports,manageGroups:t.permissions.manageGroups,manageSso:t.permissions.manageSso,managePolicies:t.permissions.managePolicies,manageUsers:t.permissions.manageUsers,manageResetPassword:t.permissions.manageResetPassword,manageAllCollectionsGroup:s});const o=e.filter((e=>t.groups.includes(e.id))).flatMap((t=>t.collections.map((e=>{const n=i.find((t=>t.id===e.id));return{group:t,collection:n,accessSelection:e}}))));this.collectionAccessItems=this.collectionAccessItems.concat(o.map((({collection:t,accessSelection:e,group:i})=>At(t,n,e,i))));const r=function(t,e){if(null==t)return[];return t.collections.filter((t=>!e.find((e=>e.id==t.id)).readonly)).map((t=>({id:t.id,type:$.Uv.Collection,permission:(0,$.Jh)(t)})))}(t,this.collectionAccessItems),a=function(t){if(null==t)return[];return[].concat(t.map((t=>({id:t,type:$.Uv.Group}))))}(t.groups);this.formGroup.removeControl("emails"),this.formGroup.patchValue({type:t.type,externalId:t.externalId,ssoExternalId:t.ssoExternalId,access:r,accessSecretsManager:t.accessSecretsManager,groups:a})}check(t,e){t.checked=null==e?!t.checked:e,t.checked||(t.readOnly=!1)}selectAll(t){this.collections.forEach((e=>this.check(e,t)))}setRequestPermissions(t,e){if(e)return new I.n;const i={accessEventLogs:this.permissionsGroup.value.accessEventLogs,accessImportExport:this.permissionsGroup.value.accessImportExport,accessReports:this.permissionsGroup.value.accessReports,manageGroups:this.permissionsGroup.value.manageGroups,manageSso:this.permissionsGroup.value.manageSso,managePolicies:this.permissionsGroup.value.managePolicies,manageUsers:this.permissionsGroup.value.manageUsers,manageResetPassword:this.permissionsGroup.value.manageResetPassword,createNewCollections:this.permissionsGroup.value.manageAllCollectionsGroup.createNewCollections,editAnyCollection:this.permissionsGroup.value.manageAllCollectionsGroup.editAnyCollection,deleteAnyCollection:this.permissionsGroup.value.manageAllCollectionsGroup.deleteAnyCollection};return Object.assign(t,i)}handleDependentPermissions(){return ut(this,void 0,void 0,(function*(){(yield this.configService.getFeatureFlag(w.TO.SeparateCustomRolePermissions))||this.permissionsGroup.value.manageResetPassword&&!this.permissionsGroup.value.manageUsers&&(this.permissionsGroup.value.manageUsers=!0,document.getElementById("manageUsers").checked=!0,this.toastService.showToast({variant:"info",title:null,message:this.i18nService.t("accountRecoveryManageUsers")}))}))}getUserView(){return ut(this,void 0,void 0,(function*(){var t;const e=new k.dc;return e.organizationId=this.params.organizationId,e.type=this.formGroup.value.type,e.permissions=this.setRequestPermissions(null!==(t=e.permissions)&&void 0!==t?t:new I.n,e.type!==y.D7.Custom),e.collections=this.formGroup.value.access.filter((t=>t.type===$.Uv.Collection)).map($.yo),e.groups=(yield(0,d._)(this.restrictEditingSelf$))?null:this.formGroup.value.groups.map((t=>t.id)),e.accessSecretsManager=this.formGroup.value.accessSecretsManager,e}))}handleEditUser(t,e){return ut(this,void 0,void 0,(function*(){t.id=e.organizationUserId,yield this.userService.save(t),this.toastService.showToast({variant:"success",title:null,message:this.i18nService.t("editedUserId",e.name)}),this.close(Xt.Saved)}))}handleInviteUsers(t,e){return ut(this,void 0,void 0,(function*(){const e=[...new Set(this.formGroup.value.emails.trim().split(/\s*,\s*/))];yield this.userService.invite(e,t),this.toastService.showToast({variant:"success",title:null,message:this.i18nService.t("invitedUsers")}),this.close(Xt.Saved)}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cancel(){return ut(this,void 0,void 0,(function*(){this.close(Xt.Canceled)}))}close(t){this.dialogRef.close(t)}noMasterPasswordConfirmationDialog(t){return this.dialogService.openSimpleDialog({title:{key:"removeOrgUserNoMasterPasswordTitle"},content:{key:"removeOrgUserNoMasterPasswordDesc",placeholders:[t]},type:"warning"})}}function At(t,e,i,n){return{type:$.Uv.Collection,id:n?`${t.id}-${n.id}`:t.id,labelName:t.name,listName:t.name,readonly:void 0!==n||!t.canEditUserAccess(e),readonlyPermission:i?(0,$.Jh)(i):void 0,viaGroupName:null==n?void 0:n.name}}function Yt(t,e){return t.open(Nt,e)}Nt.ɵfac=function(t){return new(t||Nt)(T.rXU(R.Qs),T.rXU(M.ce),T.rXU(z.W),T.rXU(c.ok),T.rXU(f.vE),T.rXU(k.nK),T.rXU(k.WW),T.rXU(f.uB),T.rXU(M.o3),T.rXU(D.Di),T.rXU(v.PV),T.rXU(P.f),T.rXU(X.w),T.rXU(U))},Nt.ɵcmp=T.VBU({type:Nt,selectors:[["ng-component"]],standalone:!1,decls:25,vars:28,consts:[["enterprise",""],[3,"formGroup","bitSubmit"],["dialogSize","large",3,"disablePadding"],["bitDialogTitle",""],["class","tw-text-sm tw-normal-case tw-text-muted",4,"ngIf"],["bitBadge","","variant","secondary",4,"ngIf"],["bitDialogContent",""],[4,"ngIf"],[3,"selectedIndex","selectedIndexChange",4,"ngIf"],["bitDialogFooter",""],["type","submit","bitButton","","bitFormButton","","buttonType","primary",3,"disabled"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"click","disabled"],[1,"tw-flex","tw-gap-2","tw-ml-auto"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"bitAction","disabled",4,"ngIf"],["type","button","buttonType","danger","bitButton","","bitFormButton","",3,"bitAction","disabled",4,"ngIf"],[1,"tw-text-sm","tw-normal-case","tw-text-muted"],["bitBadge","","variant","secondary"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","tw-text-muted",3,"title"],[1,"tw-sr-only"],[3,"selectedIndexChange","selectedIndex"],[3,"label"],["formControlName","type"],["bitLink","","target","_blank","rel","noreferrer","href","https://bitwarden.com/help/user-types-access-control/","slot","end",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],["id","userTypeUser",3,"value"],["id","userTypeAdmin",3,"value"],["id","userTypeOwner",3,"value"],["id","userTypeCustom",3,"value","disabled"],[4,"ngIf","ngIfElse"],[3,"label",4,"ngIf"],["class","tw-mb-6",4,"ngIf"],["formControlName","access",3,"permissionMode","showGroupColumn","items","columnHeader","selectorLabelText","emptySelectionText","hideMultiSelect"],["bitTypography","body1"],["id","emails","type","text","appAutoFocus","","bitInput","","formControlName","emails"],["bitLink","","href","https://bitwarden.com/contact/","target","_blank","rel","noreferrer"],[1,"tw-grid","tw-grid-cols-12","tw-gap-4",3,"formGroup"],[1,"tw-col-span-4"],["type","checkbox","bitCheckbox","","formControlName","accessEventLogs"],["type","checkbox","bitCheckbox","","formControlName","accessImportExport"],["type","checkbox","bitCheckbox","","formControlName","accessReports"],["parentId","manageAllCollections",3,"checkboxes"],[1,"tw-mb-3"],["type","checkbox","bitCheckbox","","formControlName","manageGroups"],["type","checkbox","bitCheckbox","","formControlName","manageSso"],["type","checkbox","bitCheckbox","","formControlName","managePolicies"],["id","manageUsers","type","checkbox","bitCheckbox","","formControlName","manageUsers",3,"change"],["type","checkbox","bitCheckbox","","formControlName","manageResetPassword",3,"change"],[1,"tw-mt-4"],["bitLink","","target","_blank","rel","noreferrer","href","https://bitwarden.com/help/manage-your-organization/#access-to-secrets-manager",3,"appA11yTitle"],[1,"tw-text-muted"],["type","checkbox","bitCheckbox","","formControlName","accessSecretsManager",3,"disabled"],["bitInput","","type","text","formControlName","externalId"],["bitInput","","type","text","formControlName","ssoExternalId"],[1,"tw-mb-6"],["formControlName","groups",3,"items","columnHeader","selectorLabelText","emptySelectionText","hideMultiSelect"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"bitAction","disabled"],["type","button","buttonType","danger","bitButton","","bitFormButton","",3,"bitAction","disabled"]],template:function(t,e){if(1&t&&(T.j41(0,"form",1)(1,"bit-dialog",2)(2,"span",3),T.EFF(3),T.DNE(4,ht,3,3,"span",4),T.nI1(5,"async"),T.DNE(6,gt,3,3,"span",5),T.k0s(),T.j41(7,"div",6),T.DNE(8,mt,6,6,"ng-container",7)(9,jt,57,70,"bit-tab-group",8),T.nI1(10,"async"),T.k0s(),T.qex(11,9),T.j41(12,"button",10),T.EFF(13),T.nI1(14,"i18n"),T.k0s(),T.j41(15,"button",11),T.bIt("click",(function(){return e.cancel()})),T.EFF(16),T.nI1(17,"i18n"),T.k0s(),T.j41(18,"div",12),T.DNE(19,Ct,3,5,"button",13)(20,xt,3,5,"button",13)(21,Pt,3,5,"button",14),T.nI1(22,"async"),T.DNE(23,zt,3,5,"button",14),T.nI1(24,"async"),T.k0s(),T.bVm(),T.k0s()()),2&t){let t,i,n;T.Y8G("formGroup",e.formGroup)("bitSubmit",e.submit),T.R7$(),T.Y8G("disablePadding",!e.loading),T.R7$(2),T.SpI(" ",e.title," "),T.R7$(),T.Y8G("ngIf",!e.loading&&e.editParams$&&(null==(t=T.bMT(5,16,e.editParams$))?null:t.name)),T.R7$(2),T.Y8G("ngIf",e.isRevoked),T.R7$(2),T.Y8G("ngIf",e.loading),T.R7$(),T.Y8G("ngIf",T.bMT(10,18,!e.loading&&e.organization$)),T.R7$(3),T.Y8G("disabled",e.loading),T.R7$(),T.SpI(" ",T.bMT(14,20,"save")," "),T.R7$(2),T.Y8G("disabled",e.loading),T.R7$(),T.SpI(" ",T.bMT(17,22,"cancel")," "),T.R7$(3),T.Y8G("ngIf",e.editMode&&e.isRevoked),T.R7$(),T.Y8G("ngIf",e.editMode&&!e.isRevoked),T.R7$(),T.Y8G("ngIf",e.editMode&&!(null!=(i=T.bMT(22,24,e.editParams$))&&i.managedByOrganization)),T.R7$(2),T.Y8G("ngIf",e.editMode&&(null==(n=T.bMT(24,26,e.editParams$))?null:n.managedByOrganization))}},dependencies:[N.bT,c.qT,c.me,c.Zm,c.BC,c.cb,c.j4,c.JD,A.C,Y.p,B.$,V.L,O.n,J.Q,q.P,K.m,W.f,L.m,_.s,Q.J,H.h,Z.L,tt.d,et.Y,it.W,nt.j,st.r,ot.t,dt,N.Jj,at.$],encapsulation:2});var Bt=i(8297);class Vt{}Vt.ɵfac=function(t){return new(t||Vt)},Vt.ɵmod=T.$C({type:Vt}),Vt.ɵinj=T.G2t({imports:[a.R,Bt.K]});var Ot=i(86842),Jt=i(83731),qt=i(20246),Kt=i(19525),Wt=i(22848),Lt=i(58625),_t=i(29029),Qt=i(81573),Ht=i(26411),Zt=i(12012),te=i(89105),ee=i(65963),ie=i(7730),ne=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((n=n.apply(t,e||[])).next())}))};class se{constructor(t,e,i,n,s,o,r,a){var l;this.dialogRef=t,this.formBuilder=e,this.i18nService=i,this.organizationUserApiService=n,this.toastService=s,this.apiService=o,this.encryptService=r,this.dialogParams=a,this.loading=!1,this.organizationId=null===(l=this.dialogParams)||void 0===l?void 0:l.organizationId,this.organizationKey=this.dialogParams.organizationKey,this.sponsorshipForm=this.formBuilder.group({sponsorshipEmail:new c.MJ("",{validators:[c.k0.email,c.k0.required],asyncValidators:[this.isOrganizationMember.bind(this)],updateOn:"change"}),sponsorshipNote:new c.MJ("",{validators:[c.k0.maxLength(1e3)]})})}static open(t,e){return t.open(se,Object.assign(Object.assign({},e),{data:e.data}))}save(){return ne(this,void 0,void 0,(function*(){if(this.sponsorshipEmailControl.markAllAsTouched(),!this.sponsorshipForm.invalid){this.loading=!0;try{const t=this.sponsorshipForm.value.sponsorshipNote||"",e=this.sponsorshipForm.value.sponsorshipEmail||"",i=yield this.encryptService.encryptString(t,this.organizationKey),n=!0;yield this.apiService.postCreateSponsorship(this.organizationId,{sponsoredEmail:e,planSponsorshipType:S.MM.FamiliesForEnterprise,friendlyName:e,isAdminInitiated:n,notes:i.encryptedString}),this.toastService.showToast({variant:"success",title:void 0,message:this.i18nService.t("sponsorshipCreated")}),yield this.resetForm()}catch(t){this.toastService.showToast({variant:"error",title:this.i18nService.t("errorOccurred"),message:(null==t?void 0:t.message)||this.i18nService.t("unexpectedError")})}this.loading=!1,this.dialogRef.close()}}))}resetForm(){return ne(this,void 0,void 0,(function*(){this.sponsorshipForm.reset()}))}get sponsorshipEmailControl(){return this.sponsorshipForm.controls.sponsorshipEmail}get sponsorshipNoteControl(){return this.sponsorshipForm.controls.sponsorshipNote}isOrganizationMember(t){return ne(this,void 0,void 0,(function*(){const e=t.value;return(yield this.organizationUserApiService.getAllMiniUserDetails(this.organizationId)).data.some((t=>t.email.toLowerCase()===e.toLowerCase()))?{isOrganizationMember:{message:this.i18nService.t("organizationHasMemberMessage",e)}}:null}))}}se.ɵfac=function(t){return new(t||se)(T.rXU(M.ce),T.rXU(c.ok),T.rXU(z.W),T.rXU(f.uB),T.rXU(P.f),T.rXU(Zt.G),T.rXU(te.N),T.rXU(R.Qs))},se.ɵcmp=T.VBU({type:se,selectors:[["ng-component"]],decls:27,vars:21,consts:[["bitDialogTitle",""],["bitDialogContent",""],[3,"formGroup"],[1,"tw-grid","tw-grid-cols-12","tw-gap-4"],[1,"tw-col-span-12"],["bitInput","","inputmode","email","formControlName","sponsorshipEmail","appInputStripSpaces",""],["bitInput","","inputmode","text","formControlName","sponsorshipNote"],["bitDialogFooter",""],["bitButton","","bitFormButton","","type","button","buttonType","primary",3,"click","loading","disabled"],["bitButton","","type","button","buttonType","secondary",3,"bitDialogClose"]],template:function(t,e){1&t&&(T.j41(0,"form")(1,"bit-dialog")(2,"span",0),T.EFF(3),T.nI1(4,"i18n"),T.k0s(),T.j41(5,"div",1)(6,"form",2)(7,"div",3)(8,"div",4)(9,"bit-form-field")(10,"bit-label"),T.EFF(11),T.nI1(12,"i18n"),T.k0s(),T.nrm(13,"input",5),T.k0s()(),T.j41(14,"div",4)(15,"bit-form-field")(16,"bit-label"),T.EFF(17),T.nI1(18,"i18n"),T.k0s(),T.nrm(19,"input",6),T.k0s()()()()(),T.qex(20,7),T.j41(21,"button",8),T.bIt("click",(function(){return e.save()})),T.EFF(22),T.nI1(23,"i18n"),T.k0s(),T.j41(24,"button",9),T.EFF(25),T.nI1(26,"i18n"),T.k0s(),T.bVm(),T.k0s()()),2&t&&(T.R7$(3),T.JRh(T.bMT(4,11,"addSponsorship")),T.R7$(3),T.Y8G("formGroup",e.sponsorshipForm),T.R7$(5),T.JRh(T.bMT(12,13,"email")),T.R7$(2),T.BMQ("aria-invalid",e.sponsorshipEmailControl.invalid),T.R7$(4),T.JRh(T.bMT(18,15,"notes")),T.R7$(2),T.BMQ("aria-invalid",e.sponsorshipNoteControl.invalid),T.R7$(2),T.Y8G("loading",e.loading)("disabled",e.loading),T.R7$(),T.SpI(" ",T.bMT(23,17,"save")," "),T.R7$(2),T.Y8G("bitDialogClose",!1),T.R7$(),T.SpI(" ",T.bMT(26,19,"cancel")," "))},dependencies:[Lt.p,ee.J,at.$,_t.t,J.Q,Qt.P,ie.I,K.m,c.YN,c.qT,c.me,c.BC,c.cb,c.cV,c.X1,c.j4,c.JD,Ht.L,L.m,Q.J,H.h],encapsulation:2});var oe=i(64195),re=i(37115),ae=i(56962),ce=i(304),le=i(10672),de=i(36288),ue=i(13496),pe=i(53997),he=i(82494),ge=i(38410),me=i(22466),be=i(36572),fe=i(20464),ve=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((n=n.apply(t,e||[])).next())}))};function ye(t,e){1&t&&(T.qex(0),T.nrm(1,"i",8),T.nI1(2,"i18n"),T.j41(3,"span",9),T.EFF(4),T.nI1(5,"i18n"),T.k0s(),T.bVm()),2&t&&(T.R7$(),T.FS9("title",T.bMT(2,2,"loading")),T.R7$(3),T.JRh(T.bMT(5,4,"loading")))}function Ie(t,e){if(1&t){const t=T.RV6();T.j41(0,"button",18),T.nI1(1,"i18n"),T.bIt("click",(function(){T.eBV(t);const e=T.XpG().$implicit,i=T.XpG(3);return T.Njj(i.resendEmail(e))})),T.nrm(2,"i",21),T.EFF(3),T.nI1(4,"i18n"),T.k0s()}2&t&&(T.BMQ("aria-label",T.bMT(1,2,"resendEmailLabel")),T.R7$(3),T.SpI(" ",T.bMT(4,4,"resendInvitation")," "))}function Se(t,e){1&t&&T.nrm(0,"hr",17)}function we(t,e){if(1&t){const t=T.RV6();T.qex(0),T.j41(1,"tr",14)(2,"td",11),T.EFF(3),T.k0s(),T.j41(4,"td",11),T.EFF(5),T.k0s(),T.j41(6,"td",11),T.EFF(7),T.k0s(),T.j41(8,"td",11),T.nrm(9,"button",15),T.nI1(10,"i18n"),T.j41(11,"bit-menu",null,0),T.DNE(13,Ie,5,6,"button",16)(14,Se,1,0,"hr",17),T.j41(15,"button",18),T.nI1(16,"i18n"),T.bIt("click",(function(){const e=T.eBV(t).$implicit,i=T.XpG(3);return T.Njj(i.removeSponsorship(e))})),T.nrm(17,"i",19),T.j41(18,"span",20),T.EFF(19),T.nI1(20,"i18n"),T.k0s()()()()(),T.bVm()}if(2&t){const t=e.$implicit,i=T.sdS(12),n=T.XpG(3);T.R7$(3),T.JRh(t.friendlyName),T.R7$(),T.HbH(t.statusClass),T.R7$(),T.SpI(" ",t.statusMessage," "),T.R7$(2),T.JRh(t.notes),T.R7$(2),T.FS9("appA11yTitle",T.bMT(10,11,"options")),T.Y8G("bitMenuTriggerFor",i),T.R7$(4),T.vxM(n.isSelfHosted||t.validUntil?-1:13),T.R7$(),T.vxM(n.isSelfHosted||t.validUntil?-1:14),T.R7$(),T.BMQ("aria-label",T.bMT(16,13,"revokeAccountMessage")),T.R7$(4),T.JRh(T.bMT(20,15,"remove"))}}function Re(t,e){if(1&t&&T.Z7z(0,we,21,17,"ng-container",null,T.Vm6),2&t){const t=T.XpG(2);T.Dyx(t.sponsoredFamilies)}}function ke(t,e){1&t&&(T.qex(0),T.j41(1,"bit-table"),T.qex(2,10),T.j41(3,"tr")(4,"th",11),T.EFF(5),T.nI1(6,"i18n"),T.k0s(),T.j41(7,"th",11),T.EFF(8),T.nI1(9,"i18n"),T.k0s(),T.j41(10,"th",11),T.EFF(11),T.nI1(12,"i18n"),T.k0s(),T.nrm(13,"th",11),T.k0s(),T.bVm(),T.DNE(14,Re,2,0,"ng-template",12),T.k0s(),T.nrm(15,"hr",13),T.bVm()),2&t&&(T.R7$(5),T.JRh(T.bMT(6,3,"recipient")),T.R7$(3),T.JRh(T.bMT(9,5,"status")),T.R7$(3),T.JRh(T.bMT(12,7,"notes")))}function $e(t,e){1&t&&(T.j41(0,"div",6),T.nrm(1,"img",22),T.j41(2,"h4",23),T.EFF(3),T.nI1(4,"i18n"),T.k0s(),T.j41(5,"p",7),T.EFF(6),T.nI1(7,"i18n"),T.k0s()()),2&t&&(T.R7$(3),T.JRh(T.bMT(4,2,"noSponsoredFamiliesMessage")),T.R7$(3),T.JRh(T.bMT(7,4,"nosponsoredFamiliesDetails")))}function Fe(t,e){1&t&&(T.j41(0,"p",7),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.JRh(T.bMT(2,1,"sponsoredFamiliesRemoveActiveSponsorship")))}class Te{constructor(t,e,i,n,s,o,r,a,c,l,d){this.route=t,this.dialogService=e,this.apiService=i,this.encryptService=n,this.keyService=s,this.platformUtilsService=o,this.i18nService=r,this.logService=a,this.toastService=c,this.organizationSponsorshipApiService=l,this.stateProvider=d,this.loading=(0,T.vPA)(!0),this.tabIndex=0,this.sponsoredFamilies=[],this.organizationId="",this.locale="",this.organizationId=this.route.snapshot.params.organizationId||"",this.organizationKey$=this.stateProvider.activeUserId$.pipe((0,h.n)((t=>this.keyService.orgKeys$(t))),(0,p.T)((t=>t[this.organizationId])),(0,Jt.pQ)())}ngOnInit(){return ve(this,void 0,void 0,(function*(){this.locale=yield(0,d._)(this.i18nService.locale$),yield this.loadSponsorships(),this.loading.set(!1)}))}loadSponsorships(){return ve(this,void 0,void 0,(function*(){if(!this.organizationId)return;const[t,e]=yield Promise.all([this.organizationSponsorshipApiService.getOrganizationSponsorship(this.organizationId),(0,d._)(this.organizationKey$)]);if(!e)return void this.logService.error("Organization key not found");const i=t.data;this.sponsoredFamilies=yield Promise.all(i.map((t=>ve(this,void 0,void 0,(function*(){let i="";try{i=yield this.encryptService.decryptString(new Kt.k(t.notes),e)}catch(r){this.logService.error(r)}const{statusMessage:n,statusClass:s}=this.getStatus(this.isSelfHosted,t.toDelete,t.validUntil,t.lastSyncDate,this.locale),o=Object.assign(Object.assign({},t),{notes:i,statusMessage:n||"",statusClass:s||"tw-text-success",status:n||""});return new qt.B(o)})))))}))}addSponsorship(){return ve(this,void 0,void 0,(function*(){const t=se.open(this.dialogService,{data:{organizationId:this.organizationId,organizationKey:yield(0,d._)(this.organizationKey$)}});yield(0,d._)(t.closed),yield this.loadSponsorships()}))}removeSponsorship(t){return ve(this,void 0,void 0,(function*(){try{yield this.doRevokeSponsorship(t)}catch(e){this.logService.error(e)}}))}get isSelfHosted(){return this.platformUtilsService.isSelfHost()}resendEmail(t){return ve(this,void 0,void 0,(function*(){yield this.organizationSponsorshipApiService.postResendSponsorshipOffer(this.organizationId,t.friendlyName),this.toastService.showToast({variant:"success",title:void 0,message:this.i18nService.t("emailSent")})}))}doRevokeSponsorship(t){return ve(this,void 0,void 0,(function*(){const e=t.validUntil?this.i18nService.t("revokeActiveSponsorshipConfirmation",t.friendlyName,(0,N.Yq)(t.validUntil,"MM/dd/yyyy",this.locale)):this.i18nService.t("updatedRevokeSponsorshipConfirmationForSentSponsorship",t.friendlyName);(yield this.dialogService.openSimpleDialog({title:`${this.i18nService.t("removeSponsorship")}?`,content:e,acceptButtonText:{key:"remove"},type:"warning"}))&&(yield this.organizationSponsorshipApiService.deleteAdminInitiatedRevokeSponsorship(this.organizationId,t.friendlyName),this.toastService.showToast({variant:"success",title:void 0,message:this.i18nService.t("reclaimedFreePlan")}),yield this.loadSponsorships())}))}getStatus(t,e,i,n,s=""){return e&&i?{statusMessage:this.i18nService.t("revokeWhenExpired",(0,N.Yq)(i,"MM/dd/yyyy",s)),statusClass:"tw-text-danger"}:e?{statusMessage:this.i18nService.t("requestRemoved"),statusClass:"tw-text-danger"}:i?{statusMessage:this.i18nService.t("active"),statusClass:"tw-text-success"}:t&&n?{statusMessage:this.i18nService.t("sent"),statusClass:"tw-text-success"}:t?{statusMessage:this.i18nService.t("requested"),statusClass:"tw-text-success"}:{statusMessage:this.i18nService.t("sent"),statusClass:"tw-text-success"}}}Te.ɵfac=function(t){return new(t||Te)(T.rXU(oe.nX),T.rXU(M.o3),T.rXU(Zt.G),T.rXU(te.N),T.rXU(Wt.Lu),T.rXU(re.y),T.rXU(z.W),T.rXU(ae.K),T.rXU(P.f),T.rXU(ce.l),T.rXU(F.v2))},Te.ɵcmp=T.VBU({type:Te,selectors:[["app-free-bitwarden-families"]],standalone:!1,decls:27,vars:21,consts:[["appListDropdown",""],["type","button","bitButton","","buttonType","primary",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],["bitTypography","body1"],[1,"tw-list-outside"],["bitTypography","h2",1,""],[1,"tw-my-5","tw-py-5","tw-flex","tw-flex-col","tw-items-center"],["bitTypography","body2"],[1,"bwi","bwi-spinner","bwi-spin","tw-text-muted",3,"title"],[1,"tw-sr-only"],["header",""],["bitCell",""],["body","","alignContent","middle"],[1,"tw-mt-0"],["bitRow",""],["type","button","bitIconButton","bwi-ellipsis-v","buttonType","main",3,"bitMenuTriggerFor","appA11yTitle"],["type","button","bitMenuItem",""],[1,"tw-m-0"],["type","button","bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-close","tw-text-danger"],[1,"tw-text-danger","tw-pl-1"],["aria-hidden","true",1,"bwi","bwi-envelope"],["src","./../../../images/search.svg","alt","Search",1,"tw-w-32"],["bitTypography","h4",1,"tw-mt-3"]],template:function(t,e){1&t&&(T.j41(0,"app-header")(1,"button",1),T.bIt("click",(function(){return e.addSponsorship()})),T.nrm(2,"i",2),T.EFF(3),T.nI1(4,"i18n"),T.k0s()(),T.j41(5,"bit-container"),T.qex(6),T.j41(7,"p",3),T.EFF(8),T.nI1(9,"i18n"),T.k0s(),T.j41(10,"div",3),T.EFF(11),T.nI1(12,"i18n"),T.j41(13,"ul",4)(14,"li"),T.EFF(15),T.nI1(16,"i18n"),T.k0s(),T.j41(17,"li"),T.EFF(18),T.nI1(19,"i18n"),T.k0s()()(),T.j41(20,"h2",5),T.EFF(21),T.nI1(22,"i18n"),T.k0s(),T.DNE(23,ye,6,6,"ng-container")(24,ke,16,9,"ng-container")(25,$e,8,6,"div",6)(26,Fe,3,3,"p",7),T.bVm(),T.k0s()),2&t&&(T.R7$(3),T.SpI(" ",T.bMT(4,9,"addSponsorship")," "),T.R7$(5),T.SpI(" ",T.bMT(9,11,"sponsorshipFreeBitwardenFamilies")," "),T.R7$(3),T.SpI(" ",T.bMT(12,13,"sponsoredFamiliesIncludeMessage"),": "),T.R7$(4),T.JRh(T.bMT(16,15,"sponsoredFamiliesPremiumAccess")),T.R7$(3),T.JRh(T.bMT(19,17,"sponsoredFamiliesSharedCollectionsForFamilyMembers")),T.R7$(3),T.JRh(T.bMT(22,19,"sponsoredBitwardenFamilies")),T.R7$(2),T.vxM(e.loading()?23:-1),T.R7$(),T.vxM(!e.loading()&&(null==e.sponsoredFamilies?null:e.sponsoredFamilies.length)>0?24:e.loading()?-1:25),T.R7$(2),T.vxM(!e.loading()&&e.sponsoredFamilies.length>0?26:-1))},dependencies:[A.C,J.Q,le.H,de.s,ue.Z,pe.O,he.w,ge.Q,me.Y,be._,be.O,st.r,fe.f,at.$],encapsulation:2});var Me=i(77259),Ge=i(69194),Ee=i(3633),Ue=i(15639),je=i(33189),Ce=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((n=n.apply(t,e||[])).next())}))};var xe=i(73276),Pe=i(36790),ze=i(88565),De=i(90171),Xe=i(38449),Ne=i(56953),Ae=i(39488),Ye=i(16452),Be=i(16878),Ve=i(36006),Oe=i(12277),Je=i(35631),qe=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((n=n.apply(t,e||[])).next())}))};class Ke{constructor(t,e,i,n,s){this.data=t,this.dialogRef=e,this.keyService=i,this.logService=n,this.organizationManagementPreferencesService=s,this.loading=!0,this.formGroup=new c.gE({dontAskAgain:new c.MJ(!1)}),this.submit=()=>qe(this,void 0,void 0,(function*(){this.loading||(this.formGroup.value.dontAskAgain&&(yield this.organizationManagementPreferencesService.autoConfirmFingerPrints.set(!0)),yield this.data.confirmUser(this.publicKey),this.dialogRef.close())})),this.name=t.name,this.userId=t.userId,this.publicKey=t.publicKey}ngOnInit(){return qe(this,void 0,void 0,(function*(){try{if(null!=this.publicKey){const t=yield this.keyService.getFingerprint(this.userId,this.publicKey);null!=t&&(this.fingerprint=t.join("-"))}}catch(t){this.logService.error(t)}this.loading=!1}))}static open(t,e){return t.open(Ke,e)}}Ke.ɵfac=function(t){return new(t||Ke)(T.rXU(R.Qs),T.rXU(M.ce),T.rXU(Wt.Lu),T.rXU(ae.K),T.rXU(Je.y))},Ke.ɵcmp=T.VBU({type:Ke,selectors:[["app-user-confirm"]],standalone:!1,decls:29,vars:22,consts:[[3,"formGroup","bitSubmit"],["dialogSize","default"],["bitDialogTitle",""],["bitTypography","body1",1,"tw-text-muted"],["bitDialogContent",""],["bitTypography","body1"],["bitLink","","href","https://bitwarden.com/help/fingerprint-phrase/","target","_blank","rel","noreferrer"],["type","checkbox","bitCheckbox","","formControlName","dontAskAgain"],["bitDialogFooter",""],["bitButton","","bitFormButton","","type","submit","buttonType","primary"],["bitButton","","bitFormButton","","type","button","buttonType","secondary","bitDialogClose",""]],template:function(t,e){1&t&&(T.j41(0,"form",0)(1,"bit-dialog",1)(2,"span",2),T.EFF(3),T.nI1(4,"i18n"),T.j41(5,"span",3),T.EFF(6),T.k0s()(),T.qex(7,4),T.j41(8,"p",5),T.EFF(9),T.nI1(10,"i18n"),T.j41(11,"a",6),T.EFF(12),T.nI1(13,"i18n"),T.k0s()(),T.j41(14,"p",5)(15,"code"),T.EFF(16),T.k0s()(),T.j41(17,"bit-form-control"),T.nrm(18,"input",7),T.j41(19,"bit-label"),T.EFF(20),T.nI1(21,"i18n"),T.k0s()(),T.bVm(),T.qex(22,8),T.j41(23,"button",9),T.EFF(24),T.nI1(25,"i18n"),T.k0s(),T.j41(26,"button",10),T.EFF(27),T.nI1(28,"i18n"),T.k0s(),T.bVm(),T.k0s()()),2&t&&(T.Y8G("formGroup",e.formGroup)("bitSubmit",e.submit),T.R7$(3),T.SpI(" ",T.bMT(4,10,"confirmUser")," "),T.R7$(3),T.JRh(e.name),T.R7$(3),T.SpI(" ",T.bMT(10,12,"fingerprintEnsureIntegrityVerify")," "),T.R7$(3),T.SpI(" ",T.bMT(13,14,"learnMore"),""),T.R7$(4),T.JRh(e.fingerprint),T.R7$(4),T.JRh(T.bMT(21,16,"dontAskFingerprintAgain")),T.R7$(4),T.SpI(" ",T.bMT(25,18,"confirm")," "),T.R7$(3),T.SpI(" ",T.bMT(28,20,"cancel")," "))},dependencies:[c.qT,c.Zm,c.BC,c.cb,c.j4,c.JD,B.$,V.L,J.Q,q.P,ie.I,K.m,W.f,L.m,Z.L,st.r,at.$],encapsulation:2});var We=i(55542);function Le(t,e){return i=>function(t,e){return null==e?t.status!=y.Zx.Revoked:t.status===e}(i,e)&&function(t,e){var i;const n=null==e?void 0:e.toLowerCase();return!n||t.email.toLowerCase().includes(n)||t.id.toLowerCase().includes(n)||(null===(i=t.name)||void 0===i?void 0:i.toLowerCase().includes(n))}(i,t)}class _e extends We.s{set data(t){var e,i,n,s,o,r,a,c,l,d;super.data=t,this.activeUserCount=null!==(i=null===(e=this.data)||void 0===e?void 0:e.filter((t=>t.status!==this.statusType.Revoked)).length)&&void 0!==i?i:0,this.invitedUserCount=null!==(s=null===(n=this.data)||void 0===n?void 0:n.filter((t=>t.status===this.statusType.Invited)).length)&&void 0!==s?s:0,this.acceptedUserCount=null!==(r=null===(o=this.data)||void 0===o?void 0:o.filter((t=>t.status===this.statusType.Accepted)).length)&&void 0!==r?r:0,this.confirmedUserCount=null!==(c=null===(a=this.data)||void 0===a?void 0:a.filter((t=>t.status===this.statusType.Confirmed)).length)&&void 0!==c?c:0,this.revokedUserCount=null!==(d=null===(l=this.data)||void 0===l?void 0:l.filter((t=>t.status===this.statusType.Revoked)).length)&&void 0!==d?d:0}get data(){return super.data}checkUser(t,e){t.checked=null==e?!t.checked:e}getCheckedUsers(){return this.data.filter((t=>t.checked))}checkAllFilteredUsers(t){t&&this.uncheckAllUsers();const e=this.filteredData,i=e.length>500?500:e.length;for(let n=0;n<i;n++)this.checkUser(e[n],t)}uncheckAllUsers(){this.data.forEach((t=>t.checked=!1))}removeUser(t){this.data=this.data.filter((e=>e!=t))}replaceUser(t){const e=this.data.findIndex((e=>e.id===t.id));if(e>-1){const i=this.data.slice();i[e]=t,this.data=i}}}var Qe=i(2471),He=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((n=n.apply(t,e||[])).next())}))};class Ze{get showConfirmUsers(){return this.dataSource.activeUserCount>1&&this.dataSource.confirmedUserCount>0&&this.dataSource.confirmedUserCount<3&&this.dataSource.acceptedUserCount>0}get showBulkConfirmUsers(){return this.dataSource.getCheckedUsers().every((t=>t.status==this.userStatusType.Accepted))}get showBulkReinviteUsers(){return this.dataSource.getCheckedUsers().every((t=>t.status==this.userStatusType.Invited))}constructor(t,e,i,n,s,o,r,a,l){this.apiService=t,this.i18nService=e,this.keyService=i,this.validationService=n,this.logService=s,this.userNamePipe=o,this.dialogService=r,this.organizationManagementPreferencesService=a,this.toastService=l,this.searchControl=new c.MJ("",{nonNullable:!0}),this.statusToggle=new Be.t(null),(0,u.z)([this.searchControl.valueChanges.pipe((0,Ve.B)(200)),this.statusToggle]).pipe((0,Jt.pQ)()).subscribe((([t,e])=>this.dataSource.filter=Le(t,e)))}load(){return He(this,void 0,void 0,(function*(){const t=yield this.getUsers();t instanceof Oe.s?this.dataSource.data=null!=t.data&&t.data.length>0?t.data:[]:Array.isArray(t)&&(this.dataSource.data=t),this.firstLoaded=!0}))}invite(){this.edit(null)}removeUserConfirmationDialog(t){return He(this,void 0,void 0,(function*(){return this.dialogService.openSimpleDialog({title:this.userNamePipe.transform(t),content:{key:"removeUserConfirmation"},type:"warning"})}))}remove(t){return He(this,void 0,void 0,(function*(){if(!(yield this.removeUserConfirmationDialog(t)))return!1;this.actionPromise=this.removeUser(t.id);try{yield this.actionPromise,this.toastService.showToast({variant:"success",title:null,message:this.i18nService.t("removedUserId",this.userNamePipe.transform(t))}),this.dataSource.removeUser(t)}catch(e){this.validationService.showError(e)}this.actionPromise=null}))}reinvite(t){return He(this,void 0,void 0,(function*(){if(null==this.actionPromise){this.actionPromise=this.reinviteUser(t.id);try{yield this.actionPromise,this.toastService.showToast({variant:"success",title:null,message:this.i18nService.t("hasBeenReinvited",this.userNamePipe.transform(t))})}catch(e){this.validationService.showError(e)}this.actionPromise=null}}))}confirm(t){return He(this,void 0,void 0,(function*(){const e=e=>He(this,void 0,void 0,(function*(){try{this.actionPromise=this.confirmUser(t,e),yield this.actionPromise,t.status=this.userStatusType.Confirmed,this.dataSource.replaceUser(t),this.toastService.showToast({variant:"success",title:null,message:this.i18nService.t("hasBeenConfirmed",this.userNamePipe.transform(t))})}catch(i){throw this.validationService.showError(i),i}finally{this.actionPromise=null}}));if(null==this.actionPromise)try{const n=yield this.apiService.getUserPublicKey(t.userId),s=rt.A.fromB64ToArray(n.publicKey),o=yield(0,d._)(this.organizationManagementPreferencesService.autoConfirmFingerPrints.state$);if(null==o||!o){const i=Ke.open(this.dialogService,{data:{name:this.userNamePipe.transform(t),userId:null!=t?t.userId:null,publicKey:s,confirmUser:()=>e(s)}});return void(yield(0,ze.s)(i.closed))}try{const e=yield this.keyService.getFingerprint(t.userId,s);this.logService.info(`User's fingerprint: ${e.join("-")}`)}catch(i){this.logService.error(i)}yield e(s)}catch(i){this.logService.error(`Handled exception: ${i}`)}}))}}Ze.ɵfac=function(t){return new(t||Ze)(T.rXU(Zt.G),T.rXU(z.W),T.rXU(Wt.Lu),T.rXU(Qe.B),T.rXU(ae.K),T.rXU(De.b),T.rXU(M.o3),T.rXU(Je.y),T.rXU(P.f))},Ze.ɵdir=T.FsC({type:Ze});var ti=i(65551),ei=i(76876),ii=i(37579),ni=i(80351),si=i(36801),oi=i(45151),ri=i(18499),ai=i(44432),ci=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((n=n.apply(t,e||[])).next())}))};const li="ok";class di{get loggedOutWarningName(){return null!=this.dialogData.name?this.dialogData.name:this.i18nService.t("thisUser")}constructor(t,e,i,n,s,r,a){this.dialogData=t,this.accountService=e,this.dialogRef=i,this.i18nService=n,this.policyService=s,this.resetPasswordService=r,this.toastService=a,this.inputPasswordComponent=void 0,this.masterPasswordPolicyOptions$=this.accountService.activeAccount$.pipe(Ee.F6,(0,h.n)((t=>this.policyService.masterPasswordPolicyOptions$(t)))),this.inputPasswordFlow=o.m5.ChangePasswordDelegation,this.handlePrimaryButtonClick=()=>ci(this,void 0,void 0,(function*(){if(!this.inputPasswordComponent)throw new Error("InputPasswordComponent is not initialized");const t=yield this.inputPasswordComponent.submit();t&&(yield this.resetPasswordService.resetMasterPassword(t.newPassword,this.dialogData.email,this.dialogData.organizationUserId,this.dialogData.organizationId),this.toastService.showToast({variant:"success",title:"",message:this.i18nService.t("resetPasswordSuccess")}),this.dialogRef.close(li))}))}}di.open=(t,e)=>t.open(di,e),di.ɵfac=function(t){return new(t||di)(T.rXU(R.Qs),T.rXU(D.Di),T.rXU(M.ce),T.rXU(z.W),T.rXU(ri.m),T.rXU(oi.w),T.rXU(P.f))},di.ɵcmp=T.VBU({type:di,selectors:[["app-account-recovery-dialog"]],viewQuery:function(t,e){if(1&t&&T.GBs(o.tu,5),2&t){let t;T.mGM(t=T.lsd())&&(e.inputPasswordComponent=t.first)}},decls:15,vars:19,consts:[[3,"title","subtitle"],["bitDialogContent",""],["type","warning"],[3,"flow","masterPasswordPolicyOptions"],["bitDialogFooter",""],["type","button","bitButton","","buttonType","primary",3,"bitAction"],["type","button","bitButton","","buttonType","secondary","bitDialogClose",""]],template:function(t,e){1&t&&(T.j41(0,"bit-dialog",0),T.nI1(1,"i18n"),T.qex(2,1),T.j41(3,"bit-callout",2),T.EFF(4),T.nI1(5,"i18n"),T.k0s(),T.nrm(6,"auth-input-password",3),T.nI1(7,"async"),T.bVm(),T.qex(8,4),T.j41(9,"button",5),T.EFF(10),T.nI1(11,"i18n"),T.k0s(),T.j41(12,"button",6),T.EFF(13),T.nI1(14,"i18n"),T.k0s(),T.bVm(),T.k0s()),2&t&&(T.Y8G("title",T.bMT(1,8,"recoverAccount"))("subtitle",e.dialogData.name),T.R7$(4),T.SpI("",T.i5U(5,10,"resetPasswordLoggedOutWarning",e.loggedOutWarningName)," "),T.R7$(2),T.Y8G("flow",e.inputPasswordFlow)("masterPasswordPolicyOptions",T.bMT(7,13,e.masterPasswordPolicyOptions$)),T.R7$(3),T.Y8G("bitAction",e.handlePrimaryButtonClick),T.R7$(),T.SpI(" ",T.bMT(11,15,"save")," "),T.R7$(3),T.SpI(" ",T.bMT(14,17,"cancel")," "))},dependencies:[ii.C,Y.p,_t.t,J.Q,ni.j,ai.G,N.MD,N.Jj,Qt.P,ie.I,K.m,si.$Z,o.tu],encapsulation:2});var ui=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((n=n.apply(t,e||[])).next())}))};class pi{constructor(t,e,i){this.keyService=t,this.encryptService=e,this.i18nService=i,this.publicKeys=new Map,this.fingerprints=new Map,this.statuses=new Map,this.done=!1,this.loading=!0,this.submit=()=>ui(this,void 0,void 0,(function*(){this.loading=!0;try{const t=yield this.getCryptoKey(),e=[];for(const i of this.filteredUsers){const n=this.publicKeys.get(i.id);if(null==n)continue;const s=yield this.encryptService.encapsulateKeyUnsigned(t,n);e.push({id:i.id,key:s.encryptedString})}(yield this.postConfirmRequest(e)).data.forEach((t=>{const e=""!==t.error?t.error:this.i18nService.t("bulkConfirmMessage");this.statuses.set(t.id,e)})),this.done=!0}catch(t){this.error=t.message}this.loading=!1}))}ngOnInit(){return ui(this,void 0,void 0,(function*(){this.excludedUsers=this.users.filter((t=>!this.isAccepted(t))),this.filteredUsers=this.users.filter((t=>this.isAccepted(t))),this.filteredUsers.length<=0&&(this.done=!0);const t=yield this.getPublicKeys();for(const e of t.data){const t=rt.A.fromB64ToArray(e.key),i=yield this.keyService.getFingerprint(e.userId,t);null!=i&&(this.publicKeys.set(e.id,t),this.fingerprints.set(e.id,i.join("-")))}this.loading=!1}))}}pi.ɵfac=function(t){return new(t||pi)(T.rXU(Wt.Lu),T.rXU(te.N),T.rXU(z.W))},pi.ɵdir=T.FsC({type:pi});var hi=i(57144),gi=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((n=n.apply(t,e||[])).next())}))};function mi(t,e){1&t&&(T.j41(0,"bit-callout",8),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.SpI(" ",T.bMT(2,1,"noSelectedUsersApplicable")," "))}function bi(t,e){if(1&t&&(T.j41(0,"bit-callout",9),T.nI1(1,"i18n"),T.EFF(2),T.k0s()),2&t){const t=T.XpG();T.Y8G("title",T.bMT(1,2,"error")),T.R7$(2),T.SpI(" ",t.error," ")}}function fi(t,e){if(1&t&&(T.j41(0,"p",22),T.EFF(1),T.k0s()),2&t){const t=T.XpG().$implicit;T.R7$(),T.JRh(t.name)}}function vi(t,e){if(1&t&&(T.j41(0,"tr",18)(1,"td",19),T.nrm(2,"bit-avatar",20),T.nI1(3,"userName"),T.k0s(),T.j41(4,"td",14),T.EFF(5),T.DNE(6,fi,2,1,"p",21),T.k0s(),T.j41(7,"td",14),T.EFF(8),T.k0s()()),2&t){const t=e.$implicit,i=T.XpG(3);T.R7$(2),T.Y8G("text",T.bMT(3,5,t))("id",t.id),T.R7$(3),T.SpI(" ",t.email," "),T.R7$(),T.Y8G("ngIf",t.name),T.R7$(2),T.SpI(" ",i.fingerprints.get(t.id)," ")}}function yi(t,e){if(1&t&&(T.j41(0,"p",22),T.EFF(1),T.k0s()),2&t){const t=T.XpG().$implicit;T.R7$(),T.JRh(t.name)}}function Ii(t,e){if(1&t&&(T.j41(0,"tr",23)(1,"td",19),T.nrm(2,"bit-avatar",20),T.nI1(3,"userName"),T.k0s(),T.j41(4,"td",14),T.EFF(5),T.DNE(6,yi,2,1,"p",21),T.k0s(),T.j41(7,"td",14),T.EFF(8),T.nI1(9,"i18n"),T.k0s()()),2&t){const t=e.$implicit;T.R7$(2),T.Y8G("text",T.bMT(3,5,t))("id",t.id),T.R7$(3),T.SpI(" ",t.email," "),T.R7$(),T.Y8G("ngIf",t.name),T.R7$(2),T.SpI(" ",T.bMT(9,7,"bulkFilteredMessage")," ")}}function Si(t,e){if(1&t&&T.DNE(0,vi,9,7,"tr",16)(1,Ii,10,9,"tr",17),2&t){const t=T.XpG(2);T.Y8G("ngForOf",t.filteredUsers),T.R7$(),T.Y8G("ngForOf",t.excludedUsers)}}function wi(t,e){1&t&&(T.qex(0),T.j41(1,"p",10),T.EFF(2),T.nI1(3,"i18n"),T.j41(4,"a",11),T.EFF(5),T.nI1(6,"i18n"),T.k0s()(),T.j41(7,"bit-table"),T.qex(8,12),T.j41(9,"tr")(10,"th",13),T.EFF(11),T.nI1(12,"i18n"),T.k0s(),T.j41(13,"th",14),T.EFF(14),T.nI1(15,"i18n"),T.k0s()(),T.bVm(),T.DNE(16,Si,2,2,"ng-template",15),T.k0s(),T.bVm()),2&t&&(T.R7$(2),T.SpI(" ",T.bMT(3,4,"fingerprintEnsureIntegrityVerify")," "),T.R7$(3),T.SpI(" ",T.bMT(6,6,"learnMore"),""),T.R7$(6),T.JRh(T.bMT(12,8,"user")),T.R7$(3),T.JRh(T.bMT(15,10,"fingerprint")))}function Ri(t,e){if(1&t&&(T.j41(0,"p",22),T.EFF(1),T.k0s()),2&t){const t=T.XpG().$implicit;T.R7$(),T.JRh(t.name)}}function ki(t,e){if(1&t&&(T.j41(0,"td",14),T.EFF(1),T.k0s()),2&t){const t=T.XpG().$implicit,e=T.XpG(3);T.R7$(),T.SpI(" ",e.statuses.get(t.id)," ")}}function $i(t,e){1&t&&(T.j41(0,"td",14),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.SpI(" ",T.bMT(2,1,"bulkFilteredMessage")," "))}function Fi(t,e){if(1&t&&(T.j41(0,"tr",18)(1,"td",19),T.nrm(2,"bit-avatar",20),T.nI1(3,"userName"),T.k0s(),T.j41(4,"td",14),T.EFF(5),T.DNE(6,Ri,2,1,"p",21),T.k0s(),T.DNE(7,ki,2,1,"td",24)(8,$i,3,3,"td",24),T.k0s()),2&t){const t=e.$implicit,i=T.XpG(3);T.R7$(2),T.Y8G("text",T.bMT(3,6,t))("id",t.id),T.R7$(3),T.SpI(" ",t.email," "),T.R7$(),T.Y8G("ngIf",t.name),T.R7$(),T.Y8G("ngIf",i.statuses.has(t.id)),T.R7$(),T.Y8G("ngIf",!i.statuses.has(t.id))}}function Ti(t,e){if(1&t&&T.DNE(0,Fi,9,8,"tr",16),2&t){const t=T.XpG(2);T.Y8G("ngForOf",t.filteredUsers)}}function Mi(t,e){1&t&&(T.qex(0),T.j41(1,"bit-table"),T.qex(2,12),T.j41(3,"tr")(4,"th",13),T.EFF(5),T.nI1(6,"i18n"),T.k0s(),T.j41(7,"th",14),T.EFF(8),T.nI1(9,"i18n"),T.k0s()(),T.bVm(),T.DNE(10,Ti,1,1,"ng-template",15),T.k0s(),T.bVm()),2&t&&(T.R7$(5),T.JRh(T.bMT(6,2,"user")),T.R7$(3),T.JRh(T.bMT(9,4,"status")))}function Gi(t,e){if(1&t){const t=T.RV6();T.j41(0,"button",25),T.bIt("click",(function(){T.eBV(t);const e=T.XpG();return T.Njj(e.submit())})),T.EFF(1),T.nI1(2,"i18n"),T.k0s()}if(2&t){const t=T.XpG();T.Y8G("disabled",t.loading),T.R7$(),T.SpI(" ",T.bMT(2,2,"confirm")," ")}}class Ei extends pi{constructor(t,e,i,n,s,o){super(t,i,s),this.keyService=t,this.dialogParams=e,this.encryptService=i,this.organizationUserApiService=n,this.i18nService=s,this.stateProvider=o,this.getCryptoKey=()=>gi(this,void 0,void 0,(function*(){return yield(0,d._)(this.organizationKey$)})),this.getPublicKeys=()=>gi(this,void 0,void 0,(function*(){return yield this.organizationUserApiService.postOrganizationUsersPublicKey(this.organizationId,this.filteredUsers.map((t=>t.id)))})),this.isAccepted=t=>t.status===y.Zx.Accepted,this.postConfirmRequest=t=>gi(this,void 0,void 0,(function*(){const e=new f.Kc(t);return yield this.organizationUserApiService.postOrganizationUserBulkConfirm(this.organizationId,e)})),this.organizationId=e.organizationId,this.organizationKey$=this.stateProvider.activeUserId$.pipe((0,h.n)((t=>this.keyService.orgKeys$(t))),(0,p.T)((t=>t[this.organizationId])),(0,Jt.pQ)()),this.users=e.users}static open(t,e){return t.open(Ei,e)}}Ei.ɵfac=function(t){return new(t||Ei)(T.rXU(Wt.Lu),T.rXU(R.Qs),T.rXU(te.N),T.rXU(f.uB),T.rXU(z.W),T.rXU(F.v2))},Ei.ɵcmp=T.VBU({type:Ei,selectors:[["ng-component"]],standalone:!1,features:[T.Vt3],decls:12,vars:12,consts:[["dialogSize","large",3,"title","loading"],["bitDialogContent",""],["type","danger",4,"ngIf"],["type","danger",3,"title",4,"ngIf"],[4,"ngIf"],["bitDialogFooter",""],["bitButton","","type","submit","buttonType","primary",3,"disabled","click",4,"ngIf"],["bitButton","","type","button","buttonType","secondary","bitDialogClose",""],["type","danger"],["type","danger",3,"title"],["bitTypography","body1"],["bitLink","","href","https://bitwarden.com/help/fingerprint-phrase/","target","_blank","rel","noreferrer"],["header",""],["bitCell","","colspan","2"],["bitCell",""],["body",""],["bitRow","","alignContent","middle",4,"ngFor","ngForOf"],["alignContent","middle",4,"ngFor","ngForOf"],["bitRow","","alignContent","middle"],["bitCell","",1,"tw-w-5"],["size","small",3,"text","id"],["class","tw-text-muted tw-text-sm",4,"ngIf"],[1,"tw-text-muted","tw-text-sm"],["alignContent","middle"],["bitCell","",4,"ngIf"],["bitButton","","type","submit","buttonType","primary",3,"click","disabled"]],template:function(t,e){1&t&&(T.j41(0,"bit-dialog",0),T.nI1(1,"i18n"),T.qex(2,1),T.DNE(3,mi,3,3,"bit-callout",2)(4,bi,3,4,"bit-callout",3)(5,wi,17,12,"ng-container",4)(6,Mi,11,6,"ng-container",4),T.bVm(),T.qex(7,5),T.DNE(8,Gi,3,4,"button",6),T.j41(9,"button",7),T.EFF(10),T.nI1(11,"i18n"),T.k0s(),T.bVm(),T.k0s()),2&t&&(T.Y8G("title",T.bMT(1,8,"confirmUsers"))("loading",e.loading),T.R7$(3),T.Y8G("ngIf",e.filteredUsers.length<=0),T.R7$(),T.Y8G("ngIf",e.error),T.R7$(),T.Y8G("ngIf",!e.loading&&!e.done),T.R7$(),T.Y8G("ngIf",!e.loading&&e.done),T.R7$(2),T.Y8G("ngIf",!e.done),T.R7$(2),T.SpI(" ",T.bMT(11,10,"close")," "))},dependencies:[N.Sq,N.bT,hi.f,J.Q,ai.G,ie.I,K.m,Z.L,ge.Q,me.Y,be._,be.O,st.r,at.$,De.b],encapsulation:2});var Ui=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((n=n.apply(t,e||[])).next())}))};function ji(t,e){1&t&&(T.j41(0,"bit-callout",8),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.SpI(" ",T.bMT(2,1,"noSelectedMembersApplicable")," "))}function Ci(t,e){if(1&t&&(T.j41(0,"bit-callout",9),T.nI1(1,"i18n"),T.EFF(2),T.k0s()),2&t){const t=T.XpG();T.Y8G("title",T.bMT(1,2,"error")),T.R7$(2),T.SpI(" ",t.error," ")}}function xi(t,e){1&t&&(T.j41(0,"p",14),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.SpI(" ",T.bMT(2,1,"deleteManyOrganizationUsersWarningDesc")," "))}function Pi(t,e){1&t&&(T.j41(0,"span",22),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.SpI(" ",T.bMT(2,1,"invited")," "))}function zi(t,e){if(1&t&&(T.j41(0,"small",23),T.EFF(1),T.k0s()),2&t){const t=T.XpG().$implicit;T.R7$(),T.JRh(t.name)}}function Di(t,e){if(1&t&&(T.j41(0,"tr",16)(1,"td",17),T.nrm(2,"bit-avatar",18),T.nI1(3,"userName"),T.k0s(),T.j41(4,"td",19)(5,"div"),T.EFF(6),T.DNE(7,Pi,3,3,"span",20),T.k0s(),T.DNE(8,zi,2,1,"small",21),T.k0s()()),2&t){const t=e.$implicit,i=T.XpG(3);T.R7$(2),T.Y8G("text",T.bMT(3,5,t))("id",t.id),T.R7$(4),T.SpI(" ",t.email," "),T.R7$(),T.Y8G("ngIf",t.status===i.userStatusType.Invited),T.R7$(),T.Y8G("ngIf",t.name)}}function Xi(t,e){if(1&t&&T.DNE(0,Di,9,7,"tr",15),2&t){const t=T.XpG(2);T.Y8G("ngForOf",t.users)}}function Ni(t,e){if(1&t&&(T.qex(0),T.DNE(1,xi,3,3,"p",10),T.j41(2,"bit-table"),T.qex(3,11),T.j41(4,"tr")(5,"th",12),T.EFF(6),T.nI1(7,"i18n"),T.k0s()(),T.bVm(),T.DNE(8,Xi,1,1,"ng-template",13),T.k0s(),T.bVm()),2&t){const t=T.XpG();T.R7$(),T.Y8G("ngIf",t.users.length>0&&!t.error),T.R7$(5),T.JRh(T.bMT(7,2,"member"))}}function Ai(t,e){if(1&t&&(T.j41(0,"small",23),T.EFF(1),T.k0s()),2&t){const t=T.XpG().$implicit;T.R7$(),T.JRh(t.name)}}function Yi(t,e){if(1&t&&(T.j41(0,"td",19),T.EFF(1),T.k0s()),2&t){const t=T.XpG().$implicit,e=T.XpG(3);T.R7$(),T.SpI(" ",e.statuses.get(t.id)," ")}}function Bi(t,e){1&t&&(T.j41(0,"td",19),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.SpI(" ",T.bMT(2,1,"bulkFilteredMessage")," "))}function Vi(t,e){if(1&t&&(T.j41(0,"tr",16)(1,"td",17),T.nrm(2,"bit-avatar",18),T.nI1(3,"userName"),T.k0s(),T.j41(4,"td",19),T.EFF(5),T.DNE(6,Ai,2,1,"small",21),T.k0s(),T.DNE(7,Yi,2,1,"td",24)(8,Bi,3,3,"td",24),T.k0s()),2&t){const t=e.$implicit,i=T.XpG(3);T.R7$(2),T.Y8G("text",T.bMT(3,6,t))("id",t.id),T.R7$(3),T.SpI(" ",t.email," "),T.R7$(),T.Y8G("ngIf",t.name),T.R7$(),T.Y8G("ngIf",i.statuses.has(t.id)),T.R7$(),T.Y8G("ngIf",!i.statuses.has(t.id))}}function Oi(t,e){if(1&t&&T.DNE(0,Vi,9,8,"tr",15),2&t){const t=T.XpG(2);T.Y8G("ngForOf",t.users)}}function Ji(t,e){1&t&&(T.qex(0),T.j41(1,"bit-table"),T.qex(2,11),T.j41(3,"tr")(4,"th",12),T.EFF(5),T.nI1(6,"i18n"),T.k0s(),T.j41(7,"th",19),T.EFF(8),T.nI1(9,"i18n"),T.k0s()(),T.bVm(),T.DNE(10,Oi,1,1,"ng-template",13),T.k0s(),T.bVm()),2&t&&(T.R7$(5),T.JRh(T.bMT(6,2,"member")),T.R7$(3),T.JRh(T.bMT(9,4,"status")))}function qi(t,e){if(1&t){const t=T.RV6();T.j41(0,"button",25),T.bIt("click",(function(){T.eBV(t);const e=T.XpG();return T.Njj(e.submit())})),T.EFF(1),T.nI1(2,"i18n"),T.k0s()}if(2&t){const t=T.XpG();T.Y8G("disabled",t.loading),T.R7$(),T.SpI(" ",T.bMT(2,2,"deleteMembers")," ")}}class Ki{constructor(t,e,i,n){this.dialogParams=t,this.i18nService=e,this.organizationUserApiService=i,this.deleteManagedMemberWarningService=n,this.loading=!1,this.done=!1,this.error=null,this.statuses=new Map,this.userStatusType=y.Zx,this.organizationId=t.organizationId,this.users=t.users}submit(){return Ui(this,void 0,void 0,(function*(){yield this.deleteManagedMemberWarningService.acknowledgeWarning(this.organizationId);try{this.loading=!0,this.error=null;(yield this.organizationUserApiService.deleteManyOrganizationUsers(this.organizationId,this.users.map((t=>t.id)))).data.forEach((t=>{this.statuses.set(t.id,t.error?t.error:this.i18nService.t("deletedSuccessfully"))})),this.done=!0}catch(t){this.error=t.message}finally{this.loading=!1}}))}static open(t,e){return t.open(Ki,e)}}Ki.ɵfac=function(t){return new(t||Ki)(T.rXU(R.Qs),T.rXU(z.W),T.rXU(f.uB),T.rXU(U))},Ki.ɵcmp=T.VBU({type:Ki,selectors:[["ng-component"]],standalone:!1,decls:12,vars:11,consts:[["dialogSize","large",3,"title"],["bitDialogContent",""],["type","danger",4,"ngIf"],["type","danger",3,"title",4,"ngIf"],[4,"ngIf"],["bitDialogFooter",""],["bitButton","","type","submit","buttonType","primary",3,"disabled","click",4,"ngIf"],["bitButton","","type","button","buttonType","secondary","bitDialogClose",""],["type","danger"],["type","danger",3,"title"],["bitTypography","body1",4,"ngIf"],["header",""],["bitCell","","colspan","2"],["body",""],["bitTypography","body1"],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["bitCell","",1,"tw-w-5"],["size","small",3,"text","id"],["bitCell",""],["bitBadge","","class","tw-text-xs","variant","secondary",4,"ngIf"],["class","tw-text-muted tw-block",4,"ngIf"],["bitBadge","","variant","secondary",1,"tw-text-xs"],[1,"tw-text-muted","tw-block"],["bitCell","",4,"ngIf"],["bitButton","","type","submit","buttonType","primary",3,"click","disabled"]],template:function(t,e){1&t&&(T.j41(0,"bit-dialog",0),T.nI1(1,"i18n"),T.qex(2,1),T.DNE(3,ji,3,3,"bit-callout",2)(4,Ci,3,4,"bit-callout",3)(5,Ni,9,4,"ng-container",4)(6,Ji,11,6,"ng-container",4),T.bVm(),T.qex(7,5),T.DNE(8,qi,3,4,"button",6),T.j41(9,"button",7),T.EFF(10),T.nI1(11,"i18n"),T.k0s(),T.bVm(),T.k0s()),2&t&&(T.Y8G("title",T.bMT(1,7,"deleteMembers")),T.R7$(3),T.Y8G("ngIf",e.users.length<=0),T.R7$(),T.Y8G("ngIf",e.error),T.R7$(),T.Y8G("ngIf",!e.done),T.R7$(),T.Y8G("ngIf",e.done),T.R7$(2),T.Y8G("ngIf",!e.done&&e.users.length>0),T.R7$(2),T.SpI(" ",T.bMT(11,9,"close")," "))},dependencies:[N.Sq,N.bT,hi.f,O.n,J.Q,ai.G,ie.I,K.m,ge.Q,me.Y,be._,be.O,st.r,at.$,De.b],encapsulation:2});var Wi=i(58270),Li=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((n=n.apply(t,e||[])).next())}))};function _i(t,e){if(1&t&&(T.j41(0,"div",16),T.EFF(1),T.k0s()),2&t){const t=T.XpG().$implicit;T.R7$(),T.SpI(" ",t.email," ")}}function Qi(t,e){if(1&t&&(T.j41(0,"tr",11)(1,"td",5)(2,"div",12),T.nrm(3,"bit-avatar",13),T.nI1(4,"userName"),T.j41(5,"div",14)(6,"div"),T.EFF(7),T.nI1(8,"userName"),T.k0s(),T.DNE(9,_i,2,1,"div",15),T.k0s()()(),T.j41(10,"td",5),T.EFF(11),T.nI1(12,"userType"),T.k0s()()),2&t){const t=e.$implicit;T.R7$(3),T.Y8G("text",T.bMT(4,6,t))("id",t.userId)("color",t.avatarColor),T.R7$(4),T.SpI(" ",T.bMT(8,8,t)," "),T.R7$(2),T.Y8G("ngIf",t.name),T.R7$(2),T.JRh(T.bMT(12,10,t.type))}}function Hi(t,e){if(1&t&&(T.DNE(0,Qi,13,12,"tr",10),T.nI1(1,"async")),2&t){const t=e.$implicit;T.Y8G("ngForOf",T.bMT(1,1,t))}}class Zi{constructor(t,e,i,n,s,o){this.dialogRef=t,this.data=e,this.organizationUserApiService=i,this.platformUtilsService=n,this.i18nService=s,this.toastService=o,this.dataSource=new We.s,this.submit=()=>Li(this,void 0,void 0,(function*(){yield this.organizationUserApiService.putOrganizationUserBulkEnableSecretsManager(this.data.orgId,this.dataSource.data.map((t=>t.id))),this.toastService.showToast({variant:"success",title:null,message:this.i18nService.t("activatedAccessToSecretsManager")}),this.dialogRef.close()}))}ngOnInit(){this.dataSource.data=this.data.users}static open(t,e){return t.open(Zi,{data:e})}}Zi.ɵfac=function(t){return new(t||Zi)(T.rXU(M.ce),T.rXU(R.Qs),T.rXU(f.uB),T.rXU(re.y),T.rXU(z.W),T.rXU(P.f))},Zi.ɵcmp=T.VBU({type:Zi,selectors:[["ng-component"]],standalone:!1,decls:25,vars:20,consts:[["dialogSize","large"],["bitDialogTitle",""],["bitDialogContent",""],[3,"dataSource"],["header",""],["bitCell",""],["body",""],["bitDialogFooter",""],["type","button","bitButton","","buttonType","primary",3,"bitAction"],["type","button","bitButton","","buttonType","secondary","bitDialogClose",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],[1,"tw-flex","tw-items-center"],["size","small",1,"tw-mr-3",3,"text","id","color"],[1,"tw-flex","tw-flex-col"],["class","tw-text-sm tw-text-muted",4,"ngIf"],[1,"tw-text-sm","tw-text-muted"]],template:function(t,e){1&t&&(T.j41(0,"bit-dialog",0)(1,"span",1),T.EFF(2),T.nI1(3,"i18n"),T.k0s(),T.j41(4,"span",2)(5,"p"),T.EFF(6),T.nI1(7,"i18n"),T.k0s(),T.j41(8,"bit-table",3),T.qex(9,4),T.j41(10,"tr")(11,"th",5),T.EFF(12),T.nI1(13,"i18n"),T.k0s(),T.j41(14,"th",5),T.EFF(15),T.nI1(16,"i18n"),T.k0s()(),T.bVm(),T.DNE(17,Hi,2,3,"ng-template",6),T.k0s()(),T.qex(18,7),T.j41(19,"button",8),T.EFF(20),T.nI1(21,"i18n"),T.k0s(),T.j41(22,"button",9),T.EFF(23),T.nI1(24,"i18n"),T.k0s(),T.bVm(),T.k0s()),2&t&&(T.R7$(2),T.JRh(T.bMT(3,8,"activateSecretsManager")),T.R7$(4),T.JRh(T.bMT(7,10,"bulkEnableSecretsManagerDescription")),T.R7$(2),T.Y8G("dataSource",e.dataSource),T.R7$(4),T.JRh(T.bMT(13,12,"member")),T.R7$(3),T.JRh(T.bMT(16,14,"role")),T.R7$(4),T.Y8G("bitAction",e.submit),T.R7$(),T.SpI(" ",T.bMT(21,16,"activateAccess")," "),T.R7$(3),T.SpI(" ",T.bMT(24,18,"close")," "))},dependencies:[N.Sq,N.bT,Y.p,hi.f,J.Q,ie.I,K.m,ge.Q,me.Y,be._,be.O,N.Jj,at.$,De.b,Wi.c],encapsulation:2});var tn=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((n=n.apply(t,e||[])).next())}))};class en{constructor(t){this.i18nService=t,this.statuses=new Map,this.done=!1,this.loading=!1,this.submit=()=>tn(this,void 0,void 0,(function*(){this.loading=!0;try{(yield this.deleteUsers()).data.forEach((t=>{const e=""!==t.error?t.error:this.i18nService.t("bulkRemovedMessage");this.statuses.set(t.id,e)})),this.done=!0}catch(t){this.error=t.message}this.loading=!1}))}}function nn(t,e){1&t&&(T.j41(0,"bit-callout",8),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.SpI(" ",T.bMT(2,1,"noSelectedUsersApplicable")," "))}function sn(t,e){if(1&t&&(T.j41(0,"bit-callout",9),T.nI1(1,"i18n"),T.EFF(2),T.k0s()),2&t){const t=T.XpG();T.Y8G("title",T.bMT(1,2,"error")),T.R7$(2),T.SpI(" ",t.error," ")}}function on(t,e){1&t&&(T.j41(0,"p",16),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.SpI(" ",T.bMT(2,1,"removeMembersWithoutMasterPasswordWarning")," "))}function rn(t,e){if(1&t&&(T.j41(0,"bit-callout",15)(1,"p",16),T.EFF(2),T.k0s(),T.DNE(3,on,3,3,"p",17),T.k0s()),2&t){const t=T.XpG(2);T.R7$(2),T.JRh(t.removeUsersWarning),T.R7$(),T.Y8G("ngIf",t.showNoMasterPasswordWarning)}}function an(t,e){1&t&&(T.j41(0,"th",18),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.JRh(T.bMT(2,1,"details")))}function cn(t,e){if(1&t&&(T.j41(0,"small",24),T.EFF(1),T.k0s()),2&t){const t=T.XpG().$implicit;T.R7$(),T.JRh(t.name)}}function ln(t,e){1&t&&(T.qex(0),T.EFF(1," - "),T.bVm())}function dn(t,e){1&t&&(T.qex(0),T.nrm(1,"i",26),T.EFF(2),T.nI1(3,"i18n"),T.bVm()),2&t&&(T.R7$(2),T.SpI(" ",T.bMT(3,1,"noMasterPassword")," "))}function un(t,e){if(1&t&&(T.j41(0,"td",18)(1,"span",25),T.DNE(2,ln,2,0,"ng-container",4)(3,dn,4,3,"ng-container",4),T.k0s()()),2&t){const t=T.XpG().$implicit;T.R7$(2),T.Y8G("ngIf",!0===t.hasMasterPassword),T.R7$(),T.Y8G("ngIf",!1===t.hasMasterPassword)}}function pn(t,e){if(1&t&&(T.j41(0,"tr",20)(1,"td",21),T.nrm(2,"bit-avatar",22),T.nI1(3,"userName"),T.k0s(),T.j41(4,"td",18),T.EFF(5),T.DNE(6,cn,2,1,"small",23),T.k0s(),T.DNE(7,un,4,2,"td",13),T.k0s()),2&t){const t=e.$implicit,i=T.XpG(3);T.R7$(2),T.Y8G("text",T.bMT(3,5,t))("id",t.id),T.R7$(3),T.SpI(" ",t.email," "),T.R7$(),T.Y8G("ngIf",t.name),T.R7$(),T.Y8G("ngIf",i.showNoMasterPasswordWarning)}}function hn(t,e){if(1&t&&T.DNE(0,pn,8,7,"tr",19),2&t){const t=T.XpG(2);T.Y8G("ngForOf",t.users)}}function gn(t,e){if(1&t&&(T.qex(0),T.DNE(1,rn,4,2,"bit-callout",10),T.j41(2,"bit-table"),T.qex(3,11),T.j41(4,"tr")(5,"th",12),T.EFF(6),T.nI1(7,"i18n"),T.k0s(),T.DNE(8,an,3,3,"th",13),T.k0s(),T.bVm(),T.DNE(9,hn,1,1,"ng-template",14),T.k0s(),T.bVm()),2&t){const t=T.XpG();T.R7$(),T.Y8G("ngIf",t.users.length>0&&!t.error),T.R7$(5),T.JRh(T.bMT(7,3,"user")),T.R7$(2),T.Y8G("ngIf",t.showNoMasterPasswordWarning)}}function mn(t,e){if(1&t&&(T.j41(0,"small",24),T.EFF(1),T.k0s()),2&t){const t=T.XpG().$implicit;T.R7$(),T.JRh(t.name)}}function bn(t,e){if(1&t&&(T.j41(0,"td",18),T.EFF(1),T.k0s()),2&t){const t=T.XpG().$implicit,e=T.XpG(3);T.R7$(),T.SpI(" ",e.statuses.get(t.id)," ")}}function fn(t,e){1&t&&(T.j41(0,"td",18),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.SpI(" ",T.bMT(2,1,"bulkFilteredMessage")," "))}function vn(t,e){if(1&t&&(T.j41(0,"tr",20)(1,"td",21),T.nrm(2,"bit-avatar",22),T.nI1(3,"userName"),T.k0s(),T.j41(4,"td",18),T.EFF(5),T.DNE(6,mn,2,1,"small",23),T.k0s(),T.DNE(7,bn,2,1,"td",13)(8,fn,3,3,"td",13),T.k0s()),2&t){const t=e.$implicit,i=T.XpG(3);T.R7$(2),T.Y8G("text",T.bMT(3,6,t))("id",t.id),T.R7$(3),T.SpI(" ",t.email," "),T.R7$(),T.Y8G("ngIf",t.name),T.R7$(),T.Y8G("ngIf",i.statuses.has(t.id)),T.R7$(),T.Y8G("ngIf",!i.statuses.has(t.id))}}function yn(t,e){if(1&t&&T.DNE(0,vn,9,8,"tr",19),2&t){const t=T.XpG(2);T.Y8G("ngForOf",t.users)}}function In(t,e){1&t&&(T.qex(0),T.j41(1,"bit-table"),T.qex(2,11),T.j41(3,"tr")(4,"th",12),T.EFF(5),T.nI1(6,"i18n"),T.k0s(),T.j41(7,"th",18),T.EFF(8),T.nI1(9,"i18n"),T.k0s()(),T.bVm(),T.DNE(10,yn,1,1,"ng-template",14),T.k0s(),T.bVm()),2&t&&(T.R7$(5),T.JRh(T.bMT(6,2,"user")),T.R7$(3),T.JRh(T.bMT(9,4,"status")))}function Sn(t,e){if(1&t&&(T.j41(0,"button",27),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t){const t=T.XpG();T.Y8G("disabled",t.loading)("bitAction",t.submit),T.R7$(),T.SpI(" ",T.bMT(2,3,"removeMembers")," ")}}en.ɵfac=function(t){return new(t||en)(T.rXU(z.W))},en.ɵdir=T.FsC({type:en});class wn extends en{constructor(t,e,i){super(e),this.dialogParams=t,this.i18nService=e,this.organizationUserApiService=i,this.deleteUsers=()=>this.organizationUserApiService.removeManyOrganizationUsers(this.organizationId,this.users.map((t=>t.id))),this.organizationId=t.organizationId,this.users=t.users,this.showNoMasterPasswordWarning=this.users.some((t=>t.status>y.Zx.Invited&&!1===t.hasMasterPassword))}get removeUsersWarning(){return this.i18nService.t("removeOrgUsersConfirmation")}static open(t,e){return t.open(wn,e)}}wn.ɵfac=function(t){return new(t||wn)(T.rXU(R.Qs),T.rXU(z.W),T.rXU(f.uB))},wn.ɵcmp=T.VBU({type:wn,selectors:[["ng-component"]],standalone:!1,features:[T.Vt3],decls:12,vars:11,consts:[["dialogSize","large",3,"title"],["bitDialogContent",""],["type","danger",4,"ngIf"],["type","danger",3,"title",4,"ngIf"],[4,"ngIf"],["bitDialogFooter",""],["bitButton","","type","submit","buttonType","primary",3,"disabled","bitAction",4,"ngIf"],["bitButton","","type","button","buttonType","secondary","bitDialogClose",""],["type","danger"],["type","danger",3,"title"],["type","warning",4,"ngIf"],["header",""],["bitCell","","colspan","2"],["bitCell","",4,"ngIf"],["body",""],["type","warning"],["bitTypography","body1"],["bitTypography","body1",4,"ngIf"],["bitCell",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["bitCell","",1,"tw-w-5"],["size","small",3,"text","id"],["class","tw-text-muted tw-block",4,"ngIf"],[1,"tw-text-muted","tw-block"],[1,"tw-text-muted","tw-block","tw-lowercase"],["aria-hidden","true",1,"bwi","bwi-exclamation-triangle"],["bitButton","","type","submit","buttonType","primary",3,"disabled","bitAction"]],template:function(t,e){1&t&&(T.j41(0,"bit-dialog",0),T.nI1(1,"i18n"),T.qex(2,1),T.DNE(3,nn,3,3,"bit-callout",2)(4,sn,3,4,"bit-callout",3)(5,gn,10,5,"ng-container",4)(6,In,11,6,"ng-container",4),T.bVm(),T.qex(7,5),T.DNE(8,Sn,3,5,"button",6),T.j41(9,"button",7),T.EFF(10),T.nI1(11,"i18n"),T.k0s(),T.bVm(),T.k0s()),2&t&&(T.Y8G("title",T.bMT(1,7,"removeMembers")),T.R7$(3),T.Y8G("ngIf",e.users.length<=0),T.R7$(),T.Y8G("ngIf",e.error),T.R7$(),T.Y8G("ngIf",!e.done),T.R7$(),T.Y8G("ngIf",e.done),T.R7$(2),T.Y8G("ngIf",!e.done&&e.users.length>0),T.R7$(2),T.SpI(" ",T.bMT(11,9,"close")," "))},dependencies:[N.Sq,N.bT,Y.p,hi.f,J.Q,ai.G,ie.I,K.m,ge.Q,me.Y,be._,be.O,st.r,at.$,De.b],encapsulation:2});var Rn=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((n=n.apply(t,e||[])).next())}))};const kn=t=>({$implicit:t});function $n(t,e){1&t&&(T.j41(0,"bit-callout",11),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.SpI(" ",T.bMT(2,1,"noSelectedUsersApplicable")," "))}function Fn(t,e){if(1&t&&(T.j41(0,"bit-callout",11),T.EFF(1),T.k0s()),2&t){const t=T.XpG();T.R7$(),T.SpI(" ",t.error," ")}}function Tn(t,e){1&t&&(T.j41(0,"bit-callout",12),T.nI1(1,"i18n"),T.EFF(2),T.nI1(3,"i18n"),T.k0s()),2&t&&(T.FS9("title",T.bMT(1,2,"nonCompliantMembersTitle")),T.R7$(2),T.SpI(" ",T.bMT(3,4,"nonCompliantMembersError")," "))}function Mn(t,e){if(1&t&&(T.qex(0),T.j41(1,"div",17),T.EFF(2),T.j41(3,"small",18),T.EFF(4),T.k0s()(),T.bVm()),2&t){const t=T.XpG().$implicit;T.R7$(),T.Y8G("title",t.name+" "+t.email),T.R7$(),T.SpI(" ",t.name," "),T.R7$(2),T.SpI(" ",t.email," ")}}function Gn(t,e){if(1&t&&(T.j41(0,"div",17),T.EFF(1),T.k0s()),2&t){const t=T.XpG().$implicit;T.Y8G("title",t.email),T.R7$(),T.JRh(t.email)}}function En(t,e){if(1&t&&(T.j41(0,"div",13)(1,"div",14),T.nrm(2,"bit-avatar",15),T.nI1(3,"userName"),T.k0s(),T.DNE(4,Mn,5,3,"ng-container",16)(5,Gn,2,2,"ng-template",null,1,T.C5r),T.k0s()),2&t){const t=e.$implicit,i=T.sdS(6);T.R7$(2),T.Y8G("text",T.bMT(3,4,t))("id",t.id),T.R7$(2),T.Y8G("ngIf",t.name)("ngIfElse",i)}}function Un(t,e){1&t&&(T.j41(0,"p"),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.JRh(T.bMT(2,1,"revokeUsersWarning")))}function jn(t,e){1&t&&(T.j41(0,"th",23),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.SpI(" ",T.bMT(2,1,"details")," "))}function Cn(t,e){1&t&&T.eu8(0)}function xn(t,e){1&t&&(T.qex(0),T.EFF(1," - "),T.bVm())}function Pn(t,e){1&t&&(T.qex(0),T.nrm(1,"i",29),T.EFF(2),T.nI1(3,"i18n"),T.bVm()),2&t&&(T.R7$(2),T.SpI(" ",T.bMT(3,1,"noMasterPassword")," "))}function zn(t,e){if(1&t&&(T.j41(0,"td",23)(1,"span",28),T.DNE(2,xn,2,0,"ng-container",7)(3,Pn,4,3,"ng-container",7),T.k0s()()),2&t){const t=T.XpG().$implicit;T.R7$(2),T.Y8G("ngIf",!0===t.hasMasterPassword),T.R7$(),T.Y8G("ngIf",!1===t.hasMasterPassword)}}function Dn(t,e){if(1&t&&(T.j41(0,"tr",25)(1,"td",26),T.DNE(2,Cn,1,0,"ng-container",27),T.k0s(),T.DNE(3,zn,4,2,"td",21),T.k0s()),2&t){const t=e.$implicit,i=T.XpG(3),n=T.sdS(9);T.R7$(2),T.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",T.eq3(3,kn,t)),T.R7$(),T.Y8G("ngIf",i.showNoMasterPasswordWarning)}}function Xn(t,e){if(1&t&&T.DNE(0,Dn,4,5,"tr",24),2&t){const t=T.XpG(2);T.Y8G("ngForOf",t.users)}}function Nn(t,e){if(1&t&&(T.qex(0),T.DNE(1,Un,3,3,"p",7),T.j41(2,"bit-table"),T.qex(3,19),T.j41(4,"tr")(5,"th",20),T.EFF(6),T.nI1(7,"i18n"),T.k0s(),T.DNE(8,jn,3,3,"th",21),T.k0s(),T.bVm(),T.DNE(9,Xn,1,1,"ng-template",22),T.k0s(),T.bVm()),2&t){const t=T.XpG();T.R7$(),T.Y8G("ngIf",t.users.length>0&&!t.error&&t.isRevoking),T.R7$(5),T.JRh(T.bMT(7,3,"member")),T.R7$(2),T.Y8G("ngIf",t.showNoMasterPasswordWarning)}}function An(t,e){1&t&&T.eu8(0)}function Yn(t,e){if(1&t&&(T.j41(0,"td",20),T.EFF(1),T.k0s()),2&t){const t=T.XpG().$implicit,e=T.XpG(3);T.R7$(),T.SpI(" ",e.statuses.get(t.id)," ")}}function Bn(t,e){1&t&&(T.j41(0,"td",20),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.SpI(" ",T.bMT(2,1,"bulkFilteredMessage")," "))}function Vn(t,e){if(1&t&&(T.j41(0,"tr",25)(1,"td",26),T.DNE(2,An,1,0,"ng-container",27),T.k0s(),T.DNE(3,Yn,2,1,"td",30)(4,Bn,3,3,"td",30),T.k0s()),2&t){const t=e.$implicit,i=T.XpG(3),n=T.sdS(9);T.R7$(2),T.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",T.eq3(4,kn,t)),T.R7$(),T.Y8G("ngIf",i.statuses.has(t.id)),T.R7$(),T.Y8G("ngIf",!i.statuses.has(t.id))}}function On(t,e){if(1&t&&T.DNE(0,Vn,5,6,"tr",24),2&t){const t=T.XpG(2);T.Y8G("ngForOf",t.users)}}function Jn(t,e){1&t&&(T.qex(0),T.j41(1,"bit-table"),T.qex(2,19),T.j41(3,"tr")(4,"th",23),T.EFF(5),T.nI1(6,"i18n"),T.k0s(),T.j41(7,"th",23),T.EFF(8),T.nI1(9,"i18n"),T.k0s()(),T.bVm(),T.DNE(10,On,1,1,"ng-template",22),T.k0s(),T.bVm()),2&t&&(T.R7$(5),T.SpI(" ",T.bMT(6,2,"member")," "),T.R7$(3),T.JRh(T.bMT(9,4,"status")))}function qn(t,e){if(1&t&&(T.j41(0,"button",31),T.EFF(1),T.k0s()),2&t){const t=T.XpG();T.Y8G("bitAction",t.submit),T.R7$(),T.SpI(" ",t.bulkTitle," ")}}class Kn{constructor(t,e,i){this.i18nService=t,this.organizationUserApiService=e,this.data=i,this.statuses=new Map,this.loading=!1,this.done=!1,this.showNoMasterPasswordWarning=!1,this.nonCompliantMembers=!1,this.submit=()=>Rn(this,void 0,void 0,(function*(){try{const t=yield this.performBulkUserAction(),e=this.isRevoking?"bulkRevokedMessage":"bulkRestoredMessage";t.data.forEach((t=>Rn(this,void 0,void 0,(function*(){const i=""!==t.error?this.i18nService.t("cannotRestoreAccessError"):this.i18nService.t(e);this.statuses.set(t.id,i),""!==t.error&&(this.nonCompliantMembers=!0)})))),this.done=!0}catch(t){this.error=t.message}})),this.isRevoking=i.isRevoking,this.organizationId=i.organizationId,this.users=i.users,this.showNoMasterPasswordWarning=this.users.some((t=>t.status>y.Zx.Invited&&!1===t.hasMasterPassword))}get bulkTitle(){const t=this.isRevoking?"revokeMembers":"restoreMembers";return this.i18nService.t(t)}performBulkUserAction(){return Rn(this,void 0,void 0,(function*(){const t=this.users.map((t=>t.id));return this.isRevoking?yield this.organizationUserApiService.revokeManyOrganizationUsers(this.organizationId,t):yield this.organizationUserApiService.restoreManyOrganizationUsers(this.organizationId,t)}))}static open(t,e){return t.open(Kn,{data:e})}}Kn.ɵfac=function(t){return new(t||Kn)(T.rXU(z.W),T.rXU(f.uB),T.rXU(R.Qs))},Kn.ɵcmp=T.VBU({type:Kn,selectors:[["app-bulk-restore-revoke"]],standalone:!1,decls:17,vars:10,consts:[["userDisplay",""],["emailOnly",""],["dialogSize","large"],["bitDialogTitle",""],["bitDialogContent",""],["type","danger",4,"ngIf"],["type","danger",3,"title",4,"ngIf"],[4,"ngIf"],["bitDialogFooter",""],["type","button","bitButton","","buttonType","primary",3,"bitAction",4,"ngIf"],["type","button","bitButton","","buttonType","secondary","bitDialogClose",""],["type","danger"],["type","danger",3,"title"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-6"],["size","small",3,"text","id"],[4,"ngIf","ngIfElse"],[1,"tw-truncate",3,"title"],[1,"tw-block","tw-text-muted","tw-truncate"],["header",""],["bitCell",""],["bitCell","","class","tw-w-1/2",4,"ngIf"],["body",""],["bitCell","",1,"tw-w-1/2"],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["bitCell","",1,"tw-max-w-0"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"tw-block","tw-lowercase","tw-text-muted"],["aria-hidden","true",1,"bwi","bwi-exclamation-triangle"],["bitCell","",4,"ngIf"],["type","button","bitButton","","buttonType","primary",3,"bitAction"]],template:function(t,e){1&t&&(T.j41(0,"bit-dialog",2),T.qex(1,3),T.j41(2,"span"),T.EFF(3),T.k0s(),T.bVm(),T.j41(4,"div",4),T.DNE(5,$n,3,3,"bit-callout",5)(6,Fn,2,1,"bit-callout",5)(7,Tn,4,6,"bit-callout",6)(8,En,7,6,"ng-template",null,0,T.C5r)(10,Nn,10,5,"ng-container",7)(11,Jn,11,6,"ng-container",7),T.k0s(),T.qex(12,8),T.DNE(13,qn,2,2,"button",9),T.j41(14,"button",10),T.EFF(15),T.nI1(16,"i18n"),T.k0s(),T.bVm(),T.k0s()),2&t&&(T.R7$(3),T.JRh(e.bulkTitle),T.R7$(2),T.Y8G("ngIf",e.users.length<=0),T.R7$(),T.Y8G("ngIf",e.error),T.R7$(),T.Y8G("ngIf",e.nonCompliantMembers),T.R7$(3),T.Y8G("ngIf",!e.done),T.R7$(),T.Y8G("ngIf",e.done),T.R7$(2),T.Y8G("ngIf",!e.done&&e.users.length>0),T.R7$(2),T.SpI(" ",T.bMT(16,8,"close")," "))},dependencies:[N.Sq,N.bT,N.T3,Y.p,hi.f,J.Q,ai.G,ie.I,K.m,ge.Q,me.Y,be._,be.O,at.$,De.b],encapsulation:2});var Wn=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((n=n.apply(t,e||[])).next())}))};function Ln(t,e){1&t&&(T.j41(0,"div",6),T.nrm(1,"i",7),T.nI1(2,"i18n"),T.EFF(3),T.nI1(4,"i18n"),T.k0s()),2&t&&(T.R7$(),T.FS9("title",T.bMT(2,2,"loading")),T.R7$(2),T.SpI(" ",T.bMT(4,4,"loading")," "))}function _n(t,e){if(1&t&&(T.j41(0,"small",19),T.EFF(1),T.k0s()),2&t){const t=T.XpG().$implicit;T.R7$(),T.JRh(t.user.name)}}function Qn(t,e){if(1&t&&(T.j41(0,"td",20),T.EFF(1),T.k0s()),2&t){const t=T.XpG().$implicit;T.R7$(),T.SpI(" ",t.message," ")}}function Hn(t,e){if(1&t&&(T.j41(0,"td",10),T.EFF(1),T.k0s()),2&t){const t=T.XpG().$implicit;T.R7$(),T.SpI(" ",t.message," ")}}function Zn(t,e){if(1&t&&(T.j41(0,"tr",13)(1,"td",14),T.nrm(2,"bit-avatar",15),T.nI1(3,"userName"),T.k0s(),T.j41(4,"td",10),T.EFF(5),T.DNE(6,_n,2,1,"small",16),T.k0s(),T.DNE(7,Qn,2,1,"td",17)(8,Hn,2,1,"td",18),T.k0s()),2&t){const t=e.$implicit;T.R7$(2),T.Y8G("text",T.bMT(3,6,t.user))("id",t.user.id),T.R7$(3),T.SpI(" ",t.user.email," "),T.R7$(),T.Y8G("ngIf",t.user.name),T.R7$(),T.Y8G("ngIf",t.error),T.R7$(),T.Y8G("ngIf",!t.error)}}function ts(t,e){if(1&t&&T.DNE(0,Zn,9,8,"tr",12),2&t){const t=T.XpG(2);T.Y8G("ngForOf",t.users)}}function es(t,e){1&t&&(T.j41(0,"bit-table"),T.qex(1,8),T.j41(2,"tr")(3,"th",9),T.EFF(4),T.nI1(5,"i18n"),T.k0s(),T.j41(6,"th",10),T.EFF(7),T.nI1(8,"i18n"),T.k0s()(),T.bVm(),T.DNE(9,ts,1,1,"ng-template",11),T.k0s()),2&t&&(T.R7$(4),T.JRh(T.bMT(5,2,"user")),T.R7$(3),T.JRh(T.bMT(8,4,"status")))}class is{constructor(t,e,i){this.data=t,this.i18nService=e,this.logService=i,this.loading=!1}ngOnInit(){return Wn(this,void 0,void 0,(function*(){this.loading=!0,yield this.showBulkStatus(this.data)}))}showBulkStatus(t){return Wn(this,void 0,void 0,(function*(){try{const e=(yield t.request).data.filter((t=>""!==t.error)).reduce(((t,e)=>Object.assign(Object.assign({},t),{[e.id]:e.error})),{}),i=t.filteredUsers.reduce(((t,e)=>Object.assign(Object.assign({},t),{[e.id]:e})),{});this.users=t.users.map((n=>{var s;let o=null!==(s=e[n.id])&&void 0!==s?s:t.successfulMessage;return i.hasOwnProperty(n.id)||(o=this.i18nService.t("bulkFilteredMessage")),{user:n,error:e.hasOwnProperty(n.id),message:o}})),this.loading=!1}catch(e){this.logService.error(e)}}))}static open(t,e){return t.open(is,e)}}is.ɵfac=function(t){return new(t||is)(T.rXU(R.Qs),T.rXU(z.W),T.rXU(ae.K))},is.ɵcmp=T.VBU({type:is,selectors:[["app-bulk-status"]],standalone:!1,decls:9,vars:8,consts:[["dialogSize","large",3,"title"],["bitDialogContent",""],["class","tw-text-center",4,"ngIf"],[4,"ngIf"],["bitDialogFooter",""],["bitButton","","type","button","buttonType","secondary","bitDialogClose",""],[1,"tw-text-center"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["header",""],["colspan","2","bitCell",""],["bitCell",""],["body",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["width","30","bitCell",""],["size","small",3,"text","id"],["class","tw-text-muted tw-block",4,"ngIf"],["class","tw-text-danger","bitCell","",4,"ngIf"],["bitCell","",4,"ngIf"],[1,"tw-text-muted","tw-block"],["bitCell","",1,"tw-text-danger"]],template:function(t,e){1&t&&(T.j41(0,"bit-dialog",0),T.nI1(1,"i18n"),T.qex(2,1),T.DNE(3,Ln,5,6,"div",2)(4,es,10,6,"bit-table",3),T.bVm(),T.qex(5,4),T.j41(6,"button",5),T.EFF(7),T.nI1(8,"i18n"),T.k0s(),T.bVm(),T.k0s()),2&t&&(T.Y8G("title",T.bMT(1,4,"bulkConfirmStatus")),T.R7$(3),T.Y8G("ngIf",e.loading),T.R7$(),T.Y8G("ngIf",!e.loading),T.R7$(3),T.SpI(" ",T.bMT(8,6,"close")," "))},dependencies:[N.Sq,N.bT,hi.f,J.Q,ie.I,K.m,ge.Q,me.Y,be._,be.O,at.$,De.b],encapsulation:2});var ns,ss=i(71373),os=i(57083),rs=i(69896),as=i(65113),cs=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((n=n.apply(t,e||[])).next())}))};function ls(t,e){if(1&t&&T.nrm(0,"auth-password-callout",13),2&t){const t=T.XpG();T.Y8G("policy",t.enforcedPolicyOptions)}}!function(t){t.Ok="ok"}(ns||(ns={}));class ds{constructor(t,e,i,n,s,o,r,a,d,u,p,h){this.data=t,this.resetPasswordService=e,this.i18nService=i,this.platformUtilsService=n,this.passwordGenerationService=s,this.policyService=o,this.logService=r,this.dialogService=a,this.toastService=d,this.formBuilder=u,this.dialogRef=p,this.accountService=h,this.formGroup=this.formBuilder.group({newPassword:["",c.k0.required]}),this.showPassword=!1,this.destroy$=new l.B,this.submit=()=>cs(this,void 0,void 0,(function*(){if(null==this.formGroup.value.newPassword||""===this.formGroup.value.newPassword)return this.toastService.showToast({variant:"error",title:this.i18nService.t("errorOccurred"),message:this.i18nService.t("masterPasswordRequired")}),!1;if(this.formGroup.value.newPassword.length<rt.A.minimumPasswordLength)return this.toastService.showToast({variant:"error",title:this.i18nService.t("errorOccurred"),message:this.i18nService.t("masterPasswordMinlength",rt.A.minimumPasswordLength)}),!1;if(null==this.enforcedPolicyOptions||this.policyService.evaluateMasterPassword(this.passwordStrengthScore,this.formGroup.value.newPassword,this.enforcedPolicyOptions)){if(this.passwordStrengthScore<3){if(!(yield this.dialogService.openSimpleDialog({title:{key:"weakMasterPassword"},content:{key:"weakMasterPasswordDesc"},type:"warning"})))return!1}try{yield this.resetPasswordService.resetMasterPassword(this.formGroup.value.newPassword,this.data.email,this.data.id,this.data.organizationId),this.toastService.showToast({variant:"success",title:null,message:this.i18nService.t("resetPasswordSuccess")})}catch(t){this.logService.error(t)}this.dialogRef.close(ns.Ok)}else this.toastService.showToast({variant:"error",title:this.i18nService.t("errorOccurred"),message:this.i18nService.t("masterPasswordPolicyRequirementsNotMet")})}))}ngOnInit(){return cs(this,void 0,void 0,(function*(){this.accountService.activeAccount$.pipe(Ee.F6,(0,h.n)((t=>this.policyService.masterPasswordPolicyOptions$(t))),(0,b.Q)(this.destroy$)).subscribe((t=>this.enforcedPolicyOptions=t))}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get loggedOutWarningName(){return null!=this.data.name?this.data.name:this.i18nService.t("thisUser")}generatePassword(){return cs(this,void 0,void 0,(function*(){var t,e;const i=null!==(e=null===(t=yield this.passwordGenerationService.getOptions())||void 0===t?void 0:t[0])&&void 0!==e?e:{};this.formGroup.patchValue({newPassword:yield this.passwordGenerationService.generatePassword(i)}),this.passwordStrengthComponent.updatePasswordStrength(this.formGroup.value.newPassword)}))}togglePassword(){this.showPassword=!this.showPassword,document.getElementById("newPassword").focus()}copy(){const t=this.formGroup.value.newPassword;null!=t&&(this.platformUtilsService.copyToClipboard(t,{window}),this.toastService.showToast({variant:"info",title:null,message:this.i18nService.t("valueCopied",this.i18nService.t("password"))}))}getStrengthScore(t){this.passwordStrengthScore=t}}ds.open=(t,e)=>t.open(ds,e),ds.ɵfac=function(t){return new(t||ds)(T.rXU(R.Qs),T.rXU(oi.w),T.rXU(z.W),T.rXU(re.y),T.rXU(ss.JJ),T.rXU(ri.m),T.rXU(ae.K),T.rXU(M.o3),T.rXU(P.f),T.rXU(c.ok),T.rXU(M.ce),T.rXU(D.Di))},ds.ɵcmp=T.VBU({type:ds,selectors:[["app-reset-password"]],viewQuery:function(t,e){if(1&t&&T.GBs(s.k,5),2&t){let t;T.mGM(t=T.lsd())&&(e.passwordStrengthComponent=t.first)}},standalone:!1,decls:27,vars:34,consts:[[3,"formGroup","bitSubmit"],[3,"title","subtitle"],["bitDialogContent",""],["type","warning"],["message","resetPasswordMasterPasswordPolicyInEffect",3,"policy",4,"ngIf"],["id","newPassword","bitInput","","name","NewPassword","formControlName","newPassword","required","","appInputVerbatim","","autocomplete","new-password",3,"type"],["type","button","bitIconButton","bwi-generate","bitSuffix","",3,"click","appA11yTitle"],["type","button","bitSuffix","","buttonType","secondary",3,"click","bitIconButton","appA11yTitle"],["type","button","bitSuffix","","bitIconButton","bwi-clone",3,"click","appA11yTitle"],[3,"passwordStrengthScore","password","email","showText"],["bitDialogFooter",""],["bitButton","","buttonType","primary","bitFormButton","","type","submit"],["bitButton","","buttonType","secondary","bitDialogClose","","type","button"],["message","resetPasswordMasterPasswordPolicyInEffect",3,"policy"]],template:function(t,e){1&t&&(T.j41(0,"form",0)(1,"bit-dialog",1),T.nI1(2,"i18n"),T.qex(3,2),T.j41(4,"bit-callout",3),T.EFF(5),T.nI1(6,"i18n"),T.k0s(),T.DNE(7,ls,1,1,"auth-password-callout",4),T.j41(8,"bit-form-field")(9,"bit-label"),T.EFF(10),T.nI1(11,"i18n"),T.k0s(),T.nrm(12,"input",5),T.j41(13,"button",6),T.nI1(14,"i18n"),T.bIt("click",(function(){return e.generatePassword()})),T.k0s(),T.j41(15,"button",7),T.nI1(16,"i18n"),T.bIt("click",(function(){return e.togglePassword()})),T.k0s(),T.j41(17,"button",8),T.nI1(18,"i18n"),T.bIt("click",(function(){return e.copy()})),T.k0s()(),T.j41(19,"tools-password-strength",9),T.bIt("passwordStrengthScore",(function(t){return e.getStrengthScore(t)})),T.k0s(),T.bVm(),T.qex(20,10),T.j41(21,"button",11),T.EFF(22),T.nI1(23,"i18n"),T.k0s(),T.j41(24,"button",12),T.EFF(25),T.nI1(26,"i18n"),T.k0s(),T.bVm(),T.k0s()()),2&t&&(T.Y8G("formGroup",e.formGroup)("bitSubmit",e.submit),T.R7$(),T.Y8G("title",T.bMT(2,17,"recoverAccount"))("subtitle",e.data.name),T.R7$(4),T.SpI("",T.i5U(6,19,"resetPasswordLoggedOutWarning",e.loggedOutWarningName)," "),T.R7$(2),T.Y8G("ngIf",e.enforcedPolicyOptions),T.R7$(3),T.SpI(" ",T.bMT(11,22,"newPassword")," "),T.R7$(2),T.Y8G("type",e.showPassword?"text":"password"),T.R7$(),T.Y8G("appA11yTitle",T.bMT(14,24,"generatePassword")),T.R7$(2),T.FS9("appA11yTitle",T.bMT(16,26,"toggleVisibility")),T.Y8G("bitIconButton",e.showPassword?"bwi-eye-slash":"bwi-eye"),T.R7$(2),T.FS9("appA11yTitle",T.bMT(18,28,"copyPassword")),T.R7$(2),T.Y8G("password",e.formGroup.value.newPassword)("email",e.data.email)("showText",!0),T.R7$(3),T.SpI(" ",T.bMT(23,30,"save")," "),T.R7$(3),T.SpI(" ",T.bMT(26,32,"cancel")," "))},dependencies:[N.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.j4,c.JD,A.C,os.q,B.$,V.L,J.Q,ai.G,ie.I,K.m,L.m,Q.J,H.h,rs.a,de.s,as.R,s.k,at.$],encapsulation:2});class us{constructor(t,e,i,n,s){this.keyService=t,this.encryptService=e,this.organizationUserApiService=i,this.accountService=n,this.i18nService=s}orgKey$(t){return this.accountService.activeAccount$.pipe(Ee.F6,(0,h.n)((t=>this.keyService.orgKeys$(t))),(0,Ge.p)((t=>!!t)),(0,p.T)((e=>e[t.id])))}confirmUser(t,e,i){const n=this.orgKey$(t).pipe((0,h.n)((t=>this.encryptService.encryptString(this.i18nService.t("myItems"),t)))),s=this.orgKey$(t).pipe((0,h.n)((t=>this.encryptService.encapsulateKeyUnsigned(t,i))));return(0,u.z)([s,n]).pipe((0,h.n)((([i,n])=>{const s={key:i.encryptedString,defaultUserCollectionName:n.encryptedString};return this.organizationUserApiService.postOrganizationUserConfirm(t.id,e.id,s)})))}}us.ɵfac=function(t){return new(t||us)(T.KVO(Wt.Lu),T.KVO(te.N),T.KVO(f.uB),T.KVO(D.Di),T.KVO(z.W))},us.ɵprov=T.jDH({token:us,factory:us.ɵfac,providedIn:"root"});var ps=i(27866),hs=i(11224),gs=i(48180),ms=i(94438),bs=i(32924),fs=i(32316),vs=i(12694),ys=i(16496),Is=i(5520),Ss=i(69672),ws=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((n=n.apply(t,e||[])).next())}))};function Rs(t,e){if(1&t){const t=T.RV6();T.j41(0,"button",10),T.bIt("click",(function(){T.eBV(t);const e=T.XpG();return T.Njj(e.invite())})),T.nrm(1,"i",11),T.EFF(2),T.nI1(3,"i18n"),T.k0s()}if(2&t){const t=T.XpG();T.Y8G("disabled",!t.firstLoaded),T.R7$(2),T.SpI(" ",T.bMT(3,2,"inviteMember")," ")}}function ks(t,e){if(1&t&&(T.j41(0,"span",15),T.EFF(1),T.k0s()),2&t){const t=e.ngIf;T.R7$(),T.JRh(t)}}function $s(t,e){if(1&t&&(T.j41(0,"span",15),T.EFF(1),T.k0s()),2&t){const t=e.ngIf;T.R7$(),T.JRh(t)}}function Fs(t,e){if(1&t&&(T.j41(0,"span",15),T.EFF(1),T.k0s()),2&t){const t=e.ngIf;T.R7$(),T.JRh(t)}}function Ts(t,e){if(1&t&&(T.j41(0,"span",15),T.EFF(1),T.k0s()),2&t){const t=e.ngIf;T.R7$(),T.JRh(t)}}function Ms(t,e){if(1&t){const t=T.RV6();T.j41(0,"bit-toggle-group",12),T.nI1(1,"i18n"),T.bIt("selectedChange",(function(e){T.eBV(t);const i=T.XpG();return T.Njj(i.statusToggle.next(e))})),T.j41(2,"bit-toggle",13),T.EFF(3),T.nI1(4,"i18n"),T.DNE(5,ks,2,1,"span",14),T.k0s(),T.j41(6,"bit-toggle",13),T.EFF(7),T.nI1(8,"i18n"),T.DNE(9,$s,2,1,"span",14),T.k0s(),T.j41(10,"bit-toggle",13),T.EFF(11),T.nI1(12,"i18n"),T.DNE(13,Fs,2,1,"span",14),T.k0s(),T.j41(14,"bit-toggle",13),T.EFF(15),T.nI1(16,"i18n"),T.DNE(17,Ts,2,1,"span",14),T.k0s()()}if(2&t){const t=T.XpG();T.Y8G("selected",t.status),T.BMQ("aria-label",T.bMT(1,14,"memberStatusFilter")),T.R7$(2),T.Y8G("value",null),T.R7$(),T.SpI(" ",T.bMT(4,16,"all")," "),T.R7$(2),T.Y8G("ngIf",t.dataSource.activeUserCount),T.R7$(),T.Y8G("value",t.userStatusType.Invited),T.R7$(),T.SpI(" ",T.bMT(8,18,"invited")," "),T.R7$(2),T.Y8G("ngIf",t.dataSource.invitedUserCount),T.R7$(),T.Y8G("value",t.userStatusType.Accepted),T.R7$(),T.SpI(" ",T.bMT(12,20,"needsConfirmation")," "),T.R7$(2),T.Y8G("ngIf",t.dataSource.acceptedUserCount),T.R7$(),T.Y8G("value",t.userStatusType.Revoked),T.R7$(),T.SpI(" ",T.bMT(16,22,"revoked")," "),T.R7$(2),T.Y8G("ngIf",t.dataSource.revokedUserCount)}}function Gs(t,e){1&t&&(T.qex(0),T.nrm(1,"i",16),T.nI1(2,"i18n"),T.j41(3,"span",17),T.EFF(4),T.nI1(5,"i18n"),T.k0s(),T.bVm()),2&t&&(T.R7$(),T.FS9("title",T.bMT(2,2,"loading")),T.R7$(3),T.JRh(T.bMT(5,4,"loading")))}function Es(t,e){1&t&&(T.j41(0,"p"),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.JRh(T.bMT(2,1,"noMembersInList")))}function Us(t,e){1&t&&(T.j41(0,"bit-callout",30),T.nI1(1,"i18n"),T.EFF(2),T.nI1(3,"i18n"),T.k0s()),2&t&&(T.FS9("title",T.bMT(1,2,"confirmUsers")),T.R7$(2),T.SpI(" ",T.bMT(3,4,"usersNeedConfirmed")," "))}function js(t,e){if(1&t){const t=T.RV6();T.j41(0,"th",31)(1,"input",32),T.bIt("change",(function(e){T.eBV(t);const i=T.XpG(3);return T.Njj(i.dataSource.checkAllFilteredUsers(e.target.checked))})),T.k0s(),T.j41(2,"label",33),T.EFF(3),T.nI1(4,"i18n"),T.k0s()()}2&t&&(T.R7$(3),T.JRh(T.bMT(4,1,"all")))}function Cs(t,e){if(1&t&&(T.nrm(0,"button",34),T.nI1(1,"i18n")),2&t){T.XpG();const t=T.sdS(24);T.FS9("appA11yTitle",T.bMT(1,2,"options")),T.Y8G("bitMenuTriggerFor",t)}}function xs(t,e){if(1&t){const t=T.RV6();T.qex(0),T.j41(1,"button",35),T.bIt("click",(function(){T.eBV(t);const e=T.XpG(3);return T.Njj(e.bulkEnableSM())})),T.EFF(2),T.nI1(3,"i18n"),T.k0s(),T.nrm(4,"bit-menu-divider"),T.bVm()}2&t&&(T.R7$(2),T.SpI(" ",T.bMT(3,1,"activateSecretsManager")," "))}function Ps(t,e){if(1&t){const t=T.RV6();T.j41(0,"button",35),T.bIt("click",(function(){T.eBV(t);const e=T.XpG(3);return T.Njj(e.bulkReinvite())})),T.nrm(1,"i",36),T.EFF(2),T.nI1(3,"i18n"),T.k0s()}2&t&&(T.R7$(2),T.SpI(" ",T.bMT(3,1,"reinviteSelected")," "))}function zs(t,e){if(1&t){const t=T.RV6();T.j41(0,"button",35),T.bIt("click",(function(){T.eBV(t);const e=T.XpG(3);return T.Njj(e.bulkConfirm())})),T.j41(1,"span",37),T.nrm(2,"i",38),T.EFF(3),T.nI1(4,"i18n"),T.k0s()()}2&t&&(T.R7$(3),T.SpI(" ",T.bMT(4,1,"confirmSelected")," "))}function Ds(t,e){if(1&t){const t=T.RV6();T.j41(0,"button",35),T.bIt("click",(function(){T.eBV(t);const e=T.XpG(3);return T.Njj(e.bulkRestore())})),T.nrm(1,"i",39),T.EFF(2),T.nI1(3,"i18n"),T.k0s()}2&t&&(T.R7$(2),T.SpI(" ",T.bMT(3,1,"restoreAccess")," "))}function Xs(t,e){if(1&t){const t=T.RV6();T.j41(0,"button",35),T.bIt("click",(function(){T.eBV(t);const e=T.XpG(3);return T.Njj(e.bulkRevoke())})),T.nrm(1,"i",40),T.EFF(2),T.nI1(3,"i18n"),T.k0s()}2&t&&(T.R7$(2),T.SpI(" ",T.bMT(3,1,"revokeAccess")," "))}function Ns(t,e){if(1&t){const t=T.RV6();T.j41(0,"button",35),T.bIt("click",(function(){T.eBV(t);const e=T.XpG(3);return T.Njj(e.bulkRemove())})),T.j41(1,"span",41),T.nrm(2,"i",42),T.EFF(3),T.nI1(4,"i18n"),T.k0s()()}2&t&&(T.R7$(3),T.SpI(" ",T.bMT(4,1,"remove")," "))}function As(t,e){if(1&t){const t=T.RV6();T.j41(0,"button",35),T.bIt("click",(function(){T.eBV(t);const e=T.XpG(3);return T.Njj(e.bulkDelete())})),T.j41(1,"span",41),T.nrm(2,"i",43),T.EFF(3),T.nI1(4,"i18n"),T.k0s()()}2&t&&(T.R7$(3),T.SpI(" ",T.bMT(4,1,"delete")," "))}function Ys(t,e){if(1&t){const t=T.RV6();T.j41(0,"td",49),T.bIt("click",(function(){T.eBV(t);const e=T.XpG().$implicit,i=T.XpG(4);return T.Njj(i.dataSource.checkUser(e))})),T.j41(1,"input",50),T.mxI("ngModelChange",(function(e){T.eBV(t);const i=T.XpG().$implicit;return T.DH7(i.checked,e)||(i.checked=e),T.Njj(e)})),T.k0s()()}if(2&t){const t=T.XpG().$implicit;T.R7$(),T.R50("ngModel",t.checked)}}function Bs(t,e){1&t&&(T.j41(0,"span",60),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.SpI(" ",T.bMT(2,1,"invited")," "))}function Vs(t,e){1&t&&(T.j41(0,"span",61),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.SpI(" ",T.bMT(2,1,"needsConfirmation")," "))}function Os(t,e){1&t&&(T.j41(0,"span",60),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.SpI(" ",T.bMT(2,1,"revoked")," "))}function Js(t,e){if(1&t&&(T.j41(0,"div",62),T.EFF(1),T.k0s()),2&t){const t=T.XpG(2).$implicit;T.R7$(),T.SpI(" ",t.email," ")}}function qs(t,e){if(1&t){const t=T.RV6();T.qex(0),T.j41(1,"td",51),T.bIt("click",(function(){T.eBV(t);const e=T.XpG().$implicit,i=T.XpG(4);return T.Njj(i.edit(e))})),T.j41(2,"div",52),T.nrm(3,"bit-avatar",53),T.nI1(4,"userName"),T.j41(5,"div",54)(6,"div",55)(7,"button",56),T.EFF(8),T.k0s(),T.DNE(9,Bs,3,3,"span",57)(10,Vs,3,3,"span",58)(11,Os,3,3,"span",57),T.k0s(),T.DNE(12,Js,2,1,"div",59),T.k0s()()(),T.bVm()}if(2&t){let t;const e=T.XpG().$implicit,i=T.XpG(4);T.R7$(3),T.Y8G("text",T.bMT(4,8,e))("id",e.userId)("color",e.avatarColor),T.R7$(5),T.SpI(" ",null!==(t=e.name)&&void 0!==t?t:e.email," "),T.R7$(),T.Y8G("ngIf",e.status===i.userStatusType.Invited),T.R7$(),T.Y8G("ngIf",e.status===i.userStatusType.Accepted),T.R7$(),T.Y8G("ngIf",e.status===i.userStatusType.Revoked),T.R7$(),T.Y8G("ngIf",e.name)}}function Ks(t,e){1&t&&(T.j41(0,"span",60),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.SpI(" ",T.bMT(2,1,"invited")," "))}function Ws(t,e){1&t&&(T.j41(0,"span",61),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.SpI(" ",T.bMT(2,1,"needsConfirmation")," "))}function Ls(t,e){1&t&&(T.j41(0,"span",60),T.EFF(1),T.nI1(2,"i18n"),T.k0s()),2&t&&(T.R7$(),T.SpI(" ",T.bMT(2,1,"revoked")," "))}function _s(t,e){if(1&t&&(T.j41(0,"div",62),T.EFF(1),T.k0s()),2&t){const t=T.XpG(2).$implicit;T.R7$(),T.SpI(" ",t.email," ")}}function Qs(t,e){if(1&t&&(T.j41(0,"td",24)(1,"div",52),T.nrm(2,"bit-avatar",53),T.nI1(3,"userName"),T.j41(4,"div",54)(5,"div",55)(6,"span"),T.EFF(7),T.k0s(),T.DNE(8,Ks,3,3,"span",57)(9,Ws,3,3,"span",58)(10,Ls,3,3,"span",57),T.k0s(),T.DNE(11,_s,2,1,"div",59),T.k0s()()()),2&t){let t;const e=T.XpG().$implicit,i=T.XpG(4);T.R7$(2),T.Y8G("text",T.bMT(3,8,e))("id",e.userId)("color",e.avatarColor),T.R7$(5),T.JRh(null!==(t=e.name)&&void 0!==t?t:e.email),T.R7$(),T.Y8G("ngIf",e.status===i.userStatusType.Invited),T.R7$(),T.Y8G("ngIf",e.status===i.userStatusType.Accepted),T.R7$(),T.Y8G("ngIf",e.status===i.userStatusType.Revoked),T.R7$(),T.Y8G("ngIf",e.name)}}function Hs(t,e){if(1&t){const t=T.RV6();T.qex(0),T.j41(1,"td",51),T.bIt("click",(function(){T.eBV(t);const e=T.XpG().$implicit,i=T.XpG(4);return T.Njj(i.edit(e,i.organization.useGroups?i.memberTab.Groups:i.memberTab.Collections))})),T.nrm(2,"bit-badge-list",63),T.k0s(),T.bVm()}if(2&t){const t=T.XpG().$implicit,e=T.XpG(4);T.R7$(2),T.Y8G("items",e.organization.useGroups?t.groupNames:t.collectionNames)("maxItems",3)}}function Zs(t,e){if(1&t&&(T.j41(0,"td",24),T.nrm(1,"bit-badge-list",63),T.k0s()),2&t){const t=T.XpG().$implicit,e=T.XpG(4);T.R7$(),T.Y8G("items",e.organization.useGroups?t.groupNames:t.collectionNames)("maxItems",3)}}function to(t,e){if(1&t){const t=T.RV6();T.qex(0),T.j41(1,"td",64),T.bIt("click",(function(){T.eBV(t);const e=T.XpG().$implicit,i=T.XpG(4);return T.Njj(i.edit(e,i.memberTab.Role))})),T.EFF(2),T.nI1(3,"userType"),T.k0s(),T.bVm()}if(2&t){const t=T.XpG().$implicit;T.R7$(2),T.SpI(" ",T.bMT(3,1,t.type)," ")}}function eo(t,e){if(1&t&&(T.j41(0,"td",65),T.EFF(1),T.nI1(2,"userType"),T.k0s()),2&t){const t=T.XpG().$implicit;T.R7$(),T.SpI(" ",T.bMT(2,1,t.type)," ")}}function io(t,e){1&t&&(T.qex(0),T.nrm(1,"i",66),T.nI1(2,"i18n"),T.j41(3,"span",17),T.EFF(4),T.nI1(5,"i18n"),T.k0s(),T.bVm()),2&t&&(T.R7$(),T.FS9("title",T.bMT(2,2,"userUsingTwoStep")),T.R7$(3),T.JRh(T.bMT(5,4,"userUsingTwoStep")))}function no(t,e){1&t&&(T.qex(0),T.nrm(1,"i",67),T.nI1(2,"i18n"),T.j41(3,"span",17),T.EFF(4),T.nI1(5,"i18n"),T.k0s(),T.bVm()),2&t&&(T.R7$(),T.FS9("title",T.bMT(2,2,"enrolledAccountRecovery")),T.R7$(3),T.JRh(T.bMT(5,4,"enrolledAccountRecovery")))}function so(t,e){if(1&t){const t=T.RV6();T.j41(0,"button",35),T.bIt("click",(function(){T.eBV(t);const e=T.XpG(2).$implicit,i=T.XpG(4);return T.Njj(i.reinvite(e))})),T.nrm(1,"i",70),T.EFF(2),T.nI1(3,"i18n"),T.k0s()}2&t&&(T.R7$(2),T.SpI(" ",T.bMT(3,1,"resendInvitation")," "))}function oo(t,e){if(1&t){const t=T.RV6();T.j41(0,"button",35),T.bIt("click",(function(){T.eBV(t);const e=T.XpG(2).$implicit,i=T.XpG(4);return T.Njj(i.confirm(e))})),T.j41(1,"span",37),T.nrm(2,"i",71),T.EFF(3),T.nI1(4,"i18n"),T.k0s()()}2&t&&(T.R7$(3),T.SpI(" ",T.bMT(4,1,"confirm")," "))}function ro(t,e){1&t&&T.nrm(0,"bit-menu-divider")}function ao(t,e){if(1&t){const t=T.RV6();T.j41(0,"button",35),T.bIt("click",(function(){T.eBV(t);const e=T.XpG(2).$implicit,i=T.XpG(4);return T.Njj(i.edit(e,i.memberTab.Groups))})),T.nrm(1,"i",72),T.EFF(2),T.nI1(3,"i18n"),T.k0s()}2&t&&(T.R7$(2),T.SpI(" ",T.bMT(3,1,"groups")," "))}function co(t,e){if(1&t){const t=T.RV6();T.j41(0,"button",35),T.bIt("click",(function(){T.eBV(t);const e=T.XpG(2).$implicit,i=T.XpG(4);return T.Njj(i.openEventsDialog(e))})),T.nrm(1,"i",73),T.EFF(2),T.nI1(3,"i18n"),T.k0s()}2&t&&(T.R7$(2),T.SpI(" ",T.bMT(3,1,"eventLogs")," "))}function lo(t,e){if(1&t){const t=T.RV6();T.qex(0),T.DNE(1,so,4,3,"button",28)(2,oo,5,3,"button",28)(3,ro,1,0,"bit-menu-divider",9),T.j41(4,"button",35),T.bIt("click",(function(){T.eBV(t);const e=T.XpG().$implicit,i=T.XpG(4);return T.Njj(i.edit(e,i.memberTab.Role))})),T.nrm(5,"i",68),T.EFF(6),T.nI1(7,"i18n"),T.k0s(),T.DNE(8,ao,4,3,"button",28),T.j41(9,"button",35),T.bIt("click",(function(){T.eBV(t);const e=T.XpG().$implicit,i=T.XpG(4);return T.Njj(i.edit(e,i.memberTab.Collections))})),T.nrm(10,"i",69),T.EFF(11),T.nI1(12,"i18n"),T.k0s(),T.nrm(13,"bit-menu-divider"),T.DNE(14,co,4,3,"button",28),T.bVm()}if(2&t){const t=T.XpG().$implicit,e=T.XpG(4);T.R7$(),T.Y8G("ngIf",t.status===e.userStatusType.Invited),T.R7$(),T.Y8G("ngIf",t.status===e.userStatusType.Accepted),T.R7$(),T.Y8G("ngIf",t.status===e.userStatusType.Accepted||t.status===e.userStatusType.Invited),T.R7$(3),T.SpI(" ",T.bMT(7,7,"memberRole")," "),T.R7$(2),T.Y8G("ngIf",e.organization.useGroups),T.R7$(3),T.SpI(" ",T.bMT(12,9,"collections")," "),T.R7$(3),T.Y8G("ngIf",e.organization.useEvents&&t.status===e.userStatusType.Confirmed)}}function uo(t,e){if(1&t){const t=T.RV6();T.j41(0,"button",35),T.bIt("click",(function(){T.eBV(t);const e=T.XpG().$implicit,i=T.XpG(4);return T.Njj(i.resetPassword(e))})),T.nrm(1,"i",74),T.EFF(2),T.nI1(3,"i18n"),T.k0s()}2&t&&(T.R7$(2),T.SpI(" ",T.bMT(3,1,"recoverAccount")," "))}function po(t,e){if(1&t){const t=T.RV6();T.j41(0,"button",35),T.bIt("click",(function(){T.eBV(t);const e=T.XpG(2).$implicit,i=T.XpG(4);return T.Njj(i.restore(e))})),T.nrm(1,"i",75),T.EFF(2),T.nI1(3,"i18n"),T.k0s()}2&t&&(T.R7$(2),T.SpI(" ",T.bMT(3,1,"restoreAccess")," "))}function ho(t,e){if(1&t){const t=T.RV6();T.j41(0,"button",35),T.bIt("click",(function(){T.eBV(t);const e=T.XpG(2).$implicit,i=T.XpG(4);return T.Njj(i.revoke(e))})),T.nrm(1,"i",76),T.EFF(2),T.nI1(3,"i18n"),T.k0s()}2&t&&(T.R7$(2),T.SpI(" ",T.bMT(3,1,"revokeAccess")," "))}function go(t,e){if(1&t){const t=T.RV6();T.j41(0,"button",35),T.bIt("click",(function(){T.eBV(t);const e=T.XpG(2).$implicit,i=T.XpG(4);return T.Njj(i.remove(e))})),T.j41(1,"span",41),T.nrm(2,"i",77),T.EFF(3),T.nI1(4,"i18n"),T.k0s()()}2&t&&(T.R7$(3),T.SpI(" ",T.bMT(4,1,"remove")," "))}function mo(t,e){if(1&t){const t=T.RV6();T.j41(0,"button",35),T.bIt("click",(function(){T.eBV(t);const e=T.XpG(2).$implicit,i=T.XpG(4);return T.Njj(i.deleteUser(e))})),T.j41(1,"span",41),T.nrm(2,"i",78),T.EFF(3),T.nI1(4,"i18n"),T.k0s()()}2&t&&(T.R7$(3),T.SpI(" ",T.bMT(4,1,"delete")," "))}function bo(t,e){if(1&t&&(T.qex(0),T.DNE(1,po,4,3,"button",28)(2,ho,4,3,"button",28)(3,go,5,3,"button",28)(4,mo,5,3,"button",28),T.bVm()),2&t){const t=T.XpG().$implicit,e=T.XpG(4);T.R7$(),T.Y8G("ngIf",t.status===e.userStatusType.Revoked),T.R7$(),T.Y8G("ngIf",t.status!==e.userStatusType.Revoked),T.R7$(),T.Y8G("ngIf",!t.managedByOrganization),T.R7$(),T.Y8G("ngIf",t.managedByOrganization)}}function fo(t,e){if(1&t&&(T.j41(0,"tr",45),T.DNE(1,Ys,2,1,"td",46),T.nI1(2,"async"),T.DNE(3,qs,13,10,"ng-container",47),T.nI1(4,"async"),T.DNE(5,Qs,12,10,"ng-template",null,1,T.C5r)(7,Hs,3,2,"ng-container",47),T.nI1(8,"async"),T.DNE(9,Zs,2,2,"ng-template",null,2,T.C5r)(11,to,4,3,"ng-container",47),T.nI1(12,"async"),T.DNE(13,eo,3,3,"ng-template",null,3,T.C5r),T.j41(15,"td",48),T.DNE(16,io,6,6,"ng-container",9)(17,no,6,6,"ng-container",9),T.k0s(),T.j41(18,"td",24),T.nrm(19,"button",34),T.nI1(20,"i18n"),T.j41(21,"bit-menu",null,4),T.DNE(23,lo,15,11,"ng-container",9),T.nI1(24,"async"),T.DNE(25,uo,4,3,"button",28)(26,bo,5,4,"ng-container",9),T.nI1(27,"async"),T.k0s()()()),2&t){const t=e.$implicit,i=T.sdS(6),n=T.sdS(10),s=T.sdS(14),o=T.sdS(22),r=T.XpG(4);T.Y8G("ngClass",r.rowHeightClass),T.R7$(),T.Y8G("ngIf",T.bMT(2,15,r.showUserManagementControls$)),T.R7$(2),T.Y8G("ngIf",T.bMT(4,17,r.showUserManagementControls$))("ngIfElse",i),T.R7$(4),T.Y8G("ngIf",T.bMT(8,19,r.showUserManagementControls$))("ngIfElse",n),T.R7$(4),T.Y8G("ngIf",T.bMT(12,21,r.showUserManagementControls$))("ngIfElse",s),T.R7$(5),T.Y8G("ngIf",t.twoFactorEnabled),T.R7$(),T.Y8G("ngIf",r.showEnrolledStatus(t)),T.R7$(2),T.FS9("appA11yTitle",T.bMT(20,23,"options")),T.Y8G("bitMenuTriggerFor",o),T.R7$(4),T.Y8G("ngIf",T.bMT(24,25,r.showUserManagementControls$)),T.R7$(2),T.Y8G("ngIf",r.allowResetPassword(t)),T.R7$(),T.Y8G("ngIf",T.bMT(27,27,r.showUserManagementControls$))}}function vo(t,e){if(1&t&&T.DNE(0,fo,28,29,"tr",44),2&t){const t=e.$implicit;T.Y8G("cdkVirtualForOf",t)}}function yo(t,e){if(1&t&&(T.qex(0),T.DNE(1,Us,4,6,"bit-callout",18),T.j41(2,"cdk-virtual-scroll-viewport",19)(3,"bit-table",20),T.qex(4,21),T.j41(5,"tr"),T.DNE(6,js,5,3,"th",22),T.nI1(7,"async"),T.j41(8,"th",23),T.EFF(9),T.nI1(10,"i18n"),T.k0s(),T.j41(11,"th",24),T.EFF(12),T.nI1(13,"i18n"),T.k0s(),T.j41(14,"th",25),T.EFF(15),T.nI1(16,"i18n"),T.k0s(),T.j41(17,"th",24),T.EFF(18),T.nI1(19,"i18n"),T.k0s(),T.j41(20,"th",26),T.DNE(21,Cs,2,4,"button",27),T.nI1(22,"async"),T.j41(23,"bit-menu",null,0),T.DNE(25,xs,5,3,"ng-container",9),T.nI1(26,"async"),T.DNE(27,Ps,4,3,"button",28)(28,zs,5,3,"button",28)(29,Ds,4,3,"button",28)(30,Xs,4,3,"button",28)(31,Ns,5,3,"button",28)(32,As,5,3,"button",28),T.k0s()()(),T.bVm(),T.DNE(33,vo,1,1,"ng-template",29),T.k0s()(),T.bVm()),2&t){const t=T.XpG(2);T.R7$(),T.Y8G("ngIf",t.showConfirmUsers),T.R7$(),T.Y8G("itemSize",t.rowHeight),T.R7$(),T.Y8G("dataSource",t.dataSource),T.R7$(3),T.Y8G("ngIf",T.bMT(7,16,t.showUserManagementControls$)),T.R7$(3),T.JRh(T.bMT(10,18,"name")),T.R7$(3),T.JRh(T.bMT(13,20,t.organization.useGroups?"groups":"collections")),T.R7$(3),T.JRh(T.bMT(16,22,"role")),T.R7$(3),T.JRh(T.bMT(19,24,"policies")),T.R7$(3),T.Y8G("ngIf",T.bMT(22,26,t.showUserManagementControls$)),T.R7$(4),T.Y8G("ngIf",T.bMT(26,28,t.canUseSecretsManager$)),T.R7$(2),T.Y8G("ngIf",t.showBulkReinviteUsers),T.R7$(),T.Y8G("ngIf",t.showBulkConfirmUsers),T.R7$(),T.Y8G("ngIf",t.showBulkRestoreUsers),T.R7$(),T.Y8G("ngIf",t.showBulkRevokeUsers),T.R7$(),T.Y8G("ngIf",t.showBulkRemoveUsers),T.R7$(),T.Y8G("ngIf",t.showBulkDeleteUsers)}}function Io(t,e){if(1&t&&(T.qex(0),T.DNE(1,Es,3,3,"p",9)(2,yo,34,30,"ng-container",9),T.bVm()),2&t){const t=T.XpG();T.R7$(),T.Y8G("ngIf",!t.dataSource.filteredData.length),T.R7$(),T.Y8G("ngIf",t.dataSource.filteredData.length)}}class So extends _e{constructor(){super(...arguments),this.statusType=y.Zx}}class wo extends Ze{get occupiedSeatCount(){return this.organizationUsersCount}constructor(t,e,i,n,s,o,r,a,c,l,d,m,b,f,I,S,R,k,$,F,T,M,G,E,U){super(t,e,n,o,r,a,c,i,l),this.encryptService=s,this.policyService=d,this.policyApiService=m,this.route=b,this.syncService=f,this.organizationService=I,this.accountService=S,this.organizationApiService=R,this.organizationUserApiService=k,this.router=$,this.groupService=F,this.collectionService=T,this.billingApiService=M,this.deleteManagedMemberWarningService=G,this.configService=E,this.organizationUserService=U,this.userType=y.D7,this.userStatusType=y.Zx,this.memberTab=Dt,this.dataSource=new So,this.status=null,this.orgResetPasswordPolicyEnabled=!1,this.orgIsOnSecretsManagerStandalone=!1,this.rowHeight=69,this.rowHeightClass="tw-h-[69px]",this.organizationUsersCount=0;const j=this.route.params.pipe((0,xe.H)((t=>this.accountService.activeAccount$.pipe((0,h.n)((e=>this.organizationService.organizations$(null==e?void 0:e.id).pipe((0,v.Sw)(t.organizationId))))))),(0,g.t)({refCount:!0,bufferSize:1}));this.canUseSecretsManager$=j.pipe((0,p.T)((t=>t.useSecretsManager)));const C=(0,u.z)([this.accountService.activeAccount$.pipe(Ee.F6),j]).pipe((0,h.n)((([t,e])=>e.isProviderUser?(0,Pe.H)(this.policyApiService.getPolicies(e.id)).pipe((0,p.T)((t=>Xe.P.fromListResponse(t)))):this.policyService.policies$(t))));(0,u.z)([this.route.queryParams,C,j]).pipe((0,xe.H)((t=>ws(this,[t],void 0,(function*([t,e,i]){if(this.organization=i,this.organization.canManageUsersPassword&&!this.organization.hasPublicAndPrivateKeys){const t=yield this.keyService.getOrgKey(this.organization.id),e=yield this.keyService.makeKeyPair(t),i=new Ne.B(e[0],e[1].encryptedString),n=yield this.organizationApiService.updateKeys(this.organization.id,i);if(null==n)throw new Error(this.i18nService.t("resetPasswordOrgKeysError"));this.organization.hasPublicAndPrivateKeys=null!=n.publicKey&&null!=n.privateKey,yield this.syncService.fullSync(!0)}const n=e.filter((t=>t.type===y.tt.ResetPassword)).find((t=>t.organizationId===this.organization.id));if(this.orgResetPasswordPolicyEnabled=null==n?void 0:n.enabled,this.orgIsOnSecretsManagerStandalone=!1,yield this.load(),this.searchControl.setValue(t.search),null!=t.viewEvents){const e=this.dataSource.data.filter((e=>e.id===t.viewEvents));e.length>0&&e[0].status===y.Zx.Confirmed&&this.openEventsDialog(e[0])}})))),(0,Jt.pQ)()).subscribe();const x=this.configService.getFeatureFlag$(w.TO.SeparateCustomRolePermissions);this.showUserManagementControls$=(0,u.z)([x,j]).pipe((0,p.T)((([t,e])=>!t||e.canManageUsers)))}getUsers(){return ws(this,void 0,void 0,(function*(){var t;let e,i;const n=this.organizationUserApiService.getAllUsers(this.organization.id,{includeGroups:this.organization.useGroups,includeCollections:!this.organization.useGroups});this.organization.useGroups?e=this.getGroupNameMap():i=this.getCollectionNameMap();const[s,o,r]=yield Promise.all([n,e,i]);return null===(t=s.data)||void 0===t?void 0:t.map((t=>{var e,i;const n=ti.i.fromResponse(t);return n.groupNames=n.groups.map((t=>o.get(t))).sort(null===(e=this.i18nService.collator)||void 0===e?void 0:e.compare),n.collectionNames=n.collections.map((t=>r.get(t.id))).sort(null===(i=this.i18nService.collator)||void 0===i?void 0:i.compare),n}))}))}getGroupNameMap(){return ws(this,void 0,void 0,(function*(){const t=yield this.groupService.getAll(this.organization.id),e=new Map;return t.forEach((t=>e.set(t.id,t.name))),e}))}getCollectionNameMap(){return ws(this,void 0,void 0,(function*(){const t=new Map,e=(yield this.apiService.getCollections(this.organization.id)).data.map((t=>new f.pM(new f.Fw(t))));return(yield this.collectionService.decryptMany(e)).forEach((e=>t.set(e.id,e.name))),t}))}removeUser(t){return this.organizationUserApiService.removeOrganizationUser(this.organization.id,t)}revokeUser(t){return this.organizationUserApiService.revokeOrganizationUser(this.organization.id,t)}restoreUser(t){return this.organizationUserApiService.restoreOrganizationUser(this.organization.id,t)}reinviteUser(t){return this.organizationUserApiService.postOrganizationUserReinvite(this.organization.id,t)}confirmUser(t,e){return ws(this,void 0,void 0,(function*(){if(yield(0,d._)(this.configService.getFeatureFlag$(w.TO.CreateDefaultLocation)))yield(0,d._)(this.organizationUserService.confirmUser(this.organization,t,e));else{const i=yield this.keyService.getOrgKey(this.organization.id),n=yield this.encryptService.encapsulateKeyUnsigned(i,e),s=new f.u2;s.key=n.encryptedString,yield this.organizationUserApiService.postOrganizationUserConfirm(this.organization.id,t.id,s)}}))}revoke(t){return ws(this,void 0,void 0,(function*(){if(!(yield this.revokeUserConfirmationDialog(t)))return!1;this.actionPromise=this.revokeUser(t.id);try{yield this.actionPromise,this.toastService.showToast({variant:"success",title:null,message:this.i18nService.t("revokedUserId",this.userNamePipe.transform(t))}),yield this.load()}catch(e){this.validationService.showError(e)}this.actionPromise=null}))}restore(t){return ws(this,void 0,void 0,(function*(){this.actionPromise=this.restoreUser(t.id);try{yield this.actionPromise,this.toastService.showToast({variant:"success",title:null,message:this.i18nService.t("restoredUserId",this.userNamePipe.transform(t))}),yield this.load()}catch(e){this.validationService.showError(e)}this.actionPromise=null}))}allowResetPassword(t){let e=!1;switch(this.organization.type){case y.D7.Owner:e=!0;break;case y.D7.Admin:e=t.type!==y.D7.Owner;break;case y.D7.Custom:e=t.type!==y.D7.Owner&&t.type!==y.D7.Admin}return this.organization.canManageUsersPassword&&e&&this.organization.useResetPassword&&this.organization.hasPublicAndPrivateKeys&&t.resetPasswordEnrolled&&this.orgResetPasswordPolicyEnabled&&t.status===y.Zx.Confirmed}showEnrolledStatus(t){return this.organization.useResetPassword&&t.resetPasswordEnrolled&&this.orgResetPasswordPolicyEnabled}getManageBillingText(){return this.organization.canEditSubscription?"ManageBilling":"NoManageBilling"}getProductKey(t){let e="";switch(t){case S.K_.Free:e="freeOrg";break;case S.K_.TeamsStarter:e="teamsStarterPlan";break;case S.K_.Families:e="familiesPlan";break;default:throw new Error(`Unsupported product type: ${t}`)}return`${e}InvLimitReached${this.getManageBillingText()}`}getDialogContent(){return this.i18nService.t(this.getProductKey(this.organization.productTierType),this.organization.seats)}getAcceptButtonText(){if(!this.organization.canEditSubscription)return this.i18nService.t("ok");const t=this.organization.productTierType;if((0,S.LF)(t))throw new Error(`Unsupported product type: ${t}`);return this.i18nService.t("upgrade")}handleDialogClose(t){return ws(this,void 0,void 0,(function*(){if(!t||!this.organization.canEditSubscription)return;const e=this.organization.productTierType;if((0,S.LF)(e))throw new Error(`Unsupported product type: ${this.organization.productTierType}`);yield this.router.navigate(["/organizations",this.organization.id,"billing","subscription"],{queryParams:{upgrade:!0}})}))}showSeatLimitReachedDialog(){return ws(this,void 0,void 0,(function*(){const t={title:this.i18nService.t("upgradeOrganization"),content:this.getDialogContent(),type:"primary",acceptButtonText:this.getAcceptButtonText()};this.organization.canEditSubscription||(t.cancelButtonText=null);const e=this.dialogService.openSimpleDialogRef(t);(0,d._)(e.closed).then(this.handleDialogClose.bind(this))}))}handleInviteDialog(){return ws(this,void 0,void 0,(function*(){var t,e;const i=Yt(this.dialogService,{data:{kind:"Add",organizationId:this.organization.id,allOrganizationUserEmails:null!==(e=null===(t=this.dataSource.data)||void 0===t?void 0:t.map((t=>t.email)))&&void 0!==e?e:[],occupiedSeatCount:this.occupiedSeatCount,isOnSecretsManagerStandalone:this.orgIsOnSecretsManagerStandalone}});(yield(0,ze.s)(i.closed))===Xt.Saved&&(yield this.load())}))}handleSeatLimitForFixedTiers(){return ws(this,void 0,void 0,(function*(){if(!this.organization.canEditSubscription)return void(yield this.showSeatLimitReachedDialog());const t=(0,Ye.IO)(this.dialogService,{data:{organizationId:this.organization.id,subscription:null,productTierType:this.organization.productTierType}});(yield(0,ze.s)(t.closed))===Ye.d1.Submitted&&(yield this.load())}))}invite(){return ws(this,void 0,void 0,(function*(){yield this.handleInviteDialog()}))}edit(t){return ws(this,arguments,void 0,(function*(t,e=Dt.Role){const i=Yt(this.dialogService,{data:{kind:"Edit",name:this.userNamePipe.transform(t),organizationId:this.organization.id,organizationUserId:t.id,usesKeyConnector:t.usesKeyConnector,isOnSecretsManagerStandalone:this.orgIsOnSecretsManagerStandalone,initialTab:e,managedByOrganization:t.managedByOrganization}});switch(yield(0,ze.s)(i.closed)){case Xt.Deleted:this.dataSource.removeUser(t);break;case Xt.Saved:case Xt.Revoked:case Xt.Restored:yield this.load()}}))}bulkRemove(){return ws(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const t=wn.open(this.dialogService,{data:{organizationId:this.organization.id,users:this.dataSource.getCheckedUsers()}});yield(0,ze.s)(t.closed),yield this.load()}))}bulkDelete(){return ws(this,void 0,void 0,(function*(){if(!(yield(0,d._)(this.deleteManagedMemberWarningService.warningAcknowledged(this.organization.id)))&&this.organization.canManageUsers&&this.organization.productTierType===S.K_.Enterprise){if(!(yield this.deleteManagedMemberWarningService.showWarning()))return}if(null!=this.actionPromise)return;const t=Ki.open(this.dialogService,{data:{organizationId:this.organization.id,users:this.dataSource.getCheckedUsers()}});yield(0,ze.s)(t.closed),yield this.load()}))}bulkRevoke(){return ws(this,void 0,void 0,(function*(){yield this.bulkRevokeOrRestore(!0)}))}bulkRestore(){return ws(this,void 0,void 0,(function*(){yield this.bulkRevokeOrRestore(!1)}))}bulkRevokeOrRestore(t){return ws(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const e=Kn.open(this.dialogService,{organizationId:this.organization.id,users:this.dataSource.getCheckedUsers(),isRevoking:t});yield(0,d._)(e.closed),yield this.load()}))}bulkReinvite(){return ws(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const t=this.dataSource.getCheckedUsers(),e=t.filter((t=>t.status===y.Zx.Invited));if(e.length<=0)this.toastService.showToast({variant:"error",title:this.i18nService.t("errorOccurred"),message:this.i18nService.t("noSelectedUsersApplicable")});else{try{const i=this.organizationUserApiService.postManyOrganizationUserReinvite(this.organization.id,e.map((t=>t.id))),n=is.open(this.dialogService,{data:{users:t,filteredUsers:e,request:i,successfulMessage:this.i18nService.t("bulkReinviteMessage")}});yield(0,ze.s)(n.closed)}catch(i){this.validationService.showError(i)}this.actionPromise=null}}))}bulkConfirm(){return ws(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const t=Ei.open(this.dialogService,{data:{organizationId:this.organization.id,users:this.dataSource.getCheckedUsers()}});yield(0,ze.s)(t.closed),yield this.load()}))}bulkEnableSM(){return ws(this,void 0,void 0,(function*(){const t=this.dataSource.getCheckedUsers().filter((t=>!t.accessSecretsManager));if(0===t.length)return void this.toastService.showToast({variant:"error",title:this.i18nService.t("errorOccurred"),message:this.i18nService.t("noSelectedUsersApplicable")});const e=Zi.open(this.dialogService,{orgId:this.organization.id,users:t});yield(0,ze.s)(e.closed),this.dataSource.uncheckAllUsers(),yield this.load()}))}openEventsDialog(t){(0,ei.l)(this.dialogService,{data:{name:this.userNamePipe.transform(t),organizationId:this.organization.id,entityId:t.id,showUser:!1,entity:"user"}})}resetPassword(t){return ws(this,void 0,void 0,(function*(){if(yield this.configService.getFeatureFlag(w.TO.PM16117_ChangeExistingPasswordRefactor)){if(!t||!t.email||!t.id)return this.toastService.showToast({variant:"error",title:this.i18nService.t("errorOccurred"),message:this.i18nService.t("orgUserDetailsNotFound")}),void this.logService.error("Org user details not found when attempting account recovery");const e=di.open(this.dialogService,{data:{name:this.userNamePipe.transform(t),email:t.email,organizationId:this.organization.id,organizationUserId:t.id}});return void((yield(0,ze.s)(e.closed))===li&&(yield this.load()))}const e=ds.open(this.dialogService,{data:{name:this.userNamePipe.transform(t),email:null!=t?t.email:null,organizationId:this.organization.id,id:null!=t?t.id:null}});(yield(0,ze.s)(e.closed))===ns.Ok&&(yield this.load())}))}removeUserConfirmationDialog(t){return ws(this,void 0,void 0,(function*(){const e=t.usesKeyConnector?"removeUserConfirmationKeyConnector":"removeOrgUserConfirmation";return!!(yield this.dialogService.openSimpleDialog({title:{key:"removeUserIdAccess",placeholders:[this.userNamePipe.transform(t)]},content:{key:e},type:"warning"}))&&(!(t.status>y.Zx.Invited&&!1===t.hasMasterPassword)||(yield this.noMasterPasswordConfirmationDialog(t)))}))}revokeUserConfirmationDialog(t){return ws(this,void 0,void 0,(function*(){return!!(yield this.dialogService.openSimpleDialog({title:{key:"revokeAccess",placeholders:[this.userNamePipe.transform(t)]},content:this.i18nService.t("revokeUserConfirmation"),acceptButtonText:{key:"revokeAccess"},type:"warning"}))&&(!(t.status>y.Zx.Invited&&!1===t.hasMasterPassword)||(yield this.noMasterPasswordConfirmationDialog(t)))}))}deleteUser(t){return ws(this,void 0,void 0,(function*(){if(!(yield(0,d._)(this.deleteManagedMemberWarningService.warningAcknowledged(this.organization.id)))&&this.organization.canManageUsers&&this.organization.productTierType===S.K_.Enterprise){if(!(yield this.deleteManagedMemberWarningService.showWarning()))return!1}if(!(yield this.dialogService.openSimpleDialog({title:{key:"deleteOrganizationUser",placeholders:[this.userNamePipe.transform(t)]},content:{key:"deleteOrganizationUserWarningDesc",placeholders:[this.userNamePipe.transform(t)]},type:"warning",acceptButtonText:{key:"delete"},cancelButtonText:{key:"cancel"}})))return!1;yield this.deleteManagedMemberWarningService.acknowledgeWarning(this.organization.id),this.actionPromise=this.organizationUserApiService.deleteOrganizationUser(this.organization.id,t.id);try{yield this.actionPromise,this.toastService.showToast({variant:"success",title:null,message:this.i18nService.t("organizationUserDeleted",this.userNamePipe.transform(t))}),this.dataSource.removeUser(t)}catch(e){this.validationService.showError(e)}this.actionPromise=null}))}noMasterPasswordConfirmationDialog(t){return ws(this,void 0,void 0,(function*(){return this.dialogService.openSimpleDialog({title:{key:"removeOrgUserNoMasterPasswordTitle"},content:{key:"removeOrgUserNoMasterPasswordDesc",placeholders:[this.userNamePipe.transform(t)]},type:"warning"})}))}get showBulkRestoreUsers(){return this.dataSource.getCheckedUsers().every((t=>t.status==this.userStatusType.Revoked))}get showBulkRevokeUsers(){return this.dataSource.getCheckedUsers().every((t=>t.status!=this.userStatusType.Revoked))}get showBulkRemoveUsers(){return this.dataSource.getCheckedUsers().every((t=>!t.managedByOrganization))}get showBulkDeleteUsers(){const t=[this.userStatusType.Accepted,this.userStatusType.Confirmed,this.userStatusType.Revoked];return this.dataSource.getCheckedUsers().every((e=>e.managedByOrganization&&t.includes(e.status)))}}wo.ɵfac=function(t){return new(t||wo)(T.rXU(Zt.G),T.rXU(z.W),T.rXU(Je.y),T.rXU(Wt.Lu),T.rXU(te.N),T.rXU(Qe.B),T.rXU(ae.K),T.rXU(De.b),T.rXU(M.o3),T.rXU(P.f),T.rXU(ri.m),T.rXU(ps.m),T.rXU(oe.nX),T.rXU(Ae.H),T.rXU(v.PV),T.rXU(D.Di),T.rXU(hs.X),T.rXU(f.uB),T.rXU(oe.Ix),T.rXU(k.nK),T.rXU(f.YD),T.rXU(gs.P),T.rXU(U),T.rXU(X.w),T.rXU(us))},wo.ɵcmp=T.VBU({type:wo,selectors:[["ng-component"]],standalone:!1,features:[T.Vt3],decls:10,vars:12,consts:[["headerMenu",""],["readOnlyUserInfo",""],["readOnlyGroupsCell",""],["readOnlyRoleCell",""],["rowMenu",""],[1,"tw-grow",3,"formControl","placeholder"],["type","button","bitButton","","buttonType","primary",3,"disabled","click",4,"ngIf"],[1,"tw-mb-4","tw-flex","tw-flex-col","tw-space-y-4"],[3,"selected","selectedChange",4,"ngIf"],[4,"ngIf"],["type","button","bitButton","","buttonType","primary",3,"click","disabled"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],[3,"selectedChange","selected"],[3,"value"],["bitBadge","","variant","info",4,"ngIf"],["bitBadge","","variant","info"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","tw-text-muted",3,"title"],[1,"tw-sr-only"],["type","info","icon","bwi-check-circle",3,"title",4,"ngIf"],["bitScrollLayout","",1,"tw-pb-8",3,"itemSize"],[3,"dataSource"],["header",""],["bitCell","","class","tw-w-20",4,"ngIf"],["bitCell","","bitSortable","email","default",""],["bitCell",""],["bitCell","","bitSortable","type"],["bitCell","",1,"tw-w-10"],["type","button","bitIconButton","bwi-ellipsis-v","size","small",3,"bitMenuTriggerFor","appA11yTitle",4,"ngIf"],["type","button","bitMenuItem","",3,"click",4,"ngIf"],["body",""],["type","info","icon","bwi-check-circle",3,"title"],["bitCell","",1,"tw-w-20"],["type","checkbox","bitCheckbox","","id","selectAll",1,"tw-mr-1",3,"change"],["for","selectAll",1,"tw-mb-0","!tw-font-bold","!tw-text-muted"],["type","button","bitIconButton","bwi-ellipsis-v","size","small",3,"bitMenuTriggerFor","appA11yTitle"],["type","button","bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-envelope"],[1,"tw-text-success"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-check"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-plus-circle"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-minus-circle"],[1,"tw-text-danger"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-close"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-trash"],["bitRow","","alignContent","middle",3,"ngClass",4,"cdkVirtualFor","cdkVirtualForOf"],["bitRow","","alignContent","middle",3,"ngClass"],["bitCell","",3,"click",4,"ngIf"],[4,"ngIf","ngIfElse"],["bitCell","",1,"tw-text-muted"],["bitCell","",3,"click"],["type","checkbox","bitCheckbox","",3,"ngModelChange","ngModel"],["bitCell","",1,"tw-cursor-pointer",3,"click"],[1,"tw-flex","tw-items-center"],["size","small",1,"tw-mr-3",3,"text","id","color"],[1,"tw-flex","tw-flex-col"],[1,"tw-flex","tw-flex-row","tw-gap-2"],["type","button","bitLink",""],["bitBadge","","class","tw-text-xs","variant","secondary",4,"ngIf"],["bitBadge","","class","tw-text-xs","variant","warning",4,"ngIf"],["class","tw-text-sm tw-text-muted",4,"ngIf"],["bitBadge","","variant","secondary",1,"tw-text-xs"],["bitBadge","","variant","warning",1,"tw-text-xs"],[1,"tw-text-sm","tw-text-muted"],["variant","secondary",3,"items","maxItems"],["bitCell","",1,"tw-cursor-pointer","tw-text-sm","tw-text-muted",3,"click"],["bitCell","",1,"tw-text-sm","tw-text-muted"],["aria-hidden","true",1,"bwi","bwi-lock",3,"title"],["aria-hidden","true",1,"bwi","bwi-key",3,"title"],["aria-hidden","true",1,"bwi","bwi-user"],["aria-hidden","true",1,"bwi","bwi-collection-shared"],["aria-hidden","true",1,"bwi","bwi-envelope"],["aria-hidden","true",1,"bwi","bwi-check"],["aria-hidden","true",1,"bwi","bwi-users"],["aria-hidden","true",1,"bwi","bwi-file-text"],["aria-hidden","true",1,"bwi","bwi-key"],["aria-hidden","true",1,"bwi","bwi-plus-circle"],["aria-hidden","true",1,"bwi","bwi-minus-circle"],["aria-hidden","true",1,"bwi","bwi-close"],["aria-hidden","true",1,"bwi","bwi-trash"]],template:function(t,e){1&t&&(T.j41(0,"app-header"),T.nrm(1,"bit-search",5),T.nI1(2,"i18n"),T.DNE(3,Rs,4,4,"button",6),T.nI1(4,"async"),T.k0s(),T.j41(5,"div",7),T.DNE(6,Ms,18,24,"bit-toggle-group",8),T.nI1(7,"async"),T.k0s(),T.DNE(8,Gs,6,6,"ng-container",9)(9,Io,3,2,"ng-container",9)),2&t&&(T.R7$(),T.Y8G("formControl",e.searchControl)("placeholder",T.bMT(2,6,"searchMembers")),T.R7$(2),T.Y8G("ngIf",T.bMT(4,8,e.showUserManagementControls$)),T.R7$(3),T.Y8G("ngIf",T.bMT(7,10,e.showUserManagementControls$)),T.R7$(2),T.Y8G("ngIf",!e.firstLoaded),T.R7$(),T.Y8G("ngIf",e.firstLoaded))},dependencies:[N.YU,N.bT,c.Zm,c.BC,c.vS,c.l_,A.C,hi.f,ms.p,O.n,J.Q,ai.G,q.P,de.s,Z.o,ue.Z,pe.O,he.w,bs.M,ge.Q,me.Y,fs.O,be._,be.O,vs.H,ys.a,Is.S,fe.f,n.yg,n.E$,n.d6,Ss.lp,N.Jj,at.$,De.b,Wi.c],encapsulation:2});const Ro=[{path:"",component:wo,canActivate:[(0,Me.V)(v.pe)],data:{titleId:"members"}},{path:"sponsored-families",component:Te,canActivate:[(0,Me.V)(v.pe),t=>Ce(void 0,void 0,void 0,(function*(){const e=(0,T.WQX)(je.A),i=(0,T.WQX)(v.PV),n=(0,T.WQX)(D.Di).activeAccount$.pipe(Ee.F6,(0,h.n)((t=>i.organizations$(t))),(0,Ue.H)(t.params.organizationId),(0,Ge.p)((t=>void 0!==t)));return yield(0,d._)(e.showSponsoredFamiliesDropdown$(n))}))],data:{titleId:"sponsoredFamilies"}}];class ko{}ko.ɵfac=function(t){return new(t||ko)},ko.ɵmod=T.$C({type:ko}),ko.ɵinj=T.G2t({imports:[Ot.iI.forChild(Ro),Ot.iI]});class $o{}$o.ɵfac=function(t){return new(t||$o)},$o.ɵmod=T.$C({type:$o}),$o.ɵinj=T.G2t({imports:[a.R,r.T,ko,Vt,o.Rz,n.E9,s.k]})}}]);
//# sourceMappingURL=703.7f44384835e895a94334.js.map