"use strict";(self.webpackChunk_bitwarden_web_vault=self.webpackChunk_bitwarden_web_vault||[]).push([[449],{14449:(t,n,e)=>{e.r(n),e.d(n,{OrganizationReportingModule:()=>Ge});var i=e(7816),a=e(25065),o=e(62963),r=e(3867),s=e(86842),c=e(3204),l=e(67553),p=e(82468),d=e(1601),u=e(72245),g=e(3633),h=e(39488),b=e(85134),f=e(39738),m=e(8144),I=e(62819),v=e(85037),R=e(5556),F=e(72331),$=e(21274),w=e(35500),S=e(64195),E=e(50700),y=e(5253),j=e(26333),k=e(93103),G=e(47428),T=e(47696),X=e(56898),M=e(44432),z=e(10672),N=e(59032),U=e(30930),x=e(38410),C=e(32316),A=e(12694),Y=e(16496),D=e(71944),V=e(20464),O=e(88016),P=e(91975),J=function(t,n,e,i){return new(e||(e=Promise))((function(a,o){function r(t){try{c(i.next(t))}catch(n){o(n)}}function s(t){try{c(i.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,s)}c((i=i.apply(t,n||[])).next())}))};function B(t,n){1&t&&(r.j41(0,"bit-callout",6),r.nI1(1,"i18n"),r.EFF(2),r.nI1(3,"i18n"),r.k0s()),2&t&&(r.FS9("title",r.bMT(1,2,"goodNews")),r.R7$(2),r.SpI(" ",r.bMT(3,4,"noExposedPasswords")," "))}function q(t,n){if(1&t&&(r.qex(0),r.j41(1,"bit-toggle",18),r.EFF(2),r.j41(3,"span",19),r.EFF(4),r.k0s()(),r.bVm()),2&t){const t=n.$implicit,e=r.XpG(4);r.R7$(),r.Y8G("value",t),r.R7$(),r.SpI(" ",e.getName(t)," "),r.R7$(2),r.SpI(" ",e.getCount(t)," ")}}function L(t,n){if(1&t){const t=r.RV6();r.j41(0,"bit-toggle-group",16),r.nI1(1,"async"),r.nI1(2,"i18n"),r.bIt("selectedChange",(function(n){r.eBV(t);const e=r.XpG(3);return r.Njj(e.filterOrgToggle(n))})),r.DNE(3,q,5,3,"ng-container",17),r.k0s()}if(2&t){const t=r.XpG(3);r.Y8G("selected",r.bMT(1,3,t.filterOrgStatus$)),r.BMQ("aria-label",r.bMT(2,5,"addAccessFilter")),r.R7$(3),r.Y8G("ngForOf",t.filterStatus)}}function _(t,n){1&t&&(r.j41(0,"th",20),r.EFF(1),r.nI1(2,"i18n"),r.k0s()),2&t&&(r.R7$(),r.SpI(" ",r.bMT(2,1,"owner")," "))}function H(t,n){if(1&t){const t=r.RV6();r.qex(0),r.j41(1,"a",26),r.nI1(2,"i18n"),r.bIt("click",(function(){r.eBV(t);const n=r.XpG().$implicit,e=r.XpG(3);return r.Njj(e.selectCipher(n))})),r.EFF(3),r.k0s(),r.bVm()}if(2&t){const t=r.XpG().$implicit;r.R7$(),r.FS9("title",r.i5U(2,2,"editItemWithName",t.name)),r.R7$(2),r.SpI(" ",t.name," ")}}function W(t,n){if(1&t&&(r.j41(0,"span"),r.EFF(1),r.k0s()),2&t){const t=r.XpG().$implicit;r.R7$(),r.JRh(t.name)}}function Q(t,n){1&t&&(r.qex(0),r.nrm(1,"i",27),r.nI1(2,"i18n"),r.j41(3,"span",28),r.EFF(4),r.nI1(5,"i18n"),r.k0s(),r.bVm()),2&t&&(r.R7$(),r.FS9("title",r.bMT(2,2,"shared")),r.R7$(3),r.JRh(r.bMT(5,4,"shared")))}function K(t,n){1&t&&(r.qex(0),r.nrm(1,"i",29),r.nI1(2,"i18n"),r.j41(3,"span",28),r.EFF(4),r.nI1(5,"i18n"),r.k0s(),r.bVm()),2&t&&(r.R7$(),r.FS9("title",r.bMT(2,2,"attachments")),r.R7$(3),r.JRh(r.bMT(5,4,"attachments")))}function Z(t,n){if(1&t&&(r.nrm(0,"app-org-badge",31),r.nI1(1,"async"),r.nI1(2,"orgNameFromId")),2&t){const t=r.XpG(2).$implicit,n=r.XpG(3);r.Y8G("disabled",n.disabled)("organizationId",t.organizationId)("organizationName",r.i5U(2,5,t.organizationId,r.bMT(1,3,n.organizations$)))}}function tt(t,n){if(1&t&&(r.j41(0,"td",11),r.DNE(1,Z,3,8,"app-org-badge",30),r.k0s()),2&t){const t=r.XpG(4);r.R7$(),r.Y8G("ngIf",!t.organization)}}function nt(t,n){if(1&t&&(r.j41(0,"td",11),r.nrm(1,"app-vault-icon",21),r.k0s(),r.j41(2,"td",11),r.DNE(3,H,4,5,"ng-container",22)(4,W,2,1,"ng-template",null,0,r.C5r)(6,Q,6,6,"ng-container",5)(7,K,6,6,"ng-container",5),r.nrm(8,"br"),r.j41(9,"small"),r.EFF(10),r.k0s()(),r.DNE(11,tt,2,1,"td",23),r.j41(12,"td",24)(13,"span",25),r.EFF(14),r.nI1(15,"number"),r.nI1(16,"i18n"),r.k0s()()),2&t){const t=n.$implicit,e=r.sdS(5),i=r.XpG(3);r.R7$(),r.Y8G("cipher",t),r.R7$(2),r.Y8G("ngIf",!i.organization||i.canManageCipher(t))("ngIfElse",e),r.R7$(3),r.Y8G("ngIf",!i.organization&&t.organizationId),r.R7$(),r.Y8G("ngIf",t.hasAttachments),r.R7$(3),r.JRh(t.subTitle),r.R7$(),r.Y8G("ngIf",!i.isAdminConsoleActive),r.R7$(3),r.SpI(" ",r.i5U(16,10,"exposedXTimes",r.bMT(15,8,t.exposedXTimes))," ")}}function et(t,n){if(1&t&&(r.qex(0),r.j41(1,"bit-callout",7),r.nI1(2,"i18n"),r.EFF(3),r.nI1(4,"number"),r.nI1(5,"i18n"),r.k0s(),r.DNE(6,L,4,7,"bit-toggle-group",8),r.j41(7,"bit-table-scroll",9),r.qex(8,10),r.nrm(9,"th",11),r.j41(10,"th",12),r.EFF(11),r.nI1(12,"i18n"),r.k0s(),r.DNE(13,_,3,3,"th",13),r.j41(14,"th",14),r.EFF(15),r.nI1(16,"i18n"),r.k0s(),r.bVm(),r.DNE(17,nt,17,13,"ng-template",15),r.k0s(),r.bVm()),2&t){const t=r.XpG(2);r.R7$(),r.FS9("title",r.bMT(2,9,"exposedPasswordsFound")),r.Y8G("useAlertRole",!0),r.R7$(2),r.SpI(" ",r.brH(5,13,"exposedPasswordsFoundReportDesc",r.bMT(4,11,t.ciphers.length),t.vaultMsg)," "),r.R7$(3),r.Y8G("ngIf",t.showFilterToggle&&!t.isAdminConsoleActive),r.R7$(),r.Y8G("dataSource",t.dataSource)("rowSize",53),r.R7$(4),r.JRh(r.bMT(12,17,"name")),r.R7$(2),r.Y8G("ngIf",!t.isAdminConsoleActive),r.R7$(2),r.SpI(" ",r.bMT(16,19,"timesExposed")," ")}}function it(t,n){if(1&t&&(r.j41(0,"div",3),r.DNE(1,B,4,6,"bit-callout",4)(2,et,18,21,"ng-container",5),r.k0s()),2&t){const t=r.XpG();r.R7$(),r.Y8G("ngIf",!t.ciphers.length),r.R7$(),r.Y8G("ngIf",t.ciphers.length)}}class at extends v.y{constructor(t,n,e,i,a,o,r,s,c,l,p){super(t,n,i,e,a,r,s,c,l,p),this.accountService=a,this.route=o}ngOnInit(){return J(this,void 0,void 0,(function*(){this.isAdminConsoleActive=!0,this.route.parent.parent.params.subscribe((t=>J(this,void 0,void 0,(function*(){const n=yield(0,u._)(this.accountService.activeAccount$.pipe(g.F6));this.organization=yield(0,u._)(this.organizationService.organizations$(n).pipe((0,l.Sw)(t.organizationId))),this.manageableCiphers=yield this.cipherService.getAll(n)}))))}))}getAllCiphers(){return this.cipherService.getAllFromApiForOrganization(this.organization.id)}canManageCipher(t){return 0===t.collectionIds.length||this.manageableCiphers.some((n=>n.id===t.id))}}at.ɵfac=function(t){return new(t||at)(r.rXU(R.p),r.rXU(F.d),r.rXU($.o3),r.rXU(l.PV),r.rXU(w.Di),r.rXU(S.nX),r.rXU(b.qX),r.rXU(E.W),r.rXU(h.H),r.rXU(b.hI),r.rXU(I.l))},at.ɵcmp=r.VBU({type:at,selectors:[["app-org-exposed-passwords-report"]],standalone:!1,features:[r.Jv_([{provide:b.hI,useClass:I.l},I.l,m.B,f.a]),r.Vt3],decls:9,vars:8,consts:[["cantManage",""],["type","submit","buttonType","primary","bitButton","",3,"click","loading"],["class","tw-mt-4",4,"ngIf"],[1,"tw-mt-4"],["type","success",3,"title",4,"ngIf"],[4,"ngIf"],["type","success",3,"title"],["type","danger",3,"title","useAlertRole"],[3,"selected","selectedChange",4,"ngIf"],[3,"dataSource","rowSize"],["header",""],["bitCell",""],["bitCell","","bitSortable","name"],["bitCell","","bitSortable","organizationId",4,"ngIf"],["bitCell","","bitSortable","exposedXTimes",1,"tw-text-right"],["bitRowDef",""],[3,"selectedChange","selected"],[4,"ngFor","ngForOf"],[3,"value"],["bitBadge","","variant","info"],["bitCell","","bitSortable","organizationId"],[3,"cipher"],[4,"ngIf","ngIfElse"],["bitCell","",4,"ngIf"],["bitCell","",1,"tw-text-right"],["bitBadge","","variant","warning"],["bitLink","","href","#","appStopClick","",3,"click","title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection-shared",3,"title"],[1,"tw-sr-only"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"],["appStopProp","",3,"disabled","organizationId","organizationName",4,"ngIf"],["appStopProp","",3,"disabled","organizationId","organizationName"]],template:function(t,n){1&t&&(r.nrm(0,"app-header"),r.j41(1,"bit-container")(2,"p"),r.EFF(3),r.nI1(4,"i18n"),r.k0s(),r.j41(5,"button",1),r.bIt("click",(function(){return n.load()})),r.EFF(6),r.nI1(7,"i18n"),r.k0s(),r.DNE(8,it,3,2,"div",2),r.k0s()),2&t&&(r.R7$(3),r.JRh(r.bMT(4,4,"exposedPasswordsReportDesc")),r.R7$(2),r.Y8G("loading",n.loading),r.R7$(),r.SpI(" ",r.bMT(7,6,"checkExposedPasswords")," "),r.R7$(2),r.Y8G("ngIf",n.hasLoaded))},dependencies:[y.Sq,y.bT,j.R,k.Y,G.x,T.n,X.Q,M.G,z.H,N.L,U.D,x.Q,C.O,U.N,A.H,Y.a,D.P,V.f,y.Jj,y.QX,O.$,P.t],encapsulation:2});var ot=e(30414),rt=e(56962),st=e(22466),ct=e(36572),lt=function(t,n,e,i){return new(e||(e=Promise))((function(a,o){function r(t){try{c(i.next(t))}catch(n){o(n)}}function s(t){try{c(i.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,s)}c((i=i.apply(t,n||[])).next())}))};function pt(t,n){1&t&&(r.j41(0,"div"),r.nrm(1,"i",3),r.nI1(2,"i18n"),r.j41(3,"span",4),r.EFF(4),r.nI1(5,"i18n"),r.k0s()()),2&t&&(r.R7$(),r.FS9("title",r.bMT(2,2,"loading")),r.R7$(3),r.JRh(r.bMT(5,4,"loading")))}function dt(t,n){1&t&&(r.j41(0,"bit-callout",7),r.nI1(1,"i18n"),r.EFF(2),r.nI1(3,"i18n"),r.k0s()),2&t&&(r.FS9("title",r.bMT(1,2,"goodNews")),r.R7$(2),r.SpI(" ",r.bMT(3,4,"noInactive2fa")," "))}function ut(t,n){if(1&t&&(r.qex(0),r.j41(1,"bit-toggle",15),r.EFF(2),r.j41(3,"span",16),r.EFF(4),r.k0s()(),r.bVm()),2&t){const t=n.$implicit,e=r.XpG(4);r.R7$(),r.Y8G("value",t),r.R7$(),r.SpI(" ",e.getName(t)," "),r.R7$(2),r.SpI(" ",e.getCount(t)," ")}}function gt(t,n){if(1&t){const t=r.RV6();r.j41(0,"bit-toggle-group",13),r.nI1(1,"async"),r.nI1(2,"i18n"),r.bIt("selectedChange",(function(n){r.eBV(t);const e=r.XpG(3);return r.Njj(e.filterOrgToggle(n))})),r.DNE(3,ut,5,3,"ng-container",14),r.k0s()}if(2&t){const t=r.XpG(3);r.Y8G("selected",r.bMT(1,3,t.filterOrgStatus$)),r.BMQ("aria-label",r.bMT(2,5,"addAccessFilter")),r.R7$(3),r.Y8G("ngForOf",t.filterStatus)}}function ht(t,n){1&t&&(r.qex(0,17),r.j41(1,"tr",18),r.nrm(2,"th",19),r.j41(3,"th",19),r.EFF(4),r.nI1(5,"i18n"),r.k0s(),r.j41(6,"th",19),r.EFF(7),r.nI1(8,"i18n"),r.k0s(),r.nrm(9,"th",19),r.k0s(),r.bVm()),2&t&&(r.R7$(4),r.JRh(r.bMT(5,2,"name")),r.R7$(3),r.JRh(r.bMT(8,4,"owner")))}function bt(t,n){if(1&t){const t=r.RV6();r.qex(0),r.j41(1,"a",26),r.nI1(2,"i18n"),r.bIt("click",(function(){r.eBV(t);const n=r.XpG().$implicit,e=r.XpG(4);return r.Njj(e.selectCipher(n))})),r.EFF(3),r.k0s(),r.bVm()}if(2&t){const t=r.XpG().$implicit;r.R7$(),r.FS9("title",r.i5U(2,2,"editItemWithName",t.name)),r.R7$(2),r.JRh(t.name)}}function ft(t,n){if(1&t&&(r.j41(0,"span"),r.EFF(1),r.k0s()),2&t){const t=r.XpG().$implicit;r.R7$(),r.JRh(t.name)}}function mt(t,n){1&t&&(r.qex(0),r.nrm(1,"i",27),r.nI1(2,"i18n"),r.j41(3,"span",4),r.EFF(4),r.nI1(5,"i18n"),r.k0s(),r.bVm()),2&t&&(r.R7$(),r.FS9("title",r.bMT(2,2,"shared")),r.R7$(3),r.JRh(r.bMT(5,4,"shared")))}function It(t,n){1&t&&(r.qex(0),r.nrm(1,"i",28),r.nI1(2,"i18n"),r.j41(3,"span",4),r.EFF(4),r.nI1(5,"i18n"),r.k0s(),r.bVm()),2&t&&(r.R7$(),r.FS9("title",r.bMT(2,2,"attachments")),r.R7$(3),r.JRh(r.bMT(5,4,"attachments")))}function vt(t,n){if(1&t&&(r.nrm(0,"app-org-badge",29),r.nI1(1,"async"),r.nI1(2,"orgNameFromId")),2&t){const t=r.XpG().$implicit,n=r.XpG(4);r.Y8G("disabled",n.disabled)("organizationId",t.organizationId)("organizationName",r.i5U(2,5,t.organizationId,r.bMT(1,3,n.organizations$)))}}function Rt(t,n){if(1&t&&(r.j41(0,"a",30),r.EFF(1),r.nI1(2,"i18n"),r.k0s()),2&t){const t=r.XpG().$implicit,n=r.XpG(4);r.FS9("href",n.cipherDocs.get(t.id),r.B4B),r.R7$(),r.SpI(" ",r.bMT(2,2,"instructions"),"")}}function Ft(t,n){if(1&t&&(r.j41(0,"tr",18)(1,"td",19),r.nrm(2,"app-vault-icon",21),r.k0s(),r.j41(3,"td",19),r.DNE(4,bt,4,5,"ng-container",22)(5,ft,2,1,"ng-template",null,0,r.C5r)(7,mt,6,6,"ng-container",1)(8,It,6,6,"ng-container",1),r.nrm(9,"br"),r.j41(10,"small"),r.EFF(11),r.k0s()(),r.j41(12,"td",19),r.DNE(13,vt,3,8,"app-org-badge",23),r.k0s(),r.j41(14,"td",24),r.DNE(15,Rt,3,4,"a",25),r.k0s()()),2&t){const t=n.$implicit,e=r.sdS(6),i=r.XpG(4);r.R7$(2),r.Y8G("cipher",t),r.R7$(2),r.Y8G("ngIf",!i.organization||i.canManageCipher(t))("ngIfElse",e),r.R7$(3),r.Y8G("ngIf",!i.organization&&t.organizationId),r.R7$(),r.Y8G("ngIf",t.hasAttachments),r.R7$(3),r.JRh(t.subTitle),r.R7$(2),r.Y8G("ngIf",!i.organization),r.R7$(2),r.Y8G("ngIf",i.cipherDocs.has(t.id))}}function $t(t,n){if(1&t&&(r.DNE(0,Ft,16,8,"tr",20),r.nI1(1,"async")),2&t){const t=n.$implicit;r.Y8G("ngForOf",r.bMT(1,1,t))}}function wt(t,n){if(1&t&&(r.qex(0),r.j41(1,"bit-callout",8),r.nI1(2,"i18n"),r.EFF(3),r.nI1(4,"number"),r.nI1(5,"i18n"),r.k0s(),r.DNE(6,gt,4,7,"bit-toggle-group",9),r.j41(7,"bit-table",10),r.DNE(8,ht,10,6,"ng-container",11),r.j41(9,"tbody"),r.DNE(10,$t,2,3,"ng-template",12),r.k0s()(),r.bVm()),2&t){const t=r.XpG(2);r.R7$(),r.FS9("title",r.bMT(2,5,"inactive2faFound")),r.R7$(2),r.SpI(" ",r.brH(5,9,"inactive2faFoundReportDesc",r.bMT(4,7,t.ciphers.length),t.vaultMsg)," "),r.R7$(3),r.Y8G("ngIf",t.showFilterToggle&&!t.isAdminConsoleActive),r.R7$(),r.Y8G("dataSource",t.dataSource),r.R7$(),r.Y8G("ngIf",!t.isAdminConsoleActive)}}function St(t,n){if(1&t&&(r.j41(0,"div",5),r.DNE(1,dt,4,6,"bit-callout",6)(2,wt,11,13,"ng-container",1),r.k0s()),2&t){const t=r.XpG();r.R7$(),r.Y8G("ngIf",!t.ciphers.length),r.R7$(),r.Y8G("ngIf",t.ciphers.length)}}class Et extends ot.O{constructor(t,n,e,i,a,o,r,s,c,l,p){super(t,o,n,r,i,a,s,c,l,p),this.route=e}ngOnInit(){const t=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return lt(this,void 0,void 0,(function*(){this.isAdminConsoleActive=!0,this.route.parent.parent.params.subscribe((n=>lt(this,void 0,void 0,(function*(){const e=yield(0,u._)(this.accountService.activeAccount$.pipe((0,c.T)((t=>null==t?void 0:t.id))));this.organization=yield(0,u._)(this.organizationService.organizations$(e).pipe((0,l.Sw)(n.organizationId))),this.manageableCiphers=yield this.cipherService.getAll(e),yield t.ngOnInit.call(this)}))))}))}getAllCiphers(){return this.cipherService.getAllFromApiForOrganization(this.organization.id)}canManageCipher(t){return 0===t.collectionIds.length||this.manageableCiphers.some((n=>n.id===t.id))}}Et.ɵfac=function(t){return new(t||Et)(r.rXU(R.p),r.rXU($.o3),r.rXU(S.nX),r.rXU(rt.K),r.rXU(b.qX),r.rXU(l.PV),r.rXU(w.Di),r.rXU(E.W),r.rXU(h.H),r.rXU(b.hI),r.rXU(I.l))},Et.ɵcmp=r.VBU({type:Et,selectors:[["app-inactive-two-factor-report"]],standalone:!1,features:[r.Jv_([{provide:b.hI,useClass:I.l},I.l,m.B,f.a]),r.Vt3],decls:7,vars:5,consts:[["cantManage",""],[4,"ngIf"],["class","tw-mt-4",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","tw-text-muted",3,"title"],[1,"tw-sr-only"],[1,"tw-mt-4"],["type","success",3,"title",4,"ngIf"],["type","success",3,"title"],["type","danger",3,"title"],[3,"selected","selectedChange",4,"ngIf"],[3,"dataSource"],["header","",4,"ngIf"],["body",""],[3,"selectedChange","selected"],[4,"ngFor","ngForOf"],[3,"value"],["bitBadge","","variant","info"],["header",""],["bitRow",""],["bitCell",""],["bitRow","",4,"ngFor","ngForOf"],[3,"cipher"],[4,"ngIf","ngIfElse"],["appStopProp","",3,"disabled","organizationId","organizationName",4,"ngIf"],["bitCell","",1,"tw-text-right"],["bitBadge","","target","_blank","rel","noreferrer",3,"href",4,"ngIf"],["bitLink","","href","#","appStopClick","",3,"click","title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection-shared",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"],["appStopProp","",3,"disabled","organizationId","organizationName"],["bitBadge","","target","_blank","rel","noreferrer",3,"href"]],template:function(t,n){1&t&&(r.nrm(0,"app-header"),r.j41(1,"bit-container")(2,"p"),r.EFF(3),r.nI1(4,"i18n"),r.k0s(),r.DNE(5,pt,6,6,"div",1)(6,St,3,2,"div",2),r.k0s()),2&t&&(r.R7$(3),r.JRh(r.bMT(4,3,"inactive2faReportDesc")),r.R7$(2),r.Y8G("ngIf",!n.hasLoaded&&n.loading),r.R7$(),r.Y8G("ngIf",n.hasLoaded))},dependencies:[y.Sq,y.bT,j.R,k.Y,G.x,T.n,M.G,z.H,N.L,x.Q,st.Y,ct._,ct.O,A.H,Y.a,D.P,V.f,y.Jj,y.QX,O.$,P.t],encapsulation:2});var yt=e(17343),jt=function(t,n,e,i){return new(e||(e=Promise))((function(a,o){function r(t){try{c(i.next(t))}catch(n){o(n)}}function s(t){try{c(i.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,s)}c((i=i.apply(t,n||[])).next())}))};function kt(t,n){1&t&&(r.j41(0,"div"),r.nrm(1,"i",3),r.nI1(2,"i18n"),r.j41(3,"span",4),r.EFF(4),r.nI1(5,"i18n"),r.k0s()()),2&t&&(r.R7$(),r.FS9("title",r.bMT(2,2,"loading")),r.R7$(3),r.JRh(r.bMT(5,4,"loading")))}function Gt(t,n){1&t&&(r.j41(0,"bit-callout",7),r.nI1(1,"i18n"),r.EFF(2),r.nI1(3,"i18n"),r.k0s()),2&t&&(r.FS9("title",r.bMT(1,2,"goodNews")),r.R7$(2),r.SpI(" ",r.bMT(3,4,"noReusedPasswords")," "))}function Tt(t,n){if(1&t&&(r.qex(0),r.j41(1,"bit-toggle",15),r.EFF(2),r.j41(3,"span",16),r.EFF(4),r.k0s()(),r.bVm()),2&t){const t=n.$implicit,e=r.XpG(4);r.R7$(),r.Y8G("value",t),r.R7$(),r.SpI(" ",e.getName(t)," "),r.R7$(2),r.SpI(" ",e.getCount(t)," ")}}function Xt(t,n){if(1&t){const t=r.RV6();r.j41(0,"bit-toggle-group",13),r.nI1(1,"async"),r.nI1(2,"i18n"),r.bIt("selectedChange",(function(n){r.eBV(t);const e=r.XpG(3);return r.Njj(e.filterOrgToggle(n))})),r.DNE(3,Tt,5,3,"ng-container",14),r.k0s()}if(2&t){const t=r.XpG(3);r.Y8G("selected",r.bMT(1,3,t.filterOrgStatus$)),r.BMQ("aria-label",r.bMT(2,5,"addAccessFilter")),r.R7$(3),r.Y8G("ngForOf",t.filterStatus)}}function Mt(t,n){1&t&&(r.qex(0,17),r.nrm(1,"th",18),r.j41(2,"th",18),r.EFF(3),r.nI1(4,"i18n"),r.k0s(),r.j41(5,"th",18),r.EFF(6),r.nI1(7,"i18n"),r.k0s(),r.j41(8,"th",19),r.EFF(9),r.nI1(10,"i18n"),r.k0s(),r.bVm()),2&t&&(r.R7$(3),r.JRh(r.bMT(4,3,"name")),r.R7$(3),r.JRh(r.bMT(7,5,"owner")),r.R7$(3),r.JRh(r.bMT(10,7,"timesReused")))}function zt(t,n){if(1&t){const t=r.RV6();r.qex(0),r.j41(1,"a",24),r.nI1(2,"i18n"),r.bIt("click",(function(){r.eBV(t);const n=r.XpG().$implicit,e=r.XpG(3);return r.Njj(e.selectCipher(n))})),r.EFF(3),r.k0s(),r.bVm()}if(2&t){const t=r.XpG().$implicit;r.R7$(),r.FS9("title",r.i5U(2,2,"editItemWithName",t.name)),r.R7$(2),r.JRh(t.name)}}function Nt(t,n){if(1&t&&(r.j41(0,"span"),r.EFF(1),r.k0s()),2&t){const t=r.XpG().$implicit;r.R7$(),r.JRh(t.name)}}function Ut(t,n){1&t&&(r.qex(0),r.nrm(1,"i",25),r.nI1(2,"i18n"),r.j41(3,"span",4),r.EFF(4),r.nI1(5,"i18n"),r.k0s(),r.bVm()),2&t&&(r.R7$(),r.FS9("title",r.bMT(2,2,"shared")),r.R7$(3),r.JRh(r.bMT(5,4,"shared")))}function xt(t,n){1&t&&(r.qex(0),r.nrm(1,"i",26),r.nI1(2,"i18n"),r.j41(3,"span",4),r.EFF(4),r.nI1(5,"i18n"),r.k0s(),r.bVm()),2&t&&(r.R7$(),r.FS9("title",r.bMT(2,2,"attachments")),r.R7$(3),r.JRh(r.bMT(5,4,"attachments")))}function Ct(t,n){if(1&t&&(r.nrm(0,"app-org-badge",27),r.nI1(1,"async"),r.nI1(2,"orgNameFromId")),2&t){const t=r.XpG().$implicit,n=r.XpG(3);r.Y8G("disabled",n.disabled)("organizationId",t.organizationId)("organizationName",r.i5U(2,5,t.organizationId,r.bMT(1,3,n.organizations$)))}}function At(t,n){if(1&t&&(r.j41(0,"td",18),r.nrm(1,"app-vault-icon",20),r.k0s(),r.j41(2,"td",18),r.DNE(3,zt,4,5,"ng-container",21)(4,Nt,2,1,"ng-template",null,0,r.C5r)(6,Ut,6,6,"ng-container",1)(7,xt,6,6,"ng-container",1),r.nrm(8,"br"),r.j41(9,"small"),r.EFF(10),r.k0s()(),r.j41(11,"td",18),r.DNE(12,Ct,3,8,"app-org-badge",22),r.k0s(),r.j41(13,"td",19)(14,"span",23),r.EFF(15),r.nI1(16,"i18n"),r.k0s()()),2&t){const t=n.$implicit,e=r.sdS(5),i=r.XpG(3);r.R7$(),r.Y8G("cipher",t),r.R7$(2),r.Y8G("ngIf",!i.organization||i.canManageCipher(t))("ngIfElse",e),r.R7$(3),r.Y8G("ngIf",!i.organization&&t.organizationId),r.R7$(),r.Y8G("ngIf",t.hasAttachments),r.R7$(3),r.JRh(t.subTitle),r.R7$(2),r.Y8G("ngIf",!i.organization),r.R7$(3),r.SpI(" ",r.i5U(16,8,"reusedXTimes",i.passwordUseMap.get(t.login.password))," ")}}function Yt(t,n){if(1&t&&(r.qex(0),r.j41(1,"bit-callout",8),r.nI1(2,"i18n"),r.EFF(3),r.nI1(4,"number"),r.nI1(5,"i18n"),r.k0s(),r.DNE(6,Xt,4,7,"bit-toggle-group",9),r.j41(7,"bit-table-scroll",10),r.DNE(8,Mt,11,9,"ng-container",11)(9,At,17,11,"ng-template",12),r.k0s(),r.bVm()),2&t){const t=r.XpG(2);r.R7$(),r.FS9("title",r.bMT(2,6,"reusedPasswordsFound")),r.R7$(2),r.SpI(" ",r.brH(5,10,"reusedPasswordsFoundReportDesc",r.bMT(4,8,t.ciphers.length),t.vaultMsg)," "),r.R7$(3),r.Y8G("ngIf",t.showFilterToggle&&!t.isAdminConsoleActive),r.R7$(),r.Y8G("dataSource",t.dataSource)("rowSize",75),r.R7$(),r.Y8G("ngIf",!t.isAdminConsoleActive)}}function Dt(t,n){if(1&t&&(r.j41(0,"div",5),r.DNE(1,Gt,4,6,"bit-callout",6)(2,Yt,10,14,"ng-container",1),r.k0s()),2&t){const t=r.XpG();r.R7$(),r.Y8G("ngIf",!t.ciphers.length),r.R7$(),r.Y8G("ngIf",t.ciphers.length)}}class Vt extends yt.A{constructor(t,n,e,i,a,o,r,s,c,l){super(t,i,n,a,o,r,s,c,l),this.route=e,this.accountService=a}ngOnInit(){const t=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return jt(this,void 0,void 0,(function*(){this.isAdminConsoleActive=!0,this.route.parent.parent.params.subscribe((n=>jt(this,void 0,void 0,(function*(){const e=yield(0,u._)(this.accountService.activeAccount$.pipe(g.F6));this.organization=yield(0,u._)(this.organizationService.organizations$(e).pipe((0,l.Sw)(n.organizationId))),this.manageableCiphers=yield this.cipherService.getAll(e),yield t.ngOnInit.call(this)}))))}))}getAllCiphers(){return this.cipherService.getAllFromApiForOrganization(this.organization.id)}canManageCipher(t){return 0===t.collectionIds.length||this.manageableCiphers.some((n=>n.id===t.id))}}Vt.ɵfac=function(t){return new(t||Vt)(r.rXU(R.p),r.rXU($.o3),r.rXU(S.nX),r.rXU(l.PV),r.rXU(w.Di),r.rXU(b.qX),r.rXU(E.W),r.rXU(h.H),r.rXU(b.hI),r.rXU(I.l))},Vt.ɵcmp=r.VBU({type:Vt,selectors:[["app-reused-passwords-report"]],standalone:!1,features:[r.Jv_([{provide:b.hI,useClass:I.l},I.l,m.B,f.a]),r.Vt3],decls:7,vars:5,consts:[["cantManage",""],[4,"ngIf"],["class","tw-mt-4",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","tw-text-muted",3,"title"],[1,"tw-sr-only"],[1,"tw-mt-4"],["type","success",3,"title",4,"ngIf"],["type","success",3,"title"],["type","danger",3,"title"],[3,"selected","selectedChange",4,"ngIf"],[3,"dataSource","rowSize"],["header","",4,"ngIf"],["bitRowDef",""],[3,"selectedChange","selected"],[4,"ngFor","ngForOf"],[3,"value"],["bitBadge","","variant","info"],["header",""],["bitCell",""],["bitCell","",1,"tw-text-right"],[3,"cipher"],[4,"ngIf","ngIfElse"],["appStopProp","",3,"disabled","organizationId","organizationName",4,"ngIf"],["bitBadge","","variant","warning"],["bitLink","","href","#","appStopClick","",3,"click","title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection-shared",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"],["appStopProp","",3,"disabled","organizationId","organizationName"]],template:function(t,n){1&t&&(r.nrm(0,"app-header"),r.j41(1,"bit-container")(2,"p"),r.EFF(3),r.nI1(4,"i18n"),r.k0s(),r.DNE(5,kt,6,6,"div",1)(6,Dt,3,2,"div",2),r.k0s()),2&t&&(r.R7$(3),r.JRh(r.bMT(4,3,"reusedPasswordsReportDesc")),r.R7$(2),r.Y8G("ngIf",!n.hasLoaded&&n.loading),r.R7$(),r.Y8G("ngIf",n.hasLoaded))},dependencies:[y.Sq,y.bT,j.R,k.Y,G.x,T.n,M.G,z.H,N.L,U.D,x.Q,U.N,A.H,Y.a,D.P,V.f,y.Jj,y.QX,O.$,P.t],encapsulation:2});var Ot=e(44451),Pt=e(71687),Jt=function(t,n,e,i){return new(e||(e=Promise))((function(a,o){function r(t){try{c(i.next(t))}catch(n){o(n)}}function s(t){try{c(i.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,s)}c((i=i.apply(t,n||[])).next())}))};function Bt(t,n){1&t&&(r.j41(0,"div"),r.nrm(1,"i",3),r.nI1(2,"i18n"),r.j41(3,"span",4),r.EFF(4),r.nI1(5,"i18n"),r.k0s()()),2&t&&(r.R7$(),r.FS9("title",r.bMT(2,2,"loading")),r.R7$(3),r.JRh(r.bMT(5,4,"loading")))}function qt(t,n){1&t&&(r.j41(0,"bit-callout",7),r.nI1(1,"i18n"),r.EFF(2),r.nI1(3,"i18n"),r.k0s()),2&t&&(r.FS9("title",r.bMT(1,2,"goodNews")),r.R7$(2),r.SpI(" ",r.bMT(3,4,"noUnsecuredWebsites")," "))}function Lt(t,n){if(1&t&&(r.qex(0),r.j41(1,"bit-toggle",15),r.EFF(2),r.j41(3,"span",16),r.EFF(4),r.k0s()(),r.bVm()),2&t){const t=n.$implicit,e=r.XpG(4);r.R7$(),r.Y8G("value",t),r.R7$(),r.SpI(" ",e.getName(t)," "),r.R7$(2),r.SpI(" ",e.getCount(t)," ")}}function _t(t,n){if(1&t){const t=r.RV6();r.j41(0,"bit-toggle-group",13),r.nI1(1,"async"),r.nI1(2,"i18n"),r.bIt("selectedChange",(function(n){r.eBV(t);const e=r.XpG(3);return r.Njj(e.filterOrgToggle(n))})),r.DNE(3,Lt,5,3,"ng-container",14),r.k0s()}if(2&t){const t=r.XpG(3);r.Y8G("selected",r.bMT(1,3,t.filterOrgStatus$)),r.BMQ("aria-label",r.bMT(2,5,"addAccessFilter")),r.R7$(3),r.Y8G("ngForOf",t.filterStatus)}}function Ht(t,n){1&t&&(r.qex(0,17),r.j41(1,"tr",18),r.nrm(2,"th",19),r.j41(3,"th",19),r.EFF(4),r.nI1(5,"i18n"),r.k0s(),r.j41(6,"th",19),r.EFF(7),r.nI1(8,"i18n"),r.k0s(),r.nrm(9,"th",19),r.k0s(),r.bVm()),2&t&&(r.R7$(4),r.JRh(r.bMT(5,2,"name")),r.R7$(3),r.JRh(r.bMT(8,4,"owner")))}function Wt(t,n){if(1&t){const t=r.RV6();r.qex(0),r.j41(1,"a",24),r.nI1(2,"i18n"),r.bIt("click",(function(){r.eBV(t);const n=r.XpG().$implicit,e=r.XpG(4);return r.Njj(e.selectCipher(n))})),r.EFF(3),r.k0s(),r.bVm()}if(2&t){const t=r.XpG().$implicit;r.R7$(),r.FS9("title",r.i5U(2,2,"editItemWithName",t.name)),r.R7$(2),r.JRh(t.name)}}function Qt(t,n){if(1&t&&(r.j41(0,"span"),r.EFF(1),r.k0s()),2&t){const t=r.XpG().$implicit;r.R7$(),r.JRh(t.name)}}function Kt(t,n){1&t&&(r.qex(0),r.nrm(1,"i",25),r.nI1(2,"i18n"),r.j41(3,"span",4),r.EFF(4),r.nI1(5,"i18n"),r.k0s(),r.bVm()),2&t&&(r.R7$(),r.FS9("title",r.bMT(2,2,"shared")),r.R7$(3),r.JRh(r.bMT(5,4,"shared")))}function Zt(t,n){1&t&&(r.qex(0),r.nrm(1,"i",26),r.nI1(2,"i18n"),r.j41(3,"span",4),r.EFF(4),r.nI1(5,"i18n"),r.k0s(),r.bVm()),2&t&&(r.R7$(),r.FS9("title",r.bMT(2,2,"attachments")),r.R7$(3),r.JRh(r.bMT(5,4,"attachments")))}function tn(t,n){if(1&t&&(r.nrm(0,"app-org-badge",27),r.nI1(1,"async"),r.nI1(2,"orgNameFromId")),2&t){const t=r.XpG().$implicit,n=r.XpG(4);r.Y8G("disabled",n.disabled)("organizationId",t.organizationId)("organizationName",r.i5U(2,5,t.organizationId,r.bMT(1,3,n.organizations$)))}}function nn(t,n){if(1&t&&(r.j41(0,"tr",18)(1,"td",19),r.nrm(2,"app-vault-icon",21),r.k0s(),r.j41(3,"td",19),r.DNE(4,Wt,4,5,"ng-container",22)(5,Qt,2,1,"ng-template",null,0,r.C5r)(7,Kt,6,6,"ng-container",1)(8,Zt,6,6,"ng-container",1),r.nrm(9,"br"),r.j41(10,"small"),r.EFF(11),r.k0s()(),r.j41(12,"td",19),r.DNE(13,tn,3,8,"app-org-badge",23),r.k0s()()),2&t){const t=n.$implicit,e=r.sdS(6),i=r.XpG(4);r.R7$(2),r.Y8G("cipher",t),r.R7$(2),r.Y8G("ngIf",!i.organization||i.canManageCipher(t))("ngIfElse",e),r.R7$(3),r.Y8G("ngIf",!i.organization&&t.organizationId),r.R7$(),r.Y8G("ngIf",t.hasAttachments),r.R7$(3),r.JRh(t.subTitle),r.R7$(2),r.Y8G("ngIf",!i.organization)}}function en(t,n){if(1&t&&(r.DNE(0,nn,14,7,"tr",20),r.nI1(1,"async")),2&t){const t=n.$implicit;r.Y8G("ngForOf",r.bMT(1,1,t))}}function an(t,n){if(1&t&&(r.qex(0),r.j41(1,"bit-callout",8),r.nI1(2,"i18n"),r.EFF(3),r.nI1(4,"number"),r.nI1(5,"i18n"),r.k0s(),r.DNE(6,_t,4,7,"bit-toggle-group",9),r.j41(7,"bit-table",10),r.DNE(8,Ht,10,6,"ng-container",11)(9,en,2,3,"ng-template",12),r.k0s(),r.bVm()),2&t){const t=r.XpG(2);r.R7$(),r.FS9("title",r.bMT(2,5,"unsecuredWebsitesFound")),r.R7$(2),r.SpI(" ",r.brH(5,9,"unsecuredWebsitesFoundReportDesc",r.bMT(4,7,t.ciphers.length),t.vaultMsg)," "),r.R7$(3),r.Y8G("ngIf",t.showFilterToggle&&!t.isAdminConsoleActive),r.R7$(),r.Y8G("dataSource",t.dataSource),r.R7$(),r.Y8G("ngIf",!t.isAdminConsoleActive)}}function on(t,n){if(1&t&&(r.j41(0,"div",5),r.DNE(1,qt,4,6,"bit-callout",6)(2,an,10,13,"ng-container",1),r.k0s()),2&t){const t=r.XpG();r.R7$(),r.Y8G("ngIf",!t.ciphers.length),r.R7$(),r.Y8G("ngIf",t.ciphers.length)}}class rn extends Pt.U{constructor(t,n,e,i,a,o,r,s,c,l,p){super(t,i,n,a,o,r,s,c,l,p),this.route=e,this.accountService=a}ngOnInit(){const t=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return Jt(this,void 0,void 0,(function*(){this.isAdminConsoleActive=!0,this.route.parent.parent.params.subscribe((n=>Jt(this,void 0,void 0,(function*(){const e=yield(0,u._)(this.accountService.activeAccount$.pipe((0,c.T)((t=>null==t?void 0:t.id))));this.organization=yield(0,u._)(this.organizationService.organizations$(e).pipe((0,l.Sw)(n.organizationId))),this.manageableCiphers=yield this.cipherService.getAll(e),yield t.ngOnInit.call(this)}))))}))}getAllCiphers(){return this.cipherService.getAllFromApiForOrganization(this.organization.id)}canManageCipher(t){return 0===t.collectionIds.length||this.manageableCiphers.some((n=>n.id===t.id))}}rn.ɵfac=function(t){return new(t||rn)(r.rXU(R.p),r.rXU($.o3),r.rXU(S.nX),r.rXU(l.PV),r.rXU(w.Di),r.rXU(b.qX),r.rXU(E.W),r.rXU(h.H),r.rXU(Ot.YD),r.rXU(b.hI),r.rXU(I.l))},rn.ɵcmp=r.VBU({type:rn,selectors:[["app-unsecured-websites-report"]],standalone:!1,features:[r.Jv_([{provide:b.hI,useClass:I.l},I.l,m.B,f.a]),r.Vt3],decls:7,vars:5,consts:[["cantManage",""],[4,"ngIf"],["class","tw-mt-4",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","tw-text-muted",3,"title"],[1,"tw-sr-only"],[1,"tw-mt-4"],["type","success",3,"title",4,"ngIf"],["type","success",3,"title"],["type","danger",3,"title"],[3,"selected","selectedChange",4,"ngIf"],[3,"dataSource"],["header","",4,"ngIf"],["body",""],[3,"selectedChange","selected"],[4,"ngFor","ngForOf"],[3,"value"],["bitBadge","","variant","info"],["header",""],["bitRow",""],["bitCell",""],["bitRow","",4,"ngFor","ngForOf"],[3,"cipher"],[4,"ngIf","ngIfElse"],["appStopProp","",3,"disabled","organizationId","organizationName",4,"ngIf"],["bitLink","","href","#","appStopClick","",3,"click","title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection-shared",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"],["appStopProp","",3,"disabled","organizationId","organizationName"]],template:function(t,n){1&t&&(r.nrm(0,"app-header"),r.j41(1,"bit-container")(2,"p"),r.EFF(3),r.nI1(4,"i18n"),r.k0s(),r.DNE(5,Bt,6,6,"div",1)(6,on,3,2,"div",2),r.k0s()),2&t&&(r.R7$(3),r.JRh(r.bMT(4,3,"unsecuredWebsitesReportDesc")),r.R7$(2),r.Y8G("ngIf",!n.hasLoaded&&n.loading),r.R7$(),r.Y8G("ngIf",n.hasLoaded))},dependencies:[y.Sq,y.bT,j.R,k.Y,G.x,T.n,M.G,z.H,N.L,x.Q,st.Y,ct._,ct.O,A.H,Y.a,D.P,V.f,y.Jj,y.QX,O.$,P.t],encapsulation:2});var sn=e(63457),cn=e(72523),ln=function(t,n,e,i){return new(e||(e=Promise))((function(a,o){function r(t){try{c(i.next(t))}catch(n){o(n)}}function s(t){try{c(i.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,s)}c((i=i.apply(t,n||[])).next())}))};function pn(t,n){1&t&&(r.j41(0,"div"),r.nrm(1,"i",3),r.nI1(2,"i18n"),r.j41(3,"span",4),r.EFF(4),r.nI1(5,"i18n"),r.k0s()()),2&t&&(r.R7$(),r.FS9("title",r.bMT(2,2,"loading")),r.R7$(3),r.JRh(r.bMT(5,4,"loading")))}function dn(t,n){1&t&&(r.j41(0,"bit-callout",7),r.nI1(1,"i18n"),r.EFF(2),r.nI1(3,"i18n"),r.k0s()),2&t&&(r.FS9("title",r.bMT(1,2,"goodNews")),r.R7$(2),r.SpI(" ",r.bMT(3,4,"noWeakPasswords")," "))}function un(t,n){if(1&t&&(r.qex(0),r.j41(1,"bit-toggle",19),r.EFF(2),r.j41(3,"span",20),r.EFF(4),r.k0s()(),r.bVm()),2&t){const t=n.$implicit,e=r.XpG(4);r.R7$(),r.Y8G("value",t),r.R7$(),r.SpI(" ",e.getName(t)," "),r.R7$(2),r.SpI(" ",e.getCount(t)," ")}}function gn(t,n){if(1&t){const t=r.RV6();r.j41(0,"bit-toggle-group",17),r.nI1(1,"async"),r.nI1(2,"i18n"),r.bIt("selectedChange",(function(n){r.eBV(t);const e=r.XpG(3);return r.Njj(e.filterOrgToggle(n))})),r.DNE(3,un,5,3,"ng-container",18),r.k0s()}if(2&t){const t=r.XpG(3);r.Y8G("selected",r.bMT(1,3,t.filterOrgStatus$)),r.BMQ("aria-label",r.bMT(2,5,"addAccessFilter")),r.R7$(3),r.Y8G("ngForOf",t.filterStatus)}}function hn(t,n){1&t&&(r.j41(0,"th",21),r.EFF(1),r.nI1(2,"i18n"),r.k0s()),2&t&&(r.R7$(),r.SpI(" ",r.bMT(2,1,"owner")," "))}function bn(t,n){if(1&t){const t=r.RV6();r.qex(0),r.j41(1,"a",27),r.nI1(2,"i18n"),r.bIt("click",(function(){r.eBV(t);const n=r.XpG().$implicit,e=r.XpG(3);return r.Njj(e.selectCipher(n))})),r.EFF(3),r.k0s(),r.bVm()}if(2&t){const t=r.XpG().$implicit;r.R7$(),r.FS9("title",r.i5U(2,2,"editItemWithName",t.name)),r.R7$(2),r.JRh(t.name)}}function fn(t,n){if(1&t&&(r.j41(0,"span"),r.EFF(1),r.k0s()),2&t){const t=r.XpG().$implicit;r.R7$(),r.JRh(t.name)}}function mn(t,n){1&t&&(r.qex(0),r.nrm(1,"i",28),r.nI1(2,"i18n"),r.j41(3,"span",4),r.EFF(4),r.nI1(5,"i18n"),r.k0s(),r.bVm()),2&t&&(r.R7$(),r.FS9("title",r.bMT(2,2,"shared")),r.R7$(3),r.JRh(r.bMT(5,4,"shared")))}function In(t,n){1&t&&(r.qex(0),r.nrm(1,"i",29),r.nI1(2,"i18n"),r.j41(3,"span",4),r.EFF(4),r.nI1(5,"i18n"),r.k0s(),r.bVm()),2&t&&(r.R7$(),r.FS9("title",r.bMT(2,2,"attachments")),r.R7$(3),r.JRh(r.bMT(5,4,"attachments")))}function vn(t,n){if(1&t&&(r.nrm(0,"app-org-badge",31),r.nI1(1,"async"),r.nI1(2,"orgNameFromId")),2&t){const t=r.XpG(2).$implicit,n=r.XpG(3);r.Y8G("disabled",n.disabled)("organizationId",t.organizationId)("organizationName",r.i5U(2,5,t.organizationId,r.bMT(1,3,n.organizations$)))}}function Rn(t,n){if(1&t&&(r.j41(0,"td",12),r.DNE(1,vn,3,8,"app-org-badge",30),r.k0s()),2&t){const t=r.XpG(4);r.R7$(),r.Y8G("ngIf",!t.organization)}}function Fn(t,n){if(1&t&&(r.j41(0,"td",12),r.nrm(1,"app-vault-icon",22),r.k0s(),r.j41(2,"td",12),r.DNE(3,bn,4,5,"ng-container",23)(4,fn,2,1,"ng-template",null,0,r.C5r)(6,mn,6,6,"ng-container",1)(7,In,6,6,"ng-container",1),r.nrm(8,"br"),r.j41(9,"small"),r.EFF(10),r.k0s()(),r.DNE(11,Rn,2,1,"td",24),r.j41(12,"td",25)(13,"span",26),r.EFF(14),r.nI1(15,"i18n"),r.k0s()()),2&t){const t=n.$implicit,e=r.sdS(5),i=r.XpG(3);r.R7$(),r.Y8G("cipher",t),r.R7$(2),r.Y8G("ngIf",!i.organization||i.canManageCipher(t))("ngIfElse",e),r.R7$(3),r.Y8G("ngIf",!i.organization&&t.organizationId),r.R7$(),r.Y8G("ngIf",t.hasAttachments),r.R7$(3),r.JRh(t.subTitle),r.R7$(),r.Y8G("ngIf",!i.isAdminConsoleActive),r.R7$(2),r.Y8G("variant",t.reportValue.badgeVariant),r.R7$(),r.SpI(" ",r.bMT(15,9,t.reportValue.label)," ")}}function $n(t,n){if(1&t&&(r.qex(0),r.j41(1,"bit-callout",8),r.nI1(2,"i18n"),r.EFF(3),r.nI1(4,"number"),r.nI1(5,"i18n"),r.k0s(),r.DNE(6,gn,4,7,"bit-toggle-group",9),r.j41(7,"bit-table-scroll",10),r.qex(8,11),r.nrm(9,"th",12),r.j41(10,"th",13),r.EFF(11),r.nI1(12,"i18n"),r.k0s(),r.DNE(13,hn,3,3,"th",14),r.j41(14,"th",15),r.EFF(15),r.nI1(16,"i18n"),r.k0s(),r.bVm(),r.DNE(17,Fn,16,11,"ng-template",16),r.k0s(),r.bVm()),2&t){const t=r.XpG(2);r.R7$(),r.FS9("title",r.bMT(2,8,"weakPasswordsFound")),r.R7$(2),r.SpI(" ",r.brH(5,12,"weakPasswordsFoundReportDesc",r.bMT(4,10,t.ciphers.length),t.vaultMsg)," "),r.R7$(3),r.Y8G("ngIf",t.showFilterToggle&&!t.isAdminConsoleActive),r.R7$(),r.Y8G("dataSource",t.dataSource)("rowSize",53),r.R7$(4),r.JRh(r.bMT(12,16,"name")),r.R7$(2),r.Y8G("ngIf",!t.isAdminConsoleActive),r.R7$(2),r.SpI(" ",r.bMT(16,18,"weakness")," ")}}function wn(t,n){if(1&t&&(r.j41(0,"div",5),r.DNE(1,dn,4,6,"bit-callout",6)(2,$n,18,20,"ng-container",1),r.k0s()),2&t){const t=r.XpG();r.R7$(),r.Y8G("ngIf",!t.ciphers.length),r.R7$(),r.Y8G("ngIf",t.ciphers.length)}}class Sn extends cn.w{constructor(t,n,e,i,a,o,r,s,c,l,p){super(t,n,a,e,l,o,r,s,c,p),this.route=i,this.accountService=l}ngOnInit(){const t=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return ln(this,void 0,void 0,(function*(){this.isAdminConsoleActive=!0,this.route.parent.parent.params.subscribe((n=>ln(this,void 0,void 0,(function*(){const e=yield(0,u._)(this.accountService.activeAccount$.pipe(g.F6));this.organization=yield(0,u._)(this.organizationService.organizations$(e).pipe((0,l.Sw)(n.organizationId))),this.manageableCiphers=yield this.cipherService.getAll(e),yield t.ngOnInit.call(this)}))))}))}getAllCiphers(){return this.cipherService.getAllFromApiForOrganization(this.organization.id)}canManageCipher(t){return 0===t.collectionIds.length||this.manageableCiphers.some((n=>n.id===t.id))}}Sn.ɵfac=function(t){return new(t||Sn)(r.rXU(R.p),r.rXU(sn.Q),r.rXU($.o3),r.rXU(S.nX),r.rXU(l.PV),r.rXU(b.qX),r.rXU(E.W),r.rXU(h.H),r.rXU(b.hI),r.rXU(w.Di),r.rXU(I.l))},Sn.ɵcmp=r.VBU({type:Sn,selectors:[["app-weak-passwords-report"]],standalone:!1,features:[r.Jv_([{provide:b.hI,useClass:I.l},I.l,m.B,f.a]),r.Vt3],decls:7,vars:5,consts:[["cantManage",""],[4,"ngIf"],["class","tw-mt-4",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","tw-text-muted",3,"title"],[1,"tw-sr-only"],[1,"tw-mt-4"],["type","success",3,"title",4,"ngIf"],["type","success",3,"title"],["type","danger",3,"title"],[3,"selected","selectedChange",4,"ngIf"],[3,"dataSource","rowSize"],["header",""],["bitCell",""],["bitCell","","bitSortable","name"],["bitCell","","bitSortable","organizationId",4,"ngIf"],["bitCell","","bitSortable","scoreKey","default","",1,"tw-text-right"],["bitRowDef",""],[3,"selectedChange","selected"],[4,"ngFor","ngForOf"],[3,"value"],["bitBadge","","variant","info"],["bitCell","","bitSortable","organizationId"],[3,"cipher"],[4,"ngIf","ngIfElse"],["bitCell","",4,"ngIf"],["bitCell","",1,"tw-text-right"],["bitBadge","",3,"variant"],["bitLink","","href","#","appStopClick","",3,"click","title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection-shared",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"],["appStopProp","",3,"disabled","organizationId","organizationName",4,"ngIf"],["appStopProp","",3,"disabled","organizationId","organizationName"]],template:function(t,n){1&t&&(r.nrm(0,"app-header"),r.j41(1,"bit-container")(2,"p"),r.EFF(3),r.nI1(4,"i18n"),r.k0s(),r.DNE(5,pn,6,6,"div",1)(6,wn,3,2,"div",2),r.k0s()),2&t&&(r.R7$(3),r.JRh(r.bMT(4,3,"weakPasswordsReportDesc")),r.R7$(2),r.Y8G("ngIf",!n.hasLoaded&&n.loading),r.R7$(),r.Y8G("ngIf",n.hasLoaded))},dependencies:[y.Sq,y.bT,j.R,k.Y,G.x,T.n,M.G,z.H,N.L,U.D,x.Q,C.O,U.N,A.H,Y.a,D.P,V.f,y.Jj,y.QX,O.$,P.t],encapsulation:2});var En=function(t,n,e,i){return new(e||(e=Promise))((function(a,o){function r(t){try{c(i.next(t))}catch(n){o(n)}}function s(t){try{c(i.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,s)}c((i=i.apply(t,n||[])).next())}))};function yn(){return(t,n)=>En(this,void 0,void 0,(function*(){const n=(0,r.WQX)(S.Ix),e=(0,r.WQX)(l.PV),i=(0,r.WQX)(w.Di),a=(0,r.WQX)($.o3),o=yield(0,u._)(i.activeAccount$.pipe((0,c.T)((t=>null==t?void 0:t.id)))),s=yield(0,u._)(e.organizations$(o).pipe((0,l.Sw)(t.params.organizationId)));if(null==s)return n.createUrlTree(["/"]);if(s.isFreeOrg){if(!s.canEditSubscription)return yield a.openSimpleDialog({title:{key:"upgradeOrganizationCloseSecurityGaps"},content:{key:"upgradeOrganizationCloseSecurityGapsDesc"},acceptButtonText:{key:"ok"},cancelButtonText:null,type:"info"}),!1;(yield a.openSimpleDialog({title:{key:"upgradeOrganizationCloseSecurityGaps"},content:{key:"upgradeOrganizationCloseSecurityGapsDesc"},acceptButtonText:{key:"upgradeOrganization"},type:"info",icon:"bwi-plus-circle"}))&&(yield n.navigate(["organizations",s.id,"billing","subscription"],{queryParams:{upgrade:!0}}))}return!s.isFreeOrg}))}var jn=e(77259),kn=e(95661),Gn=e(66046),Tn=e(73276),Xn=e(14803),Mn=e(88565),zn=e(90171),Nn=e(10436),Un=e(36502),xn=e(16452),Cn=e(77612),An=e(98869);class Yn{constructor(t){this.message=t.humanReadableMessage,this.appIcon=t.appIcon,this.appName=t.appName,this.userId=t.userId,this.userName=t.userName,this.userEmail=t.userEmail,this.date=t.date,this.ip=t.ip,this.type=Un.Bx[t.type],this.installationId=t.installationId}}var Dn=function(t,n,e,i){return new(e||(e=Promise))((function(a,o){function r(t){try{c(i.next(t))}catch(n){o(n)}}function s(t){try{c(i.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,s)}c((i=i.apply(t,n||[])).next())}))};class Vn{getEventExport(t){return Dn(this,void 0,void 0,(function*(){return An.unparse(t.map((t=>new Yn(t))))}))}getFileName(t=null,n="csv"){const e=new Date;return"bitwarden"+(t?"_"+t:"")+"_export_"+(e.getFullYear()+""+this.padNumber(e.getMonth()+1,2)+this.padNumber(e.getDate(),2)+this.padNumber(e.getHours(),2)+this.padNumber(e.getMinutes(),2)+this.padNumber(e.getSeconds(),2))+"."+n}padNumber(t,n,e="0"){const i=t.toString();return i.length>=n?i:new Array(n-i.length+1).join(e)+i}}Vn.ɵfac=function(t){return new(t||Vn)},Vn.ɵprov=r.jDH({token:Vn,factory:Vn.ɵfac,providedIn:"root"});var On=e(51757),Pn=e(97319),Jn=e(37115),Bn=e(53127),qn=e(69855),Ln=function(t,n,e,i){return new(e||(e=Promise))((function(a,o){function r(t){try{c(i.next(t))}catch(n){o(n)}}function s(t){try{c(i.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,s)}c((i=i.apply(t,n||[])).next())}))};class _n{constructor(t,n,e,i,a,o,r){this.eventService=t,this.i18nService=n,this.exportService=e,this.platformUtilsService=i,this.logService=a,this.fileDownloadService=o,this.toastService=r,this.loading=!0,this.loaded=!1,this.dirtyDates=!0,this.eventsForm=new On.gE({start:new On.MJ(null),end:new On.MJ(null)}),this.loadMoreEvents=()=>Ln(this,void 0,void 0,(function*(){yield this.loadEvents(!1)})),this.refreshEvents=()=>Ln(this,void 0,void 0,(function*(){yield this.loadEvents(!0)})),this.exportEvents=()=>Ln(this,void 0,void 0,(function*(){if(this.dirtyDates)return;this.loading=!0;const t=this.parseDates();if(null==t)return;let n;try{n=this.export(t[0],t[1]),yield n}catch(e){this.logService.error(`Handled exception: ${e}`)}n=null,this.loading=!1})),this.loadEvents=t=>Ln(this,void 0,void 0,(function*(){const n=this.parseDates();if(null==n)return;this.loading=!0;let e,i=[];e=this.loadAndParseEvents(n[0],n[1],t?null:this.continuationToken);const a=yield e;this.continuationToken=a.continuationToken,i=a.events,!t&&null!=this.events&&this.events.length>0?this.events=this.events.concat(i):this.events=i,this.dirtyDates=!1,this.loading=!1,e=null}));const s=this.eventService.getDefaultDateFilters();this.start=s[0],this.end=s[1]}get start(){return this.eventsForm.value.start}set start(t){this.eventsForm.get("start").setValue(t)}get end(){return this.eventsForm.value.end}set end(t){this.eventsForm.get("end").setValue(t)}loadAndParseEvents(t,n,e){return Ln(this,void 0,void 0,(function*(){const i=yield this.requestEvents(t,n,e),a=yield Promise.all(i.data.map((t=>Ln(this,void 0,void 0,(function*(){const n=null==t.actingUserId?t.userId:t.actingUserId,e=yield this.eventService.getEventInfo(t),i=this.getUserName(t,n),a=null!=i?i.name:this.i18nService.t("unknown");return new Pn.g({message:e.message,humanReadableMessage:e.humanReadableMessage,appIcon:e.appIcon,appName:e.appName,userId:n,userName:a,userEmail:null!=i?i.email:"",date:t.date,ip:t.ipAddress,type:t.type,installationId:t.installationId,systemUser:t.systemUser,serviceAccountId:t.serviceAccountId})})))));return{continuationToken:i.continuationToken,events:a}}))}parseDates(){let t=null;try{t=this.eventService.formatDateFilters(this.start,this.end)}catch(n){return this.toastService.showToast({variant:"error",title:this.i18nService.t("errorOccurred"),message:this.i18nService.t("invalidDateRange")}),null}return t}export(t,n){return Ln(this,void 0,void 0,(function*(){let e=this.continuationToken,i=[].concat(this.events);for(;null!=e;){const a=yield this.loadAndParseEvents(t,n,e);e=a.continuationToken,i=i.concat(a.events)}const a=yield this.exportService.getEventExport(i),o=this.exportService.getFileName(this.exportFileName,"csv");this.fileDownloadService.download({fileName:o,blobData:a,blobOptions:{type:"text/plain"}})}))}}function Hn(){const t=new Date,n=new Date(t.getTime()-864e5),e=n.getTime()+Math.random()*(t.getTime()-n.getTime());return new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}_n.ɵfac=function(t){return new(t||_n)(r.rXU(Cn.US),r.rXU(E.W),r.rXU(Vn),r.rXU(Jn.y),r.rXU(rt.K),r.rXU(Bn.y),r.rXU(qn.f))},_n.ɵdir=r.FsC({type:_n});const Wn=new Array(6).fill({appName:"***",userName:"**********",userEmail:"**********",message:"**********"}),Qn=[{date:Hn(),appName:"Extension - Firefox",userName:"Alice",userEmail:"alice@email.com",message:"Logged in"},{date:Hn(),appName:"Mobile - iOS",userName:"Bob",message:'Viewed item <span class="tw-text-code">000000</span>'},{date:Hn(),appName:"Desktop - Linux",userName:"Carlos",userEmail:"carlos@email.com",message:"Login attempt failed with incorrect password"},{date:Hn(),appName:"Web vault - Chrome",userName:"Ivan",userEmail:"ivan@email.com",message:'Confirmed user <span class="tw-text-code">000000</span>'},{date:Hn(),appName:"Mobile - Android",userName:"Franz",userEmail:"franz@email.com",message:'Sent item <span class="tw-text-code">000000</span> to trash'}].sort(((t,n)=>new Date(t.date).getTime()-new Date(n.date).getTime())).concat(Wn);var Kn=e(12012),Zn=e(11224),te=e(13417),ne=e(3892),ee=e(26657),ie=e(86226),ae=e(97553),oe=e(43759),re=function(t,n,e,i){return new(e||(e=Promise))((function(a,o){function r(t){try{c(i.next(t))}catch(n){o(n)}}function s(t){try{c(i.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,s)}c((i=i.apply(t,n||[])).next())}))};function se(t,n){1&t&&(r.j41(0,"span",11),r.EFF(1),r.nI1(2,"i18n"),r.k0s()),2&t&&(r.R7$(),r.SpI(" ",r.bMT(2,1,"upgrade")," "))}function ce(t,n){1&t&&(r.j41(0,"bit-callout",12),r.nI1(1,"i18n"),r.EFF(2),r.nI1(3,"i18n"),r.k0s()),2&t&&(r.Y8G("title",r.bMT(1,2,"upgradeEventLogTitleMessage")),r.R7$(2),r.SpI(" ",r.bMT(3,4,"upgradeEventLogMessage"),"\n"))}function le(t,n){1&t&&(r.qex(0),r.nrm(1,"i",13),r.nI1(2,"i18n"),r.j41(3,"span",14),r.EFF(4),r.nI1(5,"i18n"),r.k0s(),r.bVm()),2&t&&(r.R7$(),r.FS9("title",r.bMT(2,2,"loading")),r.R7$(3),r.JRh(r.bMT(5,4,"loading")))}function pe(t,n){1&t&&(r.j41(0,"p"),r.EFF(1),r.nI1(2,"i18n"),r.k0s()),2&t&&(r.R7$(),r.JRh(r.bMT(2,1,"noEventsInList")))}function de(t,n){if(1&t&&(r.j41(0,"tr",20)(1,"td",21),r.EFF(2),r.nI1(3,"date"),r.k0s(),r.j41(4,"td",17)(5,"span",22),r.EFF(6),r.k0s()(),r.j41(7,"td",17)(8,"span",22),r.EFF(9),r.k0s()(),r.nrm(10,"td",23),r.k0s()),2&t){const t=n.$implicit,e=n.index;r.XpG(4);const i=r.r8f(0);r.R7$(2),r.SpI(" ",e>4&&i?"******":r.i5U(3,8,t.date,"medium")," "),r.R7$(3),r.FCK("title","",t.appName,", ",t.ip,""),r.R7$(),r.JRh(t.appName),r.R7$(2),r.FS9("title",t.userEmail),r.R7$(),r.JRh(t.userName),r.R7$(),r.Y8G("innerHTML",t.message,r.npT)}}function ue(t,n){if(1&t&&r.DNE(0,de,11,11,"tr",19),2&t){r.XpG(2);const t=r.r8f(1);r.Y8G("ngForOf",t)}}function ge(t,n){1&t&&(r.j41(0,"bit-table"),r.qex(1,16),r.j41(2,"tr")(3,"th",17),r.EFF(4),r.nI1(5,"i18n"),r.k0s(),r.j41(6,"th",17),r.EFF(7),r.nI1(8,"i18n"),r.k0s(),r.j41(9,"th",17),r.EFF(10),r.nI1(11,"i18n"),r.k0s(),r.j41(12,"th",17),r.EFF(13),r.nI1(14,"i18n"),r.k0s()(),r.bVm(),r.DNE(15,ue,1,1,"ng-template",18),r.k0s()),2&t&&(r.R7$(4),r.JRh(r.bMT(5,4,"timestamp")),r.R7$(3),r.JRh(r.bMT(8,6,"client")),r.R7$(3),r.JRh(r.bMT(11,8,"member")),r.R7$(3),r.JRh(r.bMT(14,10,"event")))}function he(t,n){if(1&t&&(r.j41(0,"button",24),r.EFF(1),r.nI1(2,"i18n"),r.k0s()),2&t){const t=r.XpG(2);r.Y8G("bitAction",t.loadMoreEvents),r.R7$(),r.SpI(" ",r.bMT(2,2,"loadMore")," ")}}function be(t,n){if(1&t&&(r.qex(0),r.SS7(1),r.DNE(2,pe,3,3,"p",10)(3,ge,16,12,"bit-table",10)(4,he,3,4,"button",15),r.bVm()),2&t){const t=r.XpG();r.R7$();const n=r.bH3(null!=t.organization&&t.organization.useEvents?t.events:t.placeholderEvents);r.R7$(),r.Y8G("ngIf",!n||!n.length),r.R7$(),r.Y8G("ngIf",n&&n.length),r.R7$(),r.Y8G("ngIf",t.continuationToken)}}function fe(t,n){if(1&t){const t=r.RV6();r.qex(0),r.j41(1,"div",25)(2,"div",26),r.nrm(3,"i",27),r.j41(4,"p",28),r.EFF(5),r.nI1(6,"i18n"),r.k0s(),r.j41(7,"p"),r.EFF(8),r.nI1(9,"i18n"),r.k0s(),r.j41(10,"button",29),r.bIt("click",(function(){r.eBV(t);const n=r.XpG();return r.Njj(n.changePlan())})),r.EFF(11),r.nI1(12,"i18n"),r.k0s()()(),r.bVm()}2&t&&(r.R7$(5),r.SpI(" ",r.bMT(6,3,"upgradeEventLogTitleMessage")," "),r.R7$(3),r.SpI(" ",r.bMT(9,5,"upgradeForFullEventsMessage")," "),r.R7$(3),r.SpI(" ",r.bMT(12,7,"changeBillingPlan")," "))}const me={[Un.p2.SCIM]:null,[Un.p2.DomainVerification]:"domainVerification",[Un.p2.PublicApi]:"publicApi"};class Ie extends _n{constructor(t,n,e,i,a,o,r,s,c,l,d,u,g,h,b,f,m,I){super(e,i,a,o,s,h,b),this.apiService=t,this.route=n,this.router=r,this.userNamePipe=c,this.organizationService=l,this.organizationUserApiService=d,this.organizationApiService=u,this.providerService=g,this.accountService=f,this.dialogService=m,this.configService=I,this.exportFileName="org-events",this.placeholderEvents=Qn,this.orgUsersUserIdMap=new Map,this.destroy$=new Gn.B,this.ProductTierType=Nn.K_,this.isBreadcrumbEventLogsEnabled$=this.configService.getFeatureFlag$(p.TO.PM12276_BreadcrumbEventLogs)}ngOnInit(){return re(this,void 0,void 0,(function*(){const t=yield(0,u._)((0,g.F6)(this.accountService.activeAccount$));this.route.params.pipe((0,Tn.H)((n=>re(this,void 0,void 0,(function*(){this.organizationId=n.organizationId,this.organization=yield(0,u._)(this.organizationService.organizations$(t).pipe((0,l.Sw)(this.organizationId))),this.organization.useEvents||(this.eventsForm.get("start").disable(),this.eventsForm.get("end").disable(),this.organizationSubscription=yield this.organizationApiService.getSubscription(this.organizationId)),yield this.load()})))),(0,Xn.Q)(this.destroy$)).subscribe()}))}load(){return re(this,void 0,void 0,(function*(){if((yield this.organizationUserApiService.getAllMiniUserDetails(this.organizationId)).data.forEach((t=>{const n=this.userNamePipe.transform(t);this.orgUsersUserIdMap.set(t.userId,{name:n,email:t.email})})),null!=this.organization.providerId)try{if(null!=(yield this.providerService.get(this.organization.providerId))&&(yield this.providerService.get(this.organization.providerId)).canManageUsers){(yield this.apiService.getProviderUsers(this.organization.providerId)).data.forEach((t=>{const n=this.userNamePipe.transform(t);this.orgUsersUserIdMap.set(t.userId,{name:`${n} (${this.organization.providerName})`,email:t.email})}))}}catch(t){this.logService.warning(t)}yield this.refreshEvents(),this.loaded=!0}))}requestEvents(t,n,e){return this.apiService.getEventsOrganization(this.organizationId,t,n,e)}getUserName(t,n){if(null!=t.installationId)return{name:`Installation: ${t.installationId}`};if(null!=n){if(this.orgUsersUserIdMap.has(n))return this.orgUsersUserIdMap.get(n);if(null!=t.providerId&&t.providerId===this.organization.providerId)return{name:this.organization.providerName}}if(null!=t.systemUser){const n=me[t.systemUser];return n?{name:this.i18nService.t(n)}:{name:Un.p2[t.systemUser]}}return t.serviceAccountId?{name:this.i18nService.t("machineAccount")+" "+this.getShortId(t.serviceAccountId)}:null}getShortId(t){return null==t?void 0:t.substring(0,8)}changePlan(){return re(this,void 0,void 0,(function*(){const t=(0,xn.IO)(this.dialogService,{data:{organizationId:this.organizationId,subscription:this.organizationSubscription,productTierType:this.organization.productTierType}});(yield(0,Mn.s)(t.closed))!==xn.d1.Closed&&(yield this.load())}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}Ie.ɵfac=function(t){return new(t||Ie)(r.rXU(Kn.G),r.rXU(S.nX),r.rXU(Cn.US),r.rXU(E.W),r.rXU(Vn),r.rXU(Jn.y),r.rXU(S.Ix),r.rXU(rt.K),r.rXU(zn.b),r.rXU(l.PV),r.rXU(Ot.uB),r.rXU(Zn.X),r.rXU(te.$),r.rXU(Bn.y),r.rXU(qn.f),r.rXU(w.Di),r.rXU($.o3),r.rXU(d.w))},Ie.ɵcmp=r.VBU({type:Ie,selectors:[["app-org-events"]],standalone:!1,features:[r.Vt3],decls:34,vars:31,consts:[["bitBadge","","variant","primary","slot","title-suffix","class","tw-ml-2 tw-mt-1.5 tw-inline-flex tw-items-center",4,"ngIf"],[1,"tw-mb-4",3,"formGroup"],[1,"tw-mt-4","tw-flex","tw-items-center"],["bitInput","","type","datetime-local","formControlName","start",3,"change","placeholder"],[1,"tw-mx-2"],["bitInput","","type","datetime-local","formControlName","end",3,"change","placeholder"],["type","button","bitButton","","bitFormButton","","buttonType","primary",1,"tw-mx-3","tw-mt-1",3,"bitAction","disabled"],["type","button","bitButton","","bitFormButton","",1,"tw-mt-1",3,"bitAction","disabled"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-sign-in"],["type","info",3,"title",4,"ngIf"],[4,"ngIf"],["bitBadge","","variant","primary","slot","title-suffix",1,"tw-ml-2","tw-mt-1.5","tw-inline-flex","tw-items-center"],["type","info",3,"title"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","tw-text-muted",3,"title"],[1,"tw-sr-only"],["type","button","bitButton","","buttonType","primary",3,"bitAction",4,"ngIf"],["header",""],["bitCell",""],["body",""],["bitRow","","alignContent","top",4,"ngFor","ngForOf"],["bitRow","","alignContent","top"],["bitCell","",1,"tw-whitespace-nowrap"],[3,"title"],["bitCell","",3,"innerHTML"],["type","button","bitButton","","buttonType","primary",3,"bitAction"],[1,"tw-relative","tw--top-72","tw-bg-background","tw-bg-opacity-90","tw-pb-5","tw-flex","tw-items-center","tw-justify-center","tw-h-[19rem]"],[1,"tw-bg-background","tw-max-w-xl","tw-flex-col","tw-justify-center","tw-text-center","tw-p-5","tw-px-10","tw-rounded","tw-border-0","tw-border-b","tw-border-secondary-300","tw-border-solid","tw-mt-5"],[1,"bwi","bwi-2x","bwi-business","tw-text-primary-600"],[1,"tw-font-bold","tw-mt-2"],["type","button","bitButton","","buttonType","primary",1,"tw-mt-1",3,"click"]],template:function(t,n){if(1&t){const t=r.RV6();r.SS7(0),r.nI1(1,"async"),r.j41(2,"app-header"),r.DNE(3,se,3,3,"span",0),r.k0s(),r.j41(4,"div",1)(5,"div",2)(6,"bit-form-field")(7,"bit-label"),r.EFF(8),r.nI1(9,"i18n"),r.k0s(),r.j41(10,"input",3),r.nI1(11,"i18n"),r.bIt("change",(function(){return r.eBV(t),r.Njj(n.dirtyDates=!0)})),r.k0s()(),r.j41(12,"span",4),r.EFF(13,"-"),r.k0s(),r.j41(14,"bit-form-field")(15,"bit-label"),r.EFF(16),r.nI1(17,"i18n"),r.k0s(),r.j41(18,"input",5),r.nI1(19,"i18n"),r.bIt("change",(function(){return r.eBV(t),r.Njj(n.dirtyDates=!0)})),r.k0s()(),r.j41(20,"form")(21,"button",6),r.EFF(22),r.nI1(23,"i18n"),r.k0s()(),r.j41(24,"form")(25,"button",7)(26,"span"),r.EFF(27),r.nI1(28,"i18n"),r.k0s(),r.nrm(29,"i",8),r.k0s()()()(),r.DNE(30,ce,4,6,"bit-callout",9)(31,le,6,6,"ng-container",10)(32,be,5,4,"ng-container",10)(33,fe,13,9,"ng-container",10)}if(2&t){const t=r.bH3(!(null!=n.organization&&n.organization.useEvents)&&r.bMT(1,16,n.isBreadcrumbEventLogsEnabled$));r.R7$(3),r.Y8G("ngIf",t),r.R7$(),r.Y8G("formGroup",n.eventsForm),r.R7$(4),r.JRh(r.bMT(9,19,"from")),r.R7$(2),r.FS9("placeholder",r.bMT(11,21,"startDate")),r.R7$(6),r.JRh(r.bMT(17,23,"to")),r.R7$(2),r.FS9("placeholder",r.bMT(19,25,"endDate")),r.R7$(3),r.Y8G("bitAction",n.refreshEvents)("disabled",t),r.R7$(),r.SpI(" ",r.bMT(23,27,"update")," "),r.R7$(3),r.Y8G("bitAction",n.exportEvents)("disabled",n.dirtyDates||t),r.R7$(2),r.JRh(r.bMT(28,29,"export")),r.R7$(3),r.Y8G("ngIf",n.loaded&&t),r.R7$(),r.Y8G("ngIf",!n.loaded),r.R7$(),r.Y8G("ngIf",n.loaded),r.R7$(),r.Y8G("ngIf",n.loaded&&t)}},dependencies:[y.Sq,y.bT,On.qT,On.me,On.BC,On.cb,On.cV,On.j4,On.JD,ne.p,ee.$,T.n,X.Q,M.G,ie.m,ae.J,oe.h,x.Q,st.Y,ct._,ct.O,V.f,y.Jj,y.vh,O.$],encapsulation:2});var ve=e(69194),Re=e(12610),Fe=e(58806),$e=e(81982),we=function(t,n,e,i){return new(e||(e=Promise))((function(a,o){function r(t){try{c(i.next(t))}catch(n){o(n)}}function s(t){try{c(i.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,s)}c((i=i.apply(t,n||[])).next())}))};function Se(t,n){if(1&t&&(r.qex(0),r.nrm(1,"app-header"),r.j41(2,"p",3),r.EFF(3),r.nI1(4,"i18n"),r.k0s(),r.nrm(5,"app-report-list",4),r.nI1(6,"async"),r.bVm()),2&t){const t=r.XpG();r.R7$(3),r.JRh(r.bMT(4,2,"orgsReportsDesc")),r.R7$(2),r.Y8G("reports",r.bMT(6,4,t.reports$))}}function Ee(t,n){1&t&&(r.j41(0,"a",5),r.nrm(1,"i",6),r.EFF(2),r.nI1(3,"i18n"),r.k0s()),2&t&&(r.R7$(2),r.SpI(" ",r.bMT(3,1,"backToReports")," "))}class ye{constructor(t,n,e,i){this.route=t,this.organizationService=n,this.accountService=e,this.router=i}ngOnInit(){return we(this,void 0,void 0,(function*(){this.homepage$=this.router.events.pipe((0,ve.p)((t=>t instanceof S.wF)),(0,c.T)((t=>this.isReportsHomepageRouteUrl(t.urlAfterRedirects))),(0,Re.Z)(this.isReportsHomepageRouteUrl(this.router.url)));const t=yield(0,u._)((0,g.F6)(this.accountService.activeAccount$));this.reports$=this.route.params.pipe((0,Tn.H)((n=>this.organizationService.organizations$(t).pipe((0,l.Sw)(n.organizationId)))),(0,c.T)((t=>this.buildReports(t.productTierType))))}))}buildReports(t){const n=t==Nn.K_.Free?i.C0.RequiresUpgrade:i.C0.Enabled;return[Object.assign(Object.assign({},i.uE[i.nI.ExposedPasswords]),{variant:n}),Object.assign(Object.assign({},i.uE[i.nI.ReusedPasswords]),{variant:n}),Object.assign(Object.assign({},i.uE[i.nI.WeakPasswords]),{variant:n}),Object.assign(Object.assign({},i.uE[i.nI.UnsecuredWebsites]),{variant:n}),Object.assign(Object.assign({},i.uE[i.nI.Inactive2fa]),{variant:n}),Object.assign(Object.assign({},i.uE[i.nI.MemberAccessReport]),{variant:t==Nn.K_.Enterprise?i.C0.Enabled:i.C0.RequiresEnterprise})]}isReportsHomepageRouteUrl(t){return t.endsWith("/reports")}}ye.ɵfac=function(t){return new(t||ye)(r.rXU(S.nX),r.rXU(l.PV),r.rXU(w.Di),r.rXU(S.Ix))},ye.ɵcmp=r.VBU({type:ye,selectors:[["app-org-reports-home"]],standalone:!1,decls:6,vars:6,consts:[[4,"ngIf"],[1,"tw-mt-4"],["bitButton","","routerLink","./",4,"ngIf"],["bitTypography","body1"],[3,"reports"],["bitButton","","routerLink","./"],["aria-hidden","true",1,"bwi","bwi-angle-left"]],template:function(t,n){1&t&&(r.DNE(0,Se,7,6,"ng-container",0),r.nI1(1,"async"),r.nrm(2,"router-outlet"),r.j41(3,"div",1),r.DNE(4,Ee,4,3,"a",2),r.nI1(5,"async"),r.k0s()),2&t&&(r.Y8G("ngIf",r.bMT(1,2,n.homepage$)),r.R7$(4),r.Y8G("ngIf",!r.bMT(5,4,n.homepage$)))},dependencies:[y.bT,S.n3,s.Wk,X.Q,Fe.r,$e.i,V.f,y.Jj,O.$],encapsulation:2});const je=[{path:"",canActivate:[(0,jn.V)(l.Ue)],children:[{path:"",pathMatch:"full",canActivate:[(0,kn.r)((function(t){if(t.canAccessEventLogs)return"events";if(t.canAccessReports)return"reports";return}))],children:[]},{path:"reports",component:ye,canActivate:[(0,jn.V)()],data:{titleId:"reports"},children:[{path:"exposed-passwords-report",component:at,data:{titleId:"exposedPasswordsReport"},canActivate:[yn()]},{path:"inactive-two-factor-report",component:Et,data:{titleId:"inactive2faReport"},canActivate:[yn()]},{path:"reused-passwords-report",component:Vt,data:{titleId:"reusedPasswordsReport"},canActivate:[yn()]},{path:"unsecured-websites-report",component:rn,data:{titleId:"unsecuredWebsitesReport"},canActivate:[yn()]},{path:"weak-passwords-report",component:Sn,data:{titleId:"weakPasswordsReport"},canActivate:[yn()]}]},{path:"events",component:Ie,canMatch:[()=>(0,r.WQX)(d.w).getFeatureFlag$(p.TO.PM12276_BreadcrumbEventLogs).pipe((0,c.T)((t=>!0===t)))],canActivate:[(0,jn.V)((t=>t.canAccessEventLogs&&t.useEvents||t.isOwner))],data:{titleId:"eventLogs"}},{path:"events",component:Ie,canActivate:[(0,jn.V)((t=>t.canAccessEventLogs))],data:{titleId:"eventLogs"}}]}];class ke{}ke.ɵfac=function(t){return new(t||ke)},ke.ɵmod=r.$C({type:ke}),ke.ɵinj=r.G2t({imports:[s.iI.forChild(je),s.iI]});class Ge{}Ge.ɵfac=function(t){return new(t||Ge)},Ge.ɵmod=r.$C({type:Ge}),Ge.ɵinj=r.G2t({imports:[o.G,i.DF,ke,a.T]})}}]);
//# sourceMappingURL=449.54babca57e8048d667bf.js.map