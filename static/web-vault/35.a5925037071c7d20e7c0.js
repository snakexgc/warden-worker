"use strict";(self.webpackChunk_bitwarden_web_vault=self.webpackChunk_bitwarden_web_vault||[]).push([[35],{39035:(e,t,i)=>{i.d(t,{MembersModule:()=>xo});var n=i(94251),s=i(49355),o=i(81285),r=i(88565),a=i(88083);function c(e,t,i,n){return s=>{var o;if(!(null===(o=s.value)||void 0===o?void 0:o.trim()))return null;if(!l(e.productTierType))return null;const r=n+function(e,t){const i=Array.from(new Set(t.value.split(",").filter(t=>t&&""!==t.trim()&&!e.some(e=>e===t.trim()))));return i.length}(t,s);return r>e.seats?{seatLimitReached:{message:i}}:null}}function l(e){switch(e){case a.K_.Free:case a.K_.Families:case a.K_.TeamsStarter:return!0;default:return!1}}var d=i(16452),u=i(74208),p=i(50700),h=i(21274),m=i(69855),g=i(23649),f=function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};class b{constructor(e,t,i,n){this.i18nService=e,this.dialogService=t,this.toastService=i,this.router=n}checkSeatLimit(e,t){var i;const n=null!==(i=null==t?void 0:t.organizationOccupiedSeats)&&void 0!==i?i:0;if(null==n)throw new Error("Cannot check seat limit: billingMetadata is null or undefined.");return n<e.seats?{canAddUsers:!0}:e.hasReseller?{canAddUsers:!1,reason:"reseller-limit"}:l(e.productTierType)?{canAddUsers:!1,reason:"fixed-seat-limit",shouldShowUpgradeDialog:e.canEditSubscription}:{canAddUsers:!0}}seatLimitReached(e,t){return f(this,void 0,void 0,function*(){if(e.canAddUsers)return!1;switch(e.reason){case"reseller-limit":return this.toastService.showToast({variant:"error",title:this.i18nService.t("seatLimitReached"),message:this.i18nService.t("contactYourProvider")}),!0;case"fixed-seat-limit":if(e.shouldShowUpgradeDialog){return(yield this.showChangePlanDialog(t))!==d.d1.Submitted}return yield this.showSeatLimitReachedDialog(t),!0;default:return!0}})}showChangePlanDialog(e){return f(this,void 0,void 0,function*(){const t=(0,d.IO)(this.dialogService,{data:{organizationId:e.id,productTierType:e.productTierType}}),i=yield(0,r.s)(t.closed);if(null==i)throw new Error("ChangePlanDialog result is null or undefined.");return i})}showSeatLimitReachedDialog(e){return f(this,void 0,void 0,function*(){const t=this.getSeatLimitReachedDialogContent(e),i=this.getSeatLimitReachedDialogAcceptButtonText(e),n={title:this.i18nService.t("upgradeOrganization"),content:t,type:"primary",acceptButtonText:i,cancelButtonText:e.canEditSubscription?void 0:null},s=this.dialogService.openSimpleDialogRef(n);(yield(0,r.s)(s.closed))&&e.canEditSubscription&&(yield this.handleUpgradeNavigation(e))})}handleUpgradeNavigation(e){return f(this,void 0,void 0,function*(){const t=e.productTierType;if((0,a.LF)(t))throw new Error(`Unsupported product type: ${e.productTierType}`);yield this.router.navigate(["/organizations",e.id,"billing","subscription"],{queryParams:{upgrade:!0}})})}getSeatLimitReachedDialogContent(e){const t=this.getProductKey(e);return this.i18nService.t(t,e.seats)}getSeatLimitReachedDialogAcceptButtonText(e){if(!e.canEditSubscription)return this.i18nService.t("ok");const t=e.productTierType;if((0,a.LF)(t))throw new Error(`Unsupported product type: ${t}`);return this.i18nService.t("upgrade")}getProductKey(e){const t=e.canEditSubscription?"ManageBilling":"NoManageBilling";let i="";switch(e.productTierType){case a.K_.Free:i="freeOrg";break;case a.K_.TeamsStarter:i="teamsStarterPlan";break;case a.K_.Families:i="familiesPlan";break;default:throw new Error(`Unsupported product type: ${e.productTierType}`)}return`${i}InvLimitReached${t}`}navigateToPaymentMethod(e){return f(this,void 0,void 0,function*(){yield this.router.navigate(["organizations",`${e.id}`,"billing","payment-method"],{state:{launchPaymentModalAutomatically:!0}})})}}b.ɵfac=function(e){return new(e||b)(u.KVO(p.W),u.KVO(h.o3),u.KVO(m.f),u.KVO(g.Ix))},b.ɵprov=u.jDH({token:b,factory:b.ɵfac});var v=i(1094),y=i(72932),I=i(5326),S=i(51757),k=i(66046),R=i(72245),w=i(33338),$=i(3204),F=i(44500),M=i(27442),T=i(93695),E=i(14803),G=i(28202),U=i(67553),j=i(43978),C=i(95919),x=i(3633),D=i(81525),N=i(81667),X=i(38766),z=i(31857),A=function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};const P=new z.Ok(z.BA,"showDeleteManagedUserWarning",{deserializer:e=>e,clearOn:[]});class Y{constructor(e,t){this.stateProvider=e,this.dialogService=t,this._acknowledged=this.stateProvider.getActive(P),this.acknowledgedState$=this._acknowledged.state$}acknowledgeWarning(e){return A(this,void 0,void 0,function*(){yield this._acknowledged.update(t=>e?t?t.includes(e)?t:[...t,e]:[e]:t)})}showWarning(){return A(this,void 0,void 0,function*(){const e=yield this.dialogService.openSimpleDialog({title:{key:"deleteManagedUserWarning"},content:{key:"deleteManagedUserWarningDesc"},type:"danger",icon:"bwi-exclamation-triangle",acceptButtonText:{key:"continue"},cancelButtonText:{key:"cancel"}});return e||!1})}warningAcknowledged(e){return this.acknowledgedState$.pipe((0,$.T)(t=>{var i;return null!==(i=null==t?void 0:t.includes(e))&&void 0!==i&&i}))}}function B(e){return""!==e.value&&e.value&&void 0!==e.value.split(",").map(e=>S.k0.email({value:e.trim()})).find(e=>null!==e)?{multipleEmails:{message:"multipleInputEmails"}}:null}function V(e,t){return i=>{var n;if(!(null===(n=i.value)||void 0===n?void 0:n.trim()))return null;const s=e.productTierType===a.K_.TeamsStarter?10:20,o=function(e){const t=e.value.split(",").filter(e=>e&&""!==e.trim());return Array.from(new Set(t))}(i);return o.length<=s?null:{tooManyEmails:{message:t(s)}}}}Y.ɵfac=function(e){return new(e||Y)(u.KVO(z.v2),u.KVO(h.o3))},Y.ɵprov=u.jDH({token:Y,factory:Y.ɵfac,providedIn:"root"});var O=i(33812),J=i(35500),q=i(1601),K=i(77468),L=i(54471),W=i(3892),Q=i(26657),_=i(45154),H=i(47696),Z=i(56898),ee=i(50352),te=i(68016),ie=i(90246),ne=i(86226),se=i(93199),oe=i(97553),re=i(43759),ae=i(59032),ce=i(24374),le=i(17721),de=i(88516),ue=i(49608),pe=i(58806),he=i(43184),me=i(78781),ge=i(88016);function fe(e,t){if(1&e){const e=O.RV6();O.j41(0,"div")(1,"bit-form-control")(2,"input",5),O.bIt("change",function(){u.eBV(e);const t=O.XpG(2);return u.Njj(t.onChildCheck())}),O.k0s(),O.j41(3,"bit-label"),O.EFF(4),O.nI1(5,"i18n"),O.k0s()()()}if(2&e){const e=O.XpG().$implicit;O.R7$(2),O.Y8G("formControl",e.value),O.R7$(2),O.JRh(O.bMT(5,2,e.key))}}function be(e,t){if(1&e&&(O.qex(0),O.DNE(1,fe,6,4,"div",4),O.bVm()),2&e){const e=t.$implicit,i=O.XpG();O.R7$(),O.Y8G("ngIf",e.key!=i.parentId)}}class ve{constructor(){this.destroy$=new k.B}get parentIndeterminate(){return this.children.some(([e,t])=>1==t.value)&&!this.children.every(([e,t])=>1==t.value)}ngOnInit(){this.checkboxes.controls[this.parentId].valueChanges.pipe((0,E.Q)(this.destroy$)).subscribe(e=>{Object.values(this.checkboxes.controls).forEach(t=>t.setValue(e,{emitEvent:!1}))})}get parentCheckbox(){return this.checkboxes.controls[this.parentId]}get children(){return Object.entries(this.checkboxes.controls).filter(([e,t])=>e!=this.parentId)}onChildCheck(){const e=this.children.every(([e,t])=>1==t.value);this.parentCheckbox.setValue(e,{emitEvent:!1})}key(e,t){return t.key}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}pascalize(e){return me.A.camelToPascalCase(e)}}ve.ɵfac=function(e){return new(e||ve)},ve.ɵcmp=O.VBU({type:ve,selectors:[["app-nested-checkbox"]],inputs:{parentId:"parentId",checkboxes:"checkboxes"},standalone:!1,decls:9,vars:10,consts:[[3,"formGroup"],["type","checkbox","bitCheckbox","",3,"formControlName","indeterminate"],[1,"tw-ml-4"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["type","checkbox","bitCheckbox","",3,"change","formControl"]],template:function(e,t){1&e&&(O.j41(0,"div",0)(1,"bit-form-control"),O.nrm(2,"input",1),O.j41(3,"bit-label"),O.EFF(4),O.nI1(5,"i18n"),O.k0s()(),O.j41(6,"div",2),O.DNE(7,be,2,1,"ng-container",3),O.nI1(8,"keyvalue"),O.k0s()()),2&e&&(O.Y8G("formGroup",t.checkboxes),O.R7$(2),O.Y8G("formControlName",t.parentId)("indeterminate",t.parentIndeterminate),O.R7$(2),O.JRh(O.bMT(5,6,t.parentId)),O.R7$(3),O.Y8G("ngForOf",O.bMT(8,8,t.checkboxes.controls))("ngForTrackBy",t.key))},dependencies:[K.Sq,K.bT,S.Zm,S.BC,S.cb,S.l_,S.j4,S.JD,ee.P,ie.f,ne.j,K.lG,ge.$],encapsulation:2});var ye=function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};const Ie=e=>({seats:e});function Se(e,t){if(1&e&&(O.j41(0,"span",15),O.EFF(1),O.nI1(2,"async"),O.k0s()),2&e){let e;const t=O.XpG();O.R7$(),O.JRh(null==(e=O.bMT(2,1,t.editParams$))?null:e.name)}}function ke(e,t){1&e&&(O.j41(0,"span",16),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.JRh(O.bMT(2,1,"revoked")))}function Re(e,t){1&e&&(O.qex(0),O.nrm(1,"i",17),O.nI1(2,"i18n"),O.j41(3,"span",18),O.EFF(4),O.nI1(5,"i18n"),O.k0s(),O.bVm()),2&e&&(O.R7$(),O.Y8G("title",O.mNQ(O.bMT(2,3,"loading"))),O.R7$(3),O.JRh(O.bMT(5,5,"loading")))}function we(e,t){if(1&e&&(O.j41(0,"bit-hint"),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e){const e=O.XpG().ngIf;O.R7$(),O.JRh(O.i5U(2,1,"inviteMultipleEmailDesc",e.seats))}}function $e(e,t){1&e&&(O.j41(0,"bit-hint"),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.JRh(O.bMT(2,1,"inviteSingleEmailDesc")))}function Fe(e,t){1&e&&(O.j41(0,"bit-hint"),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.JRh(O.bMT(2,1,"inviteZeroEmailDesc")))}function Me(e,t){if(1&e&&(O.j41(0,"bit-form-field")(1,"bit-label"),O.EFF(2),O.nI1(3,"i18n"),O.k0s(),O.nrm(4,"input",33),O.DNE(5,we,3,4,"bit-hint",7)(6,$e,3,3,"bit-hint",7)(7,Fe,3,3,"bit-hint",7),O.k0s()),2&e){const e=t.ngIf;O.R7$(2),O.JRh(O.bMT(3,4,"email")),O.R7$(3),O.Y8G("ngIf",e.seats>1),O.R7$(),O.Y8G("ngIf",1===e.seats),O.R7$(),O.Y8G("ngIf",0===e.seats)}}function Te(e,t){if(1&e&&(O.qex(0),O.j41(1,"p",32),O.EFF(2),O.nI1(3,"i18n"),O.k0s(),O.DNE(4,Me,8,6,"bit-form-field",7),O.nI1(5,"async"),O.bVm()),2&e){const e=O.XpG(2);O.R7$(2),O.JRh(O.bMT(3,2,"inviteUserDesc")),O.R7$(2),O.Y8G("ngIf",O.eq3(6,Ie,O.bMT(5,4,e.remainingSeats$)))}}function Ee(e,t){1&e&&(O.qex(0),O.j41(1,"p"),O.EFF(2),O.nI1(3,"i18n"),O.j41(4,"a",34),O.EFF(5),O.nI1(6,"i18n"),O.k0s(),O.EFF(7),O.nI1(8,"i18n"),O.k0s(),O.bVm()),2&e&&(O.R7$(2),O.SpI(" ",O.bMT(3,3,"customDescNonEnterpriseStart")),O.R7$(3),O.JRh(O.bMT(6,5,"customDescNonEnterpriseLink")),O.R7$(2),O.SpI("",O.bMT(8,7,"customDescNonEnterpriseEnd")," "))}function Ge(e,t){1&e&&(O.j41(0,"p"),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.JRh(O.bMT(2,1,"customDesc")))}function Ue(e,t){if(1&e&&(O.qex(0),O.j41(1,"div",35)(2,"div",36)(3,"bit-form-control"),O.nrm(4,"input",37),O.j41(5,"bit-label"),O.EFF(6),O.nI1(7,"i18n"),O.k0s()(),O.j41(8,"bit-form-control"),O.nrm(9,"input",38),O.j41(10,"bit-label"),O.EFF(11),O.nI1(12,"i18n"),O.k0s()(),O.j41(13,"bit-form-control"),O.nrm(14,"input",39),O.j41(15,"bit-label"),O.EFF(16),O.nI1(17,"i18n"),O.k0s()()(),O.j41(18,"div",36),O.nrm(19,"app-nested-checkbox",40),O.k0s(),O.j41(20,"div",36)(21,"div",41)(22,"bit-form-control"),O.nrm(23,"input",42),O.j41(24,"bit-label"),O.EFF(25),O.nI1(26,"i18n"),O.k0s()(),O.j41(27,"bit-form-control"),O.nrm(28,"input",43),O.j41(29,"bit-label"),O.EFF(30),O.nI1(31,"i18n"),O.k0s()(),O.j41(32,"bit-form-control"),O.nrm(33,"input",44),O.j41(34,"bit-label"),O.EFF(35),O.nI1(36,"i18n"),O.k0s()(),O.j41(37,"bit-form-control"),O.nrm(38,"input",45),O.j41(39,"bit-label"),O.EFF(40),O.nI1(41,"i18n"),O.k0s()(),O.j41(42,"bit-form-control"),O.nrm(43,"input",46),O.j41(44,"bit-label"),O.EFF(45),O.nI1(46,"i18n"),O.k0s()()()()(),O.bVm()),2&e){const e=O.XpG(2);O.R7$(),O.Y8G("formGroup",e.permissionsGroup),O.R7$(5),O.JRh(O.bMT(7,10,"accessEventLogs")),O.R7$(5),O.JRh(O.bMT(12,12,"accessImportExport")),O.R7$(5),O.JRh(O.bMT(17,14,"accessReports")),O.R7$(3),O.Y8G("checkboxes",e.permissionsGroup.controls.manageAllCollectionsGroup),O.R7$(6),O.JRh(O.bMT(26,16,"manageGroups")),O.R7$(5),O.JRh(O.bMT(31,18,"manageSso")),O.R7$(5),O.JRh(O.bMT(36,20,"managePolicies")),O.R7$(5),O.JRh(O.bMT(41,22,"manageUsers")),O.R7$(5),O.JRh(O.bMT(46,24,"manageAccountRecovery"))}}function je(e,t){if(1&e&&(O.qex(0),O.j41(1,"h3",47),O.EFF(2),O.nI1(3,"i18n"),O.j41(4,"a",48),O.nI1(5,"i18n"),O.nrm(6,"i",23),O.k0s()(),O.j41(7,"p",49),O.EFF(8),O.nI1(9,"i18n"),O.k0s(),O.j41(10,"bit-form-control"),O.nrm(11,"input",50),O.j41(12,"bit-label"),O.EFF(13),O.nI1(14,"i18n"),O.k0s()(),O.bVm()),2&e){const e=O.XpG(2);O.R7$(2),O.SpI(" ",O.bMT(3,6,"secretsManager")," "),O.R7$(2),O.Y8G("appA11yTitle",O.mNQ(O.bMT(5,8,"learnMore"))),O.R7$(4),O.JRh(O.bMT(9,10,"secretsManagerAccessDescription")),O.R7$(3),O.Y8G("disabled",e.isOnSecretsManagerStandalone),O.R7$(2),O.SpI(" ",O.bMT(14,12,"userAccessSecretsManagerGA")," ")}}function Ce(e,t){1&e&&(O.j41(0,"bit-form-field")(1,"bit-label"),O.EFF(2),O.nI1(3,"i18n"),O.k0s(),O.nrm(4,"input",51),O.j41(5,"bit-hint"),O.EFF(6),O.nI1(7,"i18n"),O.k0s()()),2&e&&(O.R7$(2),O.JRh(O.bMT(3,2,"externalId")),O.R7$(4),O.JRh(O.bMT(7,4,"externalIdDesc")))}function xe(e,t){1&e&&(O.j41(0,"bit-form-field")(1,"bit-label"),O.EFF(2),O.nI1(3,"i18n"),O.k0s(),O.nrm(4,"input",52),O.j41(5,"bit-hint"),O.EFF(6),O.nI1(7,"i18n"),O.k0s()()),2&e&&(O.R7$(2),O.JRh(O.bMT(3,2,"ssoExternalId")),O.R7$(4),O.JRh(O.bMT(7,4,"ssoExternalIdDesc")))}function De(e,t){if(1&e&&(O.j41(0,"bit-tab",20),O.nI1(1,"i18n"),O.j41(2,"div",53),O.EFF(3),O.nI1(4,"async"),O.nI1(5,"i18n"),O.nI1(6,"i18n"),O.k0s(),O.nrm(7,"bit-access-selector",54),O.nI1(8,"i18n"),O.nI1(9,"i18n"),O.nI1(10,"i18n"),O.nI1(11,"async"),O.k0s()),2&e){const e=O.XpG(2);O.Y8G("label",O.bMT(1,7,"groups")),O.R7$(3),O.SpI(" ",O.bMT(4,9,e.restrictEditingSelf$)?O.bMT(5,11,"restrictedGroupAccess"):O.bMT(6,13,"groupAccessUserDesc")," "),O.R7$(4),O.Y8G("items",e.groupAccessItems)("columnHeader",O.bMT(8,15,"groups"))("selectorLabelText",O.bMT(9,17,"selectGroups"))("emptySelectionText",O.bMT(10,19,"noGroupsAdded"))("hideMultiSelect",O.bMT(11,21,e.restrictEditingSelf$))}}function Ne(e,t){1&e&&(O.j41(0,"div",53),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.SpI(" ",O.bMT(2,1,"cannotAddYourselfToCollections")," "))}function Xe(e,t){1&e&&(O.j41(0,"span"),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.SpI(" ",O.bMT(2,1,"userPermissionOverrideHelperDesc")," "))}function ze(e,t){1&e&&(O.j41(0,"span"),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.SpI(" ",O.bMT(2,1,"restrictedCollectionAssignmentDesc")," "))}function Ae(e,t){if(1&e&&(O.j41(0,"div",53),O.DNE(1,Xe,3,3,"span",7)(2,ze,3,3,"span",7),O.nI1(3,"async"),O.k0s()),2&e){const e=O.XpG().ngIf,t=O.XpG();O.R7$(),O.Y8G("ngIf",e.useGroups),O.R7$(),O.Y8G("ngIf",!O.bMT(3,2,t.canAssignAccessToAnyCollection$))}}function Pe(e,t){if(1&e){const e=O.RV6();O.j41(0,"bit-tab-group",19),O.mxI("selectedIndexChange",function(t){u.eBV(e);const i=O.XpG();return O.DH7(i.tabIndex,t)||(i.tabIndex=t),u.Njj(t)}),O.j41(1,"bit-tab",20),O.nI1(2,"i18n"),O.DNE(3,Te,6,8,"ng-container",7),O.j41(4,"bit-radio-group",21)(5,"bit-label"),O.EFF(6),O.nI1(7,"i18n"),O.j41(8,"a",22),O.nI1(9,"i18n"),O.nrm(10,"i",23),O.k0s()(),O.j41(11,"bit-radio-button",24)(12,"bit-label"),O.EFF(13),O.nI1(14,"i18n"),O.k0s(),O.j41(15,"bit-hint"),O.EFF(16),O.nI1(17,"i18n"),O.k0s()(),O.j41(18,"bit-radio-button",25)(19,"bit-label"),O.EFF(20),O.nI1(21,"i18n"),O.k0s(),O.j41(22,"bit-hint"),O.EFF(23),O.nI1(24,"i18n"),O.k0s()(),O.j41(25,"bit-radio-button",26)(26,"bit-label"),O.EFF(27),O.nI1(28,"i18n"),O.k0s(),O.j41(29,"bit-hint"),O.EFF(30),O.nI1(31,"i18n"),O.k0s()(),O.j41(32,"bit-radio-button",27)(33,"bit-label"),O.EFF(34),O.nI1(35,"i18n"),O.k0s(),O.j41(36,"bit-hint"),O.DNE(37,Ee,9,9,"ng-container",28)(38,Ge,3,3,"ng-template",null,0,O.C5r),O.k0s()()(),O.DNE(40,Ue,47,26,"ng-container",7)(41,je,15,14,"ng-container",7)(42,Ce,8,6,"bit-form-field",7)(43,xe,8,6,"bit-form-field",7),O.k0s(),O.DNE(44,De,12,23,"bit-tab",29),O.j41(45,"bit-tab",20),O.nI1(46,"i18n"),O.DNE(47,Ne,3,3,"div",30),O.nI1(48,"async"),O.DNE(49,Ae,4,4,"div",30),O.nI1(50,"async"),O.nI1(51,"async"),O.nrm(52,"bit-access-selector",31),O.nI1(53,"i18n"),O.nI1(54,"i18n"),O.nI1(55,"i18n"),O.nI1(56,"async"),O.k0s()()}if(2&e){const e=t.ngIf,i=O.sdS(39),n=O.XpG();O.R50("selectedIndex",n.tabIndex),O.R7$(),O.Y8G("label",O.bMT(2,35,"role")),O.R7$(2),O.Y8G("ngIf",!n.editMode),O.R7$(3),O.SpI(" ",O.bMT(7,37,"memberRole")," "),O.R7$(2),O.Y8G("appA11yTitle",O.mNQ(O.bMT(9,39,"learnMoreAboutMemberRoles"))),O.R7$(3),O.Y8G("value",n.organizationUserType.User),O.R7$(2),O.JRh(O.bMT(14,41,"user")),O.R7$(3),O.JRh(O.bMT(17,43,"userDesc")),O.R7$(2),O.Y8G("value",n.organizationUserType.Admin),O.R7$(2),O.JRh(O.bMT(21,45,"admin")),O.R7$(3),O.JRh(O.bMT(24,47,"adminDesc")),O.R7$(2),O.Y8G("value",n.organizationUserType.Owner),O.R7$(2),O.JRh(O.bMT(28,49,"owner")),O.R7$(3),O.JRh(O.bMT(31,51,"ownerDesc")),O.R7$(2),O.Y8G("value",n.organizationUserType.Custom)("disabled",!e.useCustomPermissions||null),O.R7$(2),O.JRh(O.bMT(35,53,"custom")),O.R7$(3),O.Y8G("ngIf",!e.useCustomPermissions)("ngIfElse",i),O.R7$(3),O.Y8G("ngIf",n.customUserTypeSelected),O.R7$(),O.Y8G("ngIf",e.useSecretsManager),O.R7$(),O.Y8G("ngIf",n.isExternalIdVisible),O.R7$(),O.Y8G("ngIf",n.isSsoExternalIdVisible),O.R7$(),O.Y8G("ngIf",e.useGroups),O.R7$(),O.Y8G("label",O.bMT(46,55,"collections")),O.R7$(2),O.Y8G("ngIf",O.bMT(48,57,n.restrictEditingSelf$)),O.R7$(2),O.Y8G("ngIf",!O.bMT(50,59,n.restrictEditingSelf$)&&(e.useGroups||!O.bMT(51,61,n.canAssignAccessToAnyCollection$))),O.R7$(3),O.Y8G("permissionMode",n.PermissionMode.Edit)("showGroupColumn",e.useGroups)("items",n.collectionAccessItems)("columnHeader",O.bMT(53,63,"collection"))("selectorLabelText",O.bMT(54,65,"selectCollections"))("emptySelectionText",O.bMT(55,67,"noCollectionsAdded"))("hideMultiSelect",O.bMT(56,69,n.restrictEditingSelf$))}}function Ye(e,t){if(1&e&&(O.j41(0,"button",55),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e){const e=O.XpG();O.Y8G("bitAction",e.restore)("disabled",e.loading),O.R7$(),O.SpI(" ",O.bMT(2,3,"restore")," ")}}function Be(e,t){if(1&e&&(O.j41(0,"button",55),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e){const e=O.XpG();O.Y8G("bitAction",e.revoke)("disabled",e.loading),O.R7$(),O.SpI(" ",O.bMT(2,3,"revoke")," ")}}function Ve(e,t){if(1&e&&(O.j41(0,"button",56),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e){const e=O.XpG();O.Y8G("bitAction",e.remove)("disabled",e.loading),O.R7$(),O.SpI(" ",O.bMT(2,3,"remove")," ")}}function Oe(e,t){if(1&e&&(O.j41(0,"button",56),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e){const e=O.XpG();O.Y8G("bitAction",e.delete)("disabled",e.loading),O.R7$(),O.SpI(" ",O.bMT(2,3,"delete")," ")}}var Je,qe;!function(e){e[e.Role=0]="Role",e[e.Groups=1]="Groups",e[e.Collections=2]="Collections"}(Je||(Je={})),function(e){e.Saved="saved",e.Canceled="canceled",e.Deleted="deleted",e.Revoked="revoked",e.Restored="restored"}(qe||(qe={}));class Ke{get isExternalIdVisible(){var e;return!!(null===(e=this.formGroup.get("externalId"))||void 0===e?void 0:e.value)}get isSsoExternalIdVisible(){var e;return!!(null===(e=this.formGroup.get("ssoExternalId"))||void 0===e?void 0:e.value)}get customUserTypeSelected(){return this.formGroup.value.type===j.D7.Custom}isEditDialogParams(e){return"Edit"===e.kind}constructor(e,t,i,n,s,o,r,c,l,d,u,p,h,m){let g;this.params=e,this.dialogRef=t,this.i18nService=i,this.formBuilder=n,this.collectionAdminService=s,this.groupService=o,this.userService=r,this.organizationUserApiService=c,this.dialogService=l,this.accountService=d,this.toastService=p,this.configService=h,this.deleteManagedMemberWarningService=m,this.loading=!0,this.editMode=!1,this.isRevoked=!1,this.access="selected",this.collections=[],this.organizationUserType=j.D7,this.PermissionMode=X.ZC,this.showNoMasterPasswordWarning=!1,this.collectionAccessItems=[],this.groupAccessItems=[],this.formGroup=this.formBuilder.group({emails:[""],type:j.D7.User,externalId:this.formBuilder.control({value:"",disabled:!0}),ssoExternalId:this.formBuilder.control({value:"",disabled:!0}),accessSecretsManager:!1,access:[[]],groups:[[]]}),this.permissionsGroup=this.formBuilder.group({manageAllCollectionsGroup:this.formBuilder.group({manageAllCollections:!1,createNewCollections:!1,editAnyCollection:!1,deleteAnyCollection:!1}),accessEventLogs:!1,accessImportExport:!1,accessReports:!1,manageGroups:!1,manageSso:!1,managePolicies:!1,manageUsers:!1,manageResetPassword:!1}),this.destroy$=new k.B,this.submit=()=>ye(this,void 0,void 0,function*(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return void(this.tabIndex!==Je.Role&&this.toastService.showToast({variant:"error",title:null,message:this.i18nService.t("fieldOnTabRequiresAttention",this.i18nService.t("role"))}));const e=yield(0,R._)(this.organization$);if(!e.useCustomPermissions&&this.customUserTypeSelected)return void this.toastService.showToast({variant:"error",title:null,message:this.i18nService.t("customNonEnterpriseError")});const t=yield this.getUserView();this.isEditDialogParams(this.params)?yield this.handleEditUser(t,this.params):yield this.handleInviteUsers(t,e)}),this.remove=()=>ye(this,void 0,void 0,function*(){if(!this.isEditDialogParams(this.params))return;const e=this.params.usesKeyConnector?"removeUserConfirmationKeyConnector":"removeOrgUserConfirmation";let t=yield this.dialogService.openSimpleDialog({title:{key:"removeUserIdAccess",placeholders:[this.params.name]},content:{key:e},type:"warning"});return!!t&&(!(this.showNoMasterPasswordWarning&&(t=yield this.noMasterPasswordConfirmationDialog(this.params.name),!t))&&(yield this.organizationUserApiService.removeOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.toastService.showToast({variant:"success",title:null,message:this.i18nService.t("removedUserId",this.params.name)}),void this.close(qe.Deleted)))}),this.revoke=()=>ye(this,void 0,void 0,function*(){if(!this.isEditDialogParams(this.params))return;let e=yield this.dialogService.openSimpleDialog({title:{key:"revokeUserId",placeholders:[this.params.name]},content:{key:"revokeUserConfirmation"},acceptButtonText:{key:"revokeAccess"},type:"warning"});return!!e&&(!(this.showNoMasterPasswordWarning&&(e=yield this.noMasterPasswordConfirmationDialog(this.params.name),!e))&&(yield this.organizationUserApiService.revokeOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.toastService.showToast({variant:"success",title:null,message:this.i18nService.t("revokedUserId",this.params.name)}),this.isRevoked=!0,void this.close(qe.Revoked)))}),this.restore=()=>ye(this,void 0,void 0,function*(){this.isEditDialogParams(this.params)&&(yield this.organizationUserApiService.restoreOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.toastService.showToast({variant:"success",title:null,message:this.i18nService.t("restoredUserId",this.params.name)}),this.isRevoked=!1,this.close(qe.Restored))}),this.delete=()=>ye(this,void 0,void 0,function*(){if(!this.isEditDialogParams(this.params))return;const e=(0,w.z)([this.organization$,this.deleteManagedMemberWarningService.warningAcknowledged(this.params.organizationId)]).pipe((0,$.T)(([e,t])=>e.canManageUsers&&e.productTierType===a.K_.Enterprise&&!t));if(yield(0,R._)(e)){if(!(yield this.deleteManagedMemberWarningService.showWarning()))return}if(!(yield this.dialogService.openSimpleDialog({title:{key:"deleteOrganizationUser",placeholders:[this.params.name]},content:{key:"deleteOrganizationUserWarningDesc",placeholders:[this.params.name]},type:"warning",acceptButtonText:{key:"delete"},cancelButtonText:{key:"cancel"}})))return!1;yield this.organizationUserApiService.deleteOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.toastService.showToast({variant:"success",title:null,message:this.i18nService.t("organizationUserDeleted",this.params.name)}),yield this.deleteManagedMemberWarningService.acknowledgeWarning(this.params.organizationId),this.close(qe.Deleted)}),this.ProductTierType=a.K_,this.organization$=d.activeAccount$.pipe((0,F.n)(e=>u.organizations$(null==e?void 0:e.id).pipe((0,U.Sw)(this.params.organizationId)).pipe((0,M.t)({refCount:!0,bufferSize:1})))),this.isEditDialogParams(this.params)?(this.editMode=!0,this.title=this.i18nService.t("editMember"),g=this.userService.get(this.params.organizationId,this.params.organizationUserId),this.tabIndex=this.params.initialTab,this.editParams$=(0,T.of)(this.params)):(this.editMode=!1,this.title=this.i18nService.t("inviteMember"),this.editParams$=(0,T.of)(null),g=(0,T.of)(null),this.tabIndex=Je.Role),this.isOnSecretsManagerStandalone=this.params.isOnSecretsManagerStandalone,this.isOnSecretsManagerStandalone&&this.formGroup.patchValue({accessSecretsManager:!0});const f=this.organization$.pipe((0,F.n)(e=>e.useGroups?this.groupService.getAllDetails(this.params.organizationId):(0,T.of)([])));this.allowAdminAccessToAllCollectionItems$=this.organization$.pipe((0,$.T)(e=>e.allowAdminAccessToAllCollectionItems)),this.restrictEditingSelf$=(0,w.z)([this.allowAdminAccessToAllCollectionItems$,g,this.accountService.activeAccount$]).pipe((0,$.T)(([e,t,i])=>!e&&null!=t&&t.userId==i.id),(0,M.t)({refCount:!0,bufferSize:1})),this.restrictEditingSelf$.pipe((0,E.Q)(this.destroy$)).subscribe(e=>{e?this.formGroup.controls.groups.disable():this.formGroup.controls.groups.enable()}),this.canAssignAccessToAnyCollection$=(0,w.z)([this.organization$,this.allowAdminAccessToAllCollectionItems$]).pipe((0,$.T)(([e,t])=>e.canEditAnyCollection||e.permissions.manageUsers&&t));const b=this.accountService.activeAccount$.pipe(x.F6,(0,F.n)(e=>this.collectionAdminService.collectionAdminViews$(this.params.organizationId,e)));(0,w.z)({organization:this.organization$,collections:b,userDetails:g,groups:f}).pipe((0,E.Q)(this.destroy$)).subscribe(({organization:e,collections:t,userDetails:i,groups:n})=>{this.setFormValidators(e),this.groupAccessItems=[].concat(n.map(e=>{return t=e,{type:X.Uv.Group,id:t.id,labelName:t.name,listName:t.name};var t})),this.collectionAccessItems=t.map(t=>Le(t,e,null==i?void 0:t.users.find(e=>e.id===i.id))).filter(e=>!e.readonly||(null==i?void 0:i.collections.some(t=>t.id==e.id))),null!=i&&this.loadOrganizationUser(i,n,t,e),this.loading=!1}),this.remainingSeats$=this.organization$.pipe((0,$.T)(e=>this.isEditDialogParams(this.params)?e.seats:e.seats-this.params.occupiedSeatCount))}setFormValidators(e){if(this.isEditDialogParams(this.params))return;const t=[S.k0.required,B,V(e,e=>this.i18nService.t("tooManyEmails",e)),c(e,this.params.allOrganizationUserEmails,this.i18nService.t("subscriptionUpgrade",e.seats),this.params.occupiedSeatCount)],i=this.formGroup.get("emails");i.setValidators(t),i.updateValueAndValidity()}loadOrganizationUser(e,t,i,n){if(!e)throw new Error("Could not find user to edit.");this.isRevoked=e.status===j.Zx.Revoked,this.showNoMasterPasswordWarning=e.status>j.Zx.Invited&&!1===e.hasMasterPassword;const s={createNewCollections:e.permissions.createNewCollections,editAnyCollection:e.permissions.editAnyCollection,deleteAnyCollection:e.permissions.deleteAnyCollection,manageAllCollections:e.permissions.createNewCollections&&e.permissions.editAnyCollection&&e.permissions.deleteAnyCollection};e.type===j.D7.Custom&&this.permissionsGroup.patchValue({accessEventLogs:e.permissions.accessEventLogs,accessImportExport:e.permissions.accessImportExport,accessReports:e.permissions.accessReports,manageGroups:e.permissions.manageGroups,manageSso:e.permissions.manageSso,managePolicies:e.permissions.managePolicies,manageUsers:e.permissions.manageUsers,manageResetPassword:e.permissions.manageResetPassword,manageAllCollectionsGroup:s});const o=t.filter(t=>e.groups.includes(t.id)).flatMap(e=>e.collections.map(t=>{const n=i.find(e=>e.id===t.id);return{group:e,collection:n,accessSelection:t}}));this.collectionAccessItems=this.collectionAccessItems.concat(o.map(({collection:e,accessSelection:t,group:i})=>Le(e,n,t,i)));const r=function(e,t){if(null==e)return[];return e.collections.filter(e=>!t.find(t=>t.id==e.id).readonly).map(e=>({id:e.id,type:X.Uv.Collection,permission:(0,X.Jh)(e)}))}(e,this.collectionAccessItems),a=function(e){if(null==e)return[];return[].concat(e.map(e=>({id:e,type:X.Uv.Group})))}(e.groups);this.formGroup.removeControl("emails"),this.formGroup.patchValue({type:e.type,externalId:e.externalId,ssoExternalId:e.ssoExternalId,access:r,accessSecretsManager:e.accessSecretsManager,groups:a})}check(e,t){e.checked=null==t?!e.checked:t,e.checked||(e.readOnly=!1)}selectAll(e){this.collections.forEach(t=>this.check(t,e))}setRequestPermissions(e,t){if(t)return new C.n;const i={accessEventLogs:this.permissionsGroup.value.accessEventLogs,accessImportExport:this.permissionsGroup.value.accessImportExport,accessReports:this.permissionsGroup.value.accessReports,manageGroups:this.permissionsGroup.value.manageGroups,manageSso:this.permissionsGroup.value.manageSso,managePolicies:this.permissionsGroup.value.managePolicies,manageUsers:this.permissionsGroup.value.manageUsers,manageResetPassword:this.permissionsGroup.value.manageResetPassword,createNewCollections:this.permissionsGroup.value.manageAllCollectionsGroup.createNewCollections,editAnyCollection:this.permissionsGroup.value.manageAllCollectionsGroup.editAnyCollection,deleteAnyCollection:this.permissionsGroup.value.manageAllCollectionsGroup.deleteAnyCollection};return Object.assign(e,i)}getUserView(){return ye(this,void 0,void 0,function*(){var e;const t=new N.dc;return t.organizationId=this.params.organizationId,t.type=this.formGroup.value.type,t.permissions=this.setRequestPermissions(null!==(e=t.permissions)&&void 0!==e?e:new C.n,t.type!==j.D7.Custom),t.collections=this.formGroup.value.access.filter(e=>e.type===X.Uv.Collection).map(X.yo),t.groups=(yield(0,R._)(this.restrictEditingSelf$))?null:this.formGroup.value.groups.map(e=>e.id),t.accessSecretsManager=this.formGroup.value.accessSecretsManager,t})}handleEditUser(e,t){return ye(this,void 0,void 0,function*(){e.id=t.organizationUserId,yield this.userService.save(e),this.toastService.showToast({variant:"success",title:null,message:this.i18nService.t("editedUserId",t.name)}),this.close(qe.Saved)})}handleInviteUsers(e,t){return ye(this,void 0,void 0,function*(){const t=[...new Set(this.formGroup.value.emails.trim().split(/\s*,\s*/))];yield this.userService.invite(t,e),this.toastService.showToast({variant:"success",title:null,message:this.i18nService.t("invitedUsers")}),this.close(qe.Saved)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cancel(){return ye(this,void 0,void 0,function*(){this.close(qe.Canceled)})}close(e){this.dialogRef.close(e)}noMasterPasswordConfirmationDialog(e){return this.dialogService.openSimpleDialog({title:{key:"removeOrgUserNoMasterPasswordTitle"},content:{key:"removeOrgUserNoMasterPasswordDesc",placeholders:[e]},type:"warning"})}}function Le(e,t,i,n){return{type:X.Uv.Collection,id:n?`${e.id}-${n.id}`:e.id,labelName:e.name,listName:e.name,readonly:void 0!==n||!e.canEditUserAccess(t),readonlyPermission:i?(0,X.Jh)(i):void 0,viaGroupName:null==n?void 0:n.name}}function We(e,t){return e.open(Ke,t)}Ke.ɵfac=function(e){return new(e||Ke)(O.rXU(D.Qs),O.rXU(h.ce),O.rXU(p.W),O.rXU(S.ok),O.rXU(G.vE),O.rXU(N.nK),O.rXU(N.WW),O.rXU(G.uB),O.rXU(h.o3),O.rXU(J.Di),O.rXU(U.PV),O.rXU(m.f),O.rXU(q.w),O.rXU(Y))},Ke.ɵcmp=O.VBU({type:Ke,selectors:[["ng-component"]],standalone:!1,decls:25,vars:28,consts:[["enterprise",""],[3,"formGroup","bitSubmit"],["dialogSize","large",3,"disablePadding"],["bitDialogTitle",""],["class","tw-text-sm tw-normal-case tw-text-muted",4,"ngIf"],["bitBadge","","variant","secondary",4,"ngIf"],["bitDialogContent",""],[4,"ngIf"],[3,"selectedIndex","selectedIndexChange",4,"ngIf"],["bitDialogFooter",""],["type","submit","bitButton","","bitFormButton","","buttonType","primary",3,"disabled"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"click","disabled"],[1,"tw-flex","tw-gap-2","tw-ml-auto"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"bitAction","disabled",4,"ngIf"],["type","button","buttonType","danger","bitButton","","bitFormButton","",3,"bitAction","disabled",4,"ngIf"],[1,"tw-text-sm","tw-normal-case","tw-text-muted"],["bitBadge","","variant","secondary"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","tw-text-muted",3,"title"],[1,"tw-sr-only"],[3,"selectedIndexChange","selectedIndex"],[3,"label"],["formControlName","type"],["bitLink","","target","_blank","rel","noreferrer","href","https://bitwarden.com/help/user-types-access-control/","slot","end",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],["id","userTypeUser",3,"value"],["id","userTypeAdmin",3,"value"],["id","userTypeOwner",3,"value"],["id","userTypeCustom",3,"value","disabled"],[4,"ngIf","ngIfElse"],[3,"label",4,"ngIf"],["class","tw-mb-6",4,"ngIf"],["formControlName","access",3,"permissionMode","showGroupColumn","items","columnHeader","selectorLabelText","emptySelectionText","hideMultiSelect"],["bitTypography","body1"],["id","emails","type","text","appAutoFocus","","bitInput","","formControlName","emails"],["bitLink","","href","https://bitwarden.com/contact/","target","_blank","rel","noreferrer"],[1,"tw-grid","tw-grid-cols-12","tw-gap-4",3,"formGroup"],[1,"tw-col-span-4"],["type","checkbox","bitCheckbox","","formControlName","accessEventLogs"],["type","checkbox","bitCheckbox","","formControlName","accessImportExport"],["type","checkbox","bitCheckbox","","formControlName","accessReports"],["parentId","manageAllCollections",3,"checkboxes"],[1,"tw-mb-3"],["type","checkbox","bitCheckbox","","formControlName","manageGroups"],["type","checkbox","bitCheckbox","","formControlName","manageSso"],["type","checkbox","bitCheckbox","","formControlName","managePolicies"],["id","manageUsers","type","checkbox","bitCheckbox","","formControlName","manageUsers"],["type","checkbox","bitCheckbox","","formControlName","manageResetPassword"],[1,"tw-mt-4"],["bitLink","","target","_blank","rel","noreferrer","href","https://bitwarden.com/help/manage-your-organization/#access-to-secrets-manager",3,"appA11yTitle"],[1,"tw-text-muted"],["type","checkbox","bitCheckbox","","formControlName","accessSecretsManager",3,"disabled"],["bitInput","","type","text","formControlName","externalId"],["bitInput","","type","text","formControlName","ssoExternalId"],[1,"tw-mb-6"],["formControlName","groups",3,"items","columnHeader","selectorLabelText","emptySelectionText","hideMultiSelect"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"bitAction","disabled"],["type","button","buttonType","danger","bitButton","","bitFormButton","",3,"bitAction","disabled"]],template:function(e,t){if(1&e&&(O.j41(0,"form",1)(1,"bit-dialog",2)(2,"span",3),O.EFF(3),O.DNE(4,Se,3,3,"span",4),O.nI1(5,"async"),O.DNE(6,ke,3,3,"span",5),O.k0s(),O.j41(7,"div",6),O.DNE(8,Re,6,7,"ng-container",7)(9,Pe,57,71,"bit-tab-group",8),O.nI1(10,"async"),O.k0s(),O.qex(11,9),O.j41(12,"button",10),O.EFF(13),O.nI1(14,"i18n"),O.k0s(),O.j41(15,"button",11),O.bIt("click",function(){return t.cancel()}),O.EFF(16),O.nI1(17,"i18n"),O.k0s(),O.j41(18,"div",12),O.DNE(19,Ye,3,5,"button",13)(20,Be,3,5,"button",13)(21,Ve,3,5,"button",14),O.nI1(22,"async"),O.DNE(23,Oe,3,5,"button",14),O.nI1(24,"async"),O.k0s(),O.bVm(),O.k0s()()),2&e){let e,i,n;O.Y8G("formGroup",t.formGroup)("bitSubmit",t.submit),O.R7$(),O.Y8G("disablePadding",!t.loading),O.R7$(2),O.SpI(" ",t.title," "),O.R7$(),O.Y8G("ngIf",!t.loading&&t.editParams$&&(null==(e=O.bMT(5,16,t.editParams$))?null:e.name)),O.R7$(2),O.Y8G("ngIf",t.isRevoked),O.R7$(2),O.Y8G("ngIf",t.loading),O.R7$(),O.Y8G("ngIf",O.bMT(10,18,!t.loading&&t.organization$)),O.R7$(3),O.Y8G("disabled",t.loading),O.R7$(),O.SpI(" ",O.bMT(14,20,"save")," "),O.R7$(2),O.Y8G("disabled",t.loading),O.R7$(),O.SpI(" ",O.bMT(17,22,"cancel")," "),O.R7$(3),O.Y8G("ngIf",t.editMode&&t.isRevoked),O.R7$(),O.Y8G("ngIf",t.editMode&&!t.isRevoked),O.R7$(),O.Y8G("ngIf",t.editMode&&!(null!=(i=O.bMT(22,24,t.editParams$))&&i.managedByOrganization)),O.R7$(2),O.Y8G("ngIf",t.editMode&&(null==(n=O.bMT(24,26,t.editParams$))?null:n.managedByOrganization))}},dependencies:[K.bT,S.qT,S.me,S.Zm,S.BC,S.cb,S.j4,S.JD,L.C,W.p,Q.$,_.L,H.n,Z.Q,ee.P,te.m,ie.f,ne.j,se.I,oe.J,re.h,ae.L,ce.d,le.Y,de.W,ue.j,pe.r,he.t,ve,K.Jj,ge.$],encapsulation:2});var Qe=i(8297);class _e{}_e.ɵfac=function(e){return new(e||_e)},_e.ɵmod=O.$C({type:_e}),_e.ɵinj=u.G2t({imports:[I.R,Qe.K]});var He=i(6056),Ze=i(83731),et=i(20246),tt=i(39306),it=i(56962),nt=i(22848),st=i(58625),ot=i(29029),rt=i(81573),at=i(26411),ct=i(12012),lt=i(89105),dt=i(65963),ut=i(7730),pt=function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};class ht{constructor(e,t,i,n,s,o,r,a){var c;this.dialogRef=e,this.formBuilder=t,this.i18nService=i,this.organizationUserApiService=n,this.toastService=s,this.apiService=o,this.encryptService=r,this.dialogParams=a,this.loading=!1,this.organizationId=null===(c=this.dialogParams)||void 0===c?void 0:c.organizationId,this.organizationKey=this.dialogParams.organizationKey,this.sponsorshipForm=this.formBuilder.group({sponsorshipEmail:new S.MJ("",{validators:[S.k0.email,S.k0.required],asyncValidators:[this.isOrganizationMember.bind(this)],updateOn:"change"}),sponsorshipNote:new S.MJ("",{validators:[S.k0.maxLength(1e3)]})})}static open(e,t){return e.open(ht,Object.assign(Object.assign({},t),{data:t.data}))}save(){return pt(this,void 0,void 0,function*(){if(this.sponsorshipEmailControl.markAllAsTouched(),!this.sponsorshipForm.invalid){this.loading=!0;try{const e=this.sponsorshipForm.value.sponsorshipNote||"",t=this.sponsorshipForm.value.sponsorshipEmail||"",i=yield this.encryptService.encryptString(e,this.organizationKey),n=!0;yield this.apiService.postCreateSponsorship(this.organizationId,{sponsoredEmail:t,planSponsorshipType:a.MM.FamiliesForEnterprise,friendlyName:t,isAdminInitiated:n,notes:i.encryptedString}),this.toastService.showToast({variant:"success",title:void 0,message:this.i18nService.t("sponsorshipCreated")}),yield this.resetForm()}catch(e){this.toastService.showToast({variant:"error",title:this.i18nService.t("errorOccurred"),message:(null==e?void 0:e.message)||this.i18nService.t("unexpectedError")})}this.loading=!1,this.dialogRef.close()}})}resetForm(){return pt(this,void 0,void 0,function*(){this.sponsorshipForm.reset()})}get sponsorshipEmailControl(){return this.sponsorshipForm.controls.sponsorshipEmail}get sponsorshipNoteControl(){return this.sponsorshipForm.controls.sponsorshipNote}isOrganizationMember(e){return pt(this,void 0,void 0,function*(){const t=e.value;return(yield this.organizationUserApiService.getAllMiniUserDetails(this.organizationId)).data.some(e=>e.email.toLowerCase()===t.toLowerCase())?{isOrganizationMember:{message:this.i18nService.t("organizationHasMemberMessage",t)}}:null})}}ht.ɵfac=function(e){return new(e||ht)(O.rXU(h.ce),O.rXU(S.ok),O.rXU(p.W),O.rXU(G.uB),O.rXU(m.f),O.rXU(ct.G),O.rXU(lt.N),O.rXU(D.Qs))},ht.ɵcmp=O.VBU({type:ht,selectors:[["ng-component"]],decls:27,vars:21,consts:[["bitDialogTitle",""],["bitDialogContent",""],[3,"formGroup"],[1,"tw-grid","tw-grid-cols-12","tw-gap-4"],[1,"tw-col-span-12"],["bitInput","","inputmode","email","formControlName","sponsorshipEmail","appInputStripSpaces",""],["bitInput","","inputmode","text","formControlName","sponsorshipNote"],["bitDialogFooter",""],["bitButton","","bitFormButton","","type","button","buttonType","primary",3,"click","loading","disabled"],["bitButton","","type","button","buttonType","secondary",3,"bitDialogClose"]],template:function(e,t){1&e&&(O.j41(0,"form")(1,"bit-dialog")(2,"span",0),O.EFF(3),O.nI1(4,"i18n"),O.k0s(),O.j41(5,"div",1)(6,"form",2)(7,"div",3)(8,"div",4)(9,"bit-form-field")(10,"bit-label"),O.EFF(11),O.nI1(12,"i18n"),O.k0s(),O.nrm(13,"input",5),O.k0s()(),O.j41(14,"div",4)(15,"bit-form-field")(16,"bit-label"),O.EFF(17),O.nI1(18,"i18n"),O.k0s(),O.nrm(19,"input",6),O.k0s()()()()(),O.qex(20,7),O.j41(21,"button",8),O.bIt("click",function(){return t.save()}),O.EFF(22),O.nI1(23,"i18n"),O.k0s(),O.j41(24,"button",9),O.EFF(25),O.nI1(26,"i18n"),O.k0s(),O.bVm(),O.k0s()()),2&e&&(O.R7$(3),O.JRh(O.bMT(4,11,"addSponsorship")),O.R7$(3),O.Y8G("formGroup",t.sponsorshipForm),O.R7$(5),O.JRh(O.bMT(12,13,"email")),O.R7$(2),O.BMQ("aria-invalid",t.sponsorshipEmailControl.invalid),O.R7$(4),O.JRh(O.bMT(18,15,"notes")),O.R7$(2),O.BMQ("aria-invalid",t.sponsorshipNoteControl.invalid),O.R7$(2),O.Y8G("loading",t.loading)("disabled",t.loading),O.R7$(),O.SpI(" ",O.bMT(23,17,"save")," "),O.R7$(2),O.Y8G("bitDialogClose",!1),O.R7$(),O.SpI(" ",O.bMT(26,19,"cancel")," "))},dependencies:[st.p,dt.J,ot.t,Z.Q,rt.P,ut.I,te.m,S.YN,S.qT,S.me,S.BC,S.cb,S.cV,S.X1,S.j4,S.JD,at.L,ne.j,oe.J,re.h,ge.$],encapsulation:2});var mt=i(37115),gt=i(304),ft=i(10672),bt=i(36288),vt=i(13496),yt=i(53997),It=i(78952),St=i(38410),kt=i(22466),Rt=i(36572),wt=i(93748),$t=function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};function Ft(e,t){1&e&&(O.qex(0),O.nrm(1,"i",8),O.nI1(2,"i18n"),O.j41(3,"span",9),O.EFF(4),O.nI1(5,"i18n"),O.k0s(),O.bVm()),2&e&&(O.R7$(),O.Y8G("title",O.mNQ(O.bMT(2,3,"loading"))),O.R7$(3),O.JRh(O.bMT(5,5,"loading")))}function Mt(e,t){if(1&e){const e=O.RV6();O.j41(0,"button",18),O.nI1(1,"i18n"),O.bIt("click",function(){u.eBV(e);const t=O.XpG().$implicit,i=O.XpG(3);return u.Njj(i.resendEmail(t))}),O.nrm(2,"i",21),O.EFF(3),O.nI1(4,"i18n"),O.k0s()}2&e&&(O.BMQ("aria-label",O.bMT(1,2,"resendEmailLabel")),O.R7$(3),O.SpI(" ",O.bMT(4,4,"resendInvitation")," "))}function Tt(e,t){1&e&&O.nrm(0,"hr",17)}function Et(e,t){if(1&e){const e=O.RV6();O.qex(0),O.j41(1,"tr",14)(2,"td",11),O.EFF(3),O.k0s(),O.j41(4,"td",11),O.EFF(5),O.k0s(),O.j41(6,"td",11),O.EFF(7),O.k0s(),O.j41(8,"td",11),O.nrm(9,"button",15),O.nI1(10,"i18n"),O.j41(11,"bit-menu",null,0),O.nVh(13,Mt,5,6,"button",16),O.nVh(14,Tt,1,0,"hr",17),O.j41(15,"button",18),O.nI1(16,"i18n"),O.bIt("click",function(){const t=u.eBV(e).$implicit,i=O.XpG(3);return u.Njj(i.removeSponsorship(t))}),O.nrm(17,"i",19),O.j41(18,"span",20),O.EFF(19),O.nI1(20,"i18n"),O.k0s()()()()(),O.bVm()}if(2&e){const e=t.$implicit,i=O.sdS(12),n=O.XpG(3);O.R7$(3),O.JRh(e.friendlyName),O.R7$(),O.HbH(e.statusClass),O.R7$(),O.SpI(" ",e.statusMessage," "),O.R7$(2),O.JRh(e.notes),O.R7$(2),O.Y8G("label",O.mNQ(O.bMT(10,12,"options")))("bitMenuTriggerFor",i),O.R7$(4),O.vxM(n.isSelfHosted||e.validUntil?-1:13),O.R7$(),O.vxM(n.isSelfHosted||e.validUntil?-1:14),O.R7$(),O.BMQ("aria-label",O.bMT(16,14,"revokeAccountMessage")),O.R7$(4),O.JRh(O.bMT(20,16,"remove"))}}function Gt(e,t){if(1&e&&O.Z7z(0,Et,21,18,"ng-container",null,O.Vm6),2&e){const e=O.XpG(2);O.Dyx(e.sponsoredFamilies)}}function Ut(e,t){1&e&&(O.qex(0),O.j41(1,"bit-table"),O.qex(2,10),O.j41(3,"tr")(4,"th",11),O.EFF(5),O.nI1(6,"i18n"),O.k0s(),O.j41(7,"th",11),O.EFF(8),O.nI1(9,"i18n"),O.k0s(),O.j41(10,"th",11),O.EFF(11),O.nI1(12,"i18n"),O.k0s(),O.nrm(13,"th",11),O.k0s(),O.bVm(),O.DNE(14,Gt,2,0,"ng-template",12),O.k0s(),O.nrm(15,"hr",13),O.bVm()),2&e&&(O.R7$(5),O.JRh(O.bMT(6,3,"recipient")),O.R7$(3),O.JRh(O.bMT(9,5,"status")),O.R7$(3),O.JRh(O.bMT(12,7,"notes")))}function jt(e,t){1&e&&(O.j41(0,"div",6),O.nrm(1,"img",22),O.j41(2,"h4",23),O.EFF(3),O.nI1(4,"i18n"),O.k0s(),O.j41(5,"p",7),O.EFF(6),O.nI1(7,"i18n"),O.k0s()()),2&e&&(O.R7$(3),O.JRh(O.bMT(4,2,"noSponsoredFamiliesMessage")),O.R7$(3),O.JRh(O.bMT(7,4,"nosponsoredFamiliesDetails")))}function Ct(e,t){1&e&&(O.j41(0,"p",7),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.JRh(O.bMT(2,1,"sponsoredFamiliesRemoveActiveSponsorship")))}class xt{constructor(e,t,i,n,s,o,r,a,c,l,d){this.route=e,this.dialogService=t,this.apiService=i,this.encryptService=n,this.keyService=s,this.platformUtilsService=o,this.i18nService=r,this.logService=a,this.toastService=c,this.organizationSponsorshipApiService=l,this.stateProvider=d,this.loading=(0,u.vPA)(!0),this.tabIndex=0,this.sponsoredFamilies=[],this.organizationId="",this.locale="",this.organizationId=this.route.snapshot.params.organizationId||"",this.organizationKey$=this.stateProvider.activeUserId$.pipe((0,F.n)(e=>this.keyService.orgKeys$(e)),(0,$.T)(e=>e[this.organizationId]),(0,Ze.pQ)())}ngOnInit(){return $t(this,void 0,void 0,function*(){this.locale=yield(0,R._)(this.i18nService.locale$),yield this.loadSponsorships(),this.loading.set(!1)})}loadSponsorships(){return $t(this,void 0,void 0,function*(){if(!this.organizationId)return;const[e,t]=yield Promise.all([this.organizationSponsorshipApiService.getOrganizationSponsorship(this.organizationId),(0,R._)(this.organizationKey$)]);if(!t)return void this.logService.error("Organization key not found");const i=e.data;this.sponsoredFamilies=yield Promise.all(i.map(e=>$t(this,void 0,void 0,function*(){let i="";try{i=yield this.encryptService.decryptString(new tt.k(e.notes),t)}catch(r){this.logService.error(r)}const{statusMessage:n,statusClass:s}=this.getStatus(this.isSelfHosted,e.toDelete,e.validUntil,e.lastSyncDate,this.locale),o=Object.assign(Object.assign({},e),{notes:i,statusMessage:n||"",statusClass:s||"tw-text-success",status:n||""});return new et.B(o)})))})}addSponsorship(){return $t(this,void 0,void 0,function*(){const e=ht.open(this.dialogService,{data:{organizationId:this.organizationId,organizationKey:yield(0,R._)(this.organizationKey$)}});yield(0,R._)(e.closed),yield this.loadSponsorships()})}removeSponsorship(e){return $t(this,void 0,void 0,function*(){try{yield this.doRevokeSponsorship(e)}catch(t){this.logService.error(t)}})}get isSelfHosted(){return this.platformUtilsService.isSelfHost()}resendEmail(e){return $t(this,void 0,void 0,function*(){yield this.organizationSponsorshipApiService.postResendSponsorshipOffer(this.organizationId,e.friendlyName),this.toastService.showToast({variant:"success",title:void 0,message:this.i18nService.t("emailSent")})})}doRevokeSponsorship(e){return $t(this,void 0,void 0,function*(){const t=e.validUntil?this.i18nService.t("revokeActiveSponsorshipConfirmation",e.friendlyName,(0,K.Yq)(e.validUntil,"MM/dd/yyyy",this.locale)):this.i18nService.t("updatedRevokeSponsorshipConfirmationForSentSponsorship",e.friendlyName);(yield this.dialogService.openSimpleDialog({title:`${this.i18nService.t("removeSponsorship")}?`,content:t,acceptButtonText:{key:"remove"},type:"warning"}))&&(yield this.organizationSponsorshipApiService.deleteAdminInitiatedRevokeSponsorship(this.organizationId,e.friendlyName),this.toastService.showToast({variant:"success",title:void 0,message:this.i18nService.t("reclaimedFreePlan")}),yield this.loadSponsorships())})}getStatus(e,t,i,n,s=""){return t&&i?{statusMessage:this.i18nService.t("revokeWhenExpired",(0,K.Yq)(i,"MM/dd/yyyy",s)),statusClass:"tw-text-danger"}:t?{statusMessage:this.i18nService.t("requestRemoved"),statusClass:"tw-text-danger"}:i?{statusMessage:this.i18nService.t("active"),statusClass:"tw-text-success"}:e&&n?{statusMessage:this.i18nService.t("sent"),statusClass:"tw-text-success"}:e?{statusMessage:this.i18nService.t("requested"),statusClass:"tw-text-success"}:{statusMessage:this.i18nService.t("sent"),statusClass:"tw-text-success"}}}xt.ɵfac=function(e){return new(e||xt)(O.rXU(g.nX),O.rXU(h.o3),O.rXU(ct.G),O.rXU(lt.N),O.rXU(nt.Lu),O.rXU(mt.y),O.rXU(p.W),O.rXU(it.K),O.rXU(m.f),O.rXU(gt.l),O.rXU(z.v2))},xt.ɵcmp=O.VBU({type:xt,selectors:[["app-free-bitwarden-families"]],standalone:!1,decls:27,vars:21,consts:[["appListDropdown",""],["type","button","bitButton","","buttonType","primary",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],["bitTypography","body1"],[1,"tw-list-outside"],["bitTypography","h2",1,""],[1,"tw-my-5","tw-py-5","tw-flex","tw-flex-col","tw-items-center"],["bitTypography","body2"],[1,"bwi","bwi-spinner","bwi-spin","tw-text-muted",3,"title"],[1,"tw-sr-only"],["header",""],["bitCell",""],["body","","alignContent","middle"],[1,"tw-mt-0"],["bitRow",""],["type","button","bitIconButton","bwi-ellipsis-v","buttonType","main",3,"bitMenuTriggerFor","label"],["type","button","bitMenuItem",""],[1,"tw-m-0"],["type","button","bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-close","tw-text-danger"],[1,"tw-text-danger","tw-pl-1"],["aria-hidden","true",1,"bwi","bwi-envelope"],["src","./../../../images/search.svg","alt","Search",1,"tw-w-32"],["bitTypography","h4",1,"tw-mt-3"]],template:function(e,t){1&e&&(O.j41(0,"app-header")(1,"button",1),O.bIt("click",function(){return t.addSponsorship()}),O.nrm(2,"i",2),O.EFF(3),O.nI1(4,"i18n"),O.k0s()(),O.j41(5,"bit-container"),O.qex(6),O.j41(7,"p",3),O.EFF(8),O.nI1(9,"i18n"),O.k0s(),O.j41(10,"div",3),O.EFF(11),O.nI1(12,"i18n"),O.j41(13,"ul",4)(14,"li"),O.EFF(15),O.nI1(16,"i18n"),O.k0s(),O.j41(17,"li"),O.EFF(18),O.nI1(19,"i18n"),O.k0s()()(),O.j41(20,"h2",5),O.EFF(21),O.nI1(22,"i18n"),O.k0s(),O.nVh(23,Ft,6,7,"ng-container"),O.nVh(24,Ut,16,9,"ng-container")(25,jt,8,6,"div",6),O.nVh(26,Ct,3,3,"p",7),O.bVm(),O.k0s()),2&e&&(O.R7$(3),O.SpI(" ",O.bMT(4,9,"addSponsorship")," "),O.R7$(5),O.SpI(" ",O.bMT(9,11,"sponsorshipFreeBitwardenFamilies")," "),O.R7$(3),O.SpI(" ",O.bMT(12,13,"sponsoredFamiliesIncludeMessage"),": "),O.R7$(4),O.JRh(O.bMT(16,15,"sponsoredFamiliesPremiumAccess")),O.R7$(3),O.JRh(O.bMT(19,17,"sponsoredFamiliesSharedCollectionsForFamilyMembers")),O.R7$(3),O.JRh(O.bMT(22,19,"sponsoredBitwardenFamilies")),O.R7$(2),O.vxM(t.loading()?23:-1),O.R7$(),O.vxM(!t.loading()&&(null==t.sponsoredFamilies?null:t.sponsoredFamilies.length)>0?24:t.loading()?-1:25),O.R7$(2),O.vxM(!t.loading()&&t.sponsoredFamilies.length>0?26:-1))},dependencies:[Z.Q,ft.H,bt.s,vt.Z,yt.O,It.S,St.Q,kt.Y,Rt._,Rt.O,pe.r,wt.f,ge.$],encapsulation:2});var Dt=i(77259),Nt=i(69194),Xt=i(15639),zt=i(33189),At=function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};var Pt=i(33277),Yt=i(73276),Bt=i(84079),Vt=i(83892),Ot=i(58363),Jt=i(90171),qt=i(38449),Kt=i(29377),Lt=i(27760),Wt=i(16878),Qt=i(36006),_t=i(12277),Ht=i(25065),Zt=i(35631),ei=function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};class ti{constructor(e,t,i,n,s){this.data=e,this.dialogRef=t,this.keyService=i,this.logService=n,this.organizationManagementPreferencesService=s,this.loading=!0,this.formGroup=new S.gE({dontAskAgain:new S.MJ(!1)}),this.submit=()=>ei(this,void 0,void 0,function*(){this.loading||(this.formGroup.value.dontAskAgain&&(yield this.organizationManagementPreferencesService.autoConfirmFingerPrints.set(!0)),yield this.data.confirmUser(this.publicKey),this.dialogRef.close())}),this.name=e.name,this.userId=e.userId,this.publicKey=e.publicKey}ngOnInit(){return ei(this,void 0,void 0,function*(){try{if(null!=this.publicKey){const e=yield this.keyService.getFingerprint(this.userId,this.publicKey);null!=e&&(this.fingerprint=e.join("-"))}}catch(e){this.logService.error(e)}this.loading=!1})}static open(e,t){return e.open(ti,t)}}ti.ɵfac=function(e){return new(e||ti)(O.rXU(D.Qs),O.rXU(h.ce),O.rXU(nt.Lu),O.rXU(it.K),O.rXU(Zt.y))},ti.ɵcmp=O.VBU({type:ti,selectors:[["ng-component"]],decls:29,vars:22,consts:[[3,"formGroup","bitSubmit"],["dialogSize","default"],["bitDialogTitle",""],["bitTypography","body1",1,"tw-text-muted"],["bitDialogContent",""],["bitTypography","body1"],["bitLink","","href","https://bitwarden.com/help/fingerprint-phrase/","target","_blank","rel","noreferrer"],["type","checkbox","bitCheckbox","","formControlName","dontAskAgain"],["bitDialogFooter",""],["bitButton","","bitFormButton","","type","submit","buttonType","primary"],["bitButton","","bitFormButton","","type","button","buttonType","secondary","bitDialogClose",""]],template:function(e,t){1&e&&(O.j41(0,"form",0)(1,"bit-dialog",1)(2,"span",2),O.EFF(3),O.nI1(4,"i18n"),O.j41(5,"span",3),O.EFF(6),O.k0s()(),O.qex(7,4),O.j41(8,"p",5),O.EFF(9),O.nI1(10,"i18n"),O.j41(11,"a",6),O.EFF(12),O.nI1(13,"i18n"),O.k0s()(),O.j41(14,"p",5)(15,"code"),O.EFF(16),O.k0s()(),O.j41(17,"bit-form-control"),O.nrm(18,"input",7),O.j41(19,"bit-label"),O.EFF(20),O.nI1(21,"i18n"),O.k0s()(),O.bVm(),O.qex(22,8),O.j41(23,"button",9),O.EFF(24),O.nI1(25,"i18n"),O.k0s(),O.j41(26,"button",10),O.EFF(27),O.nI1(28,"i18n"),O.k0s(),O.bVm(),O.k0s()()),2&e&&(O.Y8G("formGroup",t.formGroup)("bitSubmit",t.submit),O.R7$(3),O.SpI(" ",O.bMT(4,10,"confirmUser")," "),O.R7$(3),O.JRh(t.name),O.R7$(3),O.SpI(" ",O.bMT(10,12,"fingerprintEnsureIntegrityVerify")," "),O.R7$(3),O.SpI(" ",O.bMT(13,14,"learnMore")),O.R7$(4),O.JRh(t.fingerprint),O.R7$(4),O.JRh(O.bMT(21,16,"dontAskFingerprintAgain")),O.R7$(4),O.SpI(" ",O.bMT(25,18,"confirm")," "),O.R7$(3),O.SpI(" ",O.bMT(28,20,"cancel")," "))},dependencies:[Ht.G,S.qT,S.Zm,S.BC,S.cb,S.j4,S.JD,Q.$,_.L,Z.Q,ee.P,ut.I,te.m,ie.f,ne.j,ae.L,pe.r,ge.$],encapsulation:2});var ii=i(82468),ni=i(55542);const si=500,oi=8e3;function ri(e,t){return i=>function(e,t){return null==t?e.status!=j.Zx.Revoked:e.status===t}(i,t)&&function(e,t){var i;const n=null==t?void 0:t.toLowerCase();return!n||e.email.toLowerCase().includes(n)||e.id.toLowerCase().includes(n)||(null===(i=e.name)||void 0===i?void 0:i.toLowerCase().includes(n))}(i,e)}class ai extends ni.s{constructor(e,t){super();const i=(0,Ze.ot)(e.getFeatureFlag$(ii.TO.IncreaseBulkReinviteLimitForCloud)),n=(0,Ze.ot)(t.environment$.pipe((0,$.T)(e=>e.isCloud())));this.isIncreasedBulkLimitEnabled=(0,Pt.EW)(()=>i()&&n())}set data(e){var t,i,n,s,o,r,a,c,l,d;super.data=e,this.activeUserCount=null!==(i=null===(t=this.data)||void 0===t?void 0:t.filter(e=>e.status!==this.statusType.Revoked).length)&&void 0!==i?i:0,this.invitedUserCount=null!==(s=null===(n=this.data)||void 0===n?void 0:n.filter(e=>e.status===this.statusType.Invited).length)&&void 0!==s?s:0,this.acceptedUserCount=null!==(r=null===(o=this.data)||void 0===o?void 0:o.filter(e=>e.status===this.statusType.Accepted).length)&&void 0!==r?r:0,this.confirmedUserCount=null!==(c=null===(a=this.data)||void 0===a?void 0:a.filter(e=>e.status===this.statusType.Confirmed).length)&&void 0!==c?c:0,this.revokedUserCount=null!==(d=null===(l=this.data)||void 0===l?void 0:l.filter(e=>e.status===this.statusType.Revoked).length)&&void 0!==d?d:0}get data(){return super.data}checkUser(e,t){e.checked=null==t?!e.checked:t}getCheckedUsers(){return this.data.filter(e=>e.checked)}getCheckedUsersInVisibleOrder(){return this.filteredData.filter(e=>e.checked)}checkAllFilteredUsers(e){e&&this.uncheckAllUsers();const t=this.filteredData,i=this.isIncreasedBulkLimitEnabled()?t.length:Math.min(t.length,si);for(let n=0;n<i;n++)this.checkUser(t[n],e)}uncheckAllUsers(){this.data.forEach(e=>e.checked=!1)}removeUser(e){this.data=this.data.filter(t=>t!=e)}replaceUser(e){const t=this.data.findIndex(t=>t.id===e.id);if(t>-1){const i=this.data.slice();i[t]=e,this.data=i}}limitAndUncheckExcess(e,t){return e.length<=t?e:(e.slice(t).forEach(e=>this.checkUser(e,!1)),e.slice(0,t))}getCheckedUsersWithLimit(e){if(this.isIncreasedBulkLimitEnabled()){const t=this.getCheckedUsersInVisibleOrder();return this.limitAndUncheckExcess(t,e)}return this.getCheckedUsers()}}var ci=i(2471),li=function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};class di{get showConfirmUsers(){return this.dataSource.activeUserCount>1&&this.dataSource.confirmedUserCount>0&&this.dataSource.confirmedUserCount<3&&this.dataSource.acceptedUserCount>0}get showBulkConfirmUsers(){return this.dataSource.getCheckedUsers().every(e=>e.status==this.userStatusType.Accepted)}get showBulkReinviteUsers(){return this.dataSource.getCheckedUsers().every(e=>e.status==this.userStatusType.Invited)}constructor(e,t,i,n,s,o,r,a,c){this.apiService=e,this.i18nService=t,this.keyService=i,this.validationService=n,this.logService=s,this.userNamePipe=o,this.dialogService=r,this.organizationManagementPreferencesService=a,this.toastService=c,this.firstLoaded=!1,this.searchControl=new S.MJ("",{nonNullable:!0}),this.statusToggle=new Wt.t(void 0),(0,w.z)([this.searchControl.valueChanges.pipe((0,Qt.B)(200)),this.statusToggle]).pipe((0,Ze.pQ)()).subscribe(([e,t])=>this.dataSource.filter=ri(e,t))}load(e){return li(this,void 0,void 0,function*(){const t=yield this.getUsers(e);t instanceof _t.s?this.dataSource.data=null!=t.data&&t.data.length>0?t.data:[]:Array.isArray(t)&&(this.dataSource.data=t),this.firstLoaded=!0})}removeUserConfirmationDialog(e){return li(this,void 0,void 0,function*(){return this.dialogService.openSimpleDialog({title:this.userNamePipe.transform(e),content:{key:"removeUserConfirmation"},type:"warning"})})}remove(e,t){return li(this,void 0,void 0,function*(){if(!(yield this.removeUserConfirmationDialog(e)))return!1;this.actionPromise=this.removeUser(e.id,t);try{const t=yield this.actionPromise;if(!t.success)throw new Error(t.error);this.toastService.showToast({variant:"success",message:this.i18nService.t("removedUserId",this.userNamePipe.transform(e))}),this.dataSource.removeUser(e)}catch(i){this.validationService.showError(i)}this.actionPromise=void 0})}reinvite(e,t){return li(this,void 0,void 0,function*(){if(null==this.actionPromise){this.actionPromise=this.reinviteUser(e.id,t);try{const t=yield this.actionPromise;if(!t.success)throw new Error(t.error);this.toastService.showToast({variant:"success",message:this.i18nService.t("hasBeenReinvited",this.userNamePipe.transform(e))})}catch(i){this.validationService.showError(i)}this.actionPromise=void 0}})}confirm(e,t){return li(this,void 0,void 0,function*(){const i=i=>li(this,void 0,void 0,function*(){try{this.actionPromise=this.confirmUser(e,i,t);const n=yield this.actionPromise;if(!n.success)throw new Error(n.error);e.status=this.userStatusType.Confirmed,this.dataSource.replaceUser(e),this.toastService.showToast({variant:"success",message:this.i18nService.t("hasBeenConfirmed",this.userNamePipe.transform(e))})}catch(n){throw this.validationService.showError(n),n}finally{this.actionPromise=void 0}});if(null==this.actionPromise)try{const t=yield this.apiService.getUserPublicKey(e.userId),s=me.A.fromB64ToArray(t.publicKey),o=yield(0,R._)(this.organizationManagementPreferencesService.autoConfirmFingerPrints.state$);if(null==e)throw new Error("Cannot confirm null user.");if(null==o||!o){const t=ti.open(this.dialogService,{data:{name:this.userNamePipe.transform(e),userId:e.userId,publicKey:s,confirmUser:()=>i(s)}});return void(yield(0,r.s)(t.closed))}try{const t=yield this.keyService.getFingerprint(e.userId,s);this.logService.info(`User's fingerprint: ${t.join("-")}`)}catch(n){this.logService.error(n)}yield i(s)}catch(n){this.logService.error(`Handled exception: ${n}`)}})}}di.ɵfac=function(e){return new(e||di)(O.rXU(ct.G),O.rXU(p.W),O.rXU(nt.Lu),O.rXU(ci.B),O.rXU(it.K),O.rXU(Jt.b),O.rXU(h.o3),O.rXU(Zt.y),O.rXU(m.f))},di.ɵdir=O.FsC({type:di});var ui=i(37579),pi=i(80351),hi=i(36801),mi=i(45151),gi=i(18499),fi=i(44432),bi=function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};const vi="ok";class yi{get loggedOutWarningName(){return null!=this.dialogData.name?this.dialogData.name:this.i18nService.t("thisUser")}constructor(e,t,i,n,s,r,a){this.dialogData=e,this.accountService=t,this.dialogRef=i,this.i18nService=n,this.policyService=s,this.resetPasswordService=r,this.toastService=a,this.inputPasswordComponent=void 0,this.masterPasswordPolicyOptions$=this.accountService.activeAccount$.pipe(x.F6,(0,F.n)(e=>this.policyService.masterPasswordPolicyOptions$(e))),this.inputPasswordFlow=o.m5.ChangePasswordDelegation,this.handlePrimaryButtonClick=()=>bi(this,void 0,void 0,function*(){if(!this.inputPasswordComponent)throw new Error("InputPasswordComponent is not initialized");const e=yield this.inputPasswordComponent.submit();e&&(yield this.resetPasswordService.resetMasterPassword(e.newPassword,this.dialogData.email,this.dialogData.organizationUserId,this.dialogData.organizationId),this.toastService.showToast({variant:"success",title:"",message:this.i18nService.t("resetPasswordSuccess")}),this.dialogRef.close(vi))})}}yi.open=(e,t)=>e.open(yi,t),yi.ɵfac=function(e){return new(e||yi)(O.rXU(D.Qs),O.rXU(J.Di),O.rXU(h.ce),O.rXU(p.W),O.rXU(gi.m),O.rXU(mi.w),O.rXU(m.f))},yi.ɵcmp=O.VBU({type:yi,selectors:[["app-account-recovery-dialog"]],viewQuery:function(e,t){if(1&e&&O.GBs(o.tu,5),2&e){let e;O.mGM(e=O.lsd())&&(t.inputPasswordComponent=e.first)}},decls:15,vars:19,consts:[[3,"title","subtitle"],["bitDialogContent",""],["type","warning"],[3,"flow","masterPasswordPolicyOptions"],["bitDialogFooter",""],["type","button","bitButton","","buttonType","primary",3,"bitAction"],["type","button","bitButton","","buttonType","secondary","bitDialogClose",""]],template:function(e,t){1&e&&(O.j41(0,"bit-dialog",0),O.nI1(1,"i18n"),O.qex(2,1),O.j41(3,"bit-callout",2),O.EFF(4),O.nI1(5,"i18n"),O.k0s(),O.nrm(6,"auth-input-password",3),O.nI1(7,"async"),O.bVm(),O.qex(8,4),O.j41(9,"button",5),O.EFF(10),O.nI1(11,"i18n"),O.k0s(),O.j41(12,"button",6),O.EFF(13),O.nI1(14,"i18n"),O.k0s(),O.bVm(),O.k0s()),2&e&&(O.Y8G("title",O.bMT(1,8,"recoverAccount"))("subtitle",t.dialogData.name),O.R7$(4),O.SpI("",O.i5U(5,10,"resetPasswordLoggedOutWarning",t.loggedOutWarningName)," "),O.R7$(2),O.Y8G("flow",t.inputPasswordFlow)("masterPasswordPolicyOptions",O.bMT(7,13,t.masterPasswordPolicyOptions$)),O.R7$(3),O.Y8G("bitAction",t.handlePrimaryButtonClick),O.R7$(),O.SpI(" ",O.bMT(11,15,"save")," "),O.R7$(3),O.SpI(" ",O.bMT(14,17,"cancel")," "))},dependencies:[ui.C,W.p,ot.t,Z.Q,pi.j,fi.G,K.MD,rt.P,ut.I,te.m,o.tu,K.Jj,hi.$Z],encapsulation:2});var Ii=i(65551),Si=function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};class ki{constructor(e,t,i,n,s,o){this.organizationUserApiService=e,this.groupService=t,this.apiService=i,this.keyService=n,this.accountService=s,this.collectionService=o}loadUsers(e){return Si(this,void 0,void 0,function*(){var t,i;let n,s;const o=this.organizationUserApiService.getAllUsers(e.id,{includeGroups:e.useGroups,includeCollections:!e.useGroups});e.useGroups?n=this.getGroupNameMap(e):s=this.getCollectionNameMap(e);const[r,a,c]=yield Promise.all([o,n,s]);return null!==(i=null===(t=r.data)||void 0===t?void 0:t.map(e=>{const t=Ii.i.fromResponse(e);return t.groupNames=t.groups.map(e=>null==a?void 0:a.get(e)).filter(e=>null!=e).sort(),t.collectionNames=t.collections.map(e=>null==c?void 0:c.get(e.id)).filter(e=>null!=e).sort(),t}))&&void 0!==i?i:[]})}getGroupNameMap(e){return Si(this,void 0,void 0,function*(){const t=yield this.groupService.getAll(e.id),i=new Map;return t.forEach(e=>i.set(e.id,e.name)),i})}getCollectionNameMap(e){return Si(this,void 0,void 0,function*(){const t=(0,Bt.H)(this.apiService.getCollections(e.id)).pipe((0,$.T)(e=>e.data.map(e=>G.pM.fromCollectionData(new G.Fw(e))))),i=this.accountService.activeAccount$.pipe(x.F6,(0,F.n)(e=>this.keyService.orgKeys$(e)),(0,$.T)(e=>{if(null==e)throw new Error("Organization keys not found for provided User.");return e}));return yield(0,R._)((0,w.z)([i,t]).pipe((0,F.n)(([e,t])=>this.collectionService.decryptMany$(t,e)),(0,$.T)(e=>{const t=new Map;return e.forEach(e=>{t.set(e.id,e.name)}),t})))})}}ki.ɵfac=function(e){return new(e||ki)(u.KVO(G.uB),u.KVO(N.nK),u.KVO(ct.G),u.KVO(nt.Lu),u.KVO(J.Di),u.KVO(G.YD))},ki.ɵprov=u.jDH({token:ki,factory:ki.ɵfac});var Ri=i(41445),wi=function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};class $i{constructor(e,t,i,n,s,o,r){this.organizationUserApiService=e,this.organizationUserService=t,this.keyService=i,this.encryptService=n,this.configService=s,this.accountService=o,this.organizationMetadataService=r,this.userId$=this.accountService.activeAccount$.pipe(x.F6)}inviteUser(e,t,i,n,s,o){return wi(this,void 0,void 0,function*(){var r;try{return yield this.organizationUserApiService.postOrganizationUserInvite(e.id,{emails:[t],type:i,accessSecretsManager:!1,collections:null!=s?s:[],groups:null!=o?o:[],permissions:n}),{success:!0}}catch(a){return{success:!1,error:null!==(r=a.message)&&void 0!==r?r:String(a)}}})}removeUser(e,t){return wi(this,void 0,void 0,function*(){var i;try{return yield this.organizationUserApiService.removeOrganizationUser(e.id,t),this.organizationMetadataService.refreshMetadataCache(),{success:!0}}catch(n){return{success:!1,error:null!==(i=n.message)&&void 0!==i?i:String(n)}}})}revokeUser(e,t){return wi(this,void 0,void 0,function*(){var i;try{return yield this.organizationUserApiService.revokeOrganizationUser(e.id,t),this.organizationMetadataService.refreshMetadataCache(),{success:!0}}catch(n){return{success:!1,error:null!==(i=n.message)&&void 0!==i?i:String(n)}}})}restoreUser(e,t){return wi(this,void 0,void 0,function*(){var i;try{return yield this.organizationUserApiService.restoreOrganizationUser(e.id,t),this.organizationMetadataService.refreshMetadataCache(),{success:!0}}catch(n){return{success:!1,error:null!==(i=n.message)&&void 0!==i?i:String(n)}}})}deleteUser(e,t){return wi(this,void 0,void 0,function*(){var i;try{return yield this.organizationUserApiService.deleteOrganizationUser(e.id,t),this.organizationMetadataService.refreshMetadataCache(),{success:!0}}catch(n){return{success:!1,error:null!==(i=n.message)&&void 0!==i?i:String(n)}}})}reinviteUser(e,t){return wi(this,void 0,void 0,function*(){var i;try{return yield this.organizationUserApiService.postOrganizationUserReinvite(e.id,t),{success:!0}}catch(n){return{success:!1,error:null!==(i=n.message)&&void 0!==i?i:String(n)}}})}confirmUser(e,t,i){return wi(this,void 0,void 0,function*(){var n;try{if(yield(0,R._)(this.configService.getFeatureFlag$(ii.TO.CreateDefaultLocation)))yield(0,R._)(this.organizationUserService.confirmUser(i,e.id,t));else{const n=yield(0,R._)(this.userId$.pipe((0,F.n)(e=>this.keyService.orgKeys$(e)),(0,$.T)(e=>{if(null==e||null==e[i.id])throw new Error("Organization keys not found for provided User.");return e[i.id]}),(0,F.n)(e=>this.encryptService.encapsulateKeyUnsigned(e,t)),(0,$.T)(e=>{const t=new G.u2;return t.key=e.encryptedString,t})));yield this.organizationUserApiService.postOrganizationUserConfirm(i.id,e.id,n)}return{success:!0}}catch(s){return{success:!1,error:null!==(n=s.message)&&void 0!==n?n:String(s)}}})}bulkReinvite(e,t){return wi(this,void 0,void 0,function*(){if(yield(0,R._)(this.configService.getFeatureFlag$(ii.TO.IncreaseBulkReinviteLimitForCloud)))return yield this.vNextBulkReinvite(e,t);try{return{successful:yield this.organizationUserApiService.postManyOrganizationUserReinvite(e.id,t),failed:[]}}catch(i){return{failed:t.map(e=>{var t;return{id:e,error:null!==(t=i.message)&&void 0!==t?t:String(i)}})}}})}vNextBulkReinvite(e,t){return wi(this,void 0,void 0,function*(){return this.processBatchedOperation(t,500,t=>this.organizationUserApiService.postManyOrganizationUserReinvite(e.id,t))})}allowResetPassword(e,t,i){let n=!1;switch(t.type){case j.D7.Owner:n=!0;break;case j.D7.Admin:n=e.type!==j.D7.Owner;break;case j.D7.Custom:n=e.type!==j.D7.Owner&&e.type!==j.D7.Admin}return t.canManageUsersPassword&&n&&t.useResetPassword&&t.hasPublicAndPrivateKeys&&e.resetPasswordEnrolled&&i&&e.status===j.Zx.Confirmed}processBatchedOperation(e,t,i){return wi(this,void 0,void 0,function*(){const n=[],s=[];for(let r=0;r<e.length;r+=t){const a=e.slice(r,r+t);try{const e=yield i(a);if(null==e?void 0:e.data)for(const t of e.data)t.error?s.push({id:t.id,error:t.error}):n.push(t)}catch(o){s.push(...a.map(e=>{var t;return{id:e,error:null!==(t=o.message)&&void 0!==t?t:String(o)}}))}}return{successful:n.length>0?new _t.s(n,G.ME):void 0,failed:s}})}}$i.ɵfac=function(e){return new(e||$i)(u.KVO(G.uB),u.KVO(G.Ki),u.KVO(nt.Lu),u.KVO(lt.N),u.KVO(q.w),u.KVO(J.Di),u.KVO(Ri.Q))},$i.ɵprov=u.jDH({token:$i,factory:$i.ɵfac});var Fi=i(76876),Mi=function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};class Ti{constructor(e,t,i){this.keyService=e,this.encryptService=t,this.i18nService=i,this.publicKeys=new Map,this.fingerprints=new Map,this.statuses=new Map,this.done=!1,this.loading=!0,this.submit=()=>Mi(this,void 0,void 0,function*(){this.loading=!0;try{const e=yield this.getCryptoKey(),t=[];for(const i of this.filteredUsers){const n=this.publicKeys.get(i.id);if(null==n)continue;const s=yield this.encryptService.encapsulateKeyUnsigned(e,n);t.push({id:i.id,key:s.encryptedString})}(yield this.postConfirmRequest(t)).data.forEach(e=>{const t=""!==e.error?e.error:this.i18nService.t("bulkConfirmMessage");this.statuses.set(e.id,t)}),this.done=!0}catch(e){this.error=e.message}this.loading=!1})}ngOnInit(){return Mi(this,void 0,void 0,function*(){this.excludedUsers=this.users.filter(e=>!this.isAccepted(e)),this.filteredUsers=this.users.filter(e=>this.isAccepted(e)),this.filteredUsers.length<=0&&(this.done=!0);const e=yield this.getPublicKeys();for(const t of e.data){const e=me.A.fromB64ToArray(t.key),i=yield this.keyService.getFingerprint(t.userId,e);null!=i&&(this.publicKeys.set(t.id,e),this.fingerprints.set(t.id,i.join("-")))}this.loading=!1})}}Ti.ɵfac=function(e){return new(e||Ti)(O.rXU(nt.Lu),O.rXU(lt.N),O.rXU(p.W))},Ti.ɵdir=O.FsC({type:Ti});var Ei=i(57144),Gi=function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};function Ui(e,t){1&e&&(O.j41(0,"bit-callout",8),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.SpI(" ",O.bMT(2,1,"noSelectedUsersApplicable")," "))}function ji(e,t){if(1&e&&(O.j41(0,"bit-callout",9),O.nI1(1,"i18n"),O.EFF(2),O.k0s()),2&e){const e=O.XpG();O.Y8G("title",O.bMT(1,2,"error")),O.R7$(2),O.SpI(" ",e.error," ")}}function Ci(e,t){if(1&e&&(O.j41(0,"p",22),O.EFF(1),O.k0s()),2&e){const e=O.XpG().$implicit;O.R7$(),O.JRh(e.name)}}function xi(e,t){if(1&e&&(O.j41(0,"tr",18)(1,"td",19),O.nrm(2,"bit-avatar",20),O.nI1(3,"userName"),O.k0s(),O.j41(4,"td",14),O.EFF(5),O.DNE(6,Ci,2,1,"p",21),O.k0s(),O.j41(7,"td",14),O.EFF(8),O.k0s()()),2&e){const e=t.$implicit,i=O.XpG(3);O.R7$(2),O.Y8G("text",O.bMT(3,5,e))("id",e.id),O.R7$(3),O.SpI(" ",e.email," "),O.R7$(),O.Y8G("ngIf",e.name),O.R7$(2),O.SpI(" ",i.fingerprints.get(e.id)," ")}}function Di(e,t){if(1&e&&(O.j41(0,"p",22),O.EFF(1),O.k0s()),2&e){const e=O.XpG().$implicit;O.R7$(),O.JRh(e.name)}}function Ni(e,t){if(1&e&&(O.j41(0,"tr",23)(1,"td",19),O.nrm(2,"bit-avatar",20),O.nI1(3,"userName"),O.k0s(),O.j41(4,"td",14),O.EFF(5),O.DNE(6,Di,2,1,"p",21),O.k0s(),O.j41(7,"td",14),O.EFF(8),O.nI1(9,"i18n"),O.k0s()()),2&e){const e=t.$implicit;O.R7$(2),O.Y8G("text",O.bMT(3,5,e))("id",e.id),O.R7$(3),O.SpI(" ",e.email," "),O.R7$(),O.Y8G("ngIf",e.name),O.R7$(2),O.SpI(" ",O.bMT(9,7,"bulkFilteredMessage")," ")}}function Xi(e,t){if(1&e&&O.DNE(0,xi,9,7,"tr",16)(1,Ni,10,9,"tr",17),2&e){const e=O.XpG(2);O.Y8G("ngForOf",e.filteredUsers),O.R7$(),O.Y8G("ngForOf",e.excludedUsers)}}function zi(e,t){1&e&&(O.qex(0),O.j41(1,"p",10),O.EFF(2),O.nI1(3,"i18n"),O.j41(4,"a",11),O.EFF(5),O.nI1(6,"i18n"),O.k0s()(),O.j41(7,"bit-table"),O.qex(8,12),O.j41(9,"tr")(10,"th",13),O.EFF(11),O.nI1(12,"i18n"),O.k0s(),O.j41(13,"th",14),O.EFF(14),O.nI1(15,"i18n"),O.k0s()(),O.bVm(),O.DNE(16,Xi,2,2,"ng-template",15),O.k0s(),O.bVm()),2&e&&(O.R7$(2),O.SpI(" ",O.bMT(3,4,"fingerprintEnsureIntegrityVerify")," "),O.R7$(3),O.SpI(" ",O.bMT(6,6,"learnMore")),O.R7$(6),O.JRh(O.bMT(12,8,"user")),O.R7$(3),O.JRh(O.bMT(15,10,"fingerprint")))}function Ai(e,t){if(1&e&&(O.j41(0,"p",22),O.EFF(1),O.k0s()),2&e){const e=O.XpG().$implicit;O.R7$(),O.JRh(e.name)}}function Pi(e,t){if(1&e&&(O.j41(0,"td",14),O.EFF(1),O.k0s()),2&e){const e=O.XpG().$implicit,t=O.XpG(3);O.R7$(),O.SpI(" ",t.statuses.get(e.id)," ")}}function Yi(e,t){1&e&&(O.j41(0,"td",14),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.SpI(" ",O.bMT(2,1,"bulkFilteredMessage")," "))}function Bi(e,t){if(1&e&&(O.j41(0,"tr",18)(1,"td",19),O.nrm(2,"bit-avatar",20),O.nI1(3,"userName"),O.k0s(),O.j41(4,"td",14),O.EFF(5),O.DNE(6,Ai,2,1,"p",21),O.k0s(),O.DNE(7,Pi,2,1,"td",24)(8,Yi,3,3,"td",24),O.k0s()),2&e){const e=t.$implicit,i=O.XpG(3);O.R7$(2),O.Y8G("text",O.bMT(3,6,e))("id",e.id),O.R7$(3),O.SpI(" ",e.email," "),O.R7$(),O.Y8G("ngIf",e.name),O.R7$(),O.Y8G("ngIf",i.statuses.has(e.id)),O.R7$(),O.Y8G("ngIf",!i.statuses.has(e.id))}}function Vi(e,t){if(1&e&&O.DNE(0,Bi,9,8,"tr",16),2&e){const e=O.XpG(2);O.Y8G("ngForOf",e.filteredUsers)}}function Oi(e,t){1&e&&(O.qex(0),O.j41(1,"bit-table"),O.qex(2,12),O.j41(3,"tr")(4,"th",13),O.EFF(5),O.nI1(6,"i18n"),O.k0s(),O.j41(7,"th",14),O.EFF(8),O.nI1(9,"i18n"),O.k0s()(),O.bVm(),O.DNE(10,Vi,1,1,"ng-template",15),O.k0s(),O.bVm()),2&e&&(O.R7$(5),O.JRh(O.bMT(6,2,"user")),O.R7$(3),O.JRh(O.bMT(9,4,"status")))}function Ji(e,t){if(1&e){const e=O.RV6();O.j41(0,"button",25),O.bIt("click",function(){u.eBV(e);const t=O.XpG();return u.Njj(t.submit())}),O.EFF(1),O.nI1(2,"i18n"),O.k0s()}if(2&e){const e=O.XpG();O.Y8G("disabled",e.loading),O.R7$(),O.SpI(" ",O.bMT(2,2,"confirm")," ")}}class qi extends Ti{constructor(e,t,i,n,s,o,r,a){super(e,i,s),this.keyService=e,this.dialogParams=t,this.encryptService=i,this.organizationUserApiService=n,this.i18nService=s,this.stateProvider=o,this.organizationUserService=r,this.configService=a,this.getCryptoKey=()=>Gi(this,void 0,void 0,function*(){return yield(0,R._)(this.organizationKey$)}),this.getPublicKeys=()=>Gi(this,void 0,void 0,function*(){return yield this.organizationUserApiService.postOrganizationUsersPublicKey(this.organization.id,this.filteredUsers.map(e=>e.id))}),this.isAccepted=e=>e.status===j.Zx.Accepted,this.postConfirmRequest=e=>Gi(this,void 0,void 0,function*(){if(yield(0,R._)(this.configService.getFeatureFlag$(ii.TO.CreateDefaultLocation)))return yield(0,R._)(this.organizationUserService.bulkConfirmUsers(this.organization,e));{const t=new G.Kc(e);return yield this.organizationUserApiService.postOrganizationUserBulkConfirm(this.organization.id,t)}}),this.organization=t.organization,this.organizationKey$=this.stateProvider.activeUserId$.pipe((0,F.n)(e=>this.keyService.orgKeys$(e)),(0,$.T)(e=>e[this.organization.id]),(0,Ze.pQ)()),this.users=t.users}static open(e,t){return e.open(qi,t)}}qi.ɵfac=function(e){return new(e||qi)(O.rXU(nt.Lu),O.rXU(D.Qs),O.rXU(lt.N),O.rXU(G.uB),O.rXU(p.W),O.rXU(z.v2),O.rXU(G.Ki),O.rXU(q.w))},qi.ɵcmp=O.VBU({type:qi,selectors:[["ng-component"]],standalone:!1,features:[O.Vt3],decls:12,vars:12,consts:[["dialogSize","large",3,"title","loading"],["bitDialogContent",""],["type","danger",4,"ngIf"],["type","danger",3,"title",4,"ngIf"],[4,"ngIf"],["bitDialogFooter",""],["bitButton","","type","submit","buttonType","primary",3,"disabled","click",4,"ngIf"],["bitButton","","type","button","buttonType","secondary","bitDialogClose",""],["type","danger"],["type","danger",3,"title"],["bitTypography","body1"],["bitLink","","href","https://bitwarden.com/help/fingerprint-phrase/","target","_blank","rel","noreferrer"],["header",""],["bitCell","","colspan","2"],["bitCell",""],["body",""],["bitRow","","alignContent","middle",4,"ngFor","ngForOf"],["alignContent","middle",4,"ngFor","ngForOf"],["bitRow","","alignContent","middle"],["bitCell","",1,"tw-w-5"],["size","small",3,"text","id"],["class","tw-text-muted tw-text-sm",4,"ngIf"],[1,"tw-text-muted","tw-text-sm"],["alignContent","middle"],["bitCell","",4,"ngIf"],["bitButton","","type","submit","buttonType","primary",3,"click","disabled"]],template:function(e,t){1&e&&(O.j41(0,"bit-dialog",0),O.nI1(1,"i18n"),O.qex(2,1),O.DNE(3,Ui,3,3,"bit-callout",2)(4,ji,3,4,"bit-callout",3)(5,zi,17,12,"ng-container",4)(6,Oi,11,6,"ng-container",4),O.bVm(),O.qex(7,5),O.DNE(8,Ji,3,4,"button",6),O.j41(9,"button",7),O.EFF(10),O.nI1(11,"i18n"),O.k0s(),O.bVm(),O.k0s()),2&e&&(O.Y8G("title",O.bMT(1,8,"confirmUsers"))("loading",t.loading),O.R7$(3),O.Y8G("ngIf",t.filteredUsers.length<=0),O.R7$(),O.Y8G("ngIf",t.error),O.R7$(),O.Y8G("ngIf",!t.loading&&!t.done),O.R7$(),O.Y8G("ngIf",!t.loading&&t.done),O.R7$(2),O.Y8G("ngIf",!t.done),O.R7$(2),O.SpI(" ",O.bMT(11,10,"close")," "))},dependencies:[K.Sq,K.bT,Ei.f,Z.Q,fi.G,ut.I,te.m,ae.L,St.Q,kt.Y,Rt._,Rt.O,pe.r,ge.$,Jt.b],encapsulation:2});var Ki=function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};function Li(e,t){1&e&&(O.j41(0,"bit-callout",8),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.SpI(" ",O.bMT(2,1,"noSelectedMembersApplicable")," "))}function Wi(e,t){if(1&e&&(O.j41(0,"bit-callout",9),O.nI1(1,"i18n"),O.EFF(2),O.k0s()),2&e){const e=O.XpG();O.Y8G("title",O.bMT(1,2,"error")),O.R7$(2),O.SpI(" ",e.error," ")}}function Qi(e,t){1&e&&(O.j41(0,"p",14),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.SpI(" ",O.bMT(2,1,"deleteManyOrganizationUsersWarningDesc")," "))}function _i(e,t){1&e&&(O.j41(0,"span",22),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.SpI(" ",O.bMT(2,1,"invited")," "))}function Hi(e,t){if(1&e&&(O.j41(0,"small",23),O.EFF(1),O.k0s()),2&e){const e=O.XpG().$implicit;O.R7$(),O.JRh(e.name)}}function Zi(e,t){if(1&e&&(O.j41(0,"tr",16)(1,"td",17),O.nrm(2,"bit-avatar",18),O.nI1(3,"userName"),O.k0s(),O.j41(4,"td",19)(5,"div"),O.EFF(6),O.DNE(7,_i,3,3,"span",20),O.k0s(),O.DNE(8,Hi,2,1,"small",21),O.k0s()()),2&e){const e=t.$implicit,i=O.XpG(3);O.R7$(2),O.Y8G("text",O.bMT(3,5,e))("id",e.id),O.R7$(4),O.SpI(" ",e.email," "),O.R7$(),O.Y8G("ngIf",e.status===i.userStatusType.Invited),O.R7$(),O.Y8G("ngIf",e.name)}}function en(e,t){if(1&e&&O.DNE(0,Zi,9,7,"tr",15),2&e){const e=O.XpG(2);O.Y8G("ngForOf",e.users)}}function tn(e,t){if(1&e&&(O.qex(0),O.DNE(1,Qi,3,3,"p",10),O.j41(2,"bit-table"),O.qex(3,11),O.j41(4,"tr")(5,"th",12),O.EFF(6),O.nI1(7,"i18n"),O.k0s()(),O.bVm(),O.DNE(8,en,1,1,"ng-template",13),O.k0s(),O.bVm()),2&e){const e=O.XpG();O.R7$(),O.Y8G("ngIf",e.users.length>0&&!e.error),O.R7$(5),O.JRh(O.bMT(7,2,"member"))}}function nn(e,t){if(1&e&&(O.j41(0,"small",23),O.EFF(1),O.k0s()),2&e){const e=O.XpG().$implicit;O.R7$(),O.JRh(e.name)}}function sn(e,t){if(1&e&&(O.j41(0,"td",19),O.EFF(1),O.k0s()),2&e){const e=O.XpG().$implicit,t=O.XpG(3);O.R7$(),O.SpI(" ",t.statuses.get(e.id)," ")}}function on(e,t){1&e&&(O.j41(0,"td",19),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.SpI(" ",O.bMT(2,1,"bulkFilteredMessage")," "))}function rn(e,t){if(1&e&&(O.j41(0,"tr",16)(1,"td",17),O.nrm(2,"bit-avatar",18),O.nI1(3,"userName"),O.k0s(),O.j41(4,"td",19),O.EFF(5),O.DNE(6,nn,2,1,"small",21),O.k0s(),O.DNE(7,sn,2,1,"td",24)(8,on,3,3,"td",24),O.k0s()),2&e){const e=t.$implicit,i=O.XpG(3);O.R7$(2),O.Y8G("text",O.bMT(3,6,e))("id",e.id),O.R7$(3),O.SpI(" ",e.email," "),O.R7$(),O.Y8G("ngIf",e.name),O.R7$(),O.Y8G("ngIf",i.statuses.has(e.id)),O.R7$(),O.Y8G("ngIf",!i.statuses.has(e.id))}}function an(e,t){if(1&e&&O.DNE(0,rn,9,8,"tr",15),2&e){const e=O.XpG(2);O.Y8G("ngForOf",e.users)}}function cn(e,t){1&e&&(O.qex(0),O.j41(1,"bit-table"),O.qex(2,11),O.j41(3,"tr")(4,"th",12),O.EFF(5),O.nI1(6,"i18n"),O.k0s(),O.j41(7,"th",19),O.EFF(8),O.nI1(9,"i18n"),O.k0s()(),O.bVm(),O.DNE(10,an,1,1,"ng-template",13),O.k0s(),O.bVm()),2&e&&(O.R7$(5),O.JRh(O.bMT(6,2,"member")),O.R7$(3),O.JRh(O.bMT(9,4,"status")))}function ln(e,t){if(1&e){const e=O.RV6();O.j41(0,"button",25),O.bIt("click",function(){u.eBV(e);const t=O.XpG();return u.Njj(t.submit())}),O.EFF(1),O.nI1(2,"i18n"),O.k0s()}if(2&e){const e=O.XpG();O.Y8G("disabled",e.loading),O.R7$(),O.SpI(" ",O.bMT(2,2,"deleteMembers")," ")}}class dn{constructor(e,t,i,n){this.dialogParams=e,this.i18nService=t,this.organizationUserApiService=i,this.deleteManagedMemberWarningService=n,this.loading=!1,this.done=!1,this.error=null,this.statuses=new Map,this.userStatusType=j.Zx,this.organizationId=e.organizationId,this.users=e.users}submit(){return Ki(this,void 0,void 0,function*(){yield this.deleteManagedMemberWarningService.acknowledgeWarning(this.organizationId);try{this.loading=!0,this.error=null;(yield this.organizationUserApiService.deleteManyOrganizationUsers(this.organizationId,this.users.map(e=>e.id))).data.forEach(e=>{this.statuses.set(e.id,e.error?e.error:this.i18nService.t("deletedSuccessfully"))}),this.done=!0}catch(e){this.error=e.message}finally{this.loading=!1}})}static open(e,t){return e.open(dn,t)}}dn.ɵfac=function(e){return new(e||dn)(O.rXU(D.Qs),O.rXU(p.W),O.rXU(G.uB),O.rXU(Y))},dn.ɵcmp=O.VBU({type:dn,selectors:[["ng-component"]],standalone:!1,decls:12,vars:11,consts:[["dialogSize","large",3,"title"],["bitDialogContent",""],["type","danger",4,"ngIf"],["type","danger",3,"title",4,"ngIf"],[4,"ngIf"],["bitDialogFooter",""],["bitButton","","type","submit","buttonType","primary",3,"disabled","click",4,"ngIf"],["bitButton","","type","button","buttonType","secondary","bitDialogClose",""],["type","danger"],["type","danger",3,"title"],["bitTypography","body1",4,"ngIf"],["header",""],["bitCell","","colspan","2"],["body",""],["bitTypography","body1"],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["bitCell","",1,"tw-w-5"],["size","small",3,"text","id"],["bitCell",""],["bitBadge","","class","tw-text-xs","variant","secondary",4,"ngIf"],["class","tw-text-muted tw-block",4,"ngIf"],["bitBadge","","variant","secondary",1,"tw-text-xs"],[1,"tw-text-muted","tw-block"],["bitCell","",4,"ngIf"],["bitButton","","type","submit","buttonType","primary",3,"click","disabled"]],template:function(e,t){1&e&&(O.j41(0,"bit-dialog",0),O.nI1(1,"i18n"),O.qex(2,1),O.DNE(3,Li,3,3,"bit-callout",2)(4,Wi,3,4,"bit-callout",3)(5,tn,9,4,"ng-container",4)(6,cn,11,6,"ng-container",4),O.bVm(),O.qex(7,5),O.DNE(8,ln,3,4,"button",6),O.j41(9,"button",7),O.EFF(10),O.nI1(11,"i18n"),O.k0s(),O.bVm(),O.k0s()),2&e&&(O.Y8G("title",O.bMT(1,7,"deleteMembers")),O.R7$(3),O.Y8G("ngIf",t.users.length<=0),O.R7$(),O.Y8G("ngIf",t.error),O.R7$(),O.Y8G("ngIf",!t.done),O.R7$(),O.Y8G("ngIf",t.done),O.R7$(2),O.Y8G("ngIf",!t.done&&t.users.length>0),O.R7$(2),O.SpI(" ",O.bMT(11,9,"close")," "))},dependencies:[K.Sq,K.bT,Ei.f,H.n,Z.Q,fi.G,ut.I,te.m,St.Q,kt.Y,Rt._,Rt.O,pe.r,ge.$,Jt.b],encapsulation:2});var un=i(58270),pn=function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};function hn(e,t){if(1&e&&(O.j41(0,"div",16),O.EFF(1),O.k0s()),2&e){const e=O.XpG().$implicit;O.R7$(),O.SpI(" ",e.email," ")}}function mn(e,t){if(1&e&&(O.j41(0,"tr",11)(1,"td",5)(2,"div",12),O.nrm(3,"bit-avatar",13),O.nI1(4,"userName"),O.j41(5,"div",14)(6,"div"),O.EFF(7),O.nI1(8,"userName"),O.k0s(),O.DNE(9,hn,2,1,"div",15),O.k0s()()(),O.j41(10,"td",5),O.EFF(11),O.nI1(12,"userType"),O.k0s()()),2&e){const e=t.$implicit;O.R7$(3),O.Y8G("text",O.bMT(4,6,e))("id",e.userId)("color",e.avatarColor),O.R7$(4),O.SpI(" ",O.bMT(8,8,e)," "),O.R7$(2),O.Y8G("ngIf",e.name),O.R7$(2),O.JRh(O.bMT(12,10,e.type))}}function gn(e,t){if(1&e&&(O.DNE(0,mn,13,12,"tr",10),O.nI1(1,"async")),2&e){const e=t.$implicit;O.Y8G("ngForOf",O.bMT(1,1,e))}}class fn{constructor(e,t,i,n,s,o){this.dialogRef=e,this.data=t,this.organizationUserApiService=i,this.platformUtilsService=n,this.i18nService=s,this.toastService=o,this.dataSource=new ni.s,this.submit=()=>pn(this,void 0,void 0,function*(){yield this.organizationUserApiService.putOrganizationUserBulkEnableSecretsManager(this.data.orgId,this.dataSource.data.map(e=>e.id)),this.toastService.showToast({variant:"success",title:null,message:this.i18nService.t("activatedAccessToSecretsManager")}),this.dialogRef.close()})}ngOnInit(){this.dataSource.data=this.data.users}static open(e,t){return e.open(fn,{data:t})}}fn.ɵfac=function(e){return new(e||fn)(O.rXU(h.ce),O.rXU(D.Qs),O.rXU(G.uB),O.rXU(mt.y),O.rXU(p.W),O.rXU(m.f))},fn.ɵcmp=O.VBU({type:fn,selectors:[["ng-component"]],standalone:!1,decls:25,vars:20,consts:[["dialogSize","large"],["bitDialogTitle",""],["bitDialogContent",""],[3,"dataSource"],["header",""],["bitCell",""],["body",""],["bitDialogFooter",""],["type","button","bitButton","","buttonType","primary",3,"bitAction"],["type","button","bitButton","","buttonType","secondary","bitDialogClose",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],[1,"tw-flex","tw-items-center"],["size","small",1,"tw-mr-3",3,"text","id","color"],[1,"tw-flex","tw-flex-col"],["class","tw-text-sm tw-text-muted",4,"ngIf"],[1,"tw-text-sm","tw-text-muted"]],template:function(e,t){1&e&&(O.j41(0,"bit-dialog",0)(1,"span",1),O.EFF(2),O.nI1(3,"i18n"),O.k0s(),O.j41(4,"span",2)(5,"p"),O.EFF(6),O.nI1(7,"i18n"),O.k0s(),O.j41(8,"bit-table",3),O.qex(9,4),O.j41(10,"tr")(11,"th",5),O.EFF(12),O.nI1(13,"i18n"),O.k0s(),O.j41(14,"th",5),O.EFF(15),O.nI1(16,"i18n"),O.k0s()(),O.bVm(),O.DNE(17,gn,2,3,"ng-template",6),O.k0s()(),O.qex(18,7),O.j41(19,"button",8),O.EFF(20),O.nI1(21,"i18n"),O.k0s(),O.j41(22,"button",9),O.EFF(23),O.nI1(24,"i18n"),O.k0s(),O.bVm(),O.k0s()),2&e&&(O.R7$(2),O.JRh(O.bMT(3,8,"activateSecretsManager")),O.R7$(4),O.JRh(O.bMT(7,10,"bulkEnableSecretsManagerDescription")),O.R7$(2),O.Y8G("dataSource",t.dataSource),O.R7$(4),O.JRh(O.bMT(13,12,"member")),O.R7$(3),O.JRh(O.bMT(16,14,"role")),O.R7$(4),O.Y8G("bitAction",t.submit),O.R7$(),O.SpI(" ",O.bMT(21,16,"activateAccess")," "),O.R7$(3),O.SpI(" ",O.bMT(24,18,"close")," "))},dependencies:[K.Sq,K.bT,W.p,Ei.f,Z.Q,ut.I,te.m,St.Q,kt.Y,Rt._,Rt.O,K.Jj,ge.$,Jt.b,un.c],encapsulation:2});var bn=function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};class vn{constructor(e){this.i18nService=e,this.statuses=new Map,this.done=!1,this.loading=!1,this.submit=()=>bn(this,void 0,void 0,function*(){this.loading=!0;try{(yield this.deleteUsers()).data.forEach(e=>{const t=""!==e.error?e.error:this.i18nService.t("bulkRemovedMessage");this.statuses.set(e.id,t)}),this.done=!0}catch(e){this.error=e.message}this.loading=!1})}}function yn(e,t){1&e&&(O.j41(0,"bit-callout",8),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.SpI(" ",O.bMT(2,1,"noSelectedUsersApplicable")," "))}function In(e,t){if(1&e&&(O.j41(0,"bit-callout",9),O.nI1(1,"i18n"),O.EFF(2),O.k0s()),2&e){const e=O.XpG();O.Y8G("title",O.bMT(1,2,"error")),O.R7$(2),O.SpI(" ",e.error," ")}}function Sn(e,t){1&e&&(O.j41(0,"p",16),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.SpI(" ",O.bMT(2,1,"removeMembersWithoutMasterPasswordWarning")," "))}function kn(e,t){if(1&e&&(O.j41(0,"bit-callout",15)(1,"p",16),O.EFF(2),O.k0s(),O.DNE(3,Sn,3,3,"p",17),O.k0s()),2&e){const e=O.XpG(2);O.R7$(2),O.JRh(e.removeUsersWarning),O.R7$(),O.Y8G("ngIf",e.showNoMasterPasswordWarning)}}function Rn(e,t){1&e&&(O.j41(0,"th",18),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.JRh(O.bMT(2,1,"details")))}function wn(e,t){if(1&e&&(O.j41(0,"small",24),O.EFF(1),O.k0s()),2&e){const e=O.XpG().$implicit;O.R7$(),O.JRh(e.name)}}function $n(e,t){1&e&&(O.qex(0),O.EFF(1," - "),O.bVm())}function Fn(e,t){1&e&&(O.qex(0),O.nrm(1,"i",26),O.EFF(2),O.nI1(3,"i18n"),O.bVm()),2&e&&(O.R7$(2),O.SpI(" ",O.bMT(3,1,"noMasterPassword")," "))}function Mn(e,t){if(1&e&&(O.j41(0,"td",18)(1,"span",25),O.DNE(2,$n,2,0,"ng-container",4)(3,Fn,4,3,"ng-container",4),O.k0s()()),2&e){const e=O.XpG().$implicit;O.R7$(2),O.Y8G("ngIf",!0===e.hasMasterPassword),O.R7$(),O.Y8G("ngIf",!1===e.hasMasterPassword)}}function Tn(e,t){if(1&e&&(O.j41(0,"tr",20)(1,"td",21),O.nrm(2,"bit-avatar",22),O.nI1(3,"userName"),O.k0s(),O.j41(4,"td",18),O.EFF(5),O.DNE(6,wn,2,1,"small",23),O.k0s(),O.DNE(7,Mn,4,2,"td",13),O.k0s()),2&e){const e=t.$implicit,i=O.XpG(3);O.R7$(2),O.Y8G("text",O.bMT(3,5,e))("id",e.id),O.R7$(3),O.SpI(" ",e.email," "),O.R7$(),O.Y8G("ngIf",e.name),O.R7$(),O.Y8G("ngIf",i.showNoMasterPasswordWarning)}}function En(e,t){if(1&e&&O.DNE(0,Tn,8,7,"tr",19),2&e){const e=O.XpG(2);O.Y8G("ngForOf",e.users)}}function Gn(e,t){if(1&e&&(O.qex(0),O.DNE(1,kn,4,2,"bit-callout",10),O.j41(2,"bit-table"),O.qex(3,11),O.j41(4,"tr")(5,"th",12),O.EFF(6),O.nI1(7,"i18n"),O.k0s(),O.DNE(8,Rn,3,3,"th",13),O.k0s(),O.bVm(),O.DNE(9,En,1,1,"ng-template",14),O.k0s(),O.bVm()),2&e){const e=O.XpG();O.R7$(),O.Y8G("ngIf",e.users.length>0&&!e.error),O.R7$(5),O.JRh(O.bMT(7,3,"user")),O.R7$(2),O.Y8G("ngIf",e.showNoMasterPasswordWarning)}}function Un(e,t){if(1&e&&(O.j41(0,"small",24),O.EFF(1),O.k0s()),2&e){const e=O.XpG().$implicit;O.R7$(),O.JRh(e.name)}}function jn(e,t){if(1&e&&(O.j41(0,"td",18),O.EFF(1),O.k0s()),2&e){const e=O.XpG().$implicit,t=O.XpG(3);O.R7$(),O.SpI(" ",t.statuses.get(e.id)," ")}}function Cn(e,t){1&e&&(O.j41(0,"td",18),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.SpI(" ",O.bMT(2,1,"bulkFilteredMessage")," "))}function xn(e,t){if(1&e&&(O.j41(0,"tr",20)(1,"td",21),O.nrm(2,"bit-avatar",22),O.nI1(3,"userName"),O.k0s(),O.j41(4,"td",18),O.EFF(5),O.DNE(6,Un,2,1,"small",23),O.k0s(),O.DNE(7,jn,2,1,"td",13)(8,Cn,3,3,"td",13),O.k0s()),2&e){const e=t.$implicit,i=O.XpG(3);O.R7$(2),O.Y8G("text",O.bMT(3,6,e))("id",e.id),O.R7$(3),O.SpI(" ",e.email," "),O.R7$(),O.Y8G("ngIf",e.name),O.R7$(),O.Y8G("ngIf",i.statuses.has(e.id)),O.R7$(),O.Y8G("ngIf",!i.statuses.has(e.id))}}function Dn(e,t){if(1&e&&O.DNE(0,xn,9,8,"tr",19),2&e){const e=O.XpG(2);O.Y8G("ngForOf",e.users)}}function Nn(e,t){1&e&&(O.qex(0),O.j41(1,"bit-table"),O.qex(2,11),O.j41(3,"tr")(4,"th",12),O.EFF(5),O.nI1(6,"i18n"),O.k0s(),O.j41(7,"th",18),O.EFF(8),O.nI1(9,"i18n"),O.k0s()(),O.bVm(),O.DNE(10,Dn,1,1,"ng-template",14),O.k0s(),O.bVm()),2&e&&(O.R7$(5),O.JRh(O.bMT(6,2,"user")),O.R7$(3),O.JRh(O.bMT(9,4,"status")))}function Xn(e,t){if(1&e&&(O.j41(0,"button",27),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e){const e=O.XpG();O.Y8G("disabled",e.loading)("bitAction",e.submit),O.R7$(),O.SpI(" ",O.bMT(2,3,"removeMembers")," ")}}vn.ɵfac=function(e){return new(e||vn)(O.rXU(p.W))},vn.ɵdir=O.FsC({type:vn});class zn extends vn{constructor(e,t,i){super(t),this.dialogParams=e,this.i18nService=t,this.organizationUserApiService=i,this.deleteUsers=()=>this.organizationUserApiService.removeManyOrganizationUsers(this.organizationId,this.users.map(e=>e.id)),this.organizationId=e.organizationId,this.users=e.users,this.showNoMasterPasswordWarning=this.users.some(e=>e.status>j.Zx.Invited&&!1===e.hasMasterPassword)}get removeUsersWarning(){return this.i18nService.t("removeOrgUsersConfirmation")}static open(e,t){return e.open(zn,t)}}zn.ɵfac=function(e){return new(e||zn)(O.rXU(D.Qs),O.rXU(p.W),O.rXU(G.uB))},zn.ɵcmp=O.VBU({type:zn,selectors:[["ng-component"]],standalone:!1,features:[O.Vt3],decls:12,vars:11,consts:[["dialogSize","large",3,"title"],["bitDialogContent",""],["type","danger",4,"ngIf"],["type","danger",3,"title",4,"ngIf"],[4,"ngIf"],["bitDialogFooter",""],["bitButton","","type","submit","buttonType","primary",3,"disabled","bitAction",4,"ngIf"],["bitButton","","type","button","buttonType","secondary","bitDialogClose",""],["type","danger"],["type","danger",3,"title"],["type","warning",4,"ngIf"],["header",""],["bitCell","","colspan","2"],["bitCell","",4,"ngIf"],["body",""],["type","warning"],["bitTypography","body1"],["bitTypography","body1",4,"ngIf"],["bitCell",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["bitCell","",1,"tw-w-5"],["size","small",3,"text","id"],["class","tw-text-muted tw-block",4,"ngIf"],[1,"tw-text-muted","tw-block"],[1,"tw-text-muted","tw-block","tw-lowercase"],["aria-hidden","true",1,"bwi","bwi-exclamation-triangle"],["bitButton","","type","submit","buttonType","primary",3,"disabled","bitAction"]],template:function(e,t){1&e&&(O.j41(0,"bit-dialog",0),O.nI1(1,"i18n"),O.qex(2,1),O.DNE(3,yn,3,3,"bit-callout",2)(4,In,3,4,"bit-callout",3)(5,Gn,10,5,"ng-container",4)(6,Nn,11,6,"ng-container",4),O.bVm(),O.qex(7,5),O.DNE(8,Xn,3,5,"button",6),O.j41(9,"button",7),O.EFF(10),O.nI1(11,"i18n"),O.k0s(),O.bVm(),O.k0s()),2&e&&(O.Y8G("title",O.bMT(1,7,"removeMembers")),O.R7$(3),O.Y8G("ngIf",t.users.length<=0),O.R7$(),O.Y8G("ngIf",t.error),O.R7$(),O.Y8G("ngIf",!t.done),O.R7$(),O.Y8G("ngIf",t.done),O.R7$(2),O.Y8G("ngIf",!t.done&&t.users.length>0),O.R7$(2),O.SpI(" ",O.bMT(11,9,"close")," "))},dependencies:[K.Sq,K.bT,W.p,Ei.f,Z.Q,fi.G,ut.I,te.m,St.Q,kt.Y,Rt._,Rt.O,pe.r,ge.$,Jt.b],encapsulation:2});var An=function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};const Pn=e=>({$implicit:e});function Yn(e,t){1&e&&(O.j41(0,"bit-callout",11),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.SpI(" ",O.bMT(2,1,"noSelectedUsersApplicable")," "))}function Bn(e,t){if(1&e&&(O.j41(0,"bit-callout",11),O.EFF(1),O.k0s()),2&e){const e=O.XpG();O.R7$(),O.SpI(" ",e.error," ")}}function Vn(e,t){1&e&&(O.j41(0,"bit-callout",12),O.nI1(1,"i18n"),O.EFF(2),O.nI1(3,"i18n"),O.k0s()),2&e&&(O.Y8G("title",O.mNQ(O.bMT(1,3,"nonCompliantMembersTitle"))),O.R7$(2),O.SpI(" ",O.bMT(3,5,"nonCompliantMembersError")," "))}function On(e,t){if(1&e&&(O.qex(0),O.j41(1,"div",17),O.EFF(2),O.j41(3,"small",18),O.EFF(4),O.k0s()(),O.bVm()),2&e){const e=O.XpG().$implicit;O.R7$(),O.Y8G("title",e.name+" "+e.email),O.R7$(),O.SpI(" ",e.name," "),O.R7$(2),O.SpI(" ",e.email," ")}}function Jn(e,t){if(1&e&&(O.j41(0,"div",17),O.EFF(1),O.k0s()),2&e){const e=O.XpG().$implicit;O.Y8G("title",e.email),O.R7$(),O.JRh(e.email)}}function qn(e,t){if(1&e&&(O.j41(0,"div",13)(1,"div",14),O.nrm(2,"bit-avatar",15),O.nI1(3,"userName"),O.k0s(),O.DNE(4,On,5,3,"ng-container",16)(5,Jn,2,2,"ng-template",null,1,O.C5r),O.k0s()),2&e){const e=t.$implicit,i=O.sdS(6);O.R7$(2),O.Y8G("text",O.bMT(3,4,e))("id",e.id),O.R7$(2),O.Y8G("ngIf",e.name)("ngIfElse",i)}}function Kn(e,t){1&e&&(O.j41(0,"p"),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.JRh(O.bMT(2,1,"revokeUsersWarning")))}function Ln(e,t){1&e&&(O.j41(0,"th",23),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.SpI(" ",O.bMT(2,1,"details")," "))}function Wn(e,t){1&e&&O.eu8(0)}function Qn(e,t){1&e&&(O.qex(0),O.EFF(1," - "),O.bVm())}function _n(e,t){1&e&&(O.qex(0),O.nrm(1,"i",29),O.EFF(2),O.nI1(3,"i18n"),O.bVm()),2&e&&(O.R7$(2),O.SpI(" ",O.bMT(3,1,"noMasterPassword")," "))}function Hn(e,t){if(1&e&&(O.j41(0,"td",23)(1,"span",28),O.DNE(2,Qn,2,0,"ng-container",7)(3,_n,4,3,"ng-container",7),O.k0s()()),2&e){const e=O.XpG().$implicit;O.R7$(2),O.Y8G("ngIf",!0===e.hasMasterPassword),O.R7$(),O.Y8G("ngIf",!1===e.hasMasterPassword)}}function Zn(e,t){if(1&e&&(O.j41(0,"tr",25)(1,"td",26),O.DNE(2,Wn,1,0,"ng-container",27),O.k0s(),O.DNE(3,Hn,4,2,"td",21),O.k0s()),2&e){const e=t.$implicit,i=O.XpG(3),n=O.sdS(9);O.R7$(2),O.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",O.eq3(3,Pn,e)),O.R7$(),O.Y8G("ngIf",i.showNoMasterPasswordWarning)}}function es(e,t){if(1&e&&O.DNE(0,Zn,4,5,"tr",24),2&e){const e=O.XpG(2);O.Y8G("ngForOf",e.users)}}function ts(e,t){if(1&e&&(O.qex(0),O.DNE(1,Kn,3,3,"p",7),O.j41(2,"bit-table"),O.qex(3,19),O.j41(4,"tr")(5,"th",20),O.EFF(6),O.nI1(7,"i18n"),O.k0s(),O.DNE(8,Ln,3,3,"th",21),O.k0s(),O.bVm(),O.DNE(9,es,1,1,"ng-template",22),O.k0s(),O.bVm()),2&e){const e=O.XpG();O.R7$(),O.Y8G("ngIf",e.users.length>0&&!e.error&&e.isRevoking),O.R7$(5),O.JRh(O.bMT(7,3,"member")),O.R7$(2),O.Y8G("ngIf",e.showNoMasterPasswordWarning)}}function is(e,t){1&e&&O.eu8(0)}function ns(e,t){if(1&e&&(O.j41(0,"td",20),O.EFF(1),O.k0s()),2&e){const e=O.XpG().$implicit,t=O.XpG(3);O.R7$(),O.SpI(" ",t.statuses.get(e.id)," ")}}function ss(e,t){1&e&&(O.j41(0,"td",20),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.SpI(" ",O.bMT(2,1,"bulkFilteredMessage")," "))}function os(e,t){if(1&e&&(O.j41(0,"tr",25)(1,"td",26),O.DNE(2,is,1,0,"ng-container",27),O.k0s(),O.DNE(3,ns,2,1,"td",30)(4,ss,3,3,"td",30),O.k0s()),2&e){const e=t.$implicit,i=O.XpG(3),n=O.sdS(9);O.R7$(2),O.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",O.eq3(4,Pn,e)),O.R7$(),O.Y8G("ngIf",i.statuses.has(e.id)),O.R7$(),O.Y8G("ngIf",!i.statuses.has(e.id))}}function rs(e,t){if(1&e&&O.DNE(0,os,5,6,"tr",24),2&e){const e=O.XpG(2);O.Y8G("ngForOf",e.users)}}function as(e,t){1&e&&(O.qex(0),O.j41(1,"bit-table"),O.qex(2,19),O.j41(3,"tr")(4,"th",23),O.EFF(5),O.nI1(6,"i18n"),O.k0s(),O.j41(7,"th",23),O.EFF(8),O.nI1(9,"i18n"),O.k0s()(),O.bVm(),O.DNE(10,rs,1,1,"ng-template",22),O.k0s(),O.bVm()),2&e&&(O.R7$(5),O.SpI(" ",O.bMT(6,2,"member")," "),O.R7$(3),O.JRh(O.bMT(9,4,"status")))}function cs(e,t){if(1&e&&(O.j41(0,"button",31),O.EFF(1),O.k0s()),2&e){const e=O.XpG();O.Y8G("bitAction",e.submit),O.R7$(),O.SpI(" ",e.bulkTitle," ")}}class ls{constructor(e,t,i){this.i18nService=e,this.organizationUserApiService=t,this.data=i,this.statuses=new Map,this.loading=!1,this.done=!1,this.showNoMasterPasswordWarning=!1,this.nonCompliantMembers=!1,this.submit=()=>An(this,void 0,void 0,function*(){try{const e=yield this.performBulkUserAction(),t=this.isRevoking?"bulkRevokedMessage":"bulkRestoredMessage";e.data.forEach(e=>An(this,void 0,void 0,function*(){const i=""!==e.error?this.i18nService.t("cannotRestoreAccessError"):this.i18nService.t(t);this.statuses.set(e.id,i),""!==e.error&&(this.nonCompliantMembers=!0)})),this.done=!0}catch(e){this.error=e.message}}),this.isRevoking=i.isRevoking,this.organizationId=i.organizationId,this.users=i.users,this.showNoMasterPasswordWarning=this.users.some(e=>e.status>j.Zx.Invited&&!1===e.hasMasterPassword)}get bulkTitle(){const e=this.isRevoking?"revokeMembers":"restoreMembers";return this.i18nService.t(e)}performBulkUserAction(){return An(this,void 0,void 0,function*(){const e=this.users.map(e=>e.id);return this.isRevoking?yield this.organizationUserApiService.revokeManyOrganizationUsers(this.organizationId,e):yield this.organizationUserApiService.restoreManyOrganizationUsers(this.organizationId,e)})}static open(e,t){return e.open(ls,{data:t})}}ls.ɵfac=function(e){return new(e||ls)(O.rXU(p.W),O.rXU(G.uB),O.rXU(D.Qs))},ls.ɵcmp=O.VBU({type:ls,selectors:[["app-bulk-restore-revoke"]],standalone:!1,decls:17,vars:10,consts:[["userDisplay",""],["emailOnly",""],["dialogSize","large"],["bitDialogTitle",""],["bitDialogContent",""],["type","danger",4,"ngIf"],["type","danger",3,"title",4,"ngIf"],[4,"ngIf"],["bitDialogFooter",""],["type","button","bitButton","","buttonType","primary",3,"bitAction",4,"ngIf"],["type","button","bitButton","","buttonType","secondary","bitDialogClose",""],["type","danger"],["type","danger",3,"title"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-6"],["size","small",3,"text","id"],[4,"ngIf","ngIfElse"],[1,"tw-truncate",3,"title"],[1,"tw-block","tw-text-muted","tw-truncate"],["header",""],["bitCell",""],["bitCell","","class","tw-w-1/2",4,"ngIf"],["body",""],["bitCell","",1,"tw-w-1/2"],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["bitCell","",1,"tw-max-w-0"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"tw-block","tw-lowercase","tw-text-muted"],["aria-hidden","true",1,"bwi","bwi-exclamation-triangle"],["bitCell","",4,"ngIf"],["type","button","bitButton","","buttonType","primary",3,"bitAction"]],template:function(e,t){1&e&&(O.j41(0,"bit-dialog",2),O.qex(1,3),O.j41(2,"span"),O.EFF(3),O.k0s(),O.bVm(),O.j41(4,"div",4),O.DNE(5,Yn,3,3,"bit-callout",5)(6,Bn,2,1,"bit-callout",5)(7,Vn,4,7,"bit-callout",6)(8,qn,7,6,"ng-template",null,0,O.C5r)(10,ts,10,5,"ng-container",7)(11,as,11,6,"ng-container",7),O.k0s(),O.qex(12,8),O.DNE(13,cs,2,2,"button",9),O.j41(14,"button",10),O.EFF(15),O.nI1(16,"i18n"),O.k0s(),O.bVm(),O.k0s()),2&e&&(O.R7$(3),O.JRh(t.bulkTitle),O.R7$(2),O.Y8G("ngIf",t.users.length<=0),O.R7$(),O.Y8G("ngIf",t.error),O.R7$(),O.Y8G("ngIf",t.nonCompliantMembers),O.R7$(3),O.Y8G("ngIf",!t.done),O.R7$(),O.Y8G("ngIf",t.done),O.R7$(2),O.Y8G("ngIf",!t.done&&t.users.length>0),O.R7$(2),O.SpI(" ",O.bMT(16,8,"close")," "))},dependencies:[K.Sq,K.bT,K.T3,W.p,Ei.f,Z.Q,fi.G,ut.I,te.m,St.Q,kt.Y,Rt._,Rt.O,ge.$,Jt.b],encapsulation:2});var ds=function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};function us(e,t){1&e&&(O.j41(0,"div",6),O.nrm(1,"i",7),O.nI1(2,"i18n"),O.EFF(3),O.nI1(4,"i18n"),O.k0s()),2&e&&(O.R7$(),O.Y8G("title",O.mNQ(O.bMT(2,3,"loading"))),O.R7$(2),O.SpI(" ",O.bMT(4,5,"loading")," "))}function ps(e,t){if(1&e&&(O.j41(0,"small",19),O.EFF(1),O.k0s()),2&e){const e=O.XpG().$implicit;O.R7$(),O.JRh(e.user.name)}}function hs(e,t){if(1&e&&(O.j41(0,"td",20),O.EFF(1),O.k0s()),2&e){const e=O.XpG().$implicit;O.R7$(),O.SpI(" ",e.message," ")}}function ms(e,t){if(1&e&&(O.j41(0,"td",10),O.EFF(1),O.k0s()),2&e){const e=O.XpG().$implicit;O.R7$(),O.SpI(" ",e.message," ")}}function gs(e,t){if(1&e&&(O.j41(0,"tr",13)(1,"td",14),O.nrm(2,"bit-avatar",15),O.nI1(3,"userName"),O.k0s(),O.j41(4,"td",10),O.EFF(5),O.DNE(6,ps,2,1,"small",16),O.k0s(),O.DNE(7,hs,2,1,"td",17)(8,ms,2,1,"td",18),O.k0s()),2&e){const e=t.$implicit;O.R7$(2),O.Y8G("text",O.bMT(3,6,e.user))("id",e.user.id),O.R7$(3),O.SpI(" ",e.user.email," "),O.R7$(),O.Y8G("ngIf",e.user.name),O.R7$(),O.Y8G("ngIf",e.error),O.R7$(),O.Y8G("ngIf",!e.error)}}function fs(e,t){if(1&e&&O.DNE(0,gs,9,8,"tr",12),2&e){const e=O.XpG(2);O.Y8G("ngForOf",e.users)}}function bs(e,t){1&e&&(O.j41(0,"bit-table"),O.qex(1,8),O.j41(2,"tr")(3,"th",9),O.EFF(4),O.nI1(5,"i18n"),O.k0s(),O.j41(6,"th",10),O.EFF(7),O.nI1(8,"i18n"),O.k0s()(),O.bVm(),O.DNE(9,fs,1,1,"ng-template",11),O.k0s()),2&e&&(O.R7$(4),O.JRh(O.bMT(5,2,"user")),O.R7$(3),O.JRh(O.bMT(8,4,"status")))}class vs{constructor(e,t,i){this.data=e,this.i18nService=t,this.logService=i,this.loading=!1}ngOnInit(){return ds(this,void 0,void 0,function*(){this.loading=!0,yield this.showBulkStatus(this.data)})}showBulkStatus(e){return ds(this,void 0,void 0,function*(){try{const t=(yield e.request).data.filter(e=>""!==e.error).reduce((e,t)=>Object.assign(Object.assign({},e),{[t.id]:t.error}),{}),i=e.filteredUsers.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.id]:t}),{});this.users=e.users.map(n=>{var s;let o=null!==(s=t[n.id])&&void 0!==s?s:e.successfulMessage;return i.hasOwnProperty(n.id)||(o=this.i18nService.t("bulkFilteredMessage")),{user:n,error:t.hasOwnProperty(n.id),message:o}}),this.loading=!1}catch(t){this.logService.error(t)}})}static open(e,t){return e.open(vs,t)}}vs.ɵfac=function(e){return new(e||vs)(O.rXU(D.Qs),O.rXU(p.W),O.rXU(it.K))},vs.ɵcmp=O.VBU({type:vs,selectors:[["app-bulk-status"]],standalone:!1,decls:9,vars:8,consts:[["dialogSize","large",3,"title"],["bitDialogContent",""],["class","tw-text-center",4,"ngIf"],[4,"ngIf"],["bitDialogFooter",""],["bitButton","","type","button","buttonType","secondary","bitDialogClose",""],[1,"tw-text-center"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["header",""],["colspan","2","bitCell",""],["bitCell",""],["body",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["width","30","bitCell",""],["size","small",3,"text","id"],["class","tw-text-muted tw-block",4,"ngIf"],["class","tw-text-danger","bitCell","",4,"ngIf"],["bitCell","",4,"ngIf"],[1,"tw-text-muted","tw-block"],["bitCell","",1,"tw-text-danger"]],template:function(e,t){1&e&&(O.j41(0,"bit-dialog",0),O.nI1(1,"i18n"),O.qex(2,1),O.DNE(3,us,5,7,"div",2)(4,bs,10,6,"bit-table",3),O.bVm(),O.qex(5,4),O.j41(6,"button",5),O.EFF(7),O.nI1(8,"i18n"),O.k0s(),O.bVm(),O.k0s()),2&e&&(O.Y8G("title",O.bMT(1,4,"bulkConfirmStatus")),O.R7$(3),O.Y8G("ngIf",t.loading),O.R7$(),O.Y8G("ngIf",!t.loading),O.R7$(3),O.SpI(" ",O.bMT(8,6,"close")," "))},dependencies:[K.Sq,K.bT,Ei.f,Z.Q,ut.I,te.m,St.Q,kt.Y,Rt._,Rt.O,ge.$,Jt.b],encapsulation:2});var ys=function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};class Is{constructor(e,t,i,n,s){this.dialogService=e,this.i18nService=t,this.toastService=i,this.userNamePipe=n,this.deleteManagedMemberWarningService=s}openInviteDialog(e,t,i){return ys(this,void 0,void 0,function*(){var n,s;const o=We(this.dialogService,{data:{kind:"Add",organizationId:e.id,allOrganizationUserEmails:i,occupiedSeatCount:null!==(n=null==t?void 0:t.organizationOccupiedSeats)&&void 0!==n?n:0,isOnSecretsManagerStandalone:null!==(s=null==t?void 0:t.isOnSecretsManagerStandalone)&&void 0!==s&&s}}),a=yield(0,r.s)(o.closed);return null!=a?a:qe.Canceled})}openEditDialog(e,t,i){return ys(this,arguments,void 0,function*(e,t,i,n=Je.Role){var s;const o=We(this.dialogService,{data:{kind:"Edit",name:this.userNamePipe.transform(e),organizationId:t.id,organizationUserId:e.id,usesKeyConnector:e.usesKeyConnector,isOnSecretsManagerStandalone:null!==(s=null==i?void 0:i.isOnSecretsManagerStandalone)&&void 0!==s&&s,initialTab:n,managedByOrganization:e.managedByOrganization}}),a=yield(0,r.s)(o.closed);return null!=a?a:qe.Canceled})}openAccountRecoveryDialog(e,t){return ys(this,void 0,void 0,function*(){const i=yi.open(this.dialogService,{data:{name:this.userNamePipe.transform(e),email:e.email,organizationId:t.id,organizationUserId:e.id}}),n=yield(0,r.s)(i.closed);return null!=n?n:vi})}openBulkConfirmDialog(e,t){return ys(this,void 0,void 0,function*(){const i=qi.open(this.dialogService,{data:{organization:e,users:t}});yield(0,r.s)(i.closed)})}openBulkRemoveDialog(e,t){return ys(this,void 0,void 0,function*(){const i=zn.open(this.dialogService,{data:{organizationId:e.id,users:t}});yield(0,r.s)(i.closed)})}openBulkDeleteDialog(e,t){return ys(this,void 0,void 0,function*(){if(!(yield(0,R._)(this.deleteManagedMemberWarningService.warningAcknowledged(e.id)))&&e.canManageUsers&&e.productTierType===a.K_.Enterprise){if(!(yield this.deleteManagedMemberWarningService.showWarning()))return}const i=dn.open(this.dialogService,{data:{organizationId:e.id,users:t}});yield(0,r.s)(i.closed)})}openBulkRestoreRevokeDialog(e,t,i){return ys(this,void 0,void 0,function*(){const n=ls.open(this.dialogService,{organizationId:e.id,users:t,isRevoking:i});yield(0,R._)(n.closed)})}openBulkEnableSecretsManagerDialog(e,t){return ys(this,void 0,void 0,function*(){const i=t.filter(e=>!e.accessSecretsManager);if(0===i.length)return void this.toastService.showToast({variant:"error",title:this.i18nService.t("errorOccurred"),message:this.i18nService.t("noSelectedUsersApplicable")});const n=fn.open(this.dialogService,{orgId:e.id,users:i});yield(0,r.s)(n.closed)})}openBulkStatusDialog(e,t,i,n){return ys(this,void 0,void 0,function*(){const s=vs.open(this.dialogService,{data:{users:e,filteredUsers:t,request:i,successfulMessage:n}});yield(0,r.s)(s.closed)})}openEventsDialog(e,t){(0,Fi.l)(this.dialogService,{data:{name:this.userNamePipe.transform(e),organizationId:t.id,entityId:e.id,showUser:!1,entity:"user"}})}openRemoveUserConfirmationDialog(e){return ys(this,void 0,void 0,function*(){const t=e.usesKeyConnector?"removeUserConfirmationKeyConnector":"removeOrgUserConfirmation";return!!(yield this.dialogService.openSimpleDialog({title:{key:"removeUserIdAccess",placeholders:[this.userNamePipe.transform(e)]},content:{key:t},type:"warning"}))&&(!(e.status>0&&!1===e.hasMasterPassword)||(yield this.openNoMasterPasswordConfirmationDialog(e)))})}openRevokeUserConfirmationDialog(e){return ys(this,void 0,void 0,function*(){return!!(yield this.dialogService.openSimpleDialog({title:{key:"revokeAccess",placeholders:[this.userNamePipe.transform(e)]},content:this.i18nService.t("revokeUserConfirmation"),acceptButtonText:{key:"revokeAccess"},type:"warning"}))&&(!(e.status>0&&!1===e.hasMasterPassword)||(yield this.openNoMasterPasswordConfirmationDialog(e)))})}openDeleteUserConfirmationDialog(e,t){return ys(this,void 0,void 0,function*(){if(!(yield(0,R._)(this.deleteManagedMemberWarningService.warningAcknowledged(t.id)))&&t.canManageUsers&&t.productTierType===a.K_.Enterprise){if(!(yield this.deleteManagedMemberWarningService.showWarning()))return!1}const i=yield this.dialogService.openSimpleDialog({title:{key:"deleteOrganizationUser",placeholders:[this.userNamePipe.transform(e)]},content:{key:"deleteOrganizationUserWarningDesc",placeholders:[this.userNamePipe.transform(e)]},type:"warning",acceptButtonText:{key:"delete"},cancelButtonText:{key:"cancel"}});return i&&(yield this.deleteManagedMemberWarningService.acknowledgeWarning(t.id)),i})}openNoMasterPasswordConfirmationDialog(e){return ys(this,void 0,void 0,function*(){return this.dialogService.openSimpleDialog({title:{key:"removeOrgUserNoMasterPasswordTitle"},content:{key:"removeOrgUserNoMasterPasswordDesc",placeholders:[this.userNamePipe.transform(e)]},type:"warning"})})}}Is.ɵfac=function(e){return new(e||Is)(u.KVO(h.o3),u.KVO(p.W),u.KVO(m.f),u.KVO(Jt.b),u.KVO(Y))},Is.ɵprov=u.jDH({token:Is,factory:Is.ɵfac});var Ss=i(27866),ks=i(94438),Rs=i(32924),ws=i(32316),$s=i(12694),Fs=i(16496),Ms=i(5520),Ts=i(69672),Es=i(440),Gs=function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};function Us(e,t){if(1&e){const e=O.RV6();O.j41(0,"button",11),O.bIt("click",function(){u.eBV(e);const t=O.XpG(2),i=O.r8f(0);return u.Njj(t.invite(i))}),O.nrm(1,"i",12),O.EFF(2),O.nI1(3,"i18n"),O.k0s()}if(2&e){const e=O.XpG(2);O.Y8G("disabled",!e.firstLoaded),O.R7$(2),O.SpI(" ",O.bMT(3,2,"inviteMember")," ")}}function js(e,t){if(1&e&&(O.j41(0,"span",16),O.EFF(1),O.k0s()),2&e){const e=t.ngIf;O.R7$(),O.JRh(e)}}function Cs(e,t){if(1&e&&(O.j41(0,"span",16),O.EFF(1),O.k0s()),2&e){const e=t.ngIf;O.R7$(),O.JRh(e)}}function xs(e,t){if(1&e&&(O.j41(0,"span",16),O.EFF(1),O.k0s()),2&e){const e=t.ngIf;O.R7$(),O.JRh(e)}}function Ds(e,t){if(1&e&&(O.j41(0,"span",16),O.EFF(1),O.k0s()),2&e){const e=t.ngIf;O.R7$(),O.JRh(e)}}function Ns(e,t){if(1&e){const e=O.RV6();O.j41(0,"bit-toggle-group",13),O.nI1(1,"i18n"),O.bIt("selectedChange",function(t){u.eBV(e);const i=O.XpG(2);return u.Njj(i.statusToggle.next(t))}),O.j41(2,"bit-toggle",14),O.EFF(3),O.nI1(4,"i18n"),O.DNE(5,js,2,1,"span",15),O.k0s(),O.j41(6,"bit-toggle",14),O.EFF(7),O.nI1(8,"i18n"),O.DNE(9,Cs,2,1,"span",15),O.k0s(),O.j41(10,"bit-toggle",14),O.EFF(11),O.nI1(12,"i18n"),O.DNE(13,xs,2,1,"span",15),O.k0s(),O.j41(14,"bit-toggle",14),O.EFF(15),O.nI1(16,"i18n"),O.DNE(17,Ds,2,1,"span",15),O.k0s()()}if(2&e){const e=O.XpG(2);O.Y8G("selected",e.status),O.BMQ("aria-label",O.bMT(1,14,"memberStatusFilter")),O.R7$(2),O.Y8G("value",null),O.R7$(),O.SpI(" ",O.bMT(4,16,"all")," "),O.R7$(2),O.Y8G("ngIf",e.dataSource.activeUserCount),O.R7$(),O.Y8G("value",e.userStatusType.Invited),O.R7$(),O.SpI(" ",O.bMT(8,18,"invited")," "),O.R7$(2),O.Y8G("ngIf",e.dataSource.invitedUserCount),O.R7$(),O.Y8G("value",e.userStatusType.Accepted),O.R7$(),O.SpI(" ",O.bMT(12,20,"needsConfirmation")," "),O.R7$(2),O.Y8G("ngIf",e.dataSource.acceptedUserCount),O.R7$(),O.Y8G("value",e.userStatusType.Revoked),O.R7$(),O.SpI(" ",O.bMT(16,22,"revoked")," "),O.R7$(2),O.Y8G("ngIf",e.dataSource.revokedUserCount)}}function Xs(e,t){1&e&&(O.qex(0),O.nrm(1,"i",17),O.nI1(2,"i18n"),O.j41(3,"span",18),O.EFF(4),O.nI1(5,"i18n"),O.k0s(),O.bVm()),2&e&&(O.R7$(),O.Y8G("title",O.mNQ(O.bMT(2,3,"loading"))),O.R7$(3),O.JRh(O.bMT(5,5,"loading")))}function zs(e,t){1&e&&(O.j41(0,"p"),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.JRh(O.bMT(2,1,"noMembersInList")))}function As(e,t){1&e&&(O.j41(0,"bit-callout",31),O.nI1(1,"i18n"),O.EFF(2),O.nI1(3,"i18n"),O.k0s()),2&e&&(O.Y8G("title",O.mNQ(O.bMT(1,3,"confirmUsers"))),O.R7$(2),O.SpI(" ",O.bMT(3,5,"usersNeedConfirmed")," "))}function Ps(e,t){if(1&e){const e=O.RV6();O.j41(0,"th",32)(1,"input",33),O.bIt("change",function(t){u.eBV(e);const i=O.XpG(4);return u.Njj(i.dataSource.checkAllFilteredUsers(t.target.checked))}),O.k0s(),O.j41(2,"label",34),O.EFF(3),O.nI1(4,"i18n"),O.k0s()()}2&e&&(O.R7$(3),O.JRh(O.bMT(4,1,"all")))}function Ys(e,t){if(1&e&&(O.nrm(0,"button",35),O.nI1(1,"i18n")),2&e){O.XpG();const e=O.sdS(22);O.Y8G("label",O.mNQ(O.bMT(1,3,"options")))("bitMenuTriggerFor",e)}}function Bs(e,t){if(1&e){const e=O.RV6();O.qex(0),O.j41(1,"button",36),O.bIt("click",function(){u.eBV(e);const t=O.XpG(4),i=O.r8f(0);return u.Njj(t.bulkEnableSM(i))}),O.EFF(2),O.nI1(3,"i18n"),O.k0s(),O.nrm(4,"bit-menu-divider"),O.bVm()}2&e&&(O.R7$(2),O.SpI(" ",O.bMT(3,1,"activateSecretsManager")," "))}function Vs(e,t){if(1&e){const e=O.RV6();O.j41(0,"button",36),O.bIt("click",function(){u.eBV(e);const t=O.XpG(4),i=O.r8f(0);return u.Njj(t.bulkReinvite(i))}),O.nrm(1,"i",37),O.EFF(2),O.nI1(3,"i18n"),O.k0s()}2&e&&(O.R7$(2),O.SpI(" ",O.bMT(3,1,"reinviteSelected")," "))}function Os(e,t){if(1&e){const e=O.RV6();O.j41(0,"button",36),O.bIt("click",function(){u.eBV(e);const t=O.XpG(4),i=O.r8f(0);return u.Njj(t.bulkConfirm(i))}),O.j41(1,"span",38),O.nrm(2,"i",39),O.EFF(3),O.nI1(4,"i18n"),O.k0s()()}2&e&&(O.R7$(3),O.SpI(" ",O.bMT(4,1,"confirmSelected")," "))}function Js(e,t){if(1&e){const e=O.RV6();O.j41(0,"button",36),O.bIt("click",function(){u.eBV(e);const t=O.XpG(4),i=O.r8f(0);return u.Njj(t.bulkRestore(i))}),O.nrm(1,"i",40),O.EFF(2),O.nI1(3,"i18n"),O.k0s()}2&e&&(O.R7$(2),O.SpI(" ",O.bMT(3,1,"restoreAccess")," "))}function qs(e,t){if(1&e){const e=O.RV6();O.j41(0,"button",36),O.bIt("click",function(){u.eBV(e);const t=O.XpG(4),i=O.r8f(0);return u.Njj(t.bulkRevoke(i))}),O.nrm(1,"i",41),O.EFF(2),O.nI1(3,"i18n"),O.k0s()}2&e&&(O.R7$(2),O.SpI(" ",O.bMT(3,1,"revokeAccess")," "))}function Ks(e,t){if(1&e){const e=O.RV6();O.j41(0,"button",36),O.bIt("click",function(){u.eBV(e);const t=O.XpG(4),i=O.r8f(0);return u.Njj(t.bulkRemove(i))}),O.j41(1,"span",42),O.nrm(2,"i",43),O.EFF(3),O.nI1(4,"i18n"),O.k0s()()}2&e&&(O.R7$(3),O.SpI(" ",O.bMT(4,1,"remove")," "))}function Ls(e,t){if(1&e){const e=O.RV6();O.j41(0,"button",36),O.bIt("click",function(){u.eBV(e);const t=O.XpG(4),i=O.r8f(0);return u.Njj(t.bulkDelete(i))}),O.j41(1,"span",42),O.nrm(2,"i",44),O.EFF(3),O.nI1(4,"i18n"),O.k0s()()}2&e&&(O.R7$(3),O.SpI(" ",O.bMT(4,1,"delete")," "))}function Ws(e,t){if(1&e){const e=O.RV6();O.j41(0,"td",50),O.bIt("click",function(){u.eBV(e);const t=O.XpG().$implicit,i=O.XpG(5);return u.Njj(i.dataSource.checkUser(t))}),O.j41(1,"input",51),O.mxI("ngModelChange",function(t){u.eBV(e);const i=O.XpG().$implicit;return O.DH7(i.checked,t)||(i.checked=t),u.Njj(t)}),O.k0s()()}if(2&e){const e=O.XpG().$implicit;O.R7$(),O.R50("ngModel",e.checked)}}function Qs(e,t){1&e&&(O.j41(0,"span",61),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.SpI(" ",O.bMT(2,1,"invited")," "))}function _s(e,t){1&e&&(O.j41(0,"span",62),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.SpI(" ",O.bMT(2,1,"needsConfirmation")," "))}function Hs(e,t){1&e&&(O.j41(0,"span",61),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.SpI(" ",O.bMT(2,1,"revoked")," "))}function Zs(e,t){if(1&e&&(O.j41(0,"div",63),O.EFF(1),O.k0s()),2&e){const e=O.XpG(2).$implicit;O.R7$(),O.SpI(" ",e.email," ")}}function eo(e,t){var i;if(1&e){const e=O.RV6();O.qex(0),O.j41(1,"td",52),O.bIt("click",function(){u.eBV(e);const t=O.XpG().$implicit,i=O.XpG(5),n=O.r8f(0);return u.Njj(i.edit(t,n))}),O.j41(2,"div",53),O.nrm(3,"bit-avatar",54),O.nI1(4,"userName"),O.j41(5,"div",55)(6,"div",56)(7,"button",57),O.EFF(8),O.k0s(),O.DNE(9,Qs,3,3,"span",58)(10,_s,3,3,"span",59)(11,Hs,3,3,"span",58),O.k0s(),O.DNE(12,Zs,2,1,"div",60),O.k0s()()(),O.bVm()}if(2&e){const e=O.XpG().$implicit,t=O.XpG(5);O.R7$(3),O.Y8G("text",O.bMT(4,8,e))("id",e.userId)("color",e.avatarColor),O.R7$(5),O.SpI(" ",null!==(i=e.name)&&void 0!==i?i:e.email," "),O.R7$(),O.Y8G("ngIf",e.status===t.userStatusType.Invited),O.R7$(),O.Y8G("ngIf",e.status===t.userStatusType.Accepted),O.R7$(),O.Y8G("ngIf",e.status===t.userStatusType.Revoked),O.R7$(),O.Y8G("ngIf",e.name)}}function to(e,t){1&e&&(O.j41(0,"span",61),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.SpI(" ",O.bMT(2,1,"invited")," "))}function io(e,t){1&e&&(O.j41(0,"span",62),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.SpI(" ",O.bMT(2,1,"needsConfirmation")," "))}function no(e,t){1&e&&(O.j41(0,"span",61),O.EFF(1),O.nI1(2,"i18n"),O.k0s()),2&e&&(O.R7$(),O.SpI(" ",O.bMT(2,1,"revoked")," "))}function so(e,t){if(1&e&&(O.j41(0,"div",63),O.EFF(1),O.k0s()),2&e){const e=O.XpG(2).$implicit;O.R7$(),O.SpI(" ",e.email," ")}}function oo(e,t){var i;if(1&e&&(O.j41(0,"td",25)(1,"div",53),O.nrm(2,"bit-avatar",54),O.nI1(3,"userName"),O.j41(4,"div",55)(5,"div",56)(6,"span"),O.EFF(7),O.k0s(),O.DNE(8,to,3,3,"span",58)(9,io,3,3,"span",59)(10,no,3,3,"span",58),O.k0s(),O.DNE(11,so,2,1,"div",60),O.k0s()()()),2&e){const e=O.XpG().$implicit,t=O.XpG(5);O.R7$(2),O.Y8G("text",O.bMT(3,8,e))("id",e.userId)("color",e.avatarColor),O.R7$(5),O.JRh(null!==(i=e.name)&&void 0!==i?i:e.email),O.R7$(),O.Y8G("ngIf",e.status===t.userStatusType.Invited),O.R7$(),O.Y8G("ngIf",e.status===t.userStatusType.Accepted),O.R7$(),O.Y8G("ngIf",e.status===t.userStatusType.Revoked),O.R7$(),O.Y8G("ngIf",e.name)}}function ro(e,t){if(1&e){const e=O.RV6();O.qex(0),O.j41(1,"td",52),O.bIt("click",function(){u.eBV(e);const t=O.XpG().$implicit,i=O.XpG(5),n=O.r8f(0);return u.Njj(i.edit(t,n,n.useGroups?i.memberTab.Groups:i.memberTab.Collections))}),O.nrm(2,"bit-badge-list",64),O.k0s(),O.bVm()}if(2&e){const e=O.XpG().$implicit;O.XpG(5);const t=O.r8f(0);O.R7$(2),O.Y8G("items",t.useGroups?e.groupNames:e.collectionNames)("maxItems",3)}}function ao(e,t){if(1&e&&(O.j41(0,"td",25),O.nrm(1,"bit-badge-list",64),O.k0s()),2&e){const e=O.XpG().$implicit;O.XpG(5);const t=O.r8f(0);O.R7$(),O.Y8G("items",t.useGroups?e.groupNames:e.collectionNames)("maxItems",3)}}function co(e,t){if(1&e){const e=O.RV6();O.qex(0),O.j41(1,"td",65),O.bIt("click",function(){u.eBV(e);const t=O.XpG().$implicit,i=O.XpG(5),n=O.r8f(0);return u.Njj(i.edit(t,n,i.memberTab.Role))}),O.EFF(2),O.nI1(3,"userType"),O.k0s(),O.bVm()}if(2&e){const e=O.XpG().$implicit;O.R7$(2),O.SpI(" ",O.bMT(3,1,e.type)," ")}}function lo(e,t){if(1&e&&(O.j41(0,"td",66),O.EFF(1),O.nI1(2,"userType"),O.k0s()),2&e){const e=O.XpG().$implicit;O.R7$(),O.SpI(" ",O.bMT(2,1,e.type)," ")}}function uo(e,t){1&e&&(O.qex(0),O.nrm(1,"i",67),O.nI1(2,"i18n"),O.j41(3,"span",18),O.EFF(4),O.nI1(5,"i18n"),O.k0s(),O.bVm()),2&e&&(O.R7$(),O.Y8G("title",O.mNQ(O.bMT(2,3,"userUsingTwoStep"))),O.R7$(3),O.JRh(O.bMT(5,5,"userUsingTwoStep")))}function po(e,t){1&e&&(O.qex(0),O.nrm(1,"i",68),O.nI1(2,"i18n"),O.j41(3,"span",18),O.EFF(4),O.nI1(5,"i18n"),O.k0s(),O.bVm()),2&e&&(O.R7$(),O.Y8G("title",O.mNQ(O.bMT(2,3,"enrolledAccountRecovery"))),O.R7$(3),O.JRh(O.bMT(5,5,"enrolledAccountRecovery")))}function ho(e,t){if(1&e){const e=O.RV6();O.j41(0,"button",36),O.bIt("click",function(){u.eBV(e);const t=O.XpG(2).$implicit,i=O.XpG(5),n=O.r8f(0);return u.Njj(i.reinvite(t,n))}),O.nrm(1,"i",71),O.EFF(2),O.nI1(3,"i18n"),O.k0s()}2&e&&(O.R7$(2),O.SpI(" ",O.bMT(3,1,"resendInvitation")," "))}function mo(e,t){if(1&e){const e=O.RV6();O.j41(0,"button",36),O.bIt("click",function(){u.eBV(e);const t=O.XpG(2).$implicit,i=O.XpG(5),n=O.r8f(0);return u.Njj(i.confirm(t,n))}),O.j41(1,"span",38),O.nrm(2,"i",72),O.EFF(3),O.nI1(4,"i18n"),O.k0s()()}2&e&&(O.R7$(3),O.SpI(" ",O.bMT(4,1,"confirm")," "))}function go(e,t){1&e&&O.nrm(0,"bit-menu-divider")}function fo(e,t){if(1&e){const e=O.RV6();O.j41(0,"button",36),O.bIt("click",function(){u.eBV(e);const t=O.XpG(2).$implicit,i=O.XpG(5),n=O.r8f(0);return u.Njj(i.edit(t,n,i.memberTab.Groups))}),O.nrm(1,"i",73),O.EFF(2),O.nI1(3,"i18n"),O.k0s()}2&e&&(O.R7$(2),O.SpI(" ",O.bMT(3,1,"groups")," "))}function bo(e,t){if(1&e){const e=O.RV6();O.j41(0,"button",36),O.bIt("click",function(){u.eBV(e);const t=O.XpG(2).$implicit,i=O.XpG(5),n=O.r8f(0);return u.Njj(i.openEventsDialog(t,n))}),O.nrm(1,"i",74),O.EFF(2),O.nI1(3,"i18n"),O.k0s()}2&e&&(O.R7$(2),O.SpI(" ",O.bMT(3,1,"eventLogs")," "))}function vo(e,t){if(1&e){const e=O.RV6();O.qex(0),O.DNE(1,ho,4,3,"button",29)(2,mo,5,3,"button",29)(3,go,1,0,"bit-menu-divider",10),O.j41(4,"button",36),O.bIt("click",function(){u.eBV(e);const t=O.XpG().$implicit,i=O.XpG(5),n=O.r8f(0);return u.Njj(i.edit(t,n,i.memberTab.Role))}),O.nrm(5,"i",69),O.EFF(6),O.nI1(7,"i18n"),O.k0s(),O.DNE(8,fo,4,3,"button",29),O.j41(9,"button",36),O.bIt("click",function(){u.eBV(e);const t=O.XpG().$implicit,i=O.XpG(5),n=O.r8f(0);return u.Njj(i.edit(t,n,i.memberTab.Collections))}),O.nrm(10,"i",70),O.EFF(11),O.nI1(12,"i18n"),O.k0s(),O.nrm(13,"bit-menu-divider"),O.DNE(14,bo,4,3,"button",29),O.bVm()}if(2&e){const e=O.XpG().$implicit,t=O.XpG(5),i=O.r8f(0);O.R7$(),O.Y8G("ngIf",e.status===t.userStatusType.Invited),O.R7$(),O.Y8G("ngIf",e.status===t.userStatusType.Accepted),O.R7$(),O.Y8G("ngIf",e.status===t.userStatusType.Accepted||e.status===t.userStatusType.Invited),O.R7$(3),O.SpI(" ",O.bMT(7,7,"memberRole")," "),O.R7$(2),O.Y8G("ngIf",i.useGroups),O.R7$(3),O.SpI(" ",O.bMT(12,9,"collections")," "),O.R7$(3),O.Y8G("ngIf",i.useEvents&&e.status===t.userStatusType.Confirmed)}}function yo(e,t){if(1&e){const e=O.RV6();O.j41(0,"button",36),O.bIt("click",function(){u.eBV(e);const t=O.XpG().$implicit,i=O.XpG(5),n=O.r8f(0);return u.Njj(i.resetPassword(t,n))}),O.nrm(1,"i",75),O.EFF(2),O.nI1(3,"i18n"),O.k0s()}2&e&&(O.R7$(2),O.SpI(" ",O.bMT(3,1,"recoverAccount")," "))}function Io(e,t){if(1&e){const e=O.RV6();O.j41(0,"button",36),O.bIt("click",function(){u.eBV(e);const t=O.XpG(2).$implicit,i=O.XpG(5),n=O.r8f(0);return u.Njj(i.restore(t,n))}),O.nrm(1,"i",76),O.EFF(2),O.nI1(3,"i18n"),O.k0s()}2&e&&(O.R7$(2),O.SpI(" ",O.bMT(3,1,"restoreAccess")," "))}function So(e,t){if(1&e){const e=O.RV6();O.j41(0,"button",36),O.bIt("click",function(){u.eBV(e);const t=O.XpG(2).$implicit,i=O.XpG(5),n=O.r8f(0);return u.Njj(i.revoke(t,n))}),O.nrm(1,"i",77),O.EFF(2),O.nI1(3,"i18n"),O.k0s()}2&e&&(O.R7$(2),O.SpI(" ",O.bMT(3,1,"revokeAccess")," "))}function ko(e,t){if(1&e){const e=O.RV6();O.j41(0,"button",36),O.bIt("click",function(){u.eBV(e);const t=O.XpG(2).$implicit,i=O.XpG(5),n=O.r8f(0);return u.Njj(i.remove(t,n))}),O.j41(1,"span",42),O.nrm(2,"i",78),O.EFF(3),O.nI1(4,"i18n"),O.k0s()()}2&e&&(O.R7$(3),O.SpI(" ",O.bMT(4,1,"remove")," "))}function Ro(e,t){if(1&e){const e=O.RV6();O.j41(0,"button",36),O.bIt("click",function(){u.eBV(e);const t=O.XpG(2).$implicit,i=O.XpG(5),n=O.r8f(0);return u.Njj(i.deleteUser(t,n))}),O.j41(1,"span",42),O.nrm(2,"i",79),O.EFF(3),O.nI1(4,"i18n"),O.k0s()()}2&e&&(O.R7$(3),O.SpI(" ",O.bMT(4,1,"delete")," "))}function wo(e,t){if(1&e&&(O.qex(0),O.DNE(1,Io,4,3,"button",29)(2,So,4,3,"button",29)(3,ko,5,3,"button",29)(4,Ro,5,3,"button",29),O.bVm()),2&e){const e=O.XpG().$implicit,t=O.XpG(5);O.R7$(),O.Y8G("ngIf",e.status===t.userStatusType.Revoked),O.R7$(),O.Y8G("ngIf",e.status!==t.userStatusType.Revoked),O.R7$(),O.Y8G("ngIf",!e.managedByOrganization),O.R7$(),O.Y8G("ngIf",e.managedByOrganization)}}function $o(e,t){if(1&e&&(O.j41(0,"tr",46),O.DNE(1,Ws,2,1,"td",47)(2,eo,13,10,"ng-container",48)(3,oo,12,10,"ng-template",null,1,O.C5r)(5,ro,3,2,"ng-container",48)(6,ao,2,2,"ng-template",null,2,O.C5r)(8,co,4,3,"ng-container",48)(9,lo,3,3,"ng-template",null,3,O.C5r),O.j41(11,"td",49),O.DNE(12,uo,6,7,"ng-container",10),O.SS7(13),O.nI1(14,"async"),O.DNE(15,po,6,7,"ng-container",10),O.k0s(),O.j41(16,"td",25),O.nrm(17,"button",35),O.nI1(18,"i18n"),O.j41(19,"bit-menu",null,4),O.DNE(21,vo,15,11,"ng-container",10)(22,yo,4,3,"button",29)(23,wo,5,4,"ng-container",10),O.k0s()()()),2&e){const e=t.$implicit,i=O.sdS(4),n=O.sdS(7),s=O.sdS(10),o=O.sdS(20),r=O.XpG(5),a=O.r8f(0);O.Y8G("ngClass",r.rowHeightClass),O.R7$(),O.Y8G("ngIf",r.showUserManagementControls()),O.R7$(),O.Y8G("ngIf",r.showUserManagementControls())("ngIfElse",i),O.R7$(3),O.Y8G("ngIf",r.showUserManagementControls())("ngIfElse",n),O.R7$(3),O.Y8G("ngIf",r.showUserManagementControls())("ngIfElse",s),O.R7$(4),O.Y8G("ngIf",e.twoFactorEnabled);const c=O.bMT(14,16,r.resetPasswordPolicyEnabled$);O.R7$(3),O.Y8G("ngIf",r.showEnrolledStatus(e,a,c)),O.R7$(2),O.Y8G("label",O.mNQ(O.bMT(18,18,"options")))("bitMenuTriggerFor",o),O.R7$(4),O.Y8G("ngIf",r.showUserManagementControls()),O.R7$(),O.Y8G("ngIf",r.allowResetPassword(e,a,c)),O.R7$(),O.Y8G("ngIf",r.showUserManagementControls())}}function Fo(e,t){if(1&e&&O.DNE(0,$o,24,20,"tr",45),2&e){const e=t.$implicit;O.Y8G("cdkVirtualForOf",e)}}function Mo(e,t){if(1&e&&(O.qex(0),O.DNE(1,As,4,7,"bit-callout",19),O.j41(2,"cdk-virtual-scroll-viewport",20)(3,"bit-table",21),O.qex(4,22),O.j41(5,"tr"),O.DNE(6,Ps,5,3,"th",23),O.j41(7,"th",24),O.EFF(8),O.nI1(9,"i18n"),O.k0s(),O.j41(10,"th",25),O.EFF(11),O.nI1(12,"i18n"),O.k0s(),O.j41(13,"th",26),O.EFF(14),O.nI1(15,"i18n"),O.k0s(),O.j41(16,"th",25),O.EFF(17),O.nI1(18,"i18n"),O.k0s(),O.j41(19,"th",27),O.DNE(20,Ys,2,5,"button",28),O.j41(21,"bit-menu",null,0),O.DNE(23,Bs,5,3,"ng-container",10)(24,Vs,4,3,"button",29)(25,Os,5,3,"button",29)(26,Js,4,3,"button",29)(27,qs,4,3,"button",29)(28,Ks,5,3,"button",29)(29,Ls,5,3,"button",29),O.k0s()()(),O.bVm(),O.DNE(30,Fo,1,1,"ng-template",30),O.k0s()(),O.bVm()),2&e){const e=O.XpG(3),t=O.r8f(0);O.R7$(),O.Y8G("ngIf",e.showConfirmUsers),O.R7$(),O.Y8G("itemSize",e.rowHeight),O.R7$(),O.Y8G("dataSource",e.dataSource),O.R7$(3),O.Y8G("ngIf",e.showUserManagementControls()),O.R7$(2),O.JRh(O.bMT(9,16,"name")),O.R7$(3),O.JRh(O.bMT(12,18,t.useGroups?"groups":"collections")),O.R7$(3),O.JRh(O.bMT(15,20,"role")),O.R7$(3),O.JRh(O.bMT(18,22,"policies")),O.R7$(3),O.Y8G("ngIf",e.showUserManagementControls()),O.R7$(3),O.Y8G("ngIf",e.canUseSecretsManager()),O.R7$(),O.Y8G("ngIf",e.showBulkReinviteUsers),O.R7$(),O.Y8G("ngIf",e.showBulkConfirmUsers),O.R7$(),O.Y8G("ngIf",e.showBulkRestoreUsers),O.R7$(),O.Y8G("ngIf",e.showBulkRevokeUsers),O.R7$(),O.Y8G("ngIf",e.showBulkRemoveUsers),O.R7$(),O.Y8G("ngIf",e.showBulkDeleteUsers)}}function To(e,t){if(1&e&&(O.qex(0),O.DNE(1,zs,3,3,"p",10)(2,Mo,31,24,"ng-container",10),O.bVm()),2&e){const e=O.XpG(2);O.R7$(),O.Y8G("ngIf",!e.dataSource.filteredData.length),O.R7$(),O.Y8G("ngIf",e.dataSource.filteredData.length)}}function Eo(e,t){if(1&e){const e=O.RV6();O.j41(0,"app-organization-free-trial-warning",5),O.bIt("clicked",function(){u.eBV(e);const t=O.XpG(),i=O.r8f(0);return u.Njj(t.billingConstraint.navigateToPaymentMethod(i))}),O.k0s(),O.j41(1,"app-header"),O.nrm(2,"bit-search",6),O.nI1(3,"i18n"),O.DNE(4,Us,4,4,"button",7),O.k0s(),O.j41(5,"div",8),O.DNE(6,Ns,18,24,"bit-toggle-group",9),O.k0s(),O.DNE(7,Xs,6,7,"ng-container",10)(8,To,3,2,"ng-container",10)}if(2&e){const e=O.XpG(),t=O.r8f(0);O.Y8G("organization",t),O.R7$(2),O.Y8G("formControl",e.searchControl)("placeholder",O.bMT(3,7,"searchMembers")),O.R7$(2),O.Y8G("ngIf",e.showUserManagementControls()),O.R7$(2),O.Y8G("ngIf",e.showUserManagementControls()),O.R7$(),O.Y8G("ngIf",!e.firstLoaded),O.R7$(),O.Y8G("ngIf",e.firstLoaded)}}class Go extends ai{constructor(){super(...arguments),this.statusType=j.Zx}}class Uo extends di{constructor(e,t,i,n,s,o,r,a,c,l,d,u,p,h,m,g,f,b,v,y,I,S,k){super(e,t,n,s,o,r,a,i,c),this.route=l,this.deleteManagedMemberWarningService=d,this.organizationWarningsService=u,this.memberActionsService=p,this.memberDialogManager=h,this.billingConstraint=m,this.memberService=g,this.organizationService=f,this.accountService=b,this.policyService=v,this.policyApiService=y,this.organizationMetadataService=I,this.configService=S,this.environmentService=k,this.userType=j.D7,this.userStatusType=j.Zx,this.memberTab=Je,this.userId$=this.accountService.activeAccount$.pipe(x.F6),this.canUseSecretsManager=(0,Pt.EW)(()=>{var e,t;return null!==(t=null===(e=this.organization())||void 0===e?void 0:e.useSecretsManager)&&void 0!==t&&t}),this.showUserManagementControls=(0,Pt.EW)(()=>{var e,t;return null!==(t=null===(e=this.organization())||void 0===e?void 0:e.canManageUsers)&&void 0!==t&&t}),this.rowHeight=66,this.rowHeightClass="tw-h-[66px]",this.dataSource=new Go(this.configService,this.environmentService);const R=this.route.params.pipe((0,Yt.H)(e=>this.userId$.pipe((0,F.n)(t=>this.organizationService.organizations$(t).pipe((0,Xt.Hc)(e.organizationId))),(0,Nt.p)(e=>null!=e),(0,M.t)({refCount:!0,bufferSize:1}))));this.organization=(0,Ze.ot)(R);const T=(0,w.z)([this.userId$,R]).pipe((0,F.n)(([e,t])=>t.isProviderUser?(0,Bt.H)(this.policyApiService.getPolicies(t.id)).pipe((0,$.T)(e=>qt.P.fromListResponse(e))):this.policyService.policies$(e)));this.resetPasswordPolicyEnabled$=(0,w.z)([R,T]).pipe((0,$.T)(([e,t])=>{var i,n;return null!==(n=null===(i=t.filter(e=>e.type===j.tt.ResetPassword).find(t=>t.organizationId===e.id))||void 0===i?void 0:i.enabled)&&void 0!==n&&n})),(0,w.z)([this.route.queryParams,R]).pipe((0,Yt.H)(e=>Gs(this,[e],void 0,function*([e,t]){if(yield this.load(t),this.searchControl.setValue(e.search),null!=e.viewEvents){const i=this.dataSource.data.filter(t=>t.id===e.viewEvents);i.length>0&&i[0].status===j.Zx.Confirmed&&this.openEventsDialog(i[0],t)}})),(0,Ze.pQ)()).subscribe(),R.pipe((0,F.n)(e=>(0,Vt.h)(this.organizationWarningsService.showInactiveSubscriptionDialog$(e),this.organizationWarningsService.showSubscribeBeforeFreeTrialEndsDialog$(e))),(0,Ze.pQ)()).subscribe(),this.billingMetadata$=R.pipe((0,F.n)(e=>this.organizationMetadataService.getOrganizationMetadata$(e.id)),(0,M.t)({bufferSize:1,refCount:!1})),this.billingMetadata$.pipe((0,Ot.s)(1),(0,Ze.pQ)()).subscribe()}load(e){const t=Object.create(null,{load:{get:()=>super.load}});return Gs(this,void 0,void 0,function*(){yield t.load.call(this,e)})}getUsers(e){return Gs(this,void 0,void 0,function*(){return yield this.memberService.loadUsers(e)})}removeUser(e,t){return Gs(this,void 0,void 0,function*(){return yield this.memberActionsService.removeUser(t,e)})}revokeUser(e,t){return Gs(this,void 0,void 0,function*(){return yield this.memberActionsService.revokeUser(t,e)})}restoreUser(e,t){return Gs(this,void 0,void 0,function*(){return yield this.memberActionsService.restoreUser(t,e)})}reinviteUser(e,t){return Gs(this,void 0,void 0,function*(){return yield this.memberActionsService.reinviteUser(t,e)})}confirmUser(e,t,i){return Gs(this,void 0,void 0,function*(){return yield this.memberActionsService.confirmUser(e,t,i)})}revoke(e,t){return Gs(this,void 0,void 0,function*(){if(!(yield this.revokeUserConfirmationDialog(e)))return!1;this.actionPromise=this.revokeUser(e.id,t);try{const i=yield this.actionPromise;if(!i.success)throw new Error(i.error);this.toastService.showToast({variant:"success",message:this.i18nService.t("revokedUserId",this.userNamePipe.transform(e))}),yield this.load(t)}catch(i){this.validationService.showError(i)}this.actionPromise=void 0})}restore(e,t){return Gs(this,void 0,void 0,function*(){this.actionPromise=this.restoreUser(e.id,t);try{const i=yield this.actionPromise;if(!i.success)throw new Error(i.error);this.toastService.showToast({variant:"success",message:this.i18nService.t("restoredUserId",this.userNamePipe.transform(e))}),yield this.load(t)}catch(i){this.validationService.showError(i)}this.actionPromise=void 0})}allowResetPassword(e,t,i){return this.memberActionsService.allowResetPassword(e,t,i)}showEnrolledStatus(e,t,i){return t.useResetPassword&&e.resetPasswordEnrolled&&i}handleInviteDialog(e){return Gs(this,void 0,void 0,function*(){var t,i;const n=yield(0,R._)(this.billingMetadata$),s=null!==(i=null===(t=this.dataSource.data)||void 0===t?void 0:t.map(e=>e.email))&&void 0!==i?i:[];(yield this.memberDialogManager.openInviteDialog(e,n,s))===qe.Saved&&(yield this.load(e))})}invite(e){return Gs(this,void 0,void 0,function*(){const t=yield(0,R._)(this.billingMetadata$),i=this.billingConstraint.checkSeatLimit(e,t);(yield this.billingConstraint.seatLimitReached(i,e))||(yield this.handleInviteDialog(e),this.organizationMetadataService.refreshMetadataCache())})}edit(e,t){return Gs(this,arguments,void 0,function*(e,t,i=Je.Role){const n=yield(0,R._)(this.billingMetadata$);switch(yield this.memberDialogManager.openEditDialog(e,t,n,i)){case qe.Deleted:this.dataSource.removeUser(e);break;case qe.Saved:case qe.Revoked:case qe.Restored:yield this.load(t)}})}bulkRemove(e){return Gs(this,void 0,void 0,function*(){if(null!=this.actionPromise)return;const t=this.dataSource.getCheckedUsersWithLimit(si);yield this.memberDialogManager.openBulkRemoveDialog(e,t),this.organizationMetadataService.refreshMetadataCache(),yield this.load(e)})}bulkDelete(e){return Gs(this,void 0,void 0,function*(){if(null!=this.actionPromise)return;const t=this.dataSource.getCheckedUsersWithLimit(si);yield this.memberDialogManager.openBulkDeleteDialog(e,t),yield this.load(e)})}bulkRevoke(e){return Gs(this,void 0,void 0,function*(){yield this.bulkRevokeOrRestore(!0,e)})}bulkRestore(e){return Gs(this,void 0,void 0,function*(){yield this.bulkRevokeOrRestore(!1,e)})}bulkRevokeOrRestore(e,t){return Gs(this,void 0,void 0,function*(){if(null!=this.actionPromise)return;const i=this.dataSource.getCheckedUsersWithLimit(si);yield this.memberDialogManager.openBulkRestoreRevokeDialog(t,i,e),yield this.load(t)})}bulkReinvite(e){return Gs(this,void 0,void 0,function*(){if(null!=this.actionPromise)return;let t;t=this.dataSource.isIncreasedBulkLimitEnabled()?this.dataSource.getCheckedUsersInVisibleOrder():this.dataSource.getCheckedUsers();const i=t.filter(e=>e.status===j.Zx.Invited),n=i.length;let s;if(s=this.dataSource.isIncreasedBulkLimitEnabled()?this.dataSource.limitAndUncheckExcess(i,oi):i,s.length<=0)this.toastService.showToast({variant:"error",title:this.i18nService.t("errorOccurred"),message:this.i18nService.t("noSelectedUsersApplicable")});else{try{const i=yield this.memberActionsService.bulkReinvite(e,s.map(e=>e.id));if(!i.successful)throw new Error;if(this.dataSource.isIncreasedBulkLimitEnabled()){const e=n,t=s.length;if(e>oi){const t=e-oi;this.toastService.showToast({variant:"success",message:this.i18nService.t("bulkReinviteLimitedSuccessToast",oi.toLocaleString(),e.toLocaleString(),t.toLocaleString())})}else this.toastService.showToast({variant:"success",message:this.i18nService.t("bulkReinviteSuccessToast",t.toString())})}else yield this.memberDialogManager.openBulkStatusDialog(t,s,Promise.resolve(i.successful),this.i18nService.t("bulkReinviteMessage"))}catch(o){this.validationService.showError(o)}this.actionPromise=void 0}})}bulkConfirm(e){return Gs(this,void 0,void 0,function*(){if(null!=this.actionPromise)return;const t=this.dataSource.getCheckedUsersWithLimit(si);yield this.memberDialogManager.openBulkConfirmDialog(e,t),yield this.load(e)})}bulkEnableSM(e){return Gs(this,void 0,void 0,function*(){const t=this.dataSource.getCheckedUsersWithLimit(si);yield this.memberDialogManager.openBulkEnableSecretsManagerDialog(e,t),this.dataSource.uncheckAllUsers(),yield this.load(e)})}openEventsDialog(e,t){this.memberDialogManager.openEventsDialog(e,t)}resetPassword(e,t){return Gs(this,void 0,void 0,function*(){if(!e||!e.email||!e.id)return this.toastService.showToast({variant:"error",title:this.i18nService.t("errorOccurred"),message:this.i18nService.t("orgUserDetailsNotFound")}),void this.logService.error("Org user details not found when attempting account recovery");(yield this.memberDialogManager.openAccountRecoveryDialog(e,t))===vi&&(yield this.load(t))})}removeUserConfirmationDialog(e){return Gs(this,void 0,void 0,function*(){return yield this.memberDialogManager.openRemoveUserConfirmationDialog(e)})}revokeUserConfirmationDialog(e){return Gs(this,void 0,void 0,function*(){return yield this.memberDialogManager.openRevokeUserConfirmationDialog(e)})}deleteUser(e,t){return Gs(this,void 0,void 0,function*(){if(!(yield this.memberDialogManager.openDeleteUserConfirmationDialog(e,t)))return!1;this.actionPromise=this.memberActionsService.deleteUser(t,e.id);try{const t=yield this.actionPromise;if(!t.success)throw new Error(t.error);this.toastService.showToast({variant:"success",message:this.i18nService.t("organizationUserDeleted",this.userNamePipe.transform(e))}),this.dataSource.removeUser(e)}catch(i){this.validationService.showError(i)}this.actionPromise=void 0})}get showBulkRestoreUsers(){return this.dataSource.getCheckedUsers().every(e=>e.status==this.userStatusType.Revoked)}get showBulkRevokeUsers(){return this.dataSource.getCheckedUsers().every(e=>e.status!=this.userStatusType.Revoked)}get showBulkRemoveUsers(){return this.dataSource.getCheckedUsers().every(e=>!e.managedByOrganization)}get showBulkDeleteUsers(){const e=[this.userStatusType.Accepted,this.userStatusType.Confirmed,this.userStatusType.Revoked];return this.dataSource.getCheckedUsers().every(t=>t.managedByOrganization&&e.includes(t.status))}}Uo.ɵfac=function(e){return new(e||Uo)(O.rXU(ct.G),O.rXU(p.W),O.rXU(Zt.y),O.rXU(nt.Lu),O.rXU(ci.B),O.rXU(it.K),O.rXU(Jt.b),O.rXU(h.o3),O.rXU(m.f),O.rXU(g.nX),O.rXU(Y),O.rXU(Lt.S),O.rXU($i),O.rXU(Is),O.rXU(b),O.rXU(ki),O.rXU(U.PV),O.rXU(J.Di),O.rXU(gi.m),O.rXU(Ss.m),O.rXU(Ri.Q),O.rXU(q.w),O.rXU(Kt.v))},Uo.ɵcmp=O.VBU({type:Uo,selectors:[["ng-component"]],standalone:!1,features:[O.Vt3],decls:2,vars:2,consts:[["headerMenu",""],["readOnlyUserInfo",""],["readOnlyGroupsCell",""],["readOnlyRoleCell",""],["rowMenu",""],[3,"clicked","organization"],[1,"tw-grow",3,"formControl","placeholder"],["type","button","bitButton","","buttonType","primary",3,"disabled","click",4,"ngIf"],[1,"tw-mb-4","tw-flex","tw-flex-col","tw-space-y-4"],[3,"selected","selectedChange",4,"ngIf"],[4,"ngIf"],["type","button","bitButton","","buttonType","primary",3,"click","disabled"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],[3,"selectedChange","selected"],[3,"value"],["bitBadge","","variant","info",4,"ngIf"],["bitBadge","","variant","info"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","tw-text-muted",3,"title"],[1,"tw-sr-only"],["type","info","icon","bwi-check-circle",3,"title",4,"ngIf"],["bitScrollLayout","",1,"tw-pb-8",3,"itemSize"],[3,"dataSource"],["header",""],["bitCell","","class","tw-w-20",4,"ngIf"],["bitCell","","bitSortable","email","default",""],["bitCell",""],["bitCell","","bitSortable","type"],["bitCell","",1,"tw-w-10"],["type","button","bitIconButton","bwi-ellipsis-v","size","small",3,"bitMenuTriggerFor","label",4,"ngIf"],["type","button","bitMenuItem","",3,"click",4,"ngIf"],["body",""],["type","info","icon","bwi-check-circle",3,"title"],["bitCell","",1,"tw-w-20"],["type","checkbox","bitCheckbox","","id","selectAll",1,"tw-mr-1",3,"change"],["for","selectAll",1,"tw-mb-0","!tw-font-medium","!tw-text-muted"],["type","button","bitIconButton","bwi-ellipsis-v","size","small",3,"bitMenuTriggerFor","label"],["type","button","bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-envelope"],[1,"tw-text-success"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-check"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-plus-circle"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-minus-circle"],[1,"tw-text-danger"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-close"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-trash"],["bitRow","","alignContent","middle",3,"ngClass",4,"cdkVirtualFor","cdkVirtualForOf"],["bitRow","","alignContent","middle",3,"ngClass"],["bitCell","",3,"click",4,"ngIf"],[4,"ngIf","ngIfElse"],["bitCell","",1,"tw-text-muted"],["bitCell","",3,"click"],["type","checkbox","bitCheckbox","",3,"ngModelChange","ngModel"],["bitCell","",1,"tw-cursor-pointer",3,"click"],[1,"tw-flex","tw-items-center"],["size","small",1,"tw-mr-3",3,"text","id","color"],[1,"tw-flex","tw-flex-col"],[1,"tw-flex","tw-flex-row","tw-gap-2"],["type","button","bitLink",""],["bitBadge","","class","tw-text-xs","variant","secondary",4,"ngIf"],["bitBadge","","class","tw-text-xs","variant","warning",4,"ngIf"],["class","tw-text-sm tw-text-muted",4,"ngIf"],["bitBadge","","variant","secondary",1,"tw-text-xs"],["bitBadge","","variant","warning",1,"tw-text-xs"],[1,"tw-text-sm","tw-text-muted"],["variant","secondary",3,"items","maxItems"],["bitCell","",1,"tw-cursor-pointer","tw-text-sm","tw-text-muted",3,"click"],["bitCell","",1,"tw-text-sm","tw-text-muted"],["aria-hidden","true",1,"bwi","bwi-lock",3,"title"],["aria-hidden","true",1,"bwi","bwi-key",3,"title"],["aria-hidden","true",1,"bwi","bwi-user"],["aria-hidden","true",1,"bwi","bwi-collection-shared"],["aria-hidden","true",1,"bwi","bwi-envelope"],["aria-hidden","true",1,"bwi","bwi-check"],["aria-hidden","true",1,"bwi","bwi-users"],["aria-hidden","true",1,"bwi","bwi-file-text"],["aria-hidden","true",1,"bwi","bwi-key"],["aria-hidden","true",1,"bwi","bwi-plus-circle"],["aria-hidden","true",1,"bwi","bwi-minus-circle"],["aria-hidden","true",1,"bwi","bwi-close"],["aria-hidden","true",1,"bwi","bwi-trash"]],template:function(e,t){if(1&e&&(O.SS7(0),O.nVh(1,Eo,9,9)),2&e){const e=O.bH3(t.organization());O.R7$(),O.vxM(e?1:-1)}},dependencies:[K.YU,K.bT,S.Zm,S.BC,S.vS,S.l_,Ei.f,ks.p,H.n,Z.Q,fi.G,ee.P,bt.s,ae.o,vt.Z,yt.O,It.S,Rs.M,St.Q,kt.Y,ws.O,Rt._,Rt.O,$s.H,Fs.a,Ms.S,wt.f,n.yg,n.E$,n.d6,Ts.lp,Es.z,K.Jj,ge.$,Jt.b,un.c],encapsulation:2});const jo=[{path:"",component:Uo,canActivate:[(0,Dt.V)(U.pe)],data:{titleId:"members"}},{path:"sponsored-families",component:xt,canActivate:[(0,Dt.V)(U.pe),e=>At(void 0,void 0,void 0,function*(){const t=(0,u.WQX)(zt.A),i=(0,u.WQX)(U.PV),n=(0,u.WQX)(J.Di).activeAccount$.pipe(x.F6,(0,F.n)(e=>i.organizations$(e)),(0,Xt.Hc)(e.params.organizationId),(0,Nt.p)(e=>void 0!==e));return yield(0,R._)(t.showSponsoredFamiliesDropdown$(n))})],data:{titleId:"sponsoredFamilies"}}];class Co{}Co.ɵfac=function(e){return new(e||Co)},Co.ɵmod=O.$C({type:Co}),Co.ɵinj=u.G2t({imports:[He.iI.forChild(jo),He.iI]});class xo{}xo.ɵfac=function(e){return new(e||xo)},xo.ɵmod=O.$C({type:xo}),xo.ɵinj=u.G2t({providers:[ki,$i,b,Is],imports:[I.R,Co,_e,o.Rz,y.G,n.E9,s.k,v.z]})}}]);
//# sourceMappingURL=35.a5925037071c7d20e7c0.js.map