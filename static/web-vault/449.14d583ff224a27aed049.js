"use strict";(self.webpackChunk_bitwarden_web_vault=self.webpackChunk_bitwarden_web_vault||[]).push([[449],{14449:(t,e,i)=>{i.d(e,{OrganizationReportingModule:()=>Qi});var n=i(80504),o=i(72932),a=i(62963),r=i(6056),s=i(67553),c=i(36359),l=i(72245),p=i(14803),d=i(3633),u=i(15639),h=i(39488),g=i(3356),b=i(87386),m=i(25065),f=i(14092),v=i(10840),I=i(62819),R=i(85037),$=i(33812),w=i(74208),F=i(5556),M=i(72331),S=i(21274),y=i(35500),j=i(23649),k=i(50700),X=i(51757),G=i(26333),T=i(93103),x=i(47428),E=i(47696),z=i(56898),C=i(44432),U=i(10672),N=i(57178),V=i(30930),A=i(38410),Y=i(32316),O=i(12694),D=i(16496),B=i(93748),P=i(71944),J=i(77468),Q=i(88016),W=i(91975),H=function(t,e,i,n){return new(i||(i=Promise))(function(o,a){function r(t){try{c(n.next(t))}catch(e){a(e)}}function s(t){try{c(n.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,s)}c((n=n.apply(t,e||[])).next())})};function _(t,e){1&t&&($.j41(0,"bit-callout",2),$.nI1(1,"i18n"),$.EFF(2),$.nI1(3,"i18n"),$.k0s()),2&t&&($.Y8G("title",$.mNQ($.bMT(1,3,"goodNews"))),$.R7$(2),$.SpI(" ",$.bMT(3,5,"noExposedPasswords")," "))}function L(t,e){if(1&t&&($.j41(0,"bit-toggle",14),$.EFF(1),$.j41(2,"span",15),$.EFF(3),$.k0s()()),2&t){const t=e.$implicit,i=$.XpG(5);$.Y8G("value",t),$.R7$(),$.SpI(" ",i.getName(t)," "),$.R7$(2),$.SpI(" ",i.getCount(t)," ")}}function q(t,e){if(1&t){const t=$.RV6();$.j41(0,"bit-toggle-group",13),$.nI1(1,"async"),$.nI1(2,"i18n"),$.bIt("selectedChange",function(e){w.eBV(t);const i=$.XpG(4);return w.Njj(i.filterOrgToggle(e))}),$.Z7z(3,L,4,3,"bit-toggle",14,$.fX1),$.k0s()}if(2&t){const t=$.XpG(4);$.Y8G("selected",$.bMT(1,2,t.filterOrgStatus$)),$.BMQ("aria-label",$.bMT(2,4,"addAccessFilter")),$.R7$(3),$.Dyx(t.filterStatus)}}function K(t,e){if(1&t){const t=$.RV6();$.j41(0,"bit-chip-select",16),$.bIt("ngModelChange",function(e){w.eBV(t);const i=$.XpG(4);return w.Njj(i.filterOrgToggleChipSelect(e))}),$.k0s()}if(2&t){const t=$.XpG(4);$.Y8G("placeholderText",t.chipSelectOptions[0].label)("options",t.chipSelectOptions)("ngModel",t.selectedFilterChip)}}function Z(t,e){if(1&t&&$.nVh(0,q,5,6,"bit-toggle-group",11)(1,K,1,3,"bit-chip-select",12),2&t){const t=$.XpG(3);$.vxM(t.canDisplayToggleGroup()?0:1)}}function tt(t,e){1&t&&($.j41(0,"th",8),$.EFF(1),$.nI1(2,"i18n"),$.k0s()),2&t&&($.R7$(),$.SpI(" ",$.bMT(2,1,"owner")," "))}function et(t,e){if(1&t){const t=$.RV6();$.j41(0,"a",21),$.nI1(1,"i18n"),$.bIt("click",function(){w.eBV(t);const e=$.XpG().$implicit,i=$.XpG(3);return w.Njj(i.selectCipher(e))}),$.EFF(2),$.k0s()}if(2&t){const t=$.XpG().$implicit;$.Y8G("title",$.mNQ($.i5U(1,3,"editItemWithName",t.name))),$.R7$(2),$.SpI(" ",t.name," ")}}function it(t,e){if(1&t&&($.j41(0,"span"),$.EFF(1),$.k0s()),2&t){const t=$.XpG().$implicit;$.R7$(),$.JRh(t.name)}}function nt(t,e){1&t&&($.nrm(0,"i",22),$.nI1(1,"i18n"),$.j41(2,"span",23),$.EFF(3),$.nI1(4,"i18n"),$.k0s()),2&t&&($.Y8G("title",$.mNQ($.bMT(1,3,"shared"))),$.R7$(3),$.JRh($.bMT(4,5,"shared")))}function ot(t,e){1&t&&($.nrm(0,"i",24),$.nI1(1,"i18n"),$.j41(2,"span",23),$.EFF(3),$.nI1(4,"i18n"),$.k0s()),2&t&&($.Y8G("title",$.mNQ($.bMT(1,3,"attachments"))),$.R7$(3),$.JRh($.bMT(4,5,"attachments")))}function at(t,e){if(1&t&&($.nrm(0,"app-org-badge",25),$.nI1(1,"async"),$.nI1(2,"orgNameFromId")),2&t){const t=$.XpG(2).$implicit,e=$.XpG(3);$.Y8G("disabled",e.disabled)("organizationId",t.organizationId)("organizationName",$.i5U(2,5,t.organizationId,$.bMT(1,3,e.organizations$)))}}function rt(t,e){if(1&t&&($.j41(0,"td",6),$.nVh(1,at,3,8,"app-org-badge",25),$.k0s()),2&t){const t=$.XpG(4);$.R7$(),$.vxM(t.organization?-1:1)}}function st(t,e){if(1&t&&($.j41(0,"td",6),$.nrm(1,"app-vault-icon",17),$.k0s(),$.j41(2,"td",6),$.nVh(3,et,3,6,"a",18)(4,it,2,1,"span"),$.nVh(5,nt,5,7),$.nVh(6,ot,5,7),$.nrm(7,"br"),$.j41(8,"small"),$.EFF(9),$.k0s()(),$.nVh(10,rt,2,1,"td",6),$.j41(11,"td",19)(12,"span",20),$.EFF(13),$.nI1(14,"number"),$.nI1(15,"i18n"),$.k0s()()),2&t){const t=e.$implicit,i=$.XpG(3);$.R7$(),$.Y8G("cipher",t),$.R7$(2),$.vxM(!i.organization||i.canManageCipher(t)?3:4),$.R7$(2),$.vxM(!i.organization&&t.organizationId?5:-1),$.R7$(),$.vxM(t.hasAttachments?6:-1),$.R7$(3),$.JRh(t.subTitle),$.R7$(),$.vxM(i.isAdminConsoleActive?-1:10),$.R7$(3),$.SpI(" ",$.i5U(15,9,"exposedXTimes",$.bMT(14,7,t.exposedXTimes))," ")}}function ct(t,e){if(1&t&&($.j41(0,"bit-callout",3),$.nI1(1,"i18n"),$.EFF(2),$.nI1(3,"number"),$.nI1(4,"i18n"),$.k0s(),$.nVh(5,Z,2,1),$.j41(6,"bit-table-scroll",4),$.qex(7,5),$.nrm(8,"th",6),$.j41(9,"th",7),$.EFF(10),$.nI1(11,"i18n"),$.k0s(),$.nVh(12,tt,3,3,"th",8),$.j41(13,"th",9),$.EFF(14),$.nI1(15,"i18n"),$.k0s(),$.bVm(),$.DNE(16,st,16,12,"ng-template",10),$.k0s()),2&t){const t=$.XpG(2);$.Y8G("title",$.mNQ($.bMT(1,10,"exposedPasswordsFound")))("useAlertRole",!0),$.R7$(2),$.SpI(" ",$.brH(4,14,"exposedPasswordsFoundReportDesc",$.bMT(3,12,t.ciphers.length),t.vaultMsg)," "),$.R7$(3),$.vxM(t.showFilterToggle&&!t.isAdminConsoleActive?5:-1),$.R7$(),$.Y8G("dataSource",t.dataSource)("rowSize",75),$.R7$(4),$.JRh($.bMT(11,18,"name")),$.R7$(2),$.vxM(t.isAdminConsoleActive?-1:12),$.R7$(2),$.SpI(" ",$.bMT(15,20,"timesExposed")," ")}}function lt(t,e){if(1&t&&($.j41(0,"div",1),$.nVh(1,_,4,7,"bit-callout",2)(2,ct,17,22),$.k0s()),2&t){const t=$.XpG();$.R7$(),$.vxM(t.ciphers.length?2:1)}}class pt extends R.y{constructor(t,e,i,n,o,a,r,s,c,l,p){super(t,e,n,i,o,r,s,c,l,p),this.accountService=o,this.route=a,this.manageableCiphers=[]}ngOnInit(){return H(this,void 0,void 0,function*(){var t,e;this.isAdminConsoleActive=!0,null===(e=null===(t=this.route.parent)||void 0===t?void 0:t.parent)||void 0===e||e.params.pipe((0,c.M)(t=>H(this,void 0,void 0,function*(){const e=yield(0,l._)(this.accountService.activeAccount$.pipe(d.F6));this.organization=yield(0,l._)(this.organizationService.organizations$(e).pipe((0,u.Hc)(t.organizationId))),this.manageableCiphers=yield this.cipherService.getAll(e)})),(0,p.Q)(this.destroyed$)).subscribe()})}getAllCiphers(){return H(this,void 0,void 0,function*(){return this.organization?this.cipherService.getAllFromApiForOrganization(this.organization.id,!0):[]})}canManageCipher(t){return 0===t.collectionIds.length||this.manageableCiphers.some(e=>e.id===t.id)}}pt.ɵfac=function(t){return new(t||pt)($.rXU(F.p),$.rXU(M.d),$.rXU(S.o3),$.rXU(s.PV),$.rXU(y.D),$.rXU(j.nX),$.rXU(b.qX),$.rXU(k.W),$.rXU(h.H),$.rXU(b.hI),$.rXU(I.l))},pt.ɵcmp=$.VBU({type:pt,selectors:[["app-org-exposed-passwords-report"]],features:[$.Jv_([{provide:b.hI,useClass:I.l},I.l,b.BR,b.aC]),$.Vt3],decls:9,vars:8,consts:[["type","submit","buttonType","primary","bitButton","",3,"click","loading"],[1,"tw-mt-4"],["type","success",3,"title"],["type","danger",3,"title","useAlertRole"],[3,"dataSource","rowSize"],["header",""],["bitCell",""],["bitCell","","bitSortable","name"],["bitCell","","bitSortable","organizationId"],["bitCell","","bitSortable","exposedXTimes",1,"tw-text-right"],["bitRowDef",""],[3,"selected"],["fullWidth","true",3,"placeholderText","options","ngModel"],[3,"selectedChange","selected"],[3,"value"],["bitBadge","","variant","info"],["fullWidth","true",3,"ngModelChange","placeholderText","options","ngModel"],[3,"cipher"],["bitLink","","href","#","appStopClick","",3,"title"],["bitCell","",1,"tw-text-right"],["bitBadge","","variant","warning"],["bitLink","","href","#","appStopClick","",3,"click","title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection-shared","tw-ml-1",3,"title"],[1,"tw-sr-only"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip","tw-ml-1",3,"title"],["appStopProp","",3,"disabled","organizationId","organizationName"]],template:function(t,e){1&t&&($.nrm(0,"app-header"),$.j41(1,"bit-container")(2,"p"),$.EFF(3),$.nI1(4,"i18n"),$.k0s(),$.j41(5,"button",0),$.bIt("click",function(){return e.load()}),$.EFF(6),$.nI1(7,"i18n"),$.k0s(),$.nVh(8,lt,3,1,"div",1),$.k0s()),2&t&&($.R7$(3),$.JRh($.bMT(4,4,"exposedPasswordsReportDesc")),$.R7$(2),$.Y8G("loading",e.loading),$.R7$(),$.SpI(" ",$.bMT(7,6,"checkExposedPasswords")," "),$.R7$(2),$.vxM(e.hasLoaded?8:-1))},dependencies:[m.G,X.BC,X.vS,G.R,T.Y,x.x,E.n,z.Q,C.G,U.H,N.g,V.a,A.Q,Y.O,V.N,O.H,D.a,o.G,B.f,f.t,P.P,v.Y,g.M,J.Jj,J.QX,Q.$,W.t],encapsulation:2});var dt=i(56962),ut=i(30414),ht=i(94573),gt=function(t,e,i,n){return new(i||(i=Promise))(function(o,a){function r(t){try{c(n.next(t))}catch(e){a(e)}}function s(t){try{c(n.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,s)}c((n=n.apply(t,e||[])).next())})};function bt(t,e){1&t&&($.j41(0,"div"),$.nrm(1,"i",1),$.nI1(2,"i18n"),$.j41(3,"span",2),$.EFF(4),$.nI1(5,"i18n"),$.k0s()()),2&t&&($.R7$(),$.Y8G("title",$.mNQ($.bMT(2,3,"loading"))),$.R7$(3),$.JRh($.bMT(5,5,"loading")))}function mt(t,e){1&t&&($.j41(0,"bit-callout",3),$.nI1(1,"i18n"),$.EFF(2),$.nI1(3,"i18n"),$.k0s()),2&t&&($.Y8G("title",$.mNQ($.bMT(1,3,"goodNews"))),$.R7$(2),$.SpI(" ",$.bMT(3,5,"noInactive2fa")," "))}function ft(t,e){if(1&t&&($.j41(0,"bit-toggle",11),$.EFF(1),$.j41(2,"span",12),$.EFF(3),$.k0s()()),2&t){const t=e.$implicit,i=$.XpG(5);$.Y8G("value",t),$.R7$(),$.SpI(" ",i.getName(t)," "),$.R7$(2),$.SpI(" ",i.getCount(t)," ")}}function vt(t,e){if(1&t){const t=$.RV6();$.j41(0,"bit-toggle-group",10),$.nI1(1,"async"),$.nI1(2,"i18n"),$.bIt("selectedChange",function(e){w.eBV(t);const i=$.XpG(4);return w.Njj(i.filterOrgToggle(e))}),$.Z7z(3,ft,4,3,"bit-toggle",11,$.fX1),$.k0s()}if(2&t){const t=$.XpG(4);$.Y8G("selected",$.bMT(1,2,t.filterOrgStatus$)),$.BMQ("aria-label",$.bMT(2,4,"addAccessFilter")),$.R7$(3),$.Dyx(t.filterStatus)}}function It(t,e){if(1&t){const t=$.RV6();$.j41(0,"bit-chip-select",13),$.bIt("ngModelChange",function(e){w.eBV(t);const i=$.XpG(4);return w.Njj(i.filterOrgToggleChipSelect(e))}),$.k0s()}if(2&t){const t=$.XpG(4);$.Y8G("placeholderText",t.chipSelectOptions[0].label)("options",t.chipSelectOptions)("ngModel",t.selectedFilterChip)}}function Rt(t,e){if(1&t&&$.nVh(0,vt,5,6,"bit-toggle-group",8)(1,It,1,3,"bit-chip-select",9),2&t){const t=$.XpG(3);$.vxM(t.canDisplayToggleGroup()?0:1)}}function $t(t,e){1&t&&($.qex(0,6),$.nrm(1,"th",14),$.j41(2,"th",14),$.EFF(3),$.nI1(4,"i18n"),$.k0s(),$.j41(5,"th",14),$.EFF(6),$.nI1(7,"i18n"),$.k0s(),$.nrm(8,"th",14),$.bVm()),2&t&&($.R7$(3),$.JRh($.bMT(4,2,"name")),$.R7$(3),$.JRh($.bMT(7,4,"owner")))}function wt(t,e){if(1&t){const t=$.RV6();$.qex(0),$.j41(1,"a",19),$.nI1(2,"i18n"),$.bIt("click",function(){w.eBV(t);const e=$.XpG().$implicit,i=$.XpG(3);return w.Njj(i.selectCipher(e))}),$.EFF(3),$.k0s(),$.bVm()}if(2&t){const t=$.XpG().$implicit;$.R7$(),$.Y8G("title",$.mNQ($.i5U(2,3,"editItemWithName",t.name))),$.R7$(2),$.JRh(t.name)}}function Ft(t,e){if(1&t&&($.j41(0,"span"),$.EFF(1),$.k0s()),2&t){const t=$.XpG(2).$implicit;$.R7$(),$.JRh(t.name)}}function Mt(t,e){1&t&&$.DNE(0,Ft,2,1,"ng-template")}function St(t,e){1&t&&($.qex(0),$.nrm(1,"i",20),$.nI1(2,"i18n"),$.j41(3,"span",2),$.EFF(4),$.nI1(5,"i18n"),$.k0s(),$.bVm()),2&t&&($.R7$(),$.Y8G("title",$.mNQ($.bMT(2,3,"shared"))),$.R7$(3),$.JRh($.bMT(5,5,"shared")))}function yt(t,e){1&t&&($.qex(0),$.nrm(1,"i",21),$.nI1(2,"i18n"),$.j41(3,"span",2),$.EFF(4),$.nI1(5,"i18n"),$.k0s(),$.bVm()),2&t&&($.R7$(),$.Y8G("title",$.mNQ($.bMT(2,3,"attachments"))),$.R7$(3),$.JRh($.bMT(5,5,"attachments")))}function jt(t,e){if(1&t&&($.nrm(0,"app-org-badge",16),$.nI1(1,"async"),$.nI1(2,"orgNameFromId")),2&t){const t=$.XpG().$implicit,e=$.XpG(3);$.Y8G("disabled",e.disabled)("organizationId",t.organizationId)("organizationName",$.i5U(2,5,t.organizationId,$.bMT(1,3,e.organizations$)))}}function kt(t,e){if(1&t&&($.j41(0,"a",18),$.EFF(1),$.nI1(2,"i18n"),$.k0s()),2&t){const t=$.XpG().$implicit,e=$.XpG(3);$.Y8G("href",$.mNQ(e.cipherDocs.get(t.id)),$.B4B),$.R7$(),$.SpI(" ",$.bMT(2,3,"instructions"))}}function Xt(t,e){if(1&t&&($.j41(0,"td",14),$.nrm(1,"app-vault-icon",15),$.k0s(),$.j41(2,"td",14),$.nVh(3,wt,4,6,"ng-container")(4,Mt,1,0),$.nVh(5,St,6,7,"ng-container"),$.nVh(6,yt,6,7,"ng-container"),$.nrm(7,"br"),$.j41(8,"small"),$.EFF(9),$.k0s()(),$.j41(10,"td",14),$.nVh(11,jt,3,8,"app-org-badge",16),$.k0s(),$.j41(12,"td",17),$.nVh(13,kt,3,5,"a",18),$.k0s()),2&t){const t=e.$implicit,i=$.XpG(3);$.R7$(),$.Y8G("cipher",t),$.R7$(2),$.vxM(!i.organization||i.canManageCipher(t)?3:4),$.R7$(2),$.vxM(!i.organization&&t.organizationId?5:-1),$.R7$(),$.vxM(t.hasAttachments?6:-1),$.R7$(3),$.JRh(t.subTitle),$.R7$(2),$.vxM(i.organization?-1:11),$.R7$(2),$.vxM(i.cipherDocs.has(t.id)?13:-1)}}function Gt(t,e){if(1&t&&($.j41(0,"bit-callout",4),$.nI1(1,"i18n"),$.EFF(2),$.nI1(3,"number"),$.nI1(4,"i18n"),$.k0s(),$.nVh(5,Rt,2,1),$.j41(6,"bit-table-scroll",5),$.nVh(7,$t,9,6,"ng-container",6),$.DNE(8,Xt,14,7,"ng-template",7),$.k0s()),2&t){const t=$.XpG(2);$.Y8G("title",$.mNQ($.bMT(1,7,"inactive2faFound"))),$.R7$(2),$.SpI(" ",$.brH(4,11,"inactive2faFoundReportDesc",$.bMT(3,9,t.ciphers.length),t.vaultMsg)," "),$.R7$(3),$.vxM(t.showFilterToggle&&!t.isAdminConsoleActive?5:-1),$.R7$(),$.Y8G("dataSource",t.dataSource)("rowSize",75),$.R7$(),$.vxM(t.isAdminConsoleActive?-1:7)}}function Tt(t,e){if(1&t&&($.j41(0,"div",0),$.nVh(1,mt,4,7,"bit-callout",3)(2,Gt,9,15),$.k0s()),2&t){const t=$.XpG();$.R7$(),$.vxM(t.ciphers.length?2:1)}}class xt extends ut.O{constructor(t,e,i,n,o,a,r,s,c,l,p,d){super(t,a,e,r,n,o,s,c,l,p,d),this.route=i,this.changeDetectorRef=d,this.manageableCiphers=[]}ngOnInit(){const t=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return gt(this,void 0,void 0,function*(){var e,i;this.isAdminConsoleActive=!0,null===(i=null===(e=this.route.parent)||void 0===e?void 0:e.parent)||void 0===i||i.params.pipe((0,c.M)(e=>gt(this,void 0,void 0,function*(){const i=yield(0,l._)(this.accountService.activeAccount$.pipe(d.F6));this.organization=yield(0,l._)(this.organizationService.organizations$(i).pipe((0,u.Hc)(e.organizationId))),this.manageableCiphers=yield this.cipherService.getAll(i),yield t.ngOnInit.call(this),this.changeDetectorRef.markForCheck()})),(0,p.Q)(this.destroyed$)).subscribe()})}getAllCiphers(){return gt(this,void 0,void 0,function*(){return this.organization?this.cipherService.getAllFromApiForOrganization(this.organization.id,!0):[]})}canManageCipher(t){return 0===t.collectionIds.length||this.manageableCiphers.some(e=>e.id===t.id)}}xt.ɵfac=function(t){return new(t||xt)($.rXU(F.p),$.rXU(S.o3),$.rXU(j.nX),$.rXU(dt.K),$.rXU(b.qX),$.rXU(s.PV),$.rXU(y.D),$.rXU(k.W),$.rXU(h.H),$.rXU(b.hI),$.rXU(I.l),$.rXU(ht.gRc))},xt.ɵcmp=$.VBU({type:xt,selectors:[["app-inactive-two-factor-report"]],features:[$.Jv_([{provide:b.hI,useClass:I.l},I.l,b.BR,b.aC]),$.Vt3],decls:7,vars:4,consts:[[1,"tw-mt-4"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","tw-text-muted",3,"title"],[1,"tw-sr-only"],["type","success",3,"title"],["type","danger",3,"title"],[3,"dataSource","rowSize"],["header",""],["bitRowDef",""],[3,"selected"],["fullWidth","true",3,"placeholderText","options","ngModel"],[3,"selectedChange","selected"],[3,"value"],["bitBadge","","variant","info"],["fullWidth","true",3,"ngModelChange","placeholderText","options","ngModel"],["bitCell",""],[3,"cipher"],["appStopProp","",3,"disabled","organizationId","organizationName"],["bitCell","",1,"tw-text-right"],["bitBadge","","target","_blank","rel","noreferrer",3,"href"],["bitLink","","href","#","appStopClick","",3,"click","title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection-shared","tw-ml-1",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip","tw-ml-1",3,"title"]],template:function(t,e){1&t&&($.nrm(0,"app-header"),$.j41(1,"bit-container")(2,"p"),$.EFF(3),$.nI1(4,"i18n"),$.k0s(),$.nVh(5,bt,6,7,"div")(6,Tt,3,1,"div",0),$.k0s()),2&t&&($.R7$(3),$.JRh($.bMT(4,2,"inactive2faReportDesc")),$.R7$(2),$.vxM(!e.hasLoaded&&e.loading?5:6))},dependencies:[m.G,X.BC,X.vS,G.R,T.Y,x.x,E.n,C.G,U.H,N.g,V.a,A.Q,V.N,O.H,D.a,o.G,B.f,f.t,P.P,v.Y,g.M,J.Jj,J.QX,Q.$,W.t],encapsulation:2,changeDetection:0});var Et=i(17343),zt=function(t,e,i,n){return new(i||(i=Promise))(function(o,a){function r(t){try{c(n.next(t))}catch(e){a(e)}}function s(t){try{c(n.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,s)}c((n=n.apply(t,e||[])).next())})};function Ct(t,e){1&t&&($.j41(0,"div"),$.nrm(1,"i",1),$.nI1(2,"i18n"),$.j41(3,"span",2),$.EFF(4),$.nI1(5,"i18n"),$.k0s()()),2&t&&($.R7$(),$.Y8G("title",$.mNQ($.bMT(2,3,"loading"))),$.R7$(3),$.JRh($.bMT(5,5,"loading")))}function Ut(t,e){1&t&&($.j41(0,"bit-callout",3),$.nI1(1,"i18n"),$.EFF(2),$.nI1(3,"i18n"),$.k0s()),2&t&&($.Y8G("title",$.mNQ($.bMT(1,3,"goodNews"))),$.R7$(2),$.SpI(" ",$.bMT(3,5,"noReusedPasswords")," "))}function Nt(t,e){if(1&t&&($.j41(0,"bit-toggle",11),$.EFF(1),$.j41(2,"span",12),$.EFF(3),$.k0s()()),2&t){const t=e.$implicit,i=$.XpG(5);$.Y8G("value",t),$.R7$(),$.SpI(" ",i.getName(t)," "),$.R7$(2),$.SpI(" ",i.getCount(t)," ")}}function Vt(t,e){if(1&t){const t=$.RV6();$.j41(0,"bit-toggle-group",10),$.nI1(1,"async"),$.nI1(2,"i18n"),$.bIt("selectedChange",function(e){w.eBV(t);const i=$.XpG(4);return w.Njj(i.filterOrgToggle(e))}),$.Z7z(3,Nt,4,3,"bit-toggle",11,$.fX1),$.k0s()}if(2&t){const t=$.XpG(4);$.Y8G("selected",$.bMT(1,2,t.filterOrgStatus$)),$.BMQ("aria-label",$.bMT(2,4,"addAccessFilter")),$.R7$(3),$.Dyx(t.filterStatus)}}function At(t,e){if(1&t){const t=$.RV6();$.j41(0,"bit-chip-select",13),$.bIt("ngModelChange",function(e){w.eBV(t);const i=$.XpG(4);return w.Njj(i.filterOrgToggleChipSelect(e))}),$.k0s()}if(2&t){const t=$.XpG(4);$.Y8G("placeholderText",t.chipSelectOptions[0].label)("options",t.chipSelectOptions)("ngModel",t.selectedFilterChip)}}function Yt(t,e){if(1&t&&$.nVh(0,Vt,5,6,"bit-toggle-group",8)(1,At,1,3,"bit-chip-select",9),2&t){const t=$.XpG(3);$.vxM(t.canDisplayToggleGroup()?0:1)}}function Ot(t,e){1&t&&($.qex(0,6),$.nrm(1,"th",14),$.j41(2,"th",14),$.EFF(3),$.nI1(4,"i18n"),$.k0s(),$.j41(5,"th",14),$.EFF(6),$.nI1(7,"i18n"),$.k0s(),$.j41(8,"th",15),$.EFF(9),$.nI1(10,"i18n"),$.k0s(),$.bVm()),2&t&&($.R7$(3),$.JRh($.bMT(4,3,"name")),$.R7$(3),$.JRh($.bMT(7,5,"owner")),$.R7$(3),$.JRh($.bMT(10,7,"timesReused")))}function Dt(t,e){if(1&t){const t=$.RV6();$.j41(0,"a",20),$.nI1(1,"i18n"),$.bIt("click",function(){w.eBV(t);const e=$.XpG().$implicit,i=$.XpG(3);return w.Njj(i.selectCipher(e))}),$.EFF(2),$.k0s()}if(2&t){const t=$.XpG().$implicit;$.Y8G("title",$.mNQ($.i5U(1,3,"editItemWithName",t.name))),$.R7$(2),$.JRh(t.name)}}function Bt(t,e){if(1&t&&($.j41(0,"span"),$.EFF(1),$.k0s()),2&t){const t=$.XpG().$implicit;$.R7$(),$.JRh(t.name)}}function Pt(t,e){1&t&&($.nrm(0,"i",21),$.nI1(1,"i18n"),$.j41(2,"span",2),$.EFF(3),$.nI1(4,"i18n"),$.k0s()),2&t&&($.Y8G("title",$.mNQ($.bMT(1,3,"shared"))),$.R7$(3),$.JRh($.bMT(4,5,"shared")))}function Jt(t,e){1&t&&($.nrm(0,"i",22),$.nI1(1,"i18n"),$.j41(2,"span",2),$.EFF(3),$.nI1(4,"i18n"),$.k0s()),2&t&&($.Y8G("title",$.mNQ($.bMT(1,3,"attachments"))),$.R7$(3),$.JRh($.bMT(4,5,"attachments")))}function Qt(t,e){if(1&t&&($.nrm(0,"app-org-badge",18),$.nI1(1,"async"),$.nI1(2,"orgNameFromId")),2&t){const t=$.XpG().$implicit,e=$.XpG(3);$.Y8G("disabled",e.disabled)("organizationId",t.organizationId)("organizationName",$.i5U(2,5,t.organizationId,$.bMT(1,3,e.organizations$)))}}function Wt(t,e){if(1&t&&($.j41(0,"td",14),$.nrm(1,"app-vault-icon",16),$.k0s(),$.j41(2,"td",14),$.nVh(3,Dt,3,6,"a",17)(4,Bt,2,1,"span"),$.nVh(5,Pt,5,7),$.nVh(6,Jt,5,7),$.nrm(7,"br"),$.j41(8,"small"),$.EFF(9),$.k0s()(),$.j41(10,"td",14),$.nVh(11,Qt,3,8,"app-org-badge",18),$.k0s(),$.j41(12,"td",15)(13,"span",19),$.EFF(14),$.nI1(15,"i18n"),$.k0s()()),2&t){const t=e.$implicit,i=$.XpG(3);$.R7$(),$.Y8G("cipher",t),$.R7$(2),$.vxM(!i.organization||i.canManageCipher(t)?3:4),$.R7$(2),$.vxM(!i.organization&&t.organizationId?5:-1),$.R7$(),$.vxM(t.hasAttachments?6:-1),$.R7$(3),$.JRh(t.subTitle),$.R7$(2),$.vxM(i.organization?-1:11),$.R7$(3),$.SpI(" ",$.i5U(15,7,"reusedXTimes",i.passwordUseMap.get(t.login.password))," ")}}function Ht(t,e){if(1&t&&($.j41(0,"bit-callout",4),$.nI1(1,"i18n"),$.EFF(2),$.nI1(3,"number"),$.nI1(4,"i18n"),$.k0s(),$.nVh(5,Yt,2,1),$.j41(6,"bit-table-scroll",5),$.nVh(7,Ot,11,9,"ng-container",6),$.DNE(8,Wt,16,10,"ng-template",7),$.k0s()),2&t){const t=$.XpG(2);$.Y8G("title",$.mNQ($.bMT(1,7,"reusedPasswordsFound"))),$.R7$(2),$.SpI(" ",$.brH(4,11,"reusedPasswordsFoundReportDesc",$.bMT(3,9,t.ciphers.length),t.vaultMsg)," "),$.R7$(3),$.vxM(t.showFilterToggle&&!t.isAdminConsoleActive?5:-1),$.R7$(),$.Y8G("dataSource",t.dataSource)("rowSize",75),$.R7$(),$.vxM(t.isAdminConsoleActive?-1:7)}}function _t(t,e){if(1&t&&($.j41(0,"div",0),$.nVh(1,Ut,4,7,"bit-callout",3)(2,Ht,9,15),$.k0s()),2&t){const t=$.XpG();$.R7$(),$.vxM(t.ciphers.length?2:1)}}class Lt extends Et.A{constructor(t,e,i,n,o,a,r,s,c,l){super(t,n,e,o,a,r,s,c,l),this.route=i,this.accountService=o,this.manageableCiphers=[]}ngOnInit(){const t=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return zt(this,void 0,void 0,function*(){var e,i;this.isAdminConsoleActive=!0,null===(i=null===(e=this.route.parent)||void 0===e?void 0:e.parent)||void 0===i||i.params.pipe((0,c.M)(e=>zt(this,void 0,void 0,function*(){const i=yield(0,l._)(this.accountService.activeAccount$.pipe(d.F6));this.organization=yield(0,l._)(this.organizationService.organizations$(i).pipe((0,u.Hc)(e.organizationId))),this.manageableCiphers=yield this.cipherService.getAll(i),yield t.ngOnInit.call(this)})),(0,p.Q)(this.destroyed$)).subscribe()})}getAllCiphers(){return zt(this,void 0,void 0,function*(){return this.organization?this.cipherService.getAllFromApiForOrganization(this.organization.id,!0):[]})}canManageCipher(t){return 0===t.collectionIds.length||this.manageableCiphers.some(e=>e.id===t.id)}}Lt.ɵfac=function(t){return new(t||Lt)($.rXU(F.p),$.rXU(S.o3),$.rXU(j.nX),$.rXU(s.PV),$.rXU(y.D),$.rXU(b.qX),$.rXU(k.W),$.rXU(h.H),$.rXU(b.hI),$.rXU(I.l))},Lt.ɵcmp=$.VBU({type:Lt,selectors:[["app-reused-passwords-report"]],features:[$.Jv_([{provide:b.hI,useClass:I.l},I.l,b.BR,b.aC]),$.Vt3],decls:7,vars:4,consts:[[1,"tw-mt-4"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","tw-text-muted",3,"title"],[1,"tw-sr-only"],["type","success",3,"title"],["type","danger",3,"title"],[3,"dataSource","rowSize"],["header",""],["bitRowDef",""],[3,"selected"],["fullWidth","true",3,"placeholderText","options","ngModel"],[3,"selectedChange","selected"],[3,"value"],["bitBadge","","variant","info"],["fullWidth","true",3,"ngModelChange","placeholderText","options","ngModel"],["bitCell",""],["bitCell","",1,"tw-text-right"],[3,"cipher"],["bitLink","","href","#","appStopClick","",3,"title"],["appStopProp","",3,"disabled","organizationId","organizationName"],["bitBadge","","variant","warning"],["bitLink","","href","#","appStopClick","",3,"click","title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection-shared","tw-ml-1",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip","tw-ml-1",3,"title"]],template:function(t,e){1&t&&($.nrm(0,"app-header"),$.j41(1,"bit-container")(2,"p"),$.EFF(3),$.nI1(4,"i18n"),$.k0s(),$.nVh(5,Ct,6,7,"div")(6,_t,3,1,"div",0),$.k0s()),2&t&&($.R7$(3),$.JRh($.bMT(4,2,"reusedPasswordsReportDesc")),$.R7$(2),$.vxM(!e.hasLoaded&&e.loading?5:6))},dependencies:[m.G,X.BC,X.vS,G.R,T.Y,x.x,E.n,C.G,U.H,N.g,V.a,A.Q,V.N,O.H,D.a,o.G,B.f,f.t,P.P,v.Y,g.M,J.Jj,J.QX,Q.$,W.t],encapsulation:2});var qt=i(23965),Kt=i(71687),Zt=function(t,e,i,n){return new(i||(i=Promise))(function(o,a){function r(t){try{c(n.next(t))}catch(e){a(e)}}function s(t){try{c(n.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,s)}c((n=n.apply(t,e||[])).next())})};function te(t,e){1&t&&($.j41(0,"div"),$.nrm(1,"i",1),$.nI1(2,"i18n"),$.j41(3,"span",2),$.EFF(4),$.nI1(5,"i18n"),$.k0s()()),2&t&&($.R7$(),$.Y8G("title",$.mNQ($.bMT(2,3,"loading"))),$.R7$(3),$.JRh($.bMT(5,5,"loading")))}function ee(t,e){1&t&&($.j41(0,"bit-callout",3),$.nI1(1,"i18n"),$.EFF(2),$.nI1(3,"i18n"),$.k0s()),2&t&&($.Y8G("title",$.mNQ($.bMT(1,3,"goodNews"))),$.R7$(2),$.SpI(" ",$.bMT(3,5,"noUnsecuredWebsites")," "))}function ie(t,e){if(1&t&&($.j41(0,"bit-toggle",11),$.EFF(1),$.j41(2,"span",12),$.EFF(3),$.k0s()()),2&t){const t=e.$implicit,i=$.XpG(5);$.Y8G("value",t),$.R7$(),$.SpI(" ",i.getName(t)," "),$.R7$(2),$.SpI(" ",i.getCount(t)," ")}}function ne(t,e){if(1&t){const t=$.RV6();$.j41(0,"bit-toggle-group",10),$.nI1(1,"async"),$.nI1(2,"i18n"),$.bIt("selectedChange",function(e){w.eBV(t);const i=$.XpG(4);return w.Njj(i.filterOrgToggle(e))}),$.Z7z(3,ie,4,3,"bit-toggle",11,$.fX1),$.k0s()}if(2&t){const t=$.XpG(4);$.Y8G("selected",$.bMT(1,2,t.filterOrgStatus$)),$.BMQ("aria-label",$.bMT(2,4,"addAccessFilter")),$.R7$(3),$.Dyx(t.filterStatus)}}function oe(t,e){if(1&t){const t=$.RV6();$.j41(0,"bit-chip-select",13),$.bIt("ngModelChange",function(e){w.eBV(t);const i=$.XpG(4);return w.Njj(i.filterOrgToggleChipSelect(e))}),$.k0s()}if(2&t){const t=$.XpG(4);$.Y8G("placeholderText",t.chipSelectOptions[0].label)("options",t.chipSelectOptions)("ngModel",t.selectedFilterChip)}}function ae(t,e){if(1&t&&$.nVh(0,ne,5,6,"bit-toggle-group",8)(1,oe,1,3,"bit-chip-select",9),2&t){const t=$.XpG(3);$.vxM(t.canDisplayToggleGroup()?0:1)}}function re(t,e){1&t&&($.qex(0,6),$.nrm(1,"th",14),$.j41(2,"th",14),$.EFF(3),$.nI1(4,"i18n"),$.k0s(),$.j41(5,"th",14),$.EFF(6),$.nI1(7,"i18n"),$.k0s(),$.bVm()),2&t&&($.R7$(3),$.JRh($.bMT(4,2,"name")),$.R7$(3),$.JRh($.bMT(7,4,"owner")))}function se(t,e){if(1&t){const t=$.RV6();$.j41(0,"a",18),$.nI1(1,"i18n"),$.bIt("click",function(){w.eBV(t);const e=$.XpG().$implicit,i=$.XpG(3);return w.Njj(i.selectCipher(e))}),$.EFF(2),$.k0s()}if(2&t){const t=$.XpG().$implicit;$.Y8G("title",$.mNQ($.i5U(1,3,"editItemWithName",t.name))),$.R7$(2),$.JRh(t.name)}}function ce(t,e){if(1&t&&($.j41(0,"span"),$.EFF(1),$.k0s()),2&t){const t=$.XpG().$implicit;$.R7$(),$.JRh(t.name)}}function le(t,e){1&t&&($.nrm(0,"i",19),$.nI1(1,"i18n"),$.j41(2,"span",2),$.EFF(3),$.nI1(4,"i18n"),$.k0s()),2&t&&($.Y8G("title",$.mNQ($.bMT(1,3,"shared"))),$.R7$(3),$.JRh($.bMT(4,5,"shared")))}function pe(t,e){1&t&&($.nrm(0,"i",20),$.nI1(1,"i18n"),$.j41(2,"span",2),$.EFF(3),$.nI1(4,"i18n"),$.k0s()),2&t&&($.Y8G("title",$.mNQ($.bMT(1,3,"attachments"))),$.R7$(3),$.JRh($.bMT(4,5,"attachments")))}function de(t,e){if(1&t&&($.nrm(0,"app-org-badge",17),$.nI1(1,"async"),$.nI1(2,"orgNameFromId")),2&t){const t=$.XpG().$implicit,e=$.XpG(3);$.Y8G("disabled",e.disabled)("organizationId",t.organizationId)("organizationName",$.i5U(2,5,t.organizationId,$.bMT(1,3,e.organizations$)))}}function ue(t,e){if(1&t&&($.j41(0,"td",14),$.nrm(1,"app-vault-icon",15),$.k0s(),$.j41(2,"td",14),$.nVh(3,se,3,6,"a",16)(4,ce,2,1,"span"),$.nVh(5,le,5,7),$.nVh(6,pe,5,7),$.nrm(7,"br"),$.j41(8,"small"),$.EFF(9),$.k0s()(),$.j41(10,"td",14),$.nVh(11,de,3,8,"app-org-badge",17),$.k0s()),2&t){const t=e.$implicit,i=$.XpG(3);$.R7$(),$.Y8G("cipher",t),$.R7$(2),$.vxM(!i.organization||i.canManageCipher(t)?3:4),$.R7$(2),$.vxM(!i.organization&&t.organizationId?5:-1),$.R7$(),$.vxM(t.hasAttachments?6:-1),$.R7$(3),$.JRh(t.subTitle),$.R7$(2),$.vxM(i.organization?-1:11)}}function he(t,e){if(1&t&&($.j41(0,"bit-callout",4),$.nI1(1,"i18n"),$.EFF(2),$.nI1(3,"number"),$.nI1(4,"i18n"),$.k0s(),$.nVh(5,ae,2,1),$.j41(6,"bit-table-scroll",5),$.nVh(7,re,8,6,"ng-container",6),$.DNE(8,ue,12,6,"ng-template",7),$.k0s()),2&t){const t=$.XpG(2);$.Y8G("title",$.mNQ($.bMT(1,7,"unsecuredWebsitesFound"))),$.R7$(2),$.SpI(" ",$.brH(4,11,"unsecuredWebsitesFoundReportDesc",$.bMT(3,9,t.ciphers.length),t.vaultMsg)," "),$.R7$(3),$.vxM(t.showFilterToggle&&!t.isAdminConsoleActive?5:-1),$.R7$(),$.Y8G("dataSource",t.dataSource)("rowSize",75),$.R7$(),$.vxM(t.isAdminConsoleActive?-1:7)}}function ge(t,e){if(1&t&&($.j41(0,"div",0),$.nVh(1,ee,4,7,"bit-callout",3)(2,he,9,15),$.k0s()),2&t){const t=$.XpG();$.R7$(),$.vxM(t.ciphers.length?2:1)}}class be extends Kt.U{constructor(t,e,i,n,o,a,r,s,c,l,p){super(t,n,e,o,a,r,s,c,l,p),this.route=i,this.accountService=o,this.manageableCiphers=[]}ngOnInit(){const t=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return Zt(this,void 0,void 0,function*(){var e,i;this.isAdminConsoleActive=!0,null===(i=null===(e=this.route.parent)||void 0===e?void 0:e.parent)||void 0===i||i.params.pipe((0,c.M)(e=>Zt(this,void 0,void 0,function*(){const i=yield(0,l._)(this.accountService.activeAccount$.pipe(d.F6));this.organization=yield(0,l._)(this.organizationService.organizations$(i).pipe((0,u.Hc)(e.organizationId))),this.manageableCiphers=yield this.cipherService.getAll(i),yield t.ngOnInit.call(this)})),(0,p.Q)(this.destroyed$)).subscribe()})}getAllCiphers(){return Zt(this,void 0,void 0,function*(){return this.organization?this.cipherService.getAllFromApiForOrganization(this.organization.id,!0):[]})}canManageCipher(t){return 0===t.collectionIds.length||this.manageableCiphers.some(e=>e.id===t.id)}}be.ɵfac=function(t){return new(t||be)($.rXU(F.p),$.rXU(S.o3),$.rXU(j.nX),$.rXU(s.PV),$.rXU(y.D),$.rXU(b.qX),$.rXU(k.W),$.rXU(h.H),$.rXU(qt.YD),$.rXU(b.hI),$.rXU(I.l))},be.ɵcmp=$.VBU({type:be,selectors:[["app-unsecured-websites-report"]],features:[$.Jv_([{provide:b.hI,useClass:I.l},I.l,b.BR,b.aC]),$.Vt3],decls:7,vars:4,consts:[[1,"tw-mt-4"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","tw-text-muted",3,"title"],[1,"tw-sr-only"],["type","success",3,"title"],["type","danger",3,"title"],[3,"dataSource","rowSize"],["header",""],["bitRowDef",""],[3,"selected"],["fullWidth","true",3,"placeholderText","options","ngModel"],[3,"selectedChange","selected"],[3,"value"],["bitBadge","","variant","info"],["fullWidth","true",3,"ngModelChange","placeholderText","options","ngModel"],["bitCell",""],[3,"cipher"],["bitLink","","href","#","appStopClick","",3,"title"],["appStopProp","",3,"disabled","organizationId","organizationName"],["bitLink","","href","#","appStopClick","",3,"click","title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection-shared","tw-ml-1",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip","tw-ml-1",3,"title"]],template:function(t,e){1&t&&($.nrm(0,"app-header"),$.j41(1,"bit-container")(2,"p"),$.EFF(3),$.nI1(4,"i18n"),$.k0s(),$.nVh(5,te,6,7,"div")(6,ge,3,1,"div",0),$.k0s()),2&t&&($.R7$(3),$.JRh($.bMT(4,2,"unsecuredWebsitesReportDesc")),$.R7$(2),$.vxM(!e.hasLoaded&&e.loading?5:6))},dependencies:[m.G,X.BC,X.vS,G.R,T.Y,x.x,E.n,C.G,U.H,N.g,V.a,A.Q,V.N,O.H,D.a,o.G,B.f,f.t,P.P,v.Y,g.M,J.Jj,J.QX,Q.$,W.t],encapsulation:2});var me=i(63457),fe=i(72523),ve=function(t,e,i,n){return new(i||(i=Promise))(function(o,a){function r(t){try{c(n.next(t))}catch(e){a(e)}}function s(t){try{c(n.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,s)}c((n=n.apply(t,e||[])).next())})};function Ie(t,e){1&t&&($.j41(0,"div"),$.nrm(1,"i",1),$.nI1(2,"i18n"),$.j41(3,"span",2),$.EFF(4),$.nI1(5,"i18n"),$.k0s()()),2&t&&($.R7$(),$.Y8G("title",$.mNQ($.bMT(2,3,"loading"))),$.R7$(3),$.JRh($.bMT(5,5,"loading")))}function Re(t,e){1&t&&($.j41(0,"bit-callout",3),$.nI1(1,"i18n"),$.EFF(2),$.nI1(3,"i18n"),$.k0s()),2&t&&($.Y8G("title",$.mNQ($.bMT(1,3,"goodNews"))),$.R7$(2),$.SpI(" ",$.bMT(3,5,"noWeakPasswords")," "))}function $e(t,e){if(1&t&&($.j41(0,"bit-toggle",15),$.EFF(1),$.j41(2,"span",16),$.EFF(3),$.k0s()()),2&t){const t=e.$implicit,i=$.XpG(5);$.Y8G("value",t),$.R7$(),$.SpI(" ",i.getName(t)," "),$.R7$(2),$.SpI(" ",i.getCount(t)," ")}}function we(t,e){if(1&t){const t=$.RV6();$.j41(0,"bit-toggle-group",14),$.nI1(1,"async"),$.nI1(2,"i18n"),$.bIt("selectedChange",function(e){w.eBV(t);const i=$.XpG(4);return w.Njj(i.filterOrgToggle(e))}),$.Z7z(3,$e,4,3,"bit-toggle",15,$.fX1),$.k0s()}if(2&t){const t=$.XpG(4);$.Y8G("selected",$.bMT(1,2,t.filterOrgStatus$)),$.BMQ("aria-label",$.bMT(2,4,"addAccessFilter")),$.R7$(3),$.Dyx(t.filterStatus)}}function Fe(t,e){if(1&t){const t=$.RV6();$.j41(0,"bit-chip-select",17),$.bIt("ngModelChange",function(e){w.eBV(t);const i=$.XpG(4);return w.Njj(i.filterOrgToggleChipSelect(e))}),$.k0s()}if(2&t){const t=$.XpG(4);$.Y8G("placeholderText",t.chipSelectOptions[0].label)("options",t.chipSelectOptions)("ngModel",t.selectedFilterChip)}}function Me(t,e){if(1&t&&$.nVh(0,we,5,6,"bit-toggle-group",12)(1,Fe,1,3,"bit-chip-select",13),2&t){const t=$.XpG(3);$.vxM(t.canDisplayToggleGroup()?0:1)}}function Se(t,e){1&t&&($.j41(0,"th",9),$.EFF(1),$.nI1(2,"i18n"),$.k0s()),2&t&&($.R7$(),$.SpI(" ",$.bMT(2,1,"owner")," "))}function ye(t,e){if(1&t){const t=$.RV6();$.j41(0,"a",22),$.nI1(1,"i18n"),$.bIt("click",function(){w.eBV(t);const e=$.XpG().$implicit,i=$.XpG(3);return w.Njj(i.selectCipher(e))}),$.EFF(2),$.k0s()}if(2&t){const t=$.XpG().$implicit;$.Y8G("title",$.mNQ($.i5U(1,3,"editItemWithName",t.name))),$.R7$(2),$.JRh(t.name)}}function je(t,e){if(1&t&&($.j41(0,"span"),$.EFF(1),$.k0s()),2&t){const t=$.XpG().$implicit;$.R7$(),$.JRh(t.name)}}function ke(t,e){1&t&&($.nrm(0,"i",23),$.nI1(1,"i18n"),$.j41(2,"span",2),$.EFF(3),$.nI1(4,"i18n"),$.k0s()),2&t&&($.Y8G("title",$.mNQ($.bMT(1,3,"shared"))),$.R7$(3),$.JRh($.bMT(4,5,"shared")))}function Xe(t,e){1&t&&($.nrm(0,"i",24),$.nI1(1,"i18n"),$.j41(2,"span",2),$.EFF(3),$.nI1(4,"i18n"),$.k0s()),2&t&&($.Y8G("title",$.mNQ($.bMT(1,3,"attachments"))),$.R7$(3),$.JRh($.bMT(4,5,"attachments")))}function Ge(t,e){if(1&t&&($.nrm(0,"app-org-badge",25),$.nI1(1,"async"),$.nI1(2,"orgNameFromId")),2&t){const t=$.XpG(2).$implicit,e=$.XpG(3);$.Y8G("disabled",e.disabled)("organizationId",t.organizationId)("organizationName",$.i5U(2,5,t.organizationId,$.bMT(1,3,e.organizations$)))}}function Te(t,e){if(1&t&&($.j41(0,"td",7),$.nVh(1,Ge,3,8,"app-org-badge",25),$.k0s()),2&t){const t=$.XpG(4);$.R7$(),$.vxM(t.organization?-1:1)}}function xe(t,e){if(1&t&&($.j41(0,"td",7),$.nrm(1,"app-vault-icon",18),$.k0s(),$.j41(2,"td",7),$.nVh(3,ye,3,6,"a",19)(4,je,2,1,"span"),$.nVh(5,ke,5,7),$.nVh(6,Xe,5,7),$.nrm(7,"br"),$.j41(8,"small"),$.EFF(9),$.k0s()(),$.nVh(10,Te,2,1,"td",7),$.j41(11,"td",20)(12,"span",21),$.EFF(13),$.nI1(14,"i18n"),$.k0s()()),2&t){const t=e.$implicit,i=$.XpG(3);$.R7$(),$.Y8G("cipher",t),$.R7$(2),$.vxM(!i.organization||i.canManageCipher(t)?3:4),$.R7$(2),$.vxM(!i.organization&&t.organizationId?5:-1),$.R7$(),$.vxM(t.hasAttachments?6:-1),$.R7$(3),$.JRh(t.subTitle),$.R7$(),$.vxM(i.isAdminConsoleActive?-1:10),$.R7$(2),$.Y8G("variant",t.reportValue.badgeVariant),$.R7$(),$.SpI(" ",$.bMT(14,8,t.reportValue.label)," ")}}function Ee(t,e){if(1&t&&($.j41(0,"bit-callout",4),$.nI1(1,"i18n"),$.EFF(2),$.nI1(3,"number"),$.nI1(4,"i18n"),$.k0s(),$.nVh(5,Me,2,1),$.j41(6,"bit-table-scroll",5),$.qex(7,6),$.nrm(8,"th",7),$.j41(9,"th",8),$.EFF(10),$.nI1(11,"i18n"),$.k0s(),$.nVh(12,Se,3,3,"th",9),$.j41(13,"th",10),$.EFF(14),$.nI1(15,"i18n"),$.k0s(),$.bVm(),$.DNE(16,xe,15,10,"ng-template",11),$.k0s()),2&t){const t=$.XpG(2);$.Y8G("title",$.mNQ($.bMT(1,9,"weakPasswordsFound"))),$.R7$(2),$.SpI(" ",$.brH(4,13,"weakPasswordsFoundReportDesc",$.bMT(3,11,t.ciphers.length),t.vaultMsg)," "),$.R7$(3),$.vxM(t.showFilterToggle&&!t.isAdminConsoleActive?5:-1),$.R7$(),$.Y8G("dataSource",t.dataSource)("rowSize",75),$.R7$(4),$.JRh($.bMT(11,17,"name")),$.R7$(2),$.vxM(t.isAdminConsoleActive?-1:12),$.R7$(2),$.SpI(" ",$.bMT(15,19,"weakness")," ")}}function ze(t,e){if(1&t&&($.j41(0,"div",0),$.nVh(1,Re,4,7,"bit-callout",3)(2,Ee,17,21),$.k0s()),2&t){const t=$.XpG();$.R7$(),$.vxM(t.ciphers.length?2:1)}}class Ce extends fe.w{constructor(t,e,i,n,o,a,r,s,c,l,p){super(t,e,o,i,l,a,r,s,c,p),this.route=n,this.accountService=l,this.manageableCiphers=[]}ngOnInit(){const t=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return ve(this,void 0,void 0,function*(){var e,i;this.isAdminConsoleActive=!0,null===(i=null===(e=this.route.parent)||void 0===e?void 0:e.parent)||void 0===i||i.params.pipe((0,c.M)(e=>ve(this,void 0,void 0,function*(){const i=yield(0,l._)(this.accountService.activeAccount$.pipe(d.F6));this.organization=yield(0,l._)(this.organizationService.organizations$(i).pipe((0,u.Hc)(e.organizationId))),this.manageableCiphers=yield this.cipherService.getAll(i),yield t.ngOnInit.call(this)})),(0,p.Q)(this.destroyed$)).subscribe()})}getAllCiphers(){return ve(this,void 0,void 0,function*(){return this.organization?this.cipherService.getAllFromApiForOrganization(this.organization.id,!0):[]})}canManageCipher(t){return 0===t.collectionIds.length||this.manageableCiphers.some(e=>e.id===t.id)}}Ce.ɵfac=function(t){return new(t||Ce)($.rXU(F.p),$.rXU(me.Q),$.rXU(S.o3),$.rXU(j.nX),$.rXU(s.PV),$.rXU(b.qX),$.rXU(k.W),$.rXU(h.H),$.rXU(b.hI),$.rXU(y.D),$.rXU(I.l))},Ce.ɵcmp=$.VBU({type:Ce,selectors:[["app-weak-passwords-report"]],features:[$.Jv_([{provide:b.hI,useClass:I.l},I.l,b.BR,b.aC]),$.Vt3],decls:7,vars:4,consts:[[1,"tw-mt-4"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","tw-text-muted",3,"title"],[1,"tw-sr-only"],["type","success",3,"title"],["type","danger",3,"title"],[3,"dataSource","rowSize"],["header",""],["bitCell",""],["bitCell","","bitSortable","name"],["bitCell","","bitSortable","organizationId"],["bitCell","","bitSortable","scoreKey","default","desc",1,"tw-text-right"],["bitRowDef",""],[3,"selected"],["fullWidth","true",3,"placeholderText","options","ngModel"],[3,"selectedChange","selected"],[3,"value"],["bitBadge","","variant","info"],["fullWidth","true",3,"ngModelChange","placeholderText","options","ngModel"],[3,"cipher"],["bitLink","","href","#","appStopClick","",3,"title"],["bitCell","",1,"tw-text-right"],["bitBadge","",3,"variant"],["bitLink","","href","#","appStopClick","",3,"click","title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection-shared","tw-ml-1",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip","tw-ml-1",3,"title"],["appStopProp","",3,"disabled","organizationId","organizationName"]],template:function(t,e){1&t&&($.nrm(0,"app-header"),$.j41(1,"bit-container")(2,"p"),$.EFF(3),$.nI1(4,"i18n"),$.k0s(),$.nVh(5,Ie,6,7,"div")(6,ze,3,1,"div",0),$.k0s()),2&t&&($.R7$(3),$.JRh($.bMT(4,2,"weakPasswordsReportDesc")),$.R7$(2),$.vxM(!e.hasLoaded&&e.loading?5:6))},dependencies:[m.G,X.BC,X.vS,G.R,T.Y,x.x,E.n,C.G,U.H,N.g,V.a,A.Q,Y.O,V.N,O.H,D.a,o.G,B.f,f.t,P.P,v.Y,g.M,J.Jj,J.QX,Q.$,W.t],encapsulation:2});var Ue=i(3204),Ne=function(t,e,i,n){return new(i||(i=Promise))(function(o,a){function r(t){try{c(n.next(t))}catch(e){a(e)}}function s(t){try{c(n.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,s)}c((n=n.apply(t,e||[])).next())})};function Ve(){return(t,e)=>Ne(this,void 0,void 0,function*(){const e=(0,w.WQX)(j.Ix),i=(0,w.WQX)(s.PV),n=(0,w.WQX)(y.D),o=(0,w.WQX)(S.o3),a=yield(0,l._)(n.activeAccount$.pipe((0,Ue.T)(t=>null==t?void 0:t.id))),r=yield(0,l._)(i.organizations$(a).pipe((0,s.Sw)(t.params.organizationId)));if(null==r)return e.createUrlTree(["/"]);if(r.isFreeOrg){if(!r.canEditSubscription)return yield o.openSimpleDialog({title:{key:"upgradeOrganizationCloseSecurityGaps"},content:{key:"upgradeOrganizationCloseSecurityGapsDesc"},acceptButtonText:{key:"ok"},cancelButtonText:null,type:"info"}),!1;(yield o.openSimpleDialog({title:{key:"upgradeOrganizationCloseSecurityGaps"},content:{key:"upgradeOrganizationCloseSecurityGapsDesc"},acceptButtonText:{key:"upgradeOrganization"},type:"info",icon:"bwi-plus-circle"}))&&(yield e.navigate(["organizations",r.id,"billing","subscription"],{queryParams:{upgrade:!0}}))}return!r.isFreeOrg})}var Ae=i(77259),Ye=i(95661),Oe=i(73276),De=i(44500),Be=i(93695),Pe=i(88565),Je=i(90171),Qe=i(88083),We=i(11573),He=i(16452),_e=i(21885),Le=i(98869),qe=i(67253);class Ke{constructor(t){this.message=t.humanReadableMessage,this.appIcon=t.appIcon,this.appName=t.appName,this.userId=t.userId,this.userName=t.userName,this.userEmail=t.userEmail,this.date=t.date,this.ip=t.ip,this.type=We.Bx[t.type],this.installationId=t.installationId}}var Ze=function(t,e,i,n){return new(i||(i=Promise))(function(o,a){function r(t){try{c(n.next(t))}catch(e){a(e)}}function s(t){try{c(n.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,s)}c((n=n.apply(t,e||[])).next())})};class ti{getEventExport(t){return Ze(this,void 0,void 0,function*(){return Le.unparse(t.map(t=>new Ke(t)))})}getFileName(t=null,e="csv"){return qe.Ly.getFileName(null!=t?t:"",e)}}ti.ɵfac=function(t){return new(t||ti)},ti.ɵprov=w.jDH({token:ti,factory:ti.ɵfac,providedIn:"root"});var ei=i(66046),ii=i(69194),ni=i(33338),oi=i(97319),ai=i(37115),ri=i(53127),si=i(69855),ci=function(t,e,i,n){return new(i||(i=Promise))(function(o,a){function r(t){try{c(n.next(t))}catch(e){a(e)}}function s(t){try{c(n.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,s)}c((n=n.apply(t,e||[])).next())})};class li{get destroy$(){return this.destroySubject$.asObservable()}constructor(t,e,i,n,o,a,r,s,c,l){this.eventService=t,this.i18nService=e,this.exportService=i,this.platformUtilsService=n,this.logService=o,this.fileDownloadService=a,this.toastService=r,this.activeRoute=s,this.accountService=c,this.organizationService=l,this.loading=!0,this.loaded=!1,this.dirtyDates=!0,this.canUseSM=!1,this.eventsForm=new X.gE({start:new X.MJ(null),end:new X.MJ(null)}),this.destroySubject$=new ei.B,this.loadMoreEvents=()=>ci(this,void 0,void 0,function*(){yield this.loadEvents(!1)}),this.refreshEvents=()=>ci(this,void 0,void 0,function*(){yield this.loadEvents(!0)}),this.exportEvents=()=>ci(this,void 0,void 0,function*(){if(this.dirtyDates)return;this.loading=!0;const t=this.parseDates();if(null==t)return;let e;try{e=this.export(t[0],t[1]),yield e}catch(i){this.logService.error(`Handled exception: ${i}`)}e=null,this.loading=!1}),this.loadEvents=t=>ci(this,void 0,void 0,function*(){const e=this.parseDates();if(null==e)return;this.loading=!0;let i,n=[];i=this.loadAndParseEvents(e[0],e[1],t?null:this.continuationToken);const o=yield i;this.continuationToken=o.continuationToken,n=o.events,!t&&null!=this.events&&this.events.length>0?this.events=this.events.concat(n):this.events=n,this.dirtyDates=!1,this.loading=!1,i=null});const p=this.eventService.getDefaultDateFilters();this.start=p[0],this.end=p[1]}initBase(){this.organizations$=this.accountService.activeAccount$.pipe((0,ii.p)(t=>!!(null==t?void 0:t.id)),(0,De.n)(t=>this.organizationService.organizations$(t.id))),this.activeOrganization$=(0,ni.z)([this.activeRoute.paramMap,this.organizations$]).pipe((0,Ue.T)(([t,e])=>e.find(e=>e.id===t.get("organizationId")))),this.canUseSM$=this.activeOrganization$.pipe((0,Ue.T)(t=>{var e;return null!==(e=null==t?void 0:t.canAccessSecretsManager)&&void 0!==e&&e})),this.canUseSM$.pipe((0,p.Q)(this.destroy$)).subscribe(t=>{this.canUseSM=t})}ngOnDestroy(){this.destroySubject$.next(),this.destroySubject$.complete()}get start(){return this.eventsForm.value.start}set start(t){this.eventsForm.get("start").setValue(t)}get end(){return this.eventsForm.value.end}set end(t){this.eventsForm.get("end").setValue(t)}loadAndParseEvents(t,e,i){return ci(this,void 0,void 0,function*(){const n=yield this.requestEvents(t,e,i),o=yield Promise.all(n.data.map(t=>ci(this,void 0,void 0,function*(){const e=null==t.actingUserId?t.userId:t.actingUserId,i=new _e.ng;i.disableLink=!this.canUseSM;const n=yield this.eventService.getEventInfo(t,i),o=this.getUserName(t,e),a=null!=o?o.name:this.i18nService.t("unknown");return new oi.g({message:n.message,humanReadableMessage:n.humanReadableMessage,appIcon:n.appIcon,appName:n.appName,userId:e,userName:a,userEmail:null!=o?o.email:"",date:t.date,ip:t.ipAddress,type:t.type,installationId:t.installationId,systemUser:t.systemUser,serviceAccountId:t.serviceAccountId})})));return{continuationToken:n.continuationToken,events:o}})}parseDates(){let t=null;try{t=this.eventService.formatDateFilters(this.start,this.end)}catch(e){return this.toastService.showToast({variant:"error",title:this.i18nService.t("errorOccurred"),message:this.i18nService.t("invalidDateRange")}),null}return t}export(t,e){return ci(this,void 0,void 0,function*(){let i=this.continuationToken,n=[].concat(this.events);for(;null!=i;){const o=yield this.loadAndParseEvents(t,e,i);i=o.continuationToken,n=n.concat(o.events)}const o=yield this.exportService.getEventExport(n),a=this.exportService.getFileName(this.exportFileName,"csv");this.fileDownloadService.download({fileName:a,blobData:o,blobOptions:{type:"text/plain"}})})}}function pi(){const t=new Date,e=new Date(t.getTime()-864e5),i=e.getTime()+Math.random()*(t.getTime()-e.getTime());return new Date(i).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}li.ɵfac=function(t){return new(t||li)($.rXU(_e.US),$.rXU(k.W),$.rXU(ti),$.rXU(ai.y),$.rXU(dt.K),$.rXU(ri.y),$.rXU(si.f),$.rXU(j.nX),$.rXU(y.D),$.rXU(s.PV))},li.ɵdir=$.FsC({type:li});const di=new Array(6).fill({appName:"***",userName:"**********",userEmail:"**********",message:"**********"}),ui=[{date:pi(),appName:"Extension - Firefox",userName:"Alice",userEmail:"alice@email.com",message:"Logged in"},{date:pi(),appName:"Mobile - iOS",userName:"Bob",message:'Viewed item <span class="tw-text-code">000000</span>'},{date:pi(),appName:"Desktop - Linux",userName:"Carlos",userEmail:"carlos@email.com",message:"Login attempt failed with incorrect password"},{date:pi(),appName:"Web vault - Chrome",userName:"Ivan",userEmail:"ivan@email.com",message:'Confirmed user <span class="tw-text-code">000000</span>'},{date:pi(),appName:"Mobile - Android",userName:"Franz",userEmail:"franz@email.com",message:'Sent item <span class="tw-text-code">000000</span> to trash'}].sort((t,e)=>new Date(t.date).getTime()-new Date(e.date).getTime()).concat(di);var hi=i(12012),gi=i(11224),bi=i(13417),mi=i(1601),fi=i(3892),vi=i(26657),Ii=i(86226),Ri=i(97553),$i=i(43759),wi=i(22466),Fi=i(36572),Mi=function(t,e,i,n){return new(i||(i=Promise))(function(o,a){function r(t){try{c(n.next(t))}catch(e){a(e)}}function s(t){try{c(n.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,s)}c((n=n.apply(t,e||[])).next())})};function Si(t,e){1&t&&($.j41(0,"span",11),$.EFF(1),$.nI1(2,"i18n"),$.k0s()),2&t&&($.R7$(),$.SpI(" ",$.bMT(2,1,"upgrade")," "))}function yi(t,e){1&t&&($.j41(0,"bit-callout",12),$.nI1(1,"i18n"),$.EFF(2),$.nI1(3,"i18n"),$.k0s()),2&t&&($.Y8G("title",$.bMT(1,2,"upgradeEventLogTitleMessage")),$.R7$(2),$.SpI(" ",$.bMT(3,4,"upgradeEventLogMessage"),"\n"))}function ji(t,e){1&t&&($.qex(0),$.nrm(1,"i",13),$.nI1(2,"i18n"),$.j41(3,"span",14),$.EFF(4),$.nI1(5,"i18n"),$.k0s(),$.bVm()),2&t&&($.R7$(),$.Y8G("title",$.mNQ($.bMT(2,3,"loading"))),$.R7$(3),$.JRh($.bMT(5,5,"loading")))}function ki(t,e){1&t&&($.j41(0,"p"),$.EFF(1),$.nI1(2,"i18n"),$.k0s()),2&t&&($.R7$(),$.JRh($.bMT(2,1,"noEventsInList")))}function Xi(t,e){if(1&t&&($.j41(0,"tr",20)(1,"td",21),$.EFF(2),$.nI1(3,"date"),$.k0s(),$.j41(4,"td",17)(5,"span",22),$.EFF(6),$.k0s()(),$.j41(7,"td",17)(8,"span",22),$.EFF(9),$.k0s()(),$.nrm(10,"td",23),$.k0s()),2&t){const t=e.$implicit,i=e.index;$.XpG(4);const n=$.r8f(0);$.R7$(2),$.SpI(" ",i>4&&n?"******":$.i5U(3,9,t.date,"medium")," "),$.R7$(3),$.Y8G("title",$.ai1("",t.appName,", ",t.ip)),$.R7$(),$.JRh(t.appName),$.R7$(2),$.Y8G("title",$.mNQ(t.userEmail)),$.R7$(),$.JRh(t.userName),$.R7$(),$.Y8G("innerHTML",t.message,$.npT)}}function Gi(t,e){if(1&t&&$.DNE(0,Xi,11,12,"tr",19),2&t){$.XpG(2);const t=$.r8f(1);$.Y8G("ngForOf",t)}}function Ti(t,e){1&t&&($.j41(0,"bit-table"),$.qex(1,16),$.j41(2,"tr")(3,"th",17),$.EFF(4),$.nI1(5,"i18n"),$.k0s(),$.j41(6,"th",17),$.EFF(7),$.nI1(8,"i18n"),$.k0s(),$.j41(9,"th",17),$.EFF(10),$.nI1(11,"i18n"),$.k0s(),$.j41(12,"th",17),$.EFF(13),$.nI1(14,"i18n"),$.k0s()(),$.bVm(),$.DNE(15,Gi,1,1,"ng-template",18),$.k0s()),2&t&&($.R7$(4),$.JRh($.bMT(5,4,"timestamp")),$.R7$(3),$.JRh($.bMT(8,6,"client")),$.R7$(3),$.JRh($.bMT(11,8,"member")),$.R7$(3),$.JRh($.bMT(14,10,"event")))}function xi(t,e){if(1&t&&($.j41(0,"button",24),$.EFF(1),$.nI1(2,"i18n"),$.k0s()),2&t){const t=$.XpG(2);$.Y8G("bitAction",t.loadMoreEvents),$.R7$(),$.SpI(" ",$.bMT(2,2,"loadMore")," ")}}function Ei(t,e){if(1&t&&($.qex(0),$.SS7(1),$.DNE(2,ki,3,3,"p",10)(3,Ti,16,12,"bit-table",10)(4,xi,3,4,"button",15),$.bVm()),2&t){const t=$.XpG();$.R7$();const e=$.bH3(null!=t.organization&&t.organization.useEvents?t.events:t.placeholderEvents);$.R7$(),$.Y8G("ngIf",!e||!e.length),$.R7$(),$.Y8G("ngIf",e&&e.length),$.R7$(),$.Y8G("ngIf",t.continuationToken)}}function zi(t,e){if(1&t){const t=$.RV6();$.qex(0),$.j41(1,"div",25)(2,"div",26),$.nrm(3,"i",27),$.j41(4,"p",28),$.EFF(5),$.nI1(6,"i18n"),$.k0s(),$.j41(7,"p"),$.EFF(8),$.nI1(9,"i18n"),$.k0s(),$.j41(10,"button",29),$.bIt("click",function(){w.eBV(t);const e=$.XpG();return w.Njj(e.changePlan())}),$.EFF(11),$.nI1(12,"i18n"),$.k0s()()(),$.bVm()}2&t&&($.R7$(5),$.SpI(" ",$.bMT(6,3,"upgradeEventLogTitleMessage")," "),$.R7$(3),$.SpI(" ",$.bMT(9,5,"upgradeForFullEventsMessage")," "),$.R7$(3),$.SpI(" ",$.bMT(12,7,"changeBillingPlan")," "))}const Ci={[We.p2.SCIM]:null,[We.p2.DomainVerification]:"domainVerification",[We.p2.PublicApi]:"publicApi"};class Ui extends li{constructor(t,e,i,n,o,a,r,s,c,l,p,d,u,h,g,b,m,f){super(i,n,o,a,r,u,h,f,g,c),this.apiService=t,this.route=e,this.userNamePipe=s,this.organizationService=c,this.organizationUserApiService=l,this.organizationApiService=p,this.providerService=d,this.accountService=g,this.dialogService=b,this.configService=m,this.activeRoute=f,this.exportFileName="org-events",this.placeholderEvents=ui,this.orgUsersUserIdMap=new Map,this.ProductTierType=Qe.K_}ngOnInit(){return Mi(this,void 0,void 0,function*(){this.initBase();const t=yield(0,l._)((0,d.F6)(this.accountService.activeAccount$));this.route.params.pipe((0,Oe.H)(e=>Mi(this,void 0,void 0,function*(){this.organizationId=e.organizationId,this.organization=yield(0,l._)(this.organizationService.organizations$(t).pipe((0,s.Sw)(this.organizationId))),this.organization.useEvents||(this.eventsForm.get("start").disable(),this.eventsForm.get("end").disable(),this.organizationSubscription=yield this.organizationApiService.getSubscription(this.organizationId)),yield this.load()})),(0,p.Q)(this.destroy$)).subscribe()})}load(){return Mi(this,void 0,void 0,function*(){if((yield this.organizationUserApiService.getAllMiniUserDetails(this.organizationId)).data.forEach(t=>{const e=this.userNamePipe.transform(t);this.orgUsersUserIdMap.set(t.userId,{name:e,email:t.email})}),null!=this.organization.providerId)try{yield(0,l._)(this.accountService.activeAccount$.pipe(d.F6,(0,De.n)(t=>this.providerService.get$(this.organization.providerId,t)),(0,Ue.T)(t=>null!=t&&t.canManageUsers),(0,De.n)(t=>t?this.apiService.getProviderUsers(this.organization.providerId):(0,Be.of)(null)),(0,c.M)(t=>{t&&t.data.forEach(t=>{const e=this.userNamePipe.transform(t);this.orgUsersUserIdMap.set(t.userId,{name:`${e} (${this.organization.providerName})`,email:t.email})})})))}catch(t){this.logService.warning(t)}yield this.refreshEvents(),this.loaded=!0})}requestEvents(t,e,i){return this.apiService.getEventsOrganization(this.organizationId,t,e,i)}getUserName(t,e){if(null!=t.installationId)return{name:`Installation: ${t.installationId}`};if(null!=e){if(this.orgUsersUserIdMap.has(e))return this.orgUsersUserIdMap.get(e);if(null!=t.providerId&&t.providerId===this.organization.providerId)return{name:this.organization.providerName}}if(null!=t.systemUser){const e=Ci[t.systemUser];return e?{name:this.i18nService.t(e)}:{name:We.p2[t.systemUser]}}return t.serviceAccountId?{name:this.i18nService.t("machineAccount")+" "+this.getShortId(t.serviceAccountId)}:null}getShortId(t){return null==t?void 0:t.substring(0,8)}changePlan(){return Mi(this,void 0,void 0,function*(){const t=(0,He.IO)(this.dialogService,{data:{organizationId:this.organizationId,subscription:this.organizationSubscription,productTierType:this.organization.productTierType}});(yield(0,Pe.s)(t.closed))!==He.d1.Closed&&(yield this.load())})}}Ui.ɵfac=function(t){return new(t||Ui)($.rXU(hi.G),$.rXU(j.nX),$.rXU(_e.US),$.rXU(k.W),$.rXU(ti),$.rXU(ai.y),$.rXU(dt.K),$.rXU(Je.b),$.rXU(s.PV),$.rXU(qt.uB),$.rXU(gi.X),$.rXU(bi.$),$.rXU(ri.y),$.rXU(si.f),$.rXU(y.D),$.rXU(S.o3),$.rXU(mi.w),$.rXU(j.nX))},Ui.ɵcmp=$.VBU({type:Ui,selectors:[["ng-component"]],features:[$.Vt3],decls:33,vars:31,consts:[["bitBadge","","variant","primary","slot","title-suffix","class","tw-ml-2 tw-mt-1.5 tw-inline-flex tw-items-center",4,"ngIf"],[1,"tw-mb-4",3,"formGroup"],[1,"tw-mt-4","tw-flex","tw-items-center"],["bitInput","","type","datetime-local","formControlName","start",3,"change","placeholder"],[1,"tw-mx-2"],["bitInput","","type","datetime-local","formControlName","end",3,"change","placeholder"],["type","button","bitButton","","bitFormButton","","buttonType","primary",1,"tw-mx-3","tw-mt-1",3,"bitAction","disabled"],["type","button","bitButton","","bitFormButton","",1,"tw-mt-1",3,"bitAction","disabled"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-sign-in"],["type","info",3,"title",4,"ngIf"],[4,"ngIf"],["bitBadge","","variant","primary","slot","title-suffix",1,"tw-ml-2","tw-mt-1.5","tw-inline-flex","tw-items-center"],["type","info",3,"title"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","tw-text-muted",3,"title"],[1,"tw-sr-only"],["type","button","bitButton","","buttonType","primary",3,"bitAction",4,"ngIf"],["header",""],["bitCell",""],["body",""],["bitRow","","alignContent","top",4,"ngFor","ngForOf"],["bitRow","","alignContent","top"],["bitCell","",1,"tw-whitespace-nowrap"],[3,"title"],["bitCell","",3,"innerHTML"],["type","button","bitButton","","buttonType","primary",3,"bitAction"],[1,"tw-relative","tw--top-72","tw-bg-background","tw-bg-opacity-90","tw-pb-5","tw-flex","tw-items-center","tw-justify-center","tw-h-[19rem]"],[1,"tw-bg-background","tw-max-w-xl","tw-flex-col","tw-justify-center","tw-text-center","tw-p-5","tw-px-10","tw-rounded","tw-border-0","tw-border-b","tw-border-secondary-300","tw-border-solid","tw-mt-5"],[1,"bwi","bwi-2x","bwi-business","tw-text-primary-600"],[1,"tw-font-medium","tw-mt-2"],["type","button","bitButton","","buttonType","primary",1,"tw-mt-1",3,"click"]],template:function(t,e){if(1&t){const t=$.RV6();$.SS7(0),$.j41(1,"app-header"),$.DNE(2,Si,3,3,"span",0),$.k0s(),$.j41(3,"div",1)(4,"div",2)(5,"bit-form-field")(6,"bit-label"),$.EFF(7),$.nI1(8,"i18n"),$.k0s(),$.j41(9,"input",3),$.nI1(10,"i18n"),$.bIt("change",function(){return w.eBV(t),w.Njj(e.dirtyDates=!0)}),$.k0s()(),$.j41(11,"span",4),$.EFF(12,"-"),$.k0s(),$.j41(13,"bit-form-field")(14,"bit-label"),$.EFF(15),$.nI1(16,"i18n"),$.k0s(),$.j41(17,"input",5),$.nI1(18,"i18n"),$.bIt("change",function(){return w.eBV(t),w.Njj(e.dirtyDates=!0)}),$.k0s()(),$.j41(19,"form")(20,"button",6),$.EFF(21),$.nI1(22,"i18n"),$.k0s()(),$.j41(23,"form")(24,"button",7)(25,"span"),$.EFF(26),$.nI1(27,"i18n"),$.k0s(),$.nrm(28,"i",8),$.k0s()()()(),$.DNE(29,yi,4,6,"bit-callout",9)(30,ji,6,7,"ng-container",10)(31,Ei,5,4,"ng-container",10)(32,zi,13,9,"ng-container",10)}if(2&t){const t=$.bH3(!(null!=e.organization&&e.organization.useEvents));$.R7$(2),$.Y8G("ngIf",t),$.R7$(),$.Y8G("formGroup",e.eventsForm),$.R7$(4),$.JRh($.bMT(8,19,"from")),$.R7$(2),$.Y8G("placeholder",$.mNQ($.bMT(10,21,"startDate"))),$.R7$(6),$.JRh($.bMT(16,23,"to")),$.R7$(2),$.Y8G("placeholder",$.mNQ($.bMT(18,25,"endDate"))),$.R7$(3),$.Y8G("bitAction",e.refreshEvents)("disabled",t),$.R7$(),$.SpI(" ",$.bMT(22,27,"update")," "),$.R7$(3),$.Y8G("bitAction",e.exportEvents)("disabled",e.dirtyDates||t),$.R7$(2),$.JRh($.bMT(27,29,"export")),$.R7$(3),$.Y8G("ngIf",e.loaded&&t),$.R7$(),$.Y8G("ngIf",!e.loaded),$.R7$(),$.Y8G("ngIf",e.loaded),$.R7$(),$.Y8G("ngIf",e.loaded&&t)}},dependencies:[m.G,J.Sq,J.bT,X.qT,X.me,X.BC,X.cb,X.cV,X.j4,X.JD,fi.p,vi.$,E.n,z.Q,C.G,Ii.j,Ri.J,$i.h,A.Q,wi.Y,Fi._,Fi.O,o.G,B.f,J.vh,Q.$],encapsulation:2});var Ni=i(12610),Vi=i(58806),Ai=i(25219),Yi=function(t,e,i,n){return new(i||(i=Promise))(function(o,a){function r(t){try{c(n.next(t))}catch(e){a(e)}}function s(t){try{c(n.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,s)}c((n=n.apply(t,e||[])).next())})};function Oi(t,e){if(1&t&&($.qex(0),$.nrm(1,"app-header"),$.j41(2,"p",3),$.EFF(3),$.nI1(4,"i18n"),$.k0s(),$.nrm(5,"app-report-list",4),$.nI1(6,"async"),$.bVm()),2&t){const t=$.XpG();$.R7$(3),$.JRh($.bMT(4,2,"orgsReportsDesc")),$.R7$(2),$.Y8G("reports",$.bMT(6,4,t.reports$))}}function Di(t,e){1&t&&($.j41(0,"a",5),$.nrm(1,"i",6),$.EFF(2),$.nI1(3,"i18n"),$.k0s()),2&t&&($.R7$(2),$.SpI(" ",$.bMT(3,1,"backToReports")," "))}class Bi{constructor(t,e,i,n){this.route=t,this.organizationService=e,this.accountService=i,this.router=n}ngOnInit(){return Yi(this,void 0,void 0,function*(){this.homepage$=this.router.events.pipe((0,ii.p)(t=>t instanceof j.wF),(0,Ue.T)(t=>this.isReportsHomepageRouteUrl(t.urlAfterRedirects)),(0,Ni.Z)(this.isReportsHomepageRouteUrl(this.router.url)));const t=yield(0,l._)((0,d.F6)(this.accountService.activeAccount$));this.reports$=this.route.params.pipe((0,Oe.H)(e=>this.organizationService.organizations$(t).pipe((0,s.Sw)(e.organizationId))),(0,Ue.T)(t=>this.buildReports(t.productTierType)))})}buildReports(t){const e=t==Qe.K_.Free?n.C0.RequiresUpgrade:n.C0.Enabled;return[Object.assign(Object.assign({},n.uE[n.nI.ExposedPasswords]),{variant:e}),Object.assign(Object.assign({},n.uE[n.nI.ReusedPasswords]),{variant:e}),Object.assign(Object.assign({},n.uE[n.nI.WeakPasswords]),{variant:e}),Object.assign(Object.assign({},n.uE[n.nI.UnsecuredWebsites]),{variant:e}),Object.assign(Object.assign({},n.uE[n.nI.Inactive2fa]),{variant:e}),Object.assign(Object.assign({},n.uE[n.nI.MemberAccessReport]),{variant:t==Qe.K_.Enterprise?n.C0.Enabled:n.C0.RequiresEnterprise})]}isReportsHomepageRouteUrl(t){return t.endsWith("/reports")}}Bi.ɵfac=function(t){return new(t||Bi)($.rXU(j.nX),$.rXU(s.PV),$.rXU(y.D),$.rXU(j.Ix))},Bi.ɵcmp=$.VBU({type:Bi,selectors:[["app-org-reports-home"]],standalone:!1,decls:6,vars:6,consts:[[4,"ngIf"],[1,"tw-mt-4"],["bitButton","","routerLink","./",4,"ngIf"],["bitTypography","body1"],[3,"reports"],["bitButton","","routerLink","./"],["aria-hidden","true",1,"bwi","bwi-angle-left"]],template:function(t,e){1&t&&($.DNE(0,Oi,7,6,"ng-container",0),$.nI1(1,"async"),$.nrm(2,"router-outlet"),$.j41(3,"div",1),$.DNE(4,Di,4,3,"a",2),$.nI1(5,"async"),$.k0s()),2&t&&($.Y8G("ngIf",$.bMT(1,2,e.homepage$)),$.R7$(4),$.Y8G("ngIf",!$.bMT(5,4,e.homepage$)))},dependencies:[J.bT,j.n3,r.Wk,z.Q,Vi.r,Ai.i,B.f,J.Jj,Q.$],encapsulation:2});const Pi=[{path:"",canActivate:[(0,Ae.V)(s.Ue)],children:[{path:"",pathMatch:"full",canActivate:[(0,Ye.r)(function(t){if(t.canAccessEventLogs)return"events";if(t.canAccessReports)return"reports";return})],children:[]},{path:"reports",component:Bi,canActivate:[(0,Ae.V)()],data:{titleId:"reports"},children:[{path:"exposed-passwords-report",component:pt,data:{titleId:"exposedPasswordsReport"},canActivate:[Ve()]},{path:"inactive-two-factor-report",component:xt,data:{titleId:"inactive2faReport"},canActivate:[Ve()]},{path:"reused-passwords-report",component:Lt,data:{titleId:"reusedPasswordsReport"},canActivate:[Ve()]},{path:"unsecured-websites-report",component:be,data:{titleId:"unsecuredWebsitesReport"},canActivate:[Ve()]},{path:"weak-passwords-report",component:Ce,data:{titleId:"weakPasswordsReport"},canActivate:[Ve()]}]},{path:"events",component:Ui,canActivate:[(0,Ae.V)(t=>t.canAccessEventLogs||t.isOwner)],data:{titleId:"eventLogs"}}]}];class Ji{}Ji.ɵfac=function(t){return new(t||Ji)},Ji.ɵmod=$.$C({type:Ji}),Ji.ɵinj=w.G2t({imports:[r.iI.forChild(Pi),r.iI]});class Qi{}Qi.ɵfac=function(t){return new(t||Qi)},Qi.ɵmod=$.$C({type:Qi}),Qi.ɵinj=w.G2t({imports:[a.G,n.DF,Ji,o.G]})}}]);
//# sourceMappingURL=449.14d583ff224a27aed049.js.map